webpackJsonp([0],{107:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(2),l=n(6),u=n(8),c=n(2),d=n(2),p=n(2),h=n(16),f=n(20),m=function(){function e(e,t,n,i,o,s,a,l){var u=this;this.userData=e,this.translate=t,this.toastCtrl=n,this.navCtrl=i,this.navParams=o,this.api=s,this.settings=a,this.viewCtrl=l,this.description="",this.services=[],this.musicServer=3,this.streamingPlatforms=[],this.streamingPlatforms_sel="",this.from="",this.newEventActivities=[];var c="deezer";0==p.getEnv()&&(c="deezer_local");[{label:"Spotify",value:"0",description:"MUSICSERVER.SPOTIFYDESCRIPTION",token:"spotify",minTarif:0,minVersion:1},{label:"Deezer",value:"1",description:"MUSICSERVER.DEEZERDESCRIPTION",token:c,minTarif:0,minVersion:1},{label:"Vos MP3",value:"2",description:"MUSICSERVER.MULTIPLEDESCRIPTION",token:"drive",minTarif:4,minVersion:2},{label:"Youtube",value:"3",description:"MUSICSERVER.YOUTUBEDESCRIPTION",minTarif:3,minVersion:1},{label:"Manuel",value:"4",description:"MUSICSERVER.PERSODESCRIPTION",minTarif:3,minVersion:1}].forEach(function(e){u.streamingPlatforms.push(e)}),this.from=this.navParams.get("from"),this.newEventActivities=this.navParams.get("newEventActivities"),this.streamingPlatforms_sel=this.streamingPlatforms[this.userData.user.musicServer],this.services=r.getAllServices(this.settings.services,"spotify,deezer",this.settings.version),this.musicServer=this.userData.user.musicServer}return e.prototype.selectPlatform=function(e){var t=this,n=this,i=this.streamingPlatforms[this.musicServer];null!=i&&(this.description=i.description,n.userData.user.musicServer=Number(e.value),i.hasOwnProperty("token")&&setTimeout(function(){r.openGeneral(i.token,n.userData.user).then(function(t){t&&n.userData.get().subscribe(function(t){n.userData.user.musicServer=Number(e.value),n.userData.user.accessTokens=t.accessTokens,n.userData.clearPlaylist(),setTimeout(function(){n.api.getcloudplaylist(n.userData.user.id,!1).subscribe(function(e){null!=e&&(n.userData.playlist=e.items,n.userData.playlistFrom=n.userData.user.id)})},5e3)})},function(){p.toast(t.toastCtrl,"ERROR.GENERAL",t.translate)})},1e3))},e.prototype.valide=function(){var e=this,t="ERROR.NOACCESS";void 0!=this.userData.user.accessTokens&&(this.userData.user.musicServer==c.MUSICSERVER_SPOTIFY&&void 0!=this.userData.user.accessTokens.spotify&&(t=""),this.userData.user.musicServer!=d.MUSICSERVER_DEEZER||void 0==this.userData.user.accessTokens.deezer&&void 0==this.userData.user.accessTokens.deezer_local||(t="")),this.userData.user.musicServer!=c.MUSICSERVER_YOUTUBE&&this.userData.user.musicServer!=d.MUSICSERVER_LOCAL||(t=""),this.userData.user.musicServer==d.MUSICSERVER_PERSO&&(t=""),t.length>0?p.toast(this.toastCtrl,t,this.translate):this.userData.senduser("musicServer").subscribe(function(t){null!=t&&(0==t.message.length?e.viewCtrl.dismiss({user:t,musicServer:e.userData.user.musicServer}):p.toast(e.toastCtrl,t.message,e.translate))})},e=i([s.Component({selector:"page-musicserver",template:'<ion-header>\n  <shifutitle [back]="true" help="#">\n    <shifubutton id="btnSaveMusicServer" icon="checkmark" (click)="valide()"></shifubutton>\n    <shifubutton *ngIf="from!=\'home\' && (newEventActivities!=null && newEventActivities.length>1)"\n                 id="btnNoMusic"\n                 size="0"\n                 label="LIB.NOMUSIC"\n                 icon="close" (click)="viewCtrl.dismiss({user:null})"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content padding>\n  <tuto label="PERSO.TUTO_PLATFORM"></tuto>\n  <tuto [if]="musicServer==3" label="MUSICSERVER.TUTO_WARNINGYOUTUBE"></tuto>\n\n  <div style="width:100%;text-align: center;">\n    {{\'PERSO.MUSICSERVER\' | translate}}<br><br>\n    <ion-segment [(ngModel)]="musicServer" color="primary" (ionChange)="selectPlatform($event)">\n      <ion-segment-button name="optMusicServer" *ngFor="let item of streamingPlatforms" value="{{item.value}}">\n        {{item.label}}\n      </ion-segment-button>\n    </ion-segment>\n\n    <br>\n    <span style="font-size: medium" *ngIf="messages!=null && message.length>0" >{{message | translate}}</span><br>\n\n    {{description | translate}}<br><br>\n\n    <img *ngIf="musicServer==0" src="./assets/img/archi_spotify.svg"  style="width:80%;left:10%;">\n    <img *ngIf="musicServer==1" src="./assets/img/archi_multiple.svg" style="width:80%;left:10%;">\n    <img *ngIf="musicServer==2" src="./assets/img/archi_multiple.svg" style="width:80%;left:10%;">\n    <img *ngIf="musicServer==3" src="./assets/img/archi_youtube.svg"  style="width:80%;left:10%;">\n    \x3c!--<img *ngIf="musicServer==4" src="./assets/img/archi_perso.svg"  style="width:80%;left:10%;">--\x3e\n\n    <br>\n  </div>\n</ion-content>\n'}),o("design:paramtypes",[u.UserData,l.TranslateService,a.ToastController,a.NavController,a.NavParams,h.ApiProvider,f.SettingsProvider,a.ViewController])],e)}();t.MusicserverPage=m},108:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(8),u=n(16),c=n(2),d=n(55),p=n(82),h=n(6),f=n(15),m=function(){function e(e,t,n,i,o,s,a,r,l,u,c){this.userData=e,this.api=t,this.alertCtrl=n,this.loadingCtrl=i,this.eventData=o,this.viewCtrl=s,this.navCtrl=a,this.toastCtrl=r,this.translate=l,this.navParams=u,this.modalCtrl=c,this.orderby={},this.event={},this.users=[],this.winner={},this.songs=[],this.photos=[],this.user={},this.messages=[],this.surveys=[],this.questions=[],this.bets=[],this.presentations=[],this.loteries=[],this.allmessages="",this.hInterval=null,this.save=null;this.orderby={critere:"creditEvent"},this.event=this.navParams.get("event"),null!=this.event&&(this.event.duration=Math.trunc((this.event.dtEnd-this.event.dtStart)/6e4))}return e.prototype.ionViewWillEnter=function(){var e=this,t=this;null!=t.eventData.event&&(t.save=t.eventData.event.id),t.eventData.event.id=t.event.id,this.api.getpresents(this.event.id,!0).subscribe(function(n){t.users=n.items;var i=!1;n.items.forEach(function(t){t.id==e.userData.user.id&&(i=!0)}),0==i&&e.viewCtrl.dismiss({message:"ERROR.NOTAUTHORIZED"}),t.event.activities.indexOf("bets")>-1&&t.user.hasOwnProperty("length")&&t.users.length>0&&(t.winner=t.users[0],t.users.splice(0,1)),t.api.getplayedsong(t.event.id).subscribe(function(e){t.songs=e.items}),t.api.slideshow(t.event.id,null).subscribe(function(e){t.photos=e.items})}),t.api.getloteries(t.event.id).subscribe(function(e){t.loteries=e.items}),t.api.getbets(t.event.id).subscribe(function(e){t.surveys=[],t.bets=[],void 0!=e.items&&e.items.forEach(function(e){4==e.type&&t.bets.push(e),5==e.type&&t.surveys.push(e),9==e.type&&t.questions.push(e)})}),t.allmessages="",t.api.getlastmessages(t.event.id,500).subscribe(function(e){t.messages=e.items,e.items.forEach(function(e){t.allmessages+=e+"\n"})}),t.eventData.getpresentations().subscribe(function(e){t.presentations=[],e.items.forEach(function(e){e.ended&&t.presentations.push(e)})}),null!=t.save&&(t.eventData.event.id=t.save)},e.prototype.openProfil=function(e){c.openModal(this.modalCtrl,d.PublicProfilPage,{userid:e.id})},e.prototype.createEvent=function(e){var t=this,n=this;this.userData.initevent(e).subscribe(function(i){i.option={title:i.title,address:i.address,date:i.date,teaser:i.description},i.dtStart=Number(i.dtStart),i.dtEnd=Number(i.dtEnd),c.openModal(t.modalCtrl,p.AddeventPage,{user:t.userData.user,lat:e.lat,lng:e.lng,zoom:5,modele:i},function(){n.viewCtrl.dismiss()})})},e.prototype.uploadto=function(e){var t=this,n=this;c.openGeneral(e,this.userData.user).then(function(){var i=c.loading(n,"Photo Transfert ...",t.photos.length);n.userData.uploadto(n.event.id,e).subscribe(function(e){i.dismiss(),c.toast(n.toastCtrl,e.message,n.translate)})})},e.prototype.createPlaylist=function(e){var t=this,n=c.loading(this,"Playlist transfert ...",60);this.api.createplaylist(this.event.id,this.userData.user.id,e).subscribe(function(e){c.toast(t.toastCtrl,0==e.errorCode?"Playlist transférée":"ERROR.GENERAL"),n.dismiss()})},e.prototype.downloadAll=function(){this.event.closed?c.openWindow(this.event.zipAlbum):c.toast(this.toastCtrl,"ERROR.EVENTMUSTBEFINISHED",this.translate)},e.prototype.scrollTo=function(e){var t=document.getElementById(e);null!=t&&this.content.scrollTo(0,t.offsetTop,2e3)},e.prototype.downloadTheMovie=function(){var e=this.event.theMovie;e.startsWith("http")||(e="http://"+e),c.openWindow(e,this.event.title+", the movie !")},e.prototype.download=function(e){c.openWindow(e.support,"download")},e.prototype.copyMessage=function(){c.toast(this.toastCtrl,"LIB.TEXTINCLIPBOARD",this.translate)},i([s.ViewChild(a.Content),o("design:type",a.Content)],e.prototype,"content",void 0),e=i([s.Component({selector:"page-closedevent",template:'\x3c!--\n  Generated template for the ClosedeventPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle (onclose)="viewCtrl.dismiss()" title="{{event.title}}">\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content no-padding>\n\n  <ion-item text-center no-border no-margin no-lines>\n    <ion-grid><ion-row>\n      <ion-col col-6 text-left>\n        <shifuflyer style="display:inline" text-center width="150px" [flyer]="event.flyer"><br>\n          <shifubutton [small]="true" label="CLOSEDEVENT.USEASMODEL" (click)="createEvent(event)"></shifubutton>\n        </shifuflyer>\n      </ion-col>\n      <ion-col text-right>\n\n        {{"LIB.START" | translate}}:{{event.dtStart | date}}<br>\n        {{"LIB.DURATION" | translate}}:{{event.duration}} minutes<br>\n\n        <span *ngIf="event.nBets>0">\n          {{bets.length}}&nbsp;{{"LIB.BET" | translate}}&nbsp;\n          <ion-icon  style="font-size:large" name="arrow-dropdown" (click)="scrollTo(\'cardSurvey\')"></ion-icon><br>\n        </span>\n\n        <span *ngIf="event.nMessages>0">\n          {{messages.length}}&nbsp;messages&nbsp;\n          <ion-icon  style="font-size:large" name="arrow-dropdown" (click)="scrollTo(\'cardMessage\')"></ion-icon>\n          <br>\n        </span>\n\n        <span *ngIf="event.nPhotos>0">\n          {{photos.length}}&nbsp;photos&nbsp;\n          <ion-icon  style="font-size:large" name="arrow-dropdown" (click)="scrollTo(\'cardPhoto\')"></ion-icon>\n          <br>\n        </span>\n\n        <span *ngIf="event.nSongs>0">\n          {{songs.length}}&nbsp;{{"CLOSEDEVENT.PUSHSONG" | translate}}s&nbsp;\n          <ion-icon  style="font-size:large" name="arrow-dropdown" (click)="scrollTo(\'cardSong\')"></ion-icon>\n          <br>\n        </span>\n\n        <span *ngIf="presentations.length>0">\n          {{presentations.length}}&nbsp;{{"LIB.PRESENTATION" | translate}}&nbsp;\n          <ion-icon  style="font-size:large" name="arrow-dropdown" (click)="scrollTo(\'cardPres\')"></ion-icon>\n          <br>\n        </span>\n\n        <br><br>\n        <shifubutton\n          *ngIf="event.theMovie.length>0 && event.nPhotos+event.nMessages+event.nBets>0"\n          label="LIB.THEMOVIE"\n          (click)="downloadTheMovie()">\n        </shifubutton>\n      </ion-col>\n    </ion-row>\n    </ion-grid>\n\n    <br>\n\n  </ion-item>\n\n  \x3c!--<div style="width:100%;text-align: center;" *ngIf="users.length>2 && event.activities.indexOf(\'bets\')>-1">--\x3e\n    \x3c!--<br><span style="font-size: xx-large">The winner with {{winner.creditEvent | number:0}}&nbsp;--\x3e\n        \x3c!--<img src="/img/money.png" class="money-small"></span>--\x3e\n    \x3c!--<br>--\x3e\n    \x3c!--<br>--\x3e\n    \x3c!--<img style="width: 100px;" src="{{winner.picture}}">--\x3e\n    \x3c!--<br>--\x3e\n    \x3c!--{{winner.firstname}}&nbsp;--\x3e\n  \x3c!--</div>--\x3e\n\n  <shifucard title="Participants" *ngIf="users.length>1">\n    <shifuprofil [light]="true" *ngFor="let user of users" [user]="user"></shifuprofil>\n  </shifucard>\n\n\n  \x3c!-- Affichage des messages sous forme de conversation --\x3e\n  <shifucard id="cardMessage" title="Messages"\n             *ngIf="messages.length>0" icon="copy"\n             ngxClipboard [cbContent]="all_messages"\n             (onclick)="copyMessage()">\n\n    <ion-item *ngFor="let item of messages" [hidden]="item.photo.length!=0 || item.text.length==0">\n      <ion-avatar item-start>\n        <shifuimageprofil [user]="item.from"></shifuimageprofil>\n      </ion-avatar>\n      <p>\n        {{item.text}}\n      </p>\n    </ion-item>\n    <shifubutton *ngIf="user.id==event.owner_id" label="LIB.DOWNLOAD" (click)="downloadMessage()"></shifubutton>\n  </shifucard>\n\n  <shifucard id="cardSong" title="LIB.PLAYLIST" *ngIf="songs.length>0">\n    <ion-list no-lines no-margin no-padding>\n      <ion-list-header *ngIf="event.musicServer==0 || event.musicServer==1">\n        {{\'CLOSEDEVENT.CREATEPLAYLIST\' | translate }}<br>\n        <shifubutton *ngIf="event.musicServer==1" label="Deezer" size="100" (click)="createPlaylist(\'deezer\')"></shifubutton>\n        <shifubutton *ngIf="event.musicServer==0" label="Spotify" size="100" (click)="createPlaylist(\'spotify\')"></shifubutton>\n        \x3c!--<shifubutton label="Winamp" size="100" (click)="createPlaylist(\'Winamp\')"></shifubutton>--\x3e\n      </ion-list-header>\n      <ion-item *ngFor="let song of songs">\n        <ion-thumbnail item-start>\n          <img class="photo-style" src="{{song.picture}}" style="width:80px;height:80px;">\n        </ion-thumbnail>\n        {{song.title}}\n        <span name="author" style="font-size: x-small"><br>by {{song.author}}</span>\n        <shifunote [object]="song" item-end></shifunote>\n      </ion-item>\n    </ion-list>\n  </shifucard>\n\n  <shifucard id="cardPhoto" title="Gallery&nbsp;{{photos.length}}&nbsp;photos"\n             *ngIf="photos.length>0" [showButton]="event.zipAlbum!=null" icon="download" (onclick)="downloadAll()">\n    <div style="width:100%;text-align: center">\n      \x3c!--<shifubutton [small]="true" icon="arrow-round-forward" size="80" label="GDrive" icon="ion-android-download" (click)="uploadto(\'drive\')"></shifubutton>--\x3e\n      \x3c!--<shifubutton [small]="true" icon="arrow-round-forward" size="80" label="Facebook" icon="ion-android-download" (click)="uploadto(\'fb_publish\')"></shifubutton>--\x3e\n    </div>\n\n    <div style="width:100%;">\n      <div *ngFor="let photo of photos" style="position:relative;margin:5px;display:inline-block;max-width: 25%;max-height: 200px;" >\n        <img style="position:absolute;z-index:100;left:10%;top:10%;width:8px;height: 10px;" src="./assets/img/personne.png" (click)="openProfil(photo.from)">\n        <a download href="{{photo.url}}" target="_blank"><img style="width:100%;height:100%;z-index: 0;" src="{{photo.photo}}" class="photo-style"></a>\n      </div>\n    </div>\n    <br>\n  </shifucard>\n\n  <shifucard id="cardSurvey" title="LIB.SURVEYS" *ngIf="surveys.length>0">\n    <ion-item *ngFor="let survey of surveys">\n      {{survey.title}}\n      <p style="margin-left:5px" *ngFor="let option of survey.options">\n        {{option.total}} -\n        <img *ngIf="option.lib.indexOf(\'http\')==0" [src]="option.lib" style="display:inline;margin:5px;width:50px;height:50px;" class="image-photo">\n        <span *ngIf="option.lib.indexOf(\'http\')!=0">{{option.lib}}</span>\n      </p>\n    </ion-item>\n  </shifucard>\n\n  <shifucard id="cardQuestion" title="LIB.QUESTION" *ngIf="questions.length>0">\n    <ion-item *ngFor="let question of questions">\n      {{question.title}}\n      <p style="margin-left:5px" *ngFor="let vote of question.votes">\n        {{vote.description}}:{{vote.text}}\n      </p>\n    </ion-item>\n  </shifucard>\n\n  <shifucard id="cardLoterie" title="LIB.LOTERIE" *ngIf="loteries.length>0">\n    <ion-item *ngFor="let lot of loteries">\n      <ion-thumbnail item-start>\n        <img [src]="lot.picture" style="width: 100px">\n      </ion-thumbnail>\n      <p>{{lot.title}}</p>\n      {{"LIB.WINNER" | translate}}:{{lot.winner_name}}\n    </ion-item>\n  </shifucard>\n\n\n  <shifucard id="cardPres" title="LIB.PRESENTATION" *ngIf="presentations.length>0">\n    <ion-item *ngFor="let p of presentations">\n      <ion-avatar item-start>\n        <shifuimageprofil [user]="p.from"></shifuimageprofil>\n      </ion-avatar>\n      <p>{{p.title}}<br>{{p.text}}</p>\n      <shifubutton item-end [small]="true" icon="download" (click)="download(p)"></shifubutton>\n    </ion-item>\n  </shifucard>\n\n\n</ion-content>\n'}),o("design:paramtypes",[l.UserData,u.ApiProvider,r.AlertController,r.LoadingController,f.EventDataProvider,a.ViewController,a.NavController,a.ToastController,h.TranslateService,a.NavParams,r.ModalController])],e)}();t.ClosedeventPage=m},109:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(15),l=n(2),u=n(35),c=n(8),d=function(){function e(e,t,n,i,o,s){this.userData=e,this.modalCtrl=t,this.viewCtrl=n,this.eventData=i,this.navCtrl=o,this.navParams=s,this.keys=[],this.method="",null==this.eventData.event.teams&&(this.eventData.event.teams={}),this.keys=Object.keys(this.eventData.event.teams),this.method=this.navParams.get("method")}return e.prototype.ionViewDidLoad=function(){},e.prototype.refresh=function(){},e.prototype.addTeam=function(){var e=0;null!=this.eventData.event.teams&&(e=this.keys.length);var t="team"+(new Date).getTime();this.eventData.event.teams[t]={name:["les scorpions","les tortues","les serpents","les lézards","les tyranos","les dinos"][e],label:"",logo:"https://shifumix.com/avatars/file_emojis"+(e+115)+".png",color:["red","green","black","yellow","grey","blue"][e]},this.keys=Object.keys(this.eventData.event.teams)},e.prototype.quit=function(e){e&&this.eventData.updateevent("teams").subscribe(function(){}),this.viewCtrl.dismiss()},e.prototype.deleteTeam=function(e){delete this.eventData.event.teams[e],this.keys=Object.keys(this.eventData.event.teams)},e.prototype.changeLogo=function(e){var t=this;l.openModal(this.modalCtrl,u.ImageCreatorPage,{maxsize:600,filter:"icon",click:"icon"},function(n){null!=n&&(t.eventData.event.teams[e].logo=n.value)})},e.prototype.auto_repartition=function(e){var t=this;this.eventData.updateevent("teams").subscribe(function(){t.eventData.buildteams(e).subscribe(function(){})})},e.prototype.selTeam=function(e){this.viewCtrl.dismiss({sel:e})},e=i([s.Component({selector:"page-teams",template:'\x3c!--\n  Generated template for the TeamsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <ion-navbar>\n    <shifutitle title="LIB.TEAMS">\n      <shifubutton [small]="true" icon="add-circle" (click)="addTeam()" *ngIf="method!=\'sel\'"></shifubutton>\n      <shifubutton [small]="true" icon="checkmark" (click)="quit(true)"></shifubutton>\n    </shifutitle>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding>\n  <shifucard [visible]="true" title="LIB.TEAMDISTRIBUTION" *ngIf="keys!=null && keys.length>1 && method!=\'sel\'">\n    <ion-item text-center no-lines>\n      <shifubutton [small]="true"\n                   size="0"\n                   label="Auto répartition"\n                   (click)="auto_repartition()">\n      </shifubutton>\n    </ion-item>\n\n  </shifucard>\n  <shifucard [visible]="true" title="Team" *ngFor="let k of keys" icon="trash" (onclick)="deleteTeam(k)">\n    <ion-item text-right no-lines *ngIf="method==\'sel\'">\n      <shifubutton label="LIB.SELECT" (click)="selTeam(k)"></shifubutton>\n    </ion-item>\n    <ion-grid>\n      <ion-row>\n        <ion-col col-auto text-center>\n          \x3c!--<input [(colorPicker)]="eventData.event.teams[k].color"--\x3e\n                 \x3c!--style="width:70px"--\x3e\n                 \x3c!--[style.background]="eventData.event.teams[k].color">--\x3e\n          \x3c!--<br>--\x3e\n          <img [src]="eventData.event.teams[k].logo" (click)="changeLogo(k)"\n               style="width:70px;">\n        </ion-col>\n        <ion-col>\n          <shifuinput position="fixed" label="title" [(ngModel)]="eventData.event.teams[k].name"></shifuinput>\n          <shifuinput label="label"\n                      placeholder="Invaincue depuis 1971 !,Alors c\'est qui les bosses ?,Venez nous chercher !,Les champions de l\'innovation !"\n                      *ngIf="userData.user.connexions!=null && userData.user.connexions.length>10"\n                      [(ngModel)]="eventData.event.teams[k].label"></shifuinput>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </shifucard>\n</ion-content>\n'}),o("design:paramtypes",[c.UserData,a.ModalController,a.ViewController,r.EventDataProvider,a.NavController,a.NavParams])],e)}();t.TeamsPage=d},110:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(2),u=n(8),c=n(15),d=n(6),p=n(35),h=function(){function e(e,t,n,i,o,s,a,r,l,u){this.modalCtrl=e,this.viewCtrl=t,this.translate=n,this.navCtrl=i,this.navParams=o,this.toastCtrl=s,this.eventData=a,this.userData=r,this.loadingCtrl=l,this.alertCtrl=u,this.bets=[],this.newbet={tags:[],picture:"",enabled:!0,text_option:"",nVotes:1,startDelay:0,title:"",pattern:!1,options:[],minAmount:1,cagnotte:0},this.options=[],this.formtitle="",this.user={},this.minStartDelay=0,this.patterns=[],this.alias="";this.now=(new Date).getTime(),this.eventData.event.needValidate&&(this.minStartDelay=5,this.newbet.startDelay=this.minStartDelay),this.newbet.tags=this.eventData.event.tags,void 0==this.newbet.tags&&(this.newbet.tags=[]),this.newbet.maxdelay=this.eventData.event.dtStart>(new Date).getTime()?Math.min((this.eventData.event.dtEnd-this.eventData.event.dtStart)/6e4,120):Math.min((this.eventData.event.dtEnd-(new Date).getTime())/6e4,120),this.newbet.type=this.navParams.get("type"),4==this.newbet.type&&(this.formtitle="LIB.BET"),5==this.newbet.type&&(this.formtitle="LIB.SURVEY"),9==this.newbet.type&&(this.formtitle="LIB.QUESTION"),this.newbet.delay=Math.min(10,(this.eventData.event.dtEnd-this.now)/6e4-2),this.getDtStart()}return e.prototype.ionViewDidLoad=function(){var e=this;this.userData.get().subscribe(function(t){return e.user=t}),this.refresh_pattern()},e.prototype.getDtEnd=function(){this.newbet.dtEnd=Number(this.newbet.dtStart)+1e3*(Number(this.newbet.delay)+1)*60},e.prototype.up=function(e){var t=this.options.indexOf(e);if(t>0){var n=this.options[t-1];this.options.splice(t-1,1),this.options.splice(t,0,n)}},e.prototype.delOption=function(e){0!=e.indexOf("http")&&(this.newbet.text_option=e),this.options.splice(this.options.indexOf(e),1)},e.prototype.getDtStart=function(){var e=Math.max((new Date).getTime(),Number(this.eventData.event.dtStart));this.newbet.dtStart=e+1e3*Number(this.newbet.startDelay)*60,this.getDtEnd()},e.prototype.sendnewbet=function(){var e=this,t=this;t.newbet.from=t.user,t.newbet.title=t.newbet.title[0].toUpperCase()+t.newbet.title.substr(1),t.newbet.enabled=!1;var n=l.loading(this);t.eventData.sendbet(t.newbet).subscribe(function(i){n.dismiss(),""==i.message?l.toast(t.toastCtrl,"ADDBET.PUBLISHING",e.translate):l.toast(t.toastCtrl,i.message,t.translate),t.viewCtrl.dismiss()})},e.prototype.addbet=function(){var e=this;this.getDtStart(),e.options.forEach(function(t){e.newbet.options.push({lib:t,total:0,quot:0})}),null!=e.newbet.addtags&&e.newbet.addtags.length>0&&(e.newbet.addtags=e.newbet.addtags.replace(new RegExp(",","g")," ").replace(new RegExp(";","g")," "),e.newbet.tags=e.newbet.addtags.split(" ")),e.newbet.pattern?l.showPopup({title:"ADDBET.PATTERNTITLE",value:"",confirmButton:"Ok",cancelButton:"LIB.CANCEL",type:"text"},e.alertCtrl,function(t){t.length>0&&(e.newbet.patternTitle=t,e.sendnewbet())}):e.sendnewbet()},e.prototype.optionImage=function(){var e=this;l.openModal(this.modalCtrl,p.ImageCreatorPage,{ratio:1,upload:!0},function(t){null!=t&&null!=t.value&&(e.newbet.text_option=t.value,e.addOption())})},e.prototype.selImage=function(){var e=this;l.openModal(this.modalCtrl,p.ImageCreatorPage,{ratio:1,upload:!0},function(t){null!=t&&(e.newbet.picture=t.value)})},e.prototype.addOption=function(){this.newbet.text_option.length>0&&(this.options.indexOf(this.newbet.text_option)>-1?l.toast(this.toastCtrl,"ADDBET.OPTIONALREADYEXIST",this.translate):(this.newbet.text_option.indexOf("#")>-1&&(this.newbet.pattern=!0,l.$$("Le pari est marqué comme pattern")),0==this.newbet.text_option.indexOf("http")?-1==this.newbet.tags.indexOf("image")&&this.newbet.tags.push("image"):-1==this.newbet.tags.indexOf("text")&&this.newbet.tags.push("text"),this.options.push(this.newbet.text_option),this.newbet.text_option=""))},e.prototype.addAlias=function(e){var t="";e+=" ";for(var n=0;n<e.length;n++)if("#"==e[n]){var i=e.indexOf(" ",n+1),o=e.substr(n+1,i-n-1);if(-1==t.indexOf(o+"=")){t+="#"+o+"="+prompt("BETS.ALIASVALUE "+o)+";"}}return[]},e.prototype.replaceAlias=function(e){return this.addAlias(e),this.alias.split(";").forEach(function(t){t.length>0&&(e=e.replace(t.split("=")[0],t.split("=")[1]))}),e},e.prototype.selPattern=function(e){},e.prototype.refresh_pattern=function(){},e.prototype.addbetEnAttente=function(){this.newbet.startDelay=1e6,this.getDtStart(),this.addbet()},i([s.ViewChild("inputOption"),o("design:type",s.ElementRef)],e.prototype,"inputOption",void 0),e=i([s.Component({selector:"page-addbets",template:'\x3c!--\n  Generated template for the AddbetsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="{{formtitle}}" help="#">\n    <shifubutton [small]="true" icon="clock" tips="LIB.PENDING" id="btnEnAttente" *ngIf="(options.length>1 || newbet.type==9) && newbet.title.length>0 && newbet.enabled" (click)="addbetEnAttente()"></shifubutton>\n    <shifubutton [small]="true" icon="checkmark" tips="LIB.SAVE" id="btnSave" *ngIf="(options.length>1 || newbet.type==9) && newbet.title.length>0 && newbet.enabled" (click)="addbet()"></shifubutton>\n    <shifubutton [small]="true" id="btnCancel" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content>\n\n  <tuto label="ADDBETS.TUTO" show="txtTitle"></tuto>\n  \x3c!--<ion-input autofocus--\x3e\n             \x3c!--style="font-size: large;"--\x3e\n             \x3c!--max="60" min="3"--\x3e\n             \x3c!--text-center placeholder="{{\'ADDBETS.TITLE\' | translate}}" id="txtTitle"--\x3e\n             \x3c!--[(ngModel)]="newbet.title"></ion-input>--\x3e\n  \x3c!----\x3e\n\n  <shifuinput autofocus fontsize="large"\n              position="stacked"\n              size="60"\n              label="ADDBETS.TITLE" id="txtTitle"\n              placeholder="Qui va gagner ce soir ?,qui est la plus belle entre :,le PSG va t\'il se qualifier ?"\n              [(ngModel)]="newbet.title">\n  </shifuinput>\n  <br>\n\n  <ion-row *ngIf="options.length<eventData.event.limitOptions && newbet.type!=9 && newbet.title.length>3">\n    <ion-col>\n      <shifuinput\n        size="80" #inputOption\n        label="LIB.OPTION"\n        *ngIf="newbet.tags.indexOf(\'image\')==-1"\n        name="add_opt"\n        [(ngModel)]="newbet.text_option" (onenter)="addOption()"></shifuinput>\n    </ion-col>\n    <ion-col col-2 text-right margin-right="5px">\n      <shifubutton id="btnOptionImage" icon="image" *ngIf="newbet.text_option.length==0 && newbet.tags.indexOf(\'text\')==-1" (click)="optionImage()"></shifubutton>\n      <shifubutton id="btnAddOption" icon="add-circle" *ngIf="newbet.tags.indexOf(\'image\')==-1 && newbet.text_option.length>0" (click)="addOption()" (onenter)="addOption()"></shifubutton>\n    </ion-col>\n  </ion-row>\n\n  <ion-list no-padding no-margin no-lines no-border *ngIf="options.length>0">\n    <ion-item *ngFor="let opt of options">\n      <span item-start style="font-size:medium" *ngIf="opt.indexOf(\'http\')!=0">{{opt}}</span>\n      <ion-thumbnail item-start *ngIf="opt.indexOf(\'http\')==0"><img class="image-photo" src="{{opt}}"></ion-thumbnail>\n      <ion-buttons item-end>\n        <shifubutton [small]="true" item-end name="btnDelete" icon="close" (click)="delOption(opt)"></shifubutton>\n        <shifubutton [small]="true" item-end name="btnUp" icon="arrow-up" (click)="up(opt)"></shifubutton>\n      </ion-buttons>\n\n    </ion-item>\n  </ion-list>\n\n\n  <div *ngIf="options.length>1 || (newbet.type==9 && newbet.title.length>5)">\n\n    <div style="text-align: center;width:100%" *ngIf="newbet.tags.indexOf(\'image\')==-1">\n      <img *ngIf="newbet.picture.length>0" src="{{newbet.picture}}"\n           style="width:80%;max-width: 350px;" class="image-photo" (click)="selImage()"><br>\n      <span *ngIf="newbet.picture.length==0">{{"ADDBETS.ADDIMAGE" | translate}}</span><br>\n      <shifubutton label="Image" id="btnAddImage" *ngIf="newbet.picture.length==0" icon="image" (click)="selImage()"></shifubutton><br>\n      <br>\n    </div>\n\n    <div class="item text-center" style="margin-top:5%;font-size:x-large;text-align: center;">\n      {{newbet.dtStart | date: "HH:mm"}} <img src="./assets/img/arrow_right.png" style="width:15px;"/> {{newbet.dtEnd | date: "HH:mm"}}\n    </div>\n\n    <shifucheckbox *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1 && newbet.type==5"\n                   label="ADDBET.FORCEUSER"\n                   [(ngModel)]="newbet.modal">\n    </shifucheckbox>\n\n    <shifurange\n      *ngIf="userData.user.connexions.length>5" icon="time"\n      id="txtStartBet"\n      label="ADDBETS.STARTBET" unite="min"\n      [(ngModel)]="newbet.startDelay" min="minStartDelay"\n      max="{{eventData.event.duration*60}}" step="1"\n      (onmove)="getDtStart()">\n    </shifurange>\n\n    <shifurange\n      icon="time" id="txtEndBet" label="ADDBETS.ENDBET"\n      unite="min" [(ngModel)]="newbet.delay" min="1"\n      max="{{newbet.maxdelay}}"  step="1"\n      (onmove)="getDtEnd()">\n    </shifurange>\n\n    <shifurange\n      *ngIf="newbet.type==5"\n      style="margin-top:3%;"\n      icon="checkmark" id="txtNbVotes" unite="vote"\n      label="ADDBETS.NBVOTE" [(ngModel)]="newbet.nVotes"\n      step="1" min="1" max="10">\n    </shifurange>\n\n    <shifurange\n      *ngIf="newbet.type==9"\n      style="margin-top:5%;"\n      icon="checkmark" id="txtNbRespons" unite="LIB.RESPONS"\n      label="ADDBETS.NBRESPONS" [(ngModel)]="newbet.nVotes"\n      step="1" min="1" max="15">\n    </shifurange>\n\n    <shifurange\n      style="margin-top:5%;"\n      *ngIf="userData.user.connexions.length>2 && newbet.type==4"\n      icon="usd" id="txtCagnotte" unite="credits"\n      label="ADDBET.CAGNOTTE" [(ngModel)]="newbet.cagnotte"\n      step="1" min="0" max="{{eventData.event.owner.jetons[userData.user.id]}}">\n    </shifurange>\n\n    <shifurange\n      style="margin-top:5%;"\n      *ngIf="newbet.type==4 && userData.user.connexions.length>5" icon="usd"\n      id="txtMinAmount" unite="credits" label="ADDBET.MINAMOUNT"\n      [(ngModel)]="newbet.minAmount" step="1" min="0" max="20">\n    </shifurange>\n\n    <shifuinput\n      *ngIf="userData.user.connexions.length>10"\n      label="ADDBETS.DESCRIPTION" id="txtText" [(ngModel)]="newbet.text">\n    </shifuinput>\n  </div>\n\n\n  <br>\n  <div *ngIf="patterns!=undefined && patterns.length>0">\n    <div style="width:100%;text-align: center">{{\'ADDBETS.PATTERNLISTTITLE\' | translate }}</div>\n    <ion-list *ngFor="let pattern of patterns">\n      <ion-item class="item item-icon-left item-icon-right">\n        <i name="btnSelect" class="icon ion-arrow-right-a" (click)="selPattern($index)"></i>\n        {{pattern.patternTitle}}\n        <i name="btnDelete" class="icon ion-trash-b" *ngIf="pattern.from.id === user.id" (click)="del_pattern($index)"></i>\n      </ion-item>\n    </ion-list>\n  </div>\n</ion-content>\n'}),o("design:paramtypes",[r.ModalController,a.ViewController,d.TranslateService,r.NavController,a.NavParams,a.ToastController,c.EventDataProvider,u.UserData,a.LoadingController,r.AlertController])],e)}();t.AddbetsPage=h},15:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(106);n(543);var r=n(2),l=n(3),u=n(2),c=n(2),d=n(20),p=function(){function e(e,t,n){this.events=e,this.http=t,this.settings=n,this.hTimer=null,this.online=!0,this.event={activities:[],laCarte:"",Cashiers:[],Moderators:[],Preparators:[]},this.currentSong=null,this.lastOrder={presentation:0,user:0,charts:0,playlist:0,sanity:0,tweet:0,music:0,event:0,photo:0,message:0},this.socketServerAddress=null,this.handle=null;for(var i=0,o=["presentation","user","screen","charts","playlist","sanity","tweet","music","event","photo","command","message","bets"];i<o.length;i++){this.lastOrder[o[i]]=0}}return e.prototype.update=function(){var e=this;c.$$("Traitement de l'ordre 'Event'"),this.http.get(r.api("getevent","event="+this.event.id)).subscribe(function(t){e.event=t,e.event.closed&&e.events.publish("event:logout",e.event)})},e.prototype.quit=function(){this.event={activities:[],laCarte:"",Cashiers:[],Moderators:[],Preparators:[]},this.lastOrder={presentation:0,user:0,charts:0,playlist:0,sanity:0,tweet:0,music:0,event:0,photo:0},clearInterval(this.hTimer),this.hTimer=null},e.prototype.ngOnDestroy=function(){this.quit()},e.prototype.refreshOrder=function(e){if(this.fetching=!0,void 0!=this.event.id&&null!=this.event.id)if(null==e)this.events.publish("event:logout",null);else for(var t=0,n=c.ALL_ORDER;t<n.length;t++){var i=n[t];null==this.lastOrder[i]&&(this.lastOrder[i]=0),e.dtLastOrder.hasOwnProperty(i)&&e.dtLastOrder[i]>this.lastOrder[i]&&(this.lastOrder[i]=e.dtLastOrder[i],this.fetching=!1,u.$$("Diffusion de "+i),this.events.publish(i),"event"==i&&this.settings.mustRefresh("event",c.DELAY_TO_REFRESH)&&this.update())}},e.prototype.initSocketServerAddress=function(e){var t=this;null==this.socketServerAddress?this.http.get(u.api("infoserver",null)).subscribe(function(n){null!=n&&void 0!=n.socketserver?(t.socketServerAddress=n.socketserver.replace("http","ws"),e()):e()}):e()},e.prototype.searchSocketServer=function(e,t,n){var i=this,o=this;null==this.socket?this.initSocketServerAddress(function(){i.socket=new WebSocket(i.socketServerAddress+"/chat"),i.socket.onmessage=function(e){var t=e.data;null!=t&&t.length>0&&0==t.indexOf("{")&&o.refreshOrder({dtLastOrder:JSON.parse(t)})},i.socket.onopen=function(o){c.$$("Socket open, envoi du userid="+t),i.socket.send(t+","+e+","+n)},i.socket.onclose=function(o){c.$$("Socket close"),i.socket=null,clearTimeout(i.handle),i.searchSocketServer(e,t,n),i.handle=setTimeout(function(){i.searchSocketServer(e,t,n)},1e4)},i.socket.onerror=function(o){c.$$("Socket error"),i.socket=null,i.socketServerAddress=null,clearTimeout(i.handle),i.searchSocketServer(e,t,n),i.handle=setTimeout(function(){i.searchSocketServer(e,t,n)},1e4)}}):(clearTimeout(this.handle),this.handle=setTimeout(function(){i.searchSocketServer(e,t,n)},1e4))},e.prototype.join=function(e,t,n,i){void 0===i&&(i=null),this.searchSocketServer(e,t,n);var o=this;this.http.get(r.api("getevent","event="+e)).subscribe(function(e){o.event=e,null!=i&&i()})},e.prototype.add=function(e,t){return this.http.post(r.api("addevent","user="+e),t)},e.prototype.addbasic=function(e,t,n,i,o,s,a,l,u,c){return void 0===n&&(n=0),void 0===i&&(i=8),void 0===o&&(o="music,message,photo"),void 0===s&&(s=""),void 0===a&&(a=""),void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c="HomePage"),this.http.get(r.api("addbasicevent","dest="+c+"&lat="+l+"&lng="+u+"&address="+encodeURIComponent(a)+"&email="+e+"&flyer="+s+"&title="+t+"&activities="+o+"&delay="+n+"&duration="+i))},e.prototype.slideshow=function(e){return void 0===e&&(e=1e9),this.http.get(r.api("slideshow","event="+this.event.id+"&delay="+e))},e.prototype.deletemessage=function(e,t){return this.http.get(r.api("delmessage","user="+t+"&event="+this.event.id+"&message="+e))},e.prototype.validatemessage=function(e,t){return void 0===t&&(t=""),this.http.get(r.api("validatemessage","message="+e+"&tags="+t))},e.prototype.validebet=function(e,t){return this.http.get(r.api("validebet","event="+this.event.id+"&bet="+e+"&result="+t))},e.prototype.addlegend=function(e,t){return void 0===t&&(t=""),this.http.get(r.api("addlegend","message="+e+"&text="+t+"&event="+this.event.id))},e.prototype.getinvites=function(){return this.http.get(r.api("getinvites","event="+this.event.id))},e.prototype.makeLoterieAvailable=function(e,t){return this.http.get(r.api("makeloterieavailable","loterie="+e+"&value="+t+"&event="+this.event.id))},e.prototype.updaterole=function(e,t,n){return this.http.get(r.api("updaterole","event="+this.event.id+"&user="+e+"&role="+t+"&delete="+n))},e.prototype.getpresents=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=""),this.http.get(r.api("getpresents","event="+this.event.id+"&all="+e+"&target="+t))},e.prototype.getstory=function(e,t,n){return this.http.get(r.api("getstory","event="+this.event.id+"&tags="+e+"&since="+t+"&limit="+n))},e.prototype.getlastmessages=function(e){return this.http.get(r.api("getlastmessages","event="+this.event.id+"&nmessages="+e+"&type=1"))},e.prototype.getscheduledmessages=function(e){return this.http.get(r.api("getscheduledmessages","event="+this.event.id+"&nmessages="+e+"&type=1"))},e.prototype.djplay=function(e){return this.http.get(r.api("djplay","event="+this.event.id+"&song="+e.id))},e.prototype.shareevent=function(e,t,n,i,o){return void 0===o&&(o=null),null==o&&(o=this.event),this.http.get(r.api("shareevent","event="+o.id+"&message="+e+"&dests="+t+"&from="+n+"&name="+i))},e.prototype.getlastphoto=function(e,t,n,i){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===i&&(i=5),this.http.get(r.api("getlastmessages","offset="+n+"&tovote="+t+"&event="+this.event.id+"&nmessages="+i+"&user="+e+"&type=0"))},e.prototype.addlink=function(e,t,n){return null==this.event.links&&(this.event.links=[]),this.event.links.push(e+","+t+","+n),this.http.post(r.api("addlink","source="+e+"&target="+t),{label:n})},e.prototype.addTag=function(e,t){return this.http.post(r.api("addtag","target="+e),{label:t})},e.prototype.dellink=function(e,t){return this.http.get(r.api("dellink","source="+e+"&target="+t))},e.prototype.sendinvitetofollower=function(e){return void 0===e&&(e=50),this.http.get(r.api("sendinvitetofollower","event="+this.event.id+"&max="+e))},e.prototype.sendinvitetofollowers=function(e,t){return this.http.get(r.api("sendinvitetofollower","event="+e+"&max="+t))},e.prototype.getorders=function(e){return this.http.get(r.api("getorders","event="+e))},e.prototype.getplaylist=function(e){return this.http.get(r.api("getplaylist","event="+e))},e.prototype.searchcloud=function(e,t,n){return this.http.get(r.api("searchcloud","query="+e+"&user="+t+"&event="+n))},e.prototype.searchlocal=function(e,t,n){return this.http.get(r.api("searchlocal","query="+e+"&user="+t+"&event="+n))},e.prototype.getcommands=function(e){return void 0===e&&(e=null),this.http.get(r.api("getcommands","event="+this.event.id+"&user="+e))},e.prototype.searchstream=function(e,t){return this.http.get(r.api("searchstream","query="+e+"&event="+t))},e.prototype.addsong=function(e){return this.http.post(r.api("addsong","event="+this.event.id),e).timeout(15e3)},e.prototype.addsongsauto=function(e){return this.http.get(r.api("addsongsauto","event="+this.event.id+"&nsongs="+e))},e.prototype.updatecommand=function(e,t){return this.http.get(r.api("updatecommand","command="+e+"&status="+t))},e.prototype.lastphoto=function(e,t){return this.http.get(r.api("lastphoto","event="+this.event.id+"&user="+e+"&all="+t))},e.prototype.sendphoto=function(e){return this.http.post(r.api("sendphoto","event="+this.event.id),e)},e.prototype.sendmessage=function(e,t){return this.http.post(r.api("sendmessage","delay="+e+"&event="+this.event.id),t)},e.prototype.getuserslikeme=function(e){return this.http.get(r.api("getuserslikeme","event="+this.event.id+"&target="+e))},e.prototype.sendcustomercommand=function(e){return this.http.post(r.api("sendcustomercommand","event="+this.event.id),e)},e.prototype.updateevent=function(e,t){return void 0===t&&(t=null),null==t&&(t=this.event),this.http.post(r.api("updateevent","event="+t.id+"&field="+e),t)},e.prototype.getloteries=function(e){return this.http.get(r.api("getloteries","event="+this.event.id+"&user="+e)).timeout(5e3)},e.prototype.getbets=function(e,t,n,i){return void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===i&&(i=""),this.http.get(r.api("getbets","tags="+i+"&actif="+t+"&pattern="+n+"&event="+this.event.id+"&user="+e)).timeout(4e3)},e.prototype.nextsong=function(e){return this.http.get(r.api("nextsong","event="+this.event.id+"&sc="+e))},e.prototype.sendbet=function(e){return this.http.post(r.api("sendbet","event="+this.event.id),e)},e.prototype.startbet=function(e){return this.http.get(r.api("startbet","event="+this.event.id+"&bet="+e.id))},e.prototype.addloterie=function(e){return this.http.post(r.api("addloterie","event="+this.event.id),e)},e.prototype.has=function(e){return this.event.activities.indexOf(e.toLowerCase())>-1},e.prototype.sendRespons=function(e,t,n){var i={text:n,from:t};return this.http.post(r.api("sendrespons","bet="+e+"&event="+this.event.id+"&user="+t),i)},e.prototype.stopcurrentsong=function(){return this.http.get(r.api("stopcurrentsong","event="+this.event.id))},e.prototype.sendpresentation=function(e){return this.http.post(r.api("sendpresentation","event="+this.event.id),e)},e.prototype.getpresentations=function(){return this.http.get(r.api("getpresentations","event="+this.event.id))},e.prototype.activepresentation=function(e,t){return this.http.get(r.api("activepresentation","event="+this.event.id+"&pres="+e.id+"&active="+t))},e.prototype.delpresentation=function(e){return this.http.get(r.api("delpresentation","event="+this.event.id+"&presentation="+e))},e.prototype.gotopage=function(e){return this.http.get(r.api("gotopage","event="+this.event.id+"&pres="+e.id+"&page="+e.page))},e.prototype.getnuserswithscoin=function(e){var t=this;this.getpresents(!0).subscribe(function(n){var i=0;n.items.forEach(function(e){e.jetons[t.event.owner_id]>0&&i++}),e(i)})},e.prototype.buildteams=function(e){return void 0===e&&(e=0),this.http.get(r.api("buildteams","event="+this.event.id+"&method="+e))},e=i([s.Injectable(),o("design:paramtypes",[l.Events,a.HttpClient,d.SettingsProvider])],e)}();t.EventDataProvider=p},16:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0);n(323);var a=n(2),r=n(2);n(547);var l=n(106),u=function(){function e(e){this.http=e}return e.prototype.delFollower=function(e,t){return this.http.get(a.api("delfollower","follower="+t+"&user="+e))},e.prototype.getavatar=function(e,t){return void 0===t&&(t=null),this.http.get(a.api("getavatar","index="+t+"&category="+e))},e.prototype.getcloudplaylist=function(e,t){return void 0===t&&(t=!1),this.http.get(a.api("getcloudplaylist","user="+e+"&force="+t))},e.prototype.blacklist=function(e,t,n){return this.http.get(a.api("blacklist","owner="+e+"&user="+t+"&add="+n))},e.prototype.addFollower=function(e,t){return this.http.get(a.api("addfollower","follower="+t+"&user="+e))},e.prototype.termofuse=function(e){return void 0===e&&(e="fr"),this.http.get(a.api("termofuse","lang="+e))},e.prototype.get=function(e){return this.http.get(a.api("getuser","user="+e))},e.prototype.getevent=function(e){return this.http.get(a.api("getevent","event="+e))},e.prototype.loadinsquare=function(e,t,n,i,o){return this.http.get(a.api("geteventsinsquare","user="+e+"&latmin="+t+"&lngmin="+n+"&latmax="+i+"&lngmax="+o))},e.prototype.getloteries=function(e){return this.http.get(a.api("getloteries","event="+e))},e.prototype.getbets=function(e){return this.http.get(a.api("getbets","actif=false&event="+e)).timeout(4e3)},e.prototype.closestevents=function(e,t){return this.http.get(a.api("closestevents","lat="+e+"&lng="+t))},e.prototype.getphotofromuser=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=30),this.http.get(a.api("getphotofromuser","user="+e+"&event="+t+"&max="+n))},e.prototype.closeevent=function(e,t){return this.http.get(a.api("closeevent","event="+t.id+"&user="+e))},e.prototype.geteventsfrom=function(e,t,n,i){return void 0===t&&(t=15),void 0===n&&(n=!1),void 0===i&&(i=!1),this.http.get(a.api("geteventsfrom","user="+e+"&limit="+t+"&onlyOwner="+n+"&onlyActif="+i))},e.prototype.createplaylist=function(e,t,n){return this.http.get(a.api("createplaylist","event="+e+"&user="+t+"&service="+n))},e.prototype.getpresents=function(e,t){return void 0===t&&(t=!0),this.http.get(a.api("getpresents","event="+e+"&all="+t))},e.prototype.sendtemplate=function(e,t,n,i){return this.http.post(a.api("sendtemplate","from="+t+"&dest="+e+"&template="+n),i)},e.prototype.getqrcode=function(e,t,n){return void 0===t&&(t=50),void 0===n&&(n=!1),this.http.get(a.api("getqrcode","inverse="+n+"&url="+encodeURIComponent(e)+"&size="+t,!1))},e.prototype.urlshortener=function(e){return this.http.get(a.api("shortener","url="+encodeURIComponent(e),!1))},e.prototype.chargecredits=function(e,t,n){return this.http.get(a.api("chargecredits","user="+e+"&target="+t+"&credits="+n))},e.prototype.getlastmessages=function(e,t){return this.http.get(a.api("getlastmessages","event="+e+"&nmessages="+t+"&type=1"))},e.prototype.slideshow=function(e,t){return void 0===t&&(t=1e9),this.http.get(a.api("slideshow","event="+e+"&delay="+t))},e.prototype.getplaylist=function(e){return this.http.get(a.api("getplaylist","event="+e))},e.prototype.getplayedsong=function(e){return this.http.get(a.api("getplayedsong","event="+e))},e.prototype.getcharts=function(e){return void 0===e&&(e=""),this.http.get(a.api("getcharts","catalogue="+e))},e.prototype.checkservers=function(){return this.http.get(a.api("checkservers","password=hh4271"))},e.prototype.getcatalogues=function(){return this.http.get(a.api("getcatalogues",""))},e.prototype.uploadimage=function(e,t){return this.http.post(a.api("uploadimage","onlycontent="+e),t)},e.prototype.connectToServer=function(e,t,n,i){null==e&&(e="prod");for(var o=e.split(","),s=0;s<o.length;s++){a.setServer(o[s]),this.http.get(a.api("infoserver","useragent="+encodeURIComponent(t))).subscribe(function(e){null!=e&&(void 0==e.socketserver||void 0==e.root?(r.$$("Le serveur n'est pas pret : ",e),i("Server not ready")):(e.socketserver=e.socketserver.replace("http:","ws:").replace("https:","wss:"),n(e)))},function(e){r.$$("Connexion unavailable : "+e),null!=i&&i(e)})}},e.prototype.avatargenerator=function(e,t,n){return void 0===n&&(n=!1),this.http.get(a.api("avatargenerator","save="+n+"&pseudo="+e+"&female="+t))},e.prototype.gettemplates=function(){return this.http.get(a.api("gettemplates",""))},e.prototype.loadtheme=function(e){return this.http.get(a.api("loadtheme","url="+e))},e.prototype.getAvatars=function(e){return this.http.get(a.api("getavatars","category="+e))},e.prototype.getAvatarsPro=function(e,t){return null==t?null:(t.length>0&&t.substr(0,1).toUpperCase(),t.length>1&&t.substr(1,1).toLowerCase(),this.http.get(a.api("getavatars_pro","number="+e+"&text="+t)))},e=i([s.Injectable(),o("design:paramtypes",[l.HttpClient])],e)}();t.ApiProvider=u},185:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(6),u=n(186),c=n(8),d=n(2),p=n(191),h=n(16),f=n(2),m=n(44),g=n(15),v=n(194),E=n(20),b=function(){function e(e,t,n,i,o,s,a,r,l,u,c,d,p,h,f){var m=this;this.navParams=e,this.api=t,this.eventData=n,this.navCtrl=i,this.userData=o,this.storage=s,this.loadingCtrl=a,this.settings=r,this.platform=l,this.translate=u,this.modalCtrl=c,this.events=d,this.alertCtrl=p,this.toastCtrl=h,this.plt=f,this.test={value:10},this.temp_user=null,this.env=1,this.welcome_message="",this.backimage="",this.connexion="",this.authent_services="facebook,google,email,anonymous,linkedin",this.allowAnonymous=!0,this.pseudo="",this.settings.loadtheme(),this.connexion=e.get("connexion"),this.storage.get("anonymous").then(function(e){null!=e&&(m.allowAnonymous="true"==e)})}return e.prototype.ionViewDidEnter=function(){var e=this,t=this;this.storage.get("server").then(function(n){d.$$("Demande de connexion a "+n),e.api.connectToServer(n,e.platform.userAgent(),function(n){e.authent_services=n.authent_services;var i=JSON.parse(n.services);e.settings.services={services:[]},i.services.forEach(function(t){(null==t.mode||"dev"!=t.mode||f.isLocal())&&e.settings.services.services.push(t)}),e.eventData.socketServerAddress=n.socketserver,t.env=d.getEnv(),e.userData.load(function(n){n?(d.$$("Chargement du user ok"),e.userData.get().subscribe(function(t){return d.$$("Récupération du compte ",t),null==t||t.temp?(d.$$("Effacement de la clé user"),e.storage.remove("user"),void e.ionViewDidEnter()):(d.$$("Reconnexion automatique de ",t),void e.nextScreen(t))},function(e){d.$$("Erreur de récupération du compte"),t.userData.setId(null),t.createTempUser()})):e.settings.autologin>0?e.anonymousPrompt(null,e.settings.autologin):e.settings.login_email.length>0?e.showEmailLogin():(d.$$("Chargement du user KO !"),t.createTempUser(),e.storage.get("flyer").then(function(e){if(null!=e&&"undefined"!=e){t.backimage=e;var n=new Image;n.onload=function(){t.container.nativeElement.style.backgroundImage='url("'+e+'")',t.container.nativeElement.style.backgroundSize="cover",t.container.nativeElement.style.backgroundRepeat="no-repeat",t.container.nativeElement.style.filter="grayscale(70%);blur(2px);saturate(90%)"},n.src=e}else t.backimage="";t.storage.remove("flyer")}))})},function(t){f.$$("Probleme de connexion au serveur :"+t),setTimeout(function(){e.ionViewDidEnter()},5e3)})}),this.storage.get("type").then(function(t){"create_event"==t&&(e.welcome_message="LOGIN.WELCOMECREATEEVENT")})},e.prototype.nextScreen=function(e){var t=this;d.$$("NextScreen. Vérification de la possibilité de connexion a l'écran principal pour ",e),this.storage.remove("anonymous"),this.userData.setId(e.id);var n=f.loading(this,"Connexion ...");this.userData.canlogin().subscribe(function(i){f.toast(t.toastCtrl,i.message,t.translate),n.dismiss(),""==i.message&&(d.$$("Pas de probleme de connexion. Connexion avec ",e),t.events.publish("user:login",e))},function(){n.dismiss()})},e.prototype.showEmailLogin=function(){var e=this;f.openModal(this.modalCtrl,p.LoginemailPage,null,function(t){null!=t&&e.nextScreen(t)})},e.prototype.facebook_login=function(){1==f.getEnv()?this.ServiceLogin("facebook"):this.ServiceLogin("fb_local")},e.prototype.ServiceLogin=function(e){var t=this;f.$$("Connexion a "+e);var n=this;d.openGeneral(e,n.temp_user).then(function(i){n.userData.get(i).subscribe(function(i){if(null!=i)if(i.hasOwnProperty("accessTokens")&&null!=i.accessTokens[e]&&null!=i.accessTokens[e].token){var o=f.loading(t);n.userData.setId(i.id),n.userData.user.profil=d.PROFIL_PERSO,"pro"===n.navParams.get("profil")&&(n.userData.user.profil=d.PROFIL_PROPRIVE),"public"===n.navParams.get("profil")&&(n.userData.user.profil=d.PROFIL_PROPUBLIC),n.userData.senduser("profil").subscribe(function(e){o.dismiss(),n.nextScreen(n.userData.user)},function(e){o.dismiss()})}else null!=o&&o.dismiss(),f.toast(t.toastCtrl,"ERROR.RETRY",t.translate),d.$$("Error : "+e+" ne retourne pas de token");else n.events.publish("user:loggout")})})},e.prototype.createTempUser=function(){d.$$("Create Temp user");var e=this,t={device:this.plt.userAgent(),time:(new Date).getTime(),lang:"fr",app_name:this.settings.app_name};this.userData.add(t,"temp").subscribe(function(t){d.$$("Temp user created"),e.userData.setId(t.id),e.temp_user=t,e.events.publish("platform:ready")},function(t){setTimeout(function(){d.$$("En attente de connexion"),d.toast(e.toastCtrl,"En attente de connexion"),e.createTempUser()},5e3)})},e.prototype.loginTest=function(){var e=this;this.userData.login("hhoareau@gmail.com","4271").subscribe(function(t){e.navCtrl.push(u.SeleventPage,{user:t})})},e.prototype.anonymousPrompt=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=0),f.openModal(this.modalCtrl,v.LoginavatarPage,{autologin:t,pseudo:!0,flyer:e,message:"INFO.ANONYMOUSLIMIT"},function(e){null!=e&&n.userData.add({picture:e.picture,pseudo:e.pseudo,computer_id:"computer",lang:n.plt.lang()},"anonymous").subscribe(function(e){e&&n.nextScreen(e)})})},e.prototype.openShifumixWebSite=function(){f.openWindow("http://shifumix.com")},i([s.ViewChild("container"),o("design:type",s.ElementRef)],e.prototype,"container",void 0),e=i([s.Component({selector:"page-user",template:'<ion-content no-margin no-padding>\n  <div #container\n       style="position:absolute;top:0px;left:0px;opacity: 0.7;z-index:0;margin:0px;padding:0px;width:100%;height:100%">\n  </div>\n\n      <div *ngIf="backimage.length==0 && settings.ihm!=\'pro\'" class="logo" style="margin-top:20px;" >\n        <a href="shifumix.com">\n          <img [src]="settings.logo" style="width:60%" alt="Shifumix logo" >\n        </a>\n      </div>\n\n    <div *ngIf="temp_user==null" style="text-align: center;width:100%;background: none;" >\n      <img style="width:15%;margin-top:100px;" src="./assets/img/wait.gif"><br><br>\n      Connect to server ...\n      <br><br><br>\n      <tuto position="center" label="TIPS.LOGIN%%20"></tuto>\n    </div>\n\n    <div style="width:100%;text-align: center;" *ngIf="temp_user!=null">\n      <tuto position="center" [icon]="false" label="LOGIN.TUTO" help="connexion_shifumix"></tuto>\n      <h2>{{welcome_message | translate}}</h2>\n\n      <ion-buttons>\n        <button title="Se connecter avec son compte Google"\n                clear ion-button icon-only id="btnGoogle"\n                (click)="ServiceLogin(\'contact\')">\n          <img\n            src="./assets/img/google.png"\n            style="width:250px;height:52px;">\n        </button>\n\n\n        <div *ngIf="settings.ihm!=\'pro\' && settings.oauth_services.indexOf(\'facebook\')>-1 && authent_services.indexOf(\'facebook\')>-1">\n          <br><br>\n          <button\n            id="cmdLoginFacebook"\n            ion-button icon-only clear\n            (click)="facebook_login()"\n            title="Login via votre compte Facebook pour récupérer votre photo et inviter directement vos contacts">\n            <br>\n            <img src="./assets/img/facebookLoginButton.png" style="width:248px;height:40px;">\n          </button>\n        </div>\n\n        <br><br>\n\n        <button *ngIf="settings.oauth_services.indexOf(\'linkedin\')>-1  && authent_services.indexOf(\'linkedin\')>-1"\n                id="btnLinkedin" ion-button clear icon-only (click)="ServiceLogin(\'linkedin\')">\n          <img\n            src="./assets/img/linkedin.png"\n            title="Login via votre compte LinkedIn pour les événements professionnels"\n            style="margin-top:5px;width:242px;height:40px"\n          >\n        </button>\n\n        <br><br>\n\n        <button *ngIf="settings.oauth_services.indexOf(\'email\')>-1 && authent_services.indexOf(\'email\')>-1"\n                id="btnShowEmailLogin"  clear\n                title="Login via l\'usage d\'un code secret envoyé sur sur votre email">\n                (click)="showEmailLogin()" ion-button icon-only>\n          <img\n            width="243"\n            src="./assets/img/button_signin_email.svg"\n          >\n        </button>\n\n        <br><br>\n\n        <shifubutton\n          id="cmdAnonymousLogin"\n          *ngIf="allowAnonymous==true && settings.oauth_services.indexOf(\'anonymous\')>-1  && authent_services.indexOf(\'anonymous\')>-1"\n          label="LOGIN.FASTAUTHENT"\n          title="Shifumix permet également une connexion simplifiée et totalement anonyme"\n          size="235"\n          (click)="anonymousPrompt()">\n        </shifubutton>\n\n\n      </ion-buttons>\n      \x3c!--<br><br><br>--\x3e\n      \x3c!--<shifubutton--\x3e\n        \x3c!--*ngIf="env==1"--\x3e\n        \x3c!--id="btnFacebookLogin"--\x3e\n        \x3c!--icon="ion-social-facebook"--\x3e\n        \x3c!--label="Facebook"--\x3e\n        \x3c!--size="120"--\x3e\n        \x3c!--(click)="ServiceLogin(\'facebook\')">--\x3e\n      \x3c!--</shifubutton><br>--\x3e\n\n\n      \x3c!--<shifubutton *ngIf="env==0"--\x3e\n                   \x3c!--id="btnFacebookLocalLogin"--\x3e\n                   \x3c!--label="Facebook local"--\x3e\n                   \x3c!--size="120"--\x3e\n                   \x3c!--(click)="ServiceLogin(\'fb_local\')">--\x3e\n        \x3c!--Facebook local--\x3e\n      \x3c!--</shifubutton>--\x3e\n      \x3c!--<br>--\x3e\n\n        \x3c!--<ion-row>--\x3e\n          \x3c!--<ion-col>--\x3e\n            \x3c!--<shifubutton--\x3e\n              \x3c!--icon="ion-music-note"--\x3e\n              \x3c!--size="120"--\x3e\n              \x3c!--label="Spotify"--\x3e\n              \x3c!--*ngIf="temp_user!=null"--\x3e\n              \x3c!--(click)="ServiceLogin(\'spotify\')">--\x3e\n            \x3c!--</shifubutton>--\x3e\n          \x3c!--</ion-col>--\x3e\n\n          \x3c!--<ion-col>--\x3e\n            \x3c!--<shifubutton--\x3e\n              \x3c!--size="120" style="margin:10px;"--\x3e\n              \x3c!--label="Deezer"--\x3e\n              \x3c!--icon="ion-music-note"--\x3e\n              \x3c!--*ngIf="env==1 && temp_user!=null"--\x3e\n              \x3c!--(click)="ServiceLogin(\'deezer\')">--\x3e\n            \x3c!--</shifubutton>--\x3e\n\n            \x3c!--<shifubutton--\x3e\n              \x3c!--size="120" style="margin:10px;"--\x3e\n              \x3c!--label="Deezer_loc"--\x3e\n              \x3c!--icon="ion-music-note"--\x3e\n              \x3c!--*ngIf="env==0 && temp_user!=null"--\x3e\n              \x3c!--(click)="ServiceLogin(\'deezer_local\')">--\x3e\n            \x3c!--</shifubutton>--\x3e\n          \x3c!--</ion-col>--\x3e\n        \x3c!--</ion-row>--\x3e\n\n\n      \x3c!--<shifubutton--\x3e\n        \x3c!--label="Instagram"--\x3e\n        \x3c!--size="120"--\x3e\n        \x3c!--icon="instagram"--\x3e\n        \x3c!--*ngIf="temp_user!=null"--\x3e\n        \x3c!--(click)="ServiceLogin(\'instagram\')">--\x3e\n      \x3c!--</shifubutton>--\x3e\n      \x3c!--<br>--\x3e\n\n\n      <div *ngIf="version>1">\n        <shifubutton\n          label="Twitter local" size="120"\n          icon="ion-social-twitter"\n          size="120"\n          *ngIf="env==0"\n          (click)="ServiceLogin(\'twitter_local\')">\n        </shifubutton>\n        <br>\n\n        <shifubutton\n          label="Deezer"\n          size="120"\n          *ngIf="env==0.5"\n          (click)="ServiceLogin(\'deezer_preprod\')">\n          Deezer Preprod\n        </shifubutton>\n\n        <br><br>\n        <shifubutton\n          icon="ion-social-codepen"\n          *ngIf="version>1  && temp_user!=null"\n          label="Slack"\n          (click)="ServiceLogin(\'slack\')">\n        </shifubutton>\n        <br><br>\n      </div>\n\n      <shifubutton\n        label="GitHub"\n        style="width:150px"\n        *ngIf="version>1"\n        (click)="ServiceLogin(\'github\')">\n        Github\n      </shifubutton>\n\n      <span style="display:block;font-size:x-small;position:absolute;top:95%;left:5%"\n            (click)="openShifumixWebSite()">{{settings.app_name}}&nbsp;-&nbsp;{{settings.app_version}}\n      </span>\n  </div>\n\n</ion-content>\n'}),o("design:paramtypes",[r.NavParams,h.ApiProvider,g.EventDataProvider,r.NavController,c.UserData,m.Storage,a.LoadingController,E.SettingsProvider,a.Platform,l.TranslateService,a.ModalController,r.Events,a.AlertController,a.ToastController,a.Platform])],e)}();t.LoginPage=b},186:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,r)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,o=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){r=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){r.label=n[1];break}if(6===n[0]&&r.label<s[1]){r.label=s[1],s=n;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(n);break}s[2]&&r.ops.pop(),r.trys.pop();continue}n=t.call(e,r)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var i,o,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=n(237),u=n(3),c=n(3),d=n(82),p=n(84),h=n(2),f=n(8),m=n(44),g=n(22),v=n(55),E=n(2),b=n(16),y=n(48),T=n(6),I=n(20),D=n(190),O=function(){function e(e,t,n,i,o,s,a,r,l,u,c,d,p,h){var f=this;this.navCtrl=e,this.navParams=t,this.events=n,this.toastCtrl=i,this.alertCtrl=o,this.api=s,this.translate=a,this.settings=r,this.storage=l,this.sanitizer=u,this.modalCtrl=c,this.loadingCtrl=d,this.userData=p,this.geolocation=h,this.target=null,this.eventsonmap=[],this.markers=[],this.circles=[],this.event_code=null,this.preview={title:""},this.location={},this.map=null,this.bestforme=[],this.handle=null,this.laCarte=null,this.handle2=null,this.message="",this.from="",this.todo=null,this.lastrefresh=0,this.dtCGU=0,this.showQRScanner=!0;var m=this;this.storage.get("todo").then(function(e){m.todo=e,f.storage.get("location_lat").then(function(e){m.location.lat=e,f.storage.get("location_lng").then(function(e){m.location.lng=e,f.storage.get("location_zoom").then(function(e){m.location.zoom=e,f.storage.get("message").then(function(e){m.message=e,f.storage.get("from").then(function(e){m.from=e,f.storage.remove("location_lat"),f.storage.remove("location_lng"),f.storage.remove("location_zoom"),f.storage.remove("message"),f.storage.remove("from")})})})})})})}return e.prototype.ionViewDidEnter=function(){var e=this,t=this;void 0!=t.location.lat?t.initMap(Number(t.location.lat),Number(t.location.lng),Number(t.location.zoom),function(){t.initTarget(),t.location={},t.showEventsOnMap()}):setTimeout(function(){null!=e.userData.user.email&&e.userData.user.email.length>0&&e.userData.user.acceptLocalize&&t.localize(t.geolocation).then(function(e){"survey"==t.todo&&t.addEvent("survey"),E.$$("Evaluation du zoom : "+e),e>-1?t.initMap(t.userData.user.lat,t.userData.user.lng,e,function(){t.initTarget(),t.showEventsOnMap()}):h.$$("Aucun événement proche, donc pas de carte")},function(e){t.initMap(t.userData.user.lat,t.userData.user.lng,8,function(){t.initTarget(),t.showEventsOnMap()})})},1e3),"code"==this.settings.type_invite&&(this.settings.type_invite="",this.joinEventByCode())},e.prototype.refreshPreview=function(){this.preview.address=this.preview.address+" "},e.prototype.inviteEvent=function(e){E.openModal(this.modalCtrl,y.InvitePage,{event:e})},e.prototype.initMap=function(e,t,n,i){var o=this;0!=this.userData.user.email.length?(null==o.map&&(o.map=new google.maps.Map(o.mapElement.nativeElement,{center:{lat:e,lng:t},zoom:n})),o.map.addListener("center_changed",function(e){o.initTarget(),setTimeout(function(){o.showEventsOnMap()},500)}),o.map.addListener("zoom_changed",function(e){o.showEventsOnMap()}),o.map.setOptions({disableDefaultUI:!0,rotateControl:!1,clickableIcons:!1}),setTimeout(i,500)):i()},e.prototype.initTarget=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null);var n=this;if(null!=n.map){var i=n.map.getCenter();null==n.target||e?setTimeout(function(){n.target=new google.maps.Marker({user:n.userData.user,position:i,icon:"./assets/img/me.png",name:"You",draggable:!0,map:n.map}),null!=t&&t()},500):(n.target.setPosition(i),null!=t&&t())}else E.$$("La carte est null"),null!=t&&t()},e.prototype.openTrajet=function(e){E.openWindow("https://www.google.com/maps/dir/'"+(this.userData.user.lat+","+this.userData.user.lng)+"'/'"+e.lat+","+e.lng+"'")},e.prototype.showLaCarte=function(e){this.laCarte=e.laCarte},e.prototype.logout_shifumix=function(){this.storage.remove("login"),this.storage.remove("user"),this.storage.remove("login_email"),this.storage.remove("login_password"),this.userData.logout(),this.clearMap(),this.navCtrl.pop()},e.prototype.openprofil=function(){this.navCtrl.push(p.PersoPage,{user:this.userData.user})},e.prototype.calcZoom=function(e,t){var n=this;return new Promise(function(i){var o;n.api.closestevents(e,t).subscribe(function(e){if(o=18,0==e.items.length)o=-1;else{(o=8)<3&&(o=3),n.userData.user.precision>1e4&&o<8&&(o=8),o>40&&(o=-1)}i(o)})})},e.prototype.localize=function(e){return s(this,void 0,void 0,function(){var t,n,i,o;return a(this,function(s){switch(s.label){case 0:if(E.$$("Déclenchement de la localisation"),void 0==(t=this).userData.user.lat&&(t.userData.user.lat=48),void 0==t.userData.user.lng&&(t.userData.user.lng=2),t.userData.user.precision=1e5,null==e&&(e=navigator.geolocation),!e)return[3,9];s.label=1;case 1:return s.trys.push([1,4,,8]),[4,e.getCurrentPosition({enableHighAccuracy:!0,timeout:15e3,maximumAge:36e5})];case 2:return i=s.sent(),E.$$("Géolocalisation ok",i.coords),t.userData.user.lat=i.coords.latitude,t.userData.user.lng=i.coords.longitude,t.userData.user.dtLastPosition=i.timestamp,t.userData.user.precision=i.coords.accuracy,[4,t.calcZoom(i.coords.latitude,i.coords.longitude)];case 3:return-1!=(n=s.sent())&&(n=15),[3,8];case 4:return o=s.sent(),E.$$("Probleme de géolocalisation",o),1!=o.code?[3,5]:(E.$$("L'utilisateur refuse de donner sa position"),this.confirmLocalize(!1),n=-1,[3,7]);case 5:return[4,t.calcZoom(t.userData.user.lat,t.userData.user.lng)];case 6:n=s.sent(),s.label=7;case 7:return[3,8];case 8:return[3,11];case 9:return E.$$("Pas de géolocalisation disponible"),this.confirmLocalize(!1),[4,t.calcZoom(t.userData.user.lat,t.userData.user.lng)];case 10:n=s.sent(),s.label=11;case 11:return[2,n]}})})},e.prototype.onEnterCode=function(e){var t=this;""!=e.value&&this.userData.findeventbycode(e.value).subscribe(function(n){null!=n?t.joinEvent(n,"code"):null!=e.value&&e.value.length>0&&E.toast(t.toastCtrl,"OLDEVENTS.NOEVENTFORTHISCODE",t.translate)})},e.prototype.joinEventByCode=function(){var e=this;E.showPopup({title:"OLDEVENTS.EVENTCODETITLE",placeholder:"000000",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){e.onEnterCode({value:t})})},e.prototype.centerOnLocation=function(){var e=this;e.localize(this.geolocation).then(function(t){e.map.setCenter({lat:e.userData.user.lat,lng:e.userData.user.lng}),e.map.getZoom()!=t&&e.map.setZoom(t)})},e.prototype.openPublicProfil=function(e){h.openModal(this.modalCtrl,v.PublicProfilPage,{userid:e,follower:this.userData.user.id})},e.prototype.initQRScanner=function(){var e=this;this.qrScannerComponent.getMediaDevices().then(function(t){for(var n=[],i=0,o=t;i<o.length;i++){var s=o[i];"videoinput"===s.kind.toString()&&n.push(s)}if(n.length>0){for(var a=void 0,r=0,l=n;r<l.length;r++){var u=l[r];if(u.label.includes("back")){a=u;break}}a?(e.qrScannerComponent.chooseCamera.next(a),e.qrScannerComponent.startScanning(a)):e.qrScannerComponent.chooseCamera.next(n[0])}}),this.qrScannerComponent.capturedQr.subscribe(function(t){if(null!=t&&t.startsWith("http")&&t.indexOf("?")>-1){e.showQRScanner=!1;var n=t.split("?")[1];e.onEnterCode({value:n})}})},e.prototype.disableQRScanner=function(){this.qrScannerComponent.stopScanning()},e.prototype.joinEvent=function(e,t){if(void 0===t&&(t="map"),void 0==e)return!1;this.events.publish("event:login",{user:this.userData.user,event:e,type_invite:t})},e.prototype.clearMap=function(){void 0!=this.markers&&this.markers.length>0&&(this.markers.forEach(function(e){e.setMap(null)}),this.circles.forEach(function(e){e.setMap(null)}),this.markers=[],this.circles=[])},e.prototype.showEventsOnMap=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=null);var i=this;if(null!=i.map&&void 0!=i.map.getBounds()){null!=e&&i.map.setCenter(e);var o=(new Date).getTime();if(o-i.lastrefresh<3e3)return;i.lastrefresh=o,i.urlInvitation=h.DOMAIN_APPLI+"/index.html?location_lat="+i.map.getCenter().lat()+"&location_lng="+i.map.getCenter().lng()+"&location_zoom="+i.map.getZoom();var s=i.map.getBounds().getNorthEast(),a=i.map.getBounds().getSouthWest();this.userData.user.lat=i.map.getCenter().lat(),this.userData.user.lng=i.map.getCenter().lng(),this.userData.senduser("position").subscribe(function(){}),this.api.loadinsquare(this.userData.user.id,a.lat(),a.lng(),s.lat(),s.lng()).subscribe(function(e){if(i.clearMap(),i.eventsonmap=[],null!=e&&void 0!=e.items){h.$$("ShowEventsOnMap:"+e.items.length+" items");var t=35;e.items.length>10&&(t=20),e.items.forEach(function(e){null!=i.userData.user.lat&&void 0!=i.userData.user.lat&&(e.distance=1e3*h.distance(i.userData.user.lat,i.userData.user.lng,e.lat,e.lng));var n={url:e.icon,scaledSize:new google.maps.Size(t,t)};if(e.delay=h.getDelay(e.dtStart,i.userData.user.lang),void 0==i.markers&&(i.markers=[]),e.visibleOnMap||e.owner_id==i.userData.user.id){i.markers.push(new google.maps.Marker({position:{lat:e.lat,lng:e.lng},user:i.userData.user,title:e.title,caption:e.title,evt:e,icon:n,map:i.map,id:e.Id,max_size:new google.maps.Size(30,30)}));var o=0;e.hasOwnProperty("presents")&&(o=e.presents.length),o>0&&i.circles.push(new google.maps.Circle({center:{lat:e.lat,lng:e.lng},map:i.map,strokeColor:"#FF0000",strokeOpacity:.1,fillColor:"#FF0000",fillOpacity:.1,radius:10*o})),i.markers[i.markers.length-1].addListener("dblclick",function(){i.joinEvent(this.evt,"map")}),e.icon=e.password.length>0?"key":"",i.eventsonmap.push(e)}})}else i.eventsonmap=[]})}setTimeout(function(){n.userData.bestEventsForMe().subscribe(function(e){i.bestforme=[],null!=e&&e.items.forEach(function(e){var t=!0;i.eventsonmap.forEach(function(n){t&&n.id==e.id&&(t=!1)}),t&&i.bestforme.push(e)})})},2e3),clearTimeout(this.handle),this.handle=setTimeout(function(){"SeleventPage"==i.navCtrl.getActive().name&&i.showEventsOnMap()},9e5),null!=t&&t()},e.prototype.showEventForMe=function(){var e=this;this.userData.bestEventsForMe().subscribe(function(t){if(null!=t&&t.items.length>0){var n=new google.maps.LatLngBounds;1==t.items.length?e.map.setCenter({lat:t.items[0].lat,lng:t.items[0].lng}):(t.items.forEach(function(e){n.extend({lat:e.lat,lng:e.lng})}),e.map.fitBounds(n),setTimeout(function(){e.showEventsOnMap()},500))}})},e.prototype.zoomOut=function(){this.map.setZoom(this.map.getZoom()-2)},e.prototype.addEvent=function(e){var t=this;void 0===e&&(e="");var n=this,i={lat:this.userData.user.lat,lng:this.userData.user.lng},o=8;this.userData.user.precision<1e4&&(o=16),null!=this.map&&(i={lat:this.map.getCenter().lat(),lng:this.map.getCenter().lng()},o=this.map.getZoom()),h.openModal(this.modalCtrl,d.AddeventPage,{todo:e,user:this.userData.user,precision:this.userData.user.precision,lat:i.lat,lng:i.lng,zoom:o},function(e){if(void 0!=e){if("survey"==n.todo)return void n.events.publish("event:login");0==t.userData.user.email.length||0==e.visibleOnMap?t.events.publish("oldevents:open"):n.initMap(e.lat,e.lng,o=18,function(){n.initTarget(!1,function(){setTimeout(function(){n.showEventsOnMap({lat:e.lat,lng:e.lng},function(){})},1e3)})})}})},e.prototype.showEvent=function(e){this.preview=e},e.prototype.shareZone=function(){E.openModal(this.modalCtrl,y.InvitePage,{url:this.urlInvitation,from:this.userData.user,tab:"home"})},e.prototype.centerOnEvent=function(e,t){var n=this;null==this.target&&this.initTarget(!1,function(){(n.target=null)&&n.target.setPosition({lat:e,lng:t})})},e.prototype.confirmLocalize=function(e){this.userData.user.acceptLocalize=e,this.userData.senduser("acceptLocalize").subscribe(function(){}),this.ionViewDidEnter()},i([r.ViewChild("mapCanvas"),o("design:type",r.ElementRef)],e.prototype,"mapElement",void 0),i([r.ViewChild(D.QrScannerComponent),o("design:type",D.QrScannerComponent)],e.prototype,"qrScannerComponent",void 0),e=i([r.Component({selector:"page-selevent",template:'<ion-header>\n\n  <shifutitle title="SELEVENT.TITLE" back="false" help="event">\n    <shifubutton size="110" [small]="true"\n                 *ngIf="eventsonmap.length+bestforme.length>0"\n                 tips="Rejoindre un événement en utilisant son code"\n                 id="btnByCode" label="OLDEVENTS.JOINBYCODE"\n                 icon="calculator" (click)="joinEventByCode()"></shifubutton>\n    <shifubutton\n      [small]="true"\n      label="SELEVENT.CREATE"\n      size="0"\n      tips="Créer votre propre événement"\n      id="btnAddEvent" shifuid="btnAddEvent"\n      icon="add-circle" (click)="addEvent()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n<ion-content no-padding>\n\n  <div class="item" style="text-align: center;">\n    <br>\n\n    <tuto position="title"\n          [if]="userData.user.email!=null && userData.user.email.length>0 && userData.user.acceptLocalize==null"\n          label="SELEVENT.ASKFORLOCALISATION">\n      <shifubutton id="btnConfirmYes" label="LIB.YES" (click)="confirmLocalize(true)"></shifubutton>&nbsp;\n      <shifubutton id="btnConfirmNo" label="LIB.NO" (click)="confirmLocalize(false)"></shifubutton>\n    </tuto>\n\n    <shifubutton\n      *ngIf="userData.user.acceptLocalize!=true && userData.user.email!=null && userData.user.email.length>0"\n      size="0"\n      icon="locate"\n      label="SELEVENT.ASKLOCALISE" id="cmdAskLocalize"\n      (click)="confirmLocalize(true)">\n    </shifubutton>\n\n    <div style="position:relative;width:100%;">\n      <div #mapCanvas [hidden]="map==null" id="map_canvas"></div>\n      <div *ngIf="map!=null">\n        <shifubutton [small]="true"\n                     id="btnLocalize"\n                     tips="SELEVENT.CMDLOCALIZE"\n                     style="display: block;position: absolute;left: 20px;top: 5px;"\n                     icon="locate"\n                     (click)="centerOnLocation()">\n        </shifubutton>\n\n        <shifubutton [small]="true"\n                     tips="SELEVENT.CMDSHOWEVENT"\n                     id="btnZoomOut"\n                     style="display: block;position: absolute;left: 20px;top: 40px;"\n                     icon="eye"\n                     (click)="showEventForMe()">\n        </shifubutton>\n        <shifubutton\n          *ngIf="userData.user.connexions.length>10"\n          [small]="true" id="btnShare"\n          tips="SELEVENT.CMDINVITE"\n          style="display: block;position: absolute;left: 20px;top: 70px;"\n          icon="person-add" ngxClipboard [cbContent]="urlInvitation" (click)="shareZone()"></shifubutton>\n      </div>\n    </div>\n\n\n\n    \x3c!--<button id="btnZoomOff" style="display: block;position: absolute;left: 30px;top: 65px;" class="button button-small icon button-stable" (click)="zoomOff(-1)">--\x3e\n    \x3c!--<i class="ion-plus-circled"></i>--\x3e\n    \x3c!--</button>--\x3e\n\n    \x3c!--<button id="btnZoomOn" style="display: block;position: absolute;left: 60px;top: 65px;" class="button button-small icon button-stable" (click)="zoomOff(1)">--\x3e\n    \x3c!--<i class="ion-minus-circled"></i>--\x3e\n    \x3c!--</button>--\x3e\n\n  </div>\n\n  <ion-item *ngIf="laCarte!=null">\n    <img src="{{laCarte}}" style="width:100%;max-width:600px;max-height:1000px;" (click)="laCarte=null">\n  </ion-item>\n\n  \x3c!-- events on the map --\x3e\n\n  <shifucard *ngIf="userData.user.email!=null && userData.user.email.length>0"\n             title="SELEVENT.EVENTS"\n             help="events_on_map"\n             [visible]="eventsonmap!=undefined && eventsonmap.length>0">\n    <tuto [if]="eventsonmap.length>0" label="SELEVENT.TUTO_EVENTSAVAILABLE"></tuto>\n      <ion-item no-lines text-center *ngIf="userData.user.acceptLocalize && map==null">\n        Aucun événement proche de vous pour l\'instant\n      </ion-item>\n\n    <div *ngFor="let evt of eventsonmap" style="display:inline-block;width:42%;margin:8px;vertical-align: top;">\n      <shifuflyer shifuid="eventFlyer" [reverse]="true" [icon]="evt.icon" size="100%" flyer="{{evt.flyer}}" (onflip)="centerOnEvent(evt.lat,evt.lng)">\n        <div style="margin:5px;display:inline-block;vertical-align: middle; width:100%;text-align: center">\n          <br>\n          <shifubutton\n            shifuid="btnJoin" size="100"\n            [hidewhenclick]="true"\n            [small]="true" label="LIB.JOIN" (click)="joinEvent(evt,\'map\')"></shifubutton><br><br>\n\n          <shifubutton name="btnPubliProfil" *ngIf="evt.owner_id!=userData.user.id" [small]="true" icon="person" (click)="openPublicProfil(evt.owner_id)"></shifubutton>\n          <shifubutton shifuid="btnInvite" [small]="true" icon="person-add" (click)="inviteEvent(evt)"></shifubutton>\n\n          <span *ngIf="userData.user.connexions.length>5">\n              <shifubutton shifuid="openTrajet" *ngIf="evt.address!=null && evt.address.length>0" [small]="true" icon="navigate" (click)="openTrajet(evt)"></shifubutton>\n              <shifubutton shifuid="btnLaCarte" *ngIf="evt.laCarte!=undefined && evt.laCarte.length>0" [small]="true" icon="beer" (click)="showLaCarte(evt)"></shifubutton><br>\n            </span>\n\n          <span style="width:100%" *ngIf="evt.owner_id!=userData.user.id && userData.user.jetons!=undefined && userData.user.jetons[evt.owner_id]!=undefined && userData.user.jetons[evt.owner_id]>0">\n              <br>{{\'SELEVENT.JETONS\' | translate}}&nbsp;{{userData.user.jetons[evt.owner_id]}}&nbsp;<img src="./assets/img/money.png" style="width:15px;display:inline;">\n            </span>\n          <span *ngIf="evt.startJetons>0">+{{evt.startJetons}}<img src="./assets/img/money.png" style="width:15px;display:inline;"></span>\n          <br><br>\n          <div *ngIf="evt.opened">\n            En cours\n            <span *ngIf="evt.dtEnd-evt.dtStart<1000*60*60*2"><br>{{\'LIB.ENDIN\' | translate}}<shifutimer [end]="evt.dtEnd"></shifutimer></span>\n          </div>\n          <span *ngIf="!evt.opened"><br>{{\'LIB.STARTIN\' | translate}}<shifutimer [end]="evt.dtStart"></shifutimer></span>\n        </div>\n      </shifuflyer>\n    </div>\n  </shifucard>\n\n\n  \x3c!-- Selection d\'événement par code --\x3e\n  <shifucard title="SELEVENT.EVENTBYCODE"\n             [visible]="eventsonmap.length+bestforme.length==0"\n             help="events_by_code">\n    <ion-item text-center text-wrap>\n      Pour rejoindre un événement,<br> saisissez son code<br>\n      <shifunumpad prefix="E-" (onenter)="onEnterCode($event)"></shifunumpad>\n      <br>\n\n      \x3c!--<qr-scanner--\x3e\n        \x3c!--style="display: inline-block;"--\x3e\n        \x3c!--[debug]="false"--\x3e\n        \x3c!--[stopAfterScan]="true"--\x3e\n        \x3c!--[canvasWidth]="350"--\x3e\n        \x3c!--[canvasHeight]="350"--\x3e\n        \x3c!--[updateTime]="1500">--\x3e\n      \x3c!--</qr-scanner>--\x3e\n\n      <tuto start="10" show="btnAddEvent" label="ou créez votre propre événement"></tuto>\n    </ion-item>\n  </shifucard>\n\n\n  <shifucard\n    *ngIf="bestforme.length>0 && userData.user.email!=undefined && userData.user.email.length>0"\n    id="BestForMe"\n    title="OLDEVENTS.BESTEVENTFORME"\n    tuto="OLDEVENTS.TUTO_BESTFORME">\n\n    <div *ngFor="let event of bestforme" style="position:relative;display:inline-block;width:150px;margin:5px;text-align: center;">\n      <div *ngIf="userData.user.jetons[event.owner_id]>0" style="font-size:large;">\n        {{userData.user.jetons[event.owner_id]}}<img src="./assets/img/money.png" class="small-money">\n      </div>\n\n      <shifuflyer shifuid="eventFlyer" style="marge:5px" [reverse]="true" [closed]="event.closed" [flyer]="event.flyer" size="100%">\n        <shifubutton\n          shifuid="btnJoin"\n          tips="Rejoindre un événement en utilisant le code a 6 chiffres de ce dernier"\n          [small]="true"\n          label="LIB.JOIN"\n          (click)="joinEvent(event)">\n        </shifubutton><br>\n        <br>\n        <br>{{event.address}}\n      </shifuflyer>\n    </div>\n  </shifucard>\n\n</ion-content>\n'}),o("design:paramtypes",[u.NavController,u.NavParams,c.Events,u.ToastController,c.AlertController,b.ApiProvider,T.TranslateService,I.SettingsProvider,m.Storage,g.DomSanitizer,u.ModalController,c.LoadingController,f.UserData,l.Geolocation])],e)}();t.SeleventPage=O},187:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(2),u=n(188),c=n(8),d=n(22),p=n(2),h=n(6),f=n(15),m=n(16),g=n(20),v=function(){function e(e,t,n,i,o,s,a,r,u,c,d,h,f){var m=this;if(this.modalCtrl=e,this.userData=t,this.alertCtrl=n,this.eventData=i,this.settings=o,this.viewCtrl=s,this.navCtrl=a,this.toastCtrl=r,this.events=u,this.api=c,this.navParams=d,this.domSanitizer=h,this.translate=f,this.hWndMusicPlayer=null,this.url=null,this.widgetPreview=null,this.widget={qrcode:"",width:400,height:200,onlythisevent:!0,_public:!1,favorite:!1,shorturl:""},this.widget_parameters="",this.user={},this.event={},this.widget_link="",this.newevent_link="",this.screen_titles="",this.screen_ids="",this.n_screens=0,this.widget=d.get("widget"),this.widget.code=l.extract(this.widget.code,"<body>","</body>"),this.user=d.get("user"),this.event=d.get("event"),this.widget.favorite=l.isFavorite(this.user,this.widget),this.widget.onlythisevent=!0,void 0!=this.userData.user.currentEvent&&this.userData.user.currentEvent.length>0&&this.navParams.get("preview")){var g="?";this.widget.long_url.indexOf("?")>0&&(g="&"),this.widgetPreview=this.domSanitizer.bypassSecurityTrustResourceUrl(this.widget.long_url+g+"event="+this.userData.user.currentEvent),setTimeout(function(){m.widget.preview="ok"},5e3)}var v=Math.round((this.eventData.event.dtEnd-this.eventData.event.dtStart)/36e5),E="ChartsPage";this.eventData.event.activities.forEach(function(e){m.widget.activity.indexOf(e)>-1&&(E=p.convertActivityToDestPage(e))});var b=this.eventData.event.title;b=b.replace(this.userData.user.firstname,"%from");var y=p.DOMAIN_SERVER+"/template.html?duration="+60*v+"&autologin="+this.eventData.event.autologin+"&title="+encodeURI(b)+"&widgets="+this.widget.name+"&public="+this.eventData.event.visibleOnMap+"&bonusForNewComer="+this.eventData.event.bonusForNewComer+"&postItMessage="+this.eventData.event.postItMessage+"&musicServer="+this.eventData.event.musicServer+"&noprompt=true&autorun=1&dest="+E+"&ihm="+this.settings.ihm+"&activities="+this.eventData.event.activities+"&flyer="+encodeURI(this.eventData.event.templateFlyer);this.api.urlshortener(y).subscribe(function(e){m.newevent_link=e.url}),this.widget_link=null==this.eventData.event.id?p.DOMAIN_SERVER+"/widgets/freeScreen.html?widget="+this.widget.name+"&user="+this.userData.user.id+"&sc="+this.userData.user.secretCode:p.DOMAIN_SERVER+"/widgets/freeScreen.html?widget="+this.widget.name+"&event="+this.eventData.event.id+"&user="+this.userData.user.id+"&sc="+this.userData.user.secretCode,this.userData.get().subscribe(function(e){m.userData.user=e,m.n_screens=0;for(var t in m.userData.user.screens)m.n_screens++,m.screen_ids=m.userData.user.screens[t].id+",",m.screen_titles+=m.userData.user.screens[t].title+","})}return e.prototype.editHTML=function(){var e=this;this.widget.owner==this.userData.user.id?l.openModal(this.modalCtrl,u.HtmleditorPage,{user:this.userData.user.id,widget:this.widget,mode:"edit"},function(t){null!=t&&(e.widget=t.widget,e.saveWidget())}):this.clone()},e.prototype.clone=function(){this.widget.title=this.widget.title+"_copy",this.widget.parentid=this.widget.id,this.widget.id="",this.widget.owner=this.userData.user.id,this.widget.description="",this.widget.score=0;var e=this;l.openModal(this.modalCtrl,u.HtmleditorPage,{user:this.userData.user.id,widget:this.widget,mode:"edit"},function(t){void 0!=t?(e.widget=t.widget,e.saveWidget()):e.viewCtrl.dismiss()})},e.prototype.delWidget=function(){var e=this;this.userData.delwidget(this.widget.id).subscribe(function(t){e.viewCtrl.dismiss()})},e.prototype.widgetPerso=function(){},e.prototype.changeFavorite=function(){},e.prototype.changePublic=function(){this.userData.sendwidget(this.widget).subscribe(function(){})},e.prototype.saveWidget=function(){var e=this;e.userData.sendwidget(this.widget).subscribe(function(t){e.viewCtrl.dismiss({refresh:!0})})},e.prototype.openLink=function(){if(void 0!=this.eventData.event&&this.eventData.event.owner_id==this.userData.user.id||p.toast(this.toastCtrl,"WIDGET.WARNINGNOACTIFEVENT",this.translate),""!=this.widget.state&&void 0!=this.widget.state);else{var e=window.screen.availHeight,t=window.screen.availWidth;window.open(this.widget.url,"_blank","titlebar=no,status=no,menubar=no,height="+e+",width="+t)}this.viewCtrl.dismiss({refresh:!0})},e.prototype.enterScreenCode=function(){var e=this;p.askforaddscreen(this,this.widget.name,function(t,n){e.userData.user.code=t,e.userData.user.widgetToAdd=n,e.userData.senduser("code,widgetToAdd").subscribe(function(){e.viewCtrl.dismiss({refresh:!1})})})},e.prototype.setOnScreen=function(e){var t=this;null==e?this.userData.setwidgetonscreen(this.screen_ids,this.widget.id).subscribe(function(){t.viewCtrl.dismiss({refresh:!1})}):this.userData.setwidgetonscreen(e.value,this.widget.id).subscribe(function(){t.viewCtrl.dismiss({refresh:!1})})},e.prototype.confirmCopy=function(){p.toast(this.toastCtrl,"WIDGET.URLINCLIPBOARD",this.translate)},e.prototype.showScreen=function(){for(var e in this.userData.user.screens){var t=this.userData.user.screens[e];t.title=t.title+" ",this.userData.updatescreen(t).subscribe(function(e){})}},e=i([s.Component({selector:"page-widget",template:'\n<ion-header>\n  <shifutitle [back]="true" title="iWall">\n    <shifubutton icon="checkmark" (click)="saveWidget()"></shifubutton>\n    <shifubutton icon="close" (click)="viewCtrl.dismiss({refresh:false})"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content padding>\n  <tuto label="WIDGET.TUTO"></tuto>\n  <div class="item" style="width:100%;text-align: center;">\n    <span style="font-size: xx-large">{{widget.title}}</span><br>\n    <label style="font-size: small">{{widget.description | translate}}</label><br><br>\n    \x3c!--<label style="font-size: x-small">{{widget.name}}</label><br><br>--\x3e\n\n    <div *ngIf="widget.preview==\'ok\'" style="position:relative;width:100%;overflow:scroll !important;-webkit-overflow-scrolling:touch !important">\n      <iframe style="width:100%;height:250px;" [src]="widgetPreview" scrolling="yes" >\n      </iframe>\n      <div style="position:absolute;left:3px;top:3px;color: grey;">Preview</div>\n    </div>\n\n    <div *ngIf="widget.preview.indexOf(\'http\')==0" style="position:relative;width:100%;height:300px;">\n      <img style="width:100%" src="{{widget.preview}}">\n    </div>\n\n  </div>\n  <br>\n\n  <ion-item no-lines no-border *ngIf="screen_ids!=null && n_screens>0">\n    <ion-label text-wrap>{{\'WIDGET.VIEWONFIRSTSCREEN\' | translate}}</ion-label>\n    <shifubutton *ngIf="n_screens>1" item-end id="btnShowScreen" icon="eye" (click)="showScreen()"></shifubutton>\n    <shifubutton *ngIf="n_screens==1" item-end id="btnShowMyScreen" icon="open" (click)="setOnScreen(null)"></shifubutton>\n  </ion-item>\n  <ion-item no-lines no-border *ngIf="screen_ids!=null && n_screens>1">\n    <shifubuttongroup\n      size="80"\n      id="screen_list"\n      [labels]="screen_titles"\n      [values]="screen_ids"\n      (onchange)="setOnScreen($event)">\n    </shifubuttongroup>\n  </ion-item>\n\n\n  <ion-item no-lines no-border>\n    <ion-label text-wrap>{{\'WIDGET.OPENONTHISSCREEN\' | translate}}</ion-label>\n    <shifubutton item-end id="btnOpen" icon="open" (click)="openLink()"></shifubutton>\n  </ion-item>\n\n  <ion-item no-lines no-border>\n    <ion-label text-wrap>{{\'WIDGET.VIEWONSCREEN\' | translate}}</ion-label>\n    <shifubutton item-end icon="open" (click)="enterScreenCode()"></shifubutton>\n  </ion-item>\n\n  <ion-item no-lines no-border>\n    <ion-label text-wrap>{{\'WIDGET.WIDGETLINK\' | translate}}</ion-label>\n    <shifubutton item-end icon="open" ngxClipboard [cbContent]="widget_link" (click)="confirmCopy()"></shifubutton>\n  </ion-item>\n\n\n  <ion-item *ngIf="userData.user.connexions.length>10" no-lines no-border text-center>\n    {{\'WIDGET.VIEWONPHONE\' | translate}}<br>\n    <img\n      [hidden]="widget.qrcode.length==0"\n      src="{{widget.qrcode}}"\n      style="width:150px;height:150px"\n      ngxClipboard [cbContent]="widget.url"\n    >\n  </ion-item>\n\n  <br>\n\n  <shifucard [visible]="userData.user.connexions.length>40" title="LIB.ADVANCED" text-center>\n\n    <shifuinput label="Parametres pour le widget" [(ngModel)]="widget_parameters"></shifuinput>\n\n    <ion-item text-center no-border no-line *ngIf="userData.user.email.length>0">\n      <shifubutton [small]="true" id="btnEdit" margin="10" size="100" icon="build" label="LIB.EDIT" (click)="editHTML()"></shifubutton>\n    </ion-item>\n\n\n    <div *ngIf="widget.owner==userData.user.id">\n      <ion-item text-center>\n        <shifubutton size="100" icon="trash" label="LIB.DELETE" (click)="delWidget()"></shifubutton>\n        <shifubutton size="100" icon="copy" label="WIDGET.CLONE" (click)="clone()"></shifubutton>\n      </ion-item>\n\n      <shifucheckbox id="favorite" [(ngModel)]="widget.favorite" label="WIDGET.FAVORITE"></shifucheckbox>\n      \x3c!-- un utilisateur gratuit ne peut pas mettre son widget en ligne --\x3e\n      <shifucheckbox id="public" *ngIf="userData.user.tarif.tarif!=0" [(ngModel)]="widget._public" label="WIDGET.PUBLIC"></shifucheckbox>\n    </div>\n\n\n    \x3c!--<shifucheckbox--\x3e\n      \x3c!--tips="Le widget adopte le style du conteneur"--\x3e\n      \x3c!--help="inherit_contener_style"--\x3e\n      \x3c!--id="parenstyle"--\x3e\n      \x3c!--[(ngModel)]="widget.parentstyle"--\x3e\n      \x3c!--label="WIDGET.PARENTSTYLE">--\x3e\n    \x3c!--</shifucheckbox>--\x3e\n    \x3c!--&lt;!&ndash;<shifucheckbox id="onlythisevent" [(ngModel)]="widget.onlythisevent" label="WIDGET.ONLYFORTHISEVENT"></shifucheckbox>&ndash;&gt;--\x3e\n\n    <ion-item no-lines align-items-center>\n      <shifubutton [small]="true"\n                   icon="link"\n                   size="0"\n                   label="WIDGET.NEWEVENT"\n                   ngxClipboard [cbContent]="newevent_link"\n                   (click)="confirmCopy()">\n      </shifubutton>\n    </ion-item>\n  </shifucard>\n\n  \x3c!--<div class="card" *ngIf="userData.user.connexions>5">--\x3e\n    \x3c!--<div class="item item-divider">--\x3e\n      \x3c!--{{\'WIDGET.IFRAME\' | translate }}--\x3e\n    \x3c!--</div>--\x3e\n    \x3c!--&lt;!&ndash;<div class="item">&ndash;&gt;--\x3e\n      \x3c!--<ion-toggle id="inpourcent" [(ngModel)]="widget.inpourcent" toggle-class="toggle-calm">{{\'WIDGET.INPOURCENT\' | translate}}</ion-toggle>--\x3e\n\n      \x3c!--<div class="item range">--\x3e\n        \x3c!--<span class="input-label">{{"LIB.WIDTH" | translate}}--\x3e\n          \x3c!--<span [hidden]="widget.inpourcent">{{widget.width*10}}px</span>--\x3e\n          \x3c!--<span *ngIf="widget.inpourcent">{{widget.width}}%</span>--\x3e\n        \x3c!--</span>--\x3e\n        \x3c!--<input id="width" type="range" [(ngModel)]="widget.width" min="0" max="100" step="10">--\x3e\n      \x3c!--</div>--\x3e\n\n      \x3c!--<shifurange label="LIB.HEIGHT" min="0" max="600" step="10" [(ngModel)]="widget.height"></shifurange>--\x3e\n\n      \x3c!--<br>--\x3e\n      \x3c!--<div style="width:100%;text-align: center;">--\x3e\n        \x3c!--<button--\x3e\n          \x3c!--class="button button-positive icon-left ion-social-wordpress"--\x3e\n          \x3c!--style="width:150px"--\x3e\n          \x3c!--*ngIf="version>1"--\x3e\n          \x3c!--(click)="create_iframe(\'wordpress\')">--\x3e\n          \x3c!--Wordpress--\x3e\n        \x3c!--</button>--\x3e\n        \x3c!--&nbsp;--\x3e\n        \x3c!--<button--\x3e\n          \x3c!--class="button button-positive icon-left ion-ios-box"--\x3e\n          \x3c!--style="width:150px"--\x3e\n          \x3c!--*ngIf="version>1"--\x3e\n          \x3c!--(click)="create_iframe(\'wix\')">--\x3e\n          \x3c!--Wix--\x3e\n        \x3c!--</button>--\x3e\n        \x3c!--<shifubutton--\x3e\n          \x3c!--icon="ion-ios-box"--\x3e\n          \x3c!--width="150"--\x3e\n          \x3c!--label="Iframe"--\x3e\n          \x3c!--(click)="create_iframe(\'html\')">--\x3e\n        \x3c!--</shifubutton>--\x3e\n\n      \x3c!--</div>--\x3e\n    \x3c!--</div>--\x3e\n  \x3c!--</div>--\x3e\n</ion-content>\n'}),o("design:paramtypes",[r.ModalController,c.UserData,r.AlertController,f.EventDataProvider,g.SettingsProvider,a.ViewController,a.NavController,a.ToastController,a.Events,m.ApiProvider,a.NavParams,d.DomSanitizer,h.TranslateService])],e)}();t.WidgetPage=v},188:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(2),l=n(16),u=n(2),c=n(35),d=n(6),p=function(){function e(e,t,n,i,o,s,a){this.modalCtrl=e,this.api=t,this.translate=n,this.navCtrl=i,this.navParams=o,this.viewCtrl=s,this.alertCtrl=a,this.widget={},this.code="",this.categories="",this.widget=o.get("widget");var l=this.widget.id;""==l&&(l=this.widget.parentid),this.categories=this.translate.instant("WIDGET.CATEGORIES"),this.code=this.widget.code.indexOf("<body>")>0?r.extract(this.widget.code,"<body>","</body>"):this.widget.code}return e.prototype.saveWidget=function(){this.code.indexOf("<body>")>-1&&(this.code=r.extract(this.code,"<body>","</body>")),this.widget.code=this.code,""==this.widget.id&&(this.widget.id="widget"+(new Date).getTime()),this.viewCtrl.dismiss({widget:this.widget})},e.prototype.quit=function(){var e=this;u.showConfirm("LIB.CANCELMODIF",this.alertCtrl,this.translate,function(){return e.viewCtrl.dismiss()})},e.prototype.updateWidgetPicture=function(){var e=this;u.openModal(this.modalCtrl,c.ImageCreatorPage,{filter:"nothing",click:"icon"},function(t){null!=t&&(e.widget.picture=t.value)})},e.prototype.updateAct=function(e){this.widget.activity=e.value},e=i([s.Component({selector:"page-htmleditor",template:'\x3c!--\n  Generated template for the HtmleditorPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="HTMLEDITOR.TITLE" help="iWallSettings">\n    <shifubutton id="btnSaveWidgetCode" icon="checkmark" label="LIB.SAVE" (click)="saveWidget()"></shifubutton>\n    <shifubutton id="btnClose" icon="close" (click)="quit()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content padding>\n  <tuto label="HTMLEDITOR.TUTO"></tuto>\n\n  <shifucard title="LIB.SETTINGS" [visible]="true">\n    <ion-grid>\n      <ion-row no-padding>\n        <ion-col col-2>\n          <div style="position:relative" (click)="updateWidgetPicture()">\n            <img style="margin:5px;" id="selfile" src="{{widget.picture}}" >\n            <ion-icon name="build"\n                      color="primary"\n                      style="position:absolute;left:0px;top:0px;font-size: x-large;">\n            </ion-icon>\n          </div>\n        </ion-col>\n        <ion-col text-right>\n          <shifuinput [(ngModel)]="widget.title" label="LIB.TITLE" focus></shifuinput>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n\n    <shifuinput id="txtDescription" [(ngModel)]="widget.description" label="WIDGET.DESCRIPTION"></shifuinput><br>\n\n    <ion-item text-center no-border no-lines text-wrap>\n      {{\'LIB.CATEGORY\' | translate}}\n      <shifubuttongroup labels="{{categories}}"\n                        values="music,photo,message,bet,survey,loterie,command,others"\n                        default="{{widget.category}}"\n                        (onchange)="updateAct($event)">\n      </shifubuttongroup>\n    </ion-item>\n  </shifucard>\n\n\n  <shifucard [visible]="true" title="HTMLEDITOR.WIDGETCODE">\n    <div ace-editor\n         [theme]="\'clouds\'"\n         [mode]="\'html\'"\n         [(text)]="code" style="height:90vh; width:100%; overflow: auto;">\n    </div>\n  </shifucard>\n  <br>\n  \x3c!--<div style="width:100%;text-align: center">--\x3e\n    \x3c!--<shifubutton label="HTMLEDITOR.SENDBYEMAIL" icon="ion-email" (click)="sendByEmail()"></shifubutton>&nbsp;--\x3e\n    \x3c!--<shifubutton label="LIB.PREVIEW" (click)="preview()"></shifubutton>--\x3e\n  \x3c!--</div>--\x3e\n</ion-content>\n'}),o("design:paramtypes",[a.ModalController,l.ApiProvider,d.TranslateService,a.NavController,a.NavParams,a.ViewController,a.AlertController])],e)}();t.HtmleditorPage=p},189:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(8),u=n(3),c=n(2),d=n(6),p=n(83),h=n(2),f=n(15),m=n(190),g=function(){function e(e,t,n,i,o,s,a,r,l,u){this.events=e,this.navCtrl=t,this.loadingCtrl=n,this.navParams=i,this.userData=o,this.eventData=s,this.modalCtrl=a,this.toastCtrl=r,this.alertCtrl=l,this.translate=u,this.screens=[],this.handle=null,this.showQRScanner=!1,this.showAddEvent=!1,this.l=null}return e.prototype.ionViewDidLoad=function(){var e=this;this.events.subscribe("screen",function(){e.refresh()}),this.events.subscribe("user",function(){e.refresh()}),null!=this.navParams.get("code")&&this.searchScreen(this.navParams.get("code"),this.navParams.get("widget"),function(){setTimeout(function(){void 0==e.eventData.event.id&&(h.$$("Demande de connexion par l'écran screen"),e.events.publish("user:login",e.userData.user))},1e3)}),null!=this.navParams.get("widget")&&c.showPopup({subtitle:"S-######",placeholder:"######",title:"PROFIL.ENTERCODE",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){null!=t&&e.searchScreen(t,e.navParams.get("widget"))}),this.refresh()},e.prototype.ionViewWillLeave=function(){clearInterval(this.handle)},e.prototype.initQRScanner=function(){var e=this;this.qrScannerComponent.getMediaDevices().then(function(t){console.log(t);for(var n=[],i=0,o=t;i<o.length;i++){var s=o[i];"videoinput"===s.kind.toString()&&n.push(s)}if(n.length>0){for(var a=void 0,r=0,l=n;r<l.length;r++){var u=l[r];if(u.label.includes("back")){a=u;break}}a?(e.qrScannerComponent.chooseCamera.next(a),e.qrScannerComponent.startScanning(a)):e.qrScannerComponent.chooseCamera.next(n[0])}}),this.qrScannerComponent.capturedQr.subscribe(function(t){if(null!=t&&t.startsWith("http")&&t.indexOf("?")>-1){e.showQRScanner=!1;var n=t.split("?")[1];setTimeout(function(){e.searchScreen(n,e.navParams.get("widget"))},200)}})},e.prototype.disableQRScanner=function(){this.qrScannerComponent.stopScanning()},e.prototype.searchScreen=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n=null),null!=this.eventData.event&&""==t&&(t=this.eventData.event.widgetDefault),this.userData.user.code=e,this.userData.user.widgetToAdd=t;var o=h.loading(this);this.userData.senduser("code,widgetToAdd").subscribe(function(){o.dismiss(),setTimeout(function(){i.refresh(),null!=n&&n()},3e3),setTimeout(function(){i.refresh()},8e3)})},e.prototype.addscreen=function(e,t){var n=this;void 0===t&&(t=null),this.userData.user.tarif.max_openscreen<=this.screens.length?h.toast(this.toastCtrl,"SCREEN.ERROR_MAXSCREEN",this.translate):""==e.value?h.askforaddscreen(this,t,function(e,t){n.searchScreen(e,t)}):this.searchScreen(e.value,t)},e.prototype.changeWidget=function(e){var t=this,n=this;c.openModal(this.modalCtrl,p.WidgetstorePage,{screen:e.id,message:"SCREEN.CHOOSEWIDGET"},function(i){null!=i&&n.userData.setwidgetonscreen(e.id,i.id).subscribe(function(e){null==t.eventData.event.id&&setTimeout(function(){t.refresh()},1500)})})},e.prototype.refresh=function(){var e=this;h.$$("Rafraichissement des écrans");var t=this;this.userData.get().subscribe(function(n){if(null!=n&&(e.userData.user=n),t.screens=[],t.userData.user.hasOwnProperty("screens"))for(var i in t.userData.user.screens){var o=t.userData.user.screens[i];o.widget=o.id,o.id=i,t.navParams.hasOwnProperty("event")&&o.idEvent!=t.navParams.get("event")||(t.screens.push(o),void 0!=t.userData&&void 0!=t.userData.user&&null!=t.userData.user.currentEvent||(t.showAddEvent=!0))}})},e.prototype.editScreen=function(e){var t=this.screens.indexOf(e),n=this;h.showPopup({title:"SCREEN.NAMEFORSCREEN",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",default:e.title,type:"text",translate:this.translate},this.alertCtrl,function(e){n.screens[t].title=e,n.userData.updatescreen(n.screens[t]).subscribe(function(e){})})},e.prototype.deleteScreen=function(e){var t=this;this.userData.deleteScreen(e.id).subscribe(function(e){t.refresh()})},e.prototype.viewScreen=function(e){e.title=e.title+" ",this.userData.updatescreen(e).subscribe(function(e){})},e.prototype.openFreeScreen=function(){var e=this,t=""+(h.tirage(9e5)+1e5);h.openWindow(h.DOMAIN_SERVER+"/widgets/freeScreen.html?code="+t),setTimeout(function(){e.searchScreen(t)},5e3)},i([s.ViewChild(m.QrScannerComponent),o("design:type",m.QrScannerComponent)],e.prototype,"qrScannerComponent",void 0),e=i([s.Component({selector:"page-screens",template:'\x3c!--\n  Generated template for the ScreensPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle [back]="true" title="LIB.SCREENS"  help="#">\n    <shifubutton [small]="true" id="btnNewScreen" icon="desktop" (click)="openFreeScreen()"></shifubutton>\n    <shifubutton [small]="true" id="btnAddScreen" icon="add-circle" label="LIB.SCREEN" (click)="addscreen({value:\'\'})"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding no-line>\n  \x3c!--<tuto [if]="screens.length>0" label="SCREEN.TUTO"></tuto>--\x3e\n  <tuto [if]="screens!=undefined && screens.length==0"\n        label="SCREEN.TUTOADDSCREEN">\n  </tuto>\n\n  <tuto [if]="screens!=undefined && screens.length==0" start="10"\n        label="Vous pouvez aussi ouvrir un écran partagé sur ce device" show="btnNewScreen">\n  </tuto>\n\n  <tuto [if]="screens.length>0" start="20"\n        label="pour chaque écran vous pouvez modifier l\'iWall, changer le nom, le supprimer ... etc ..."\n        show="btnNewScreen">\n  </tuto>\n\n  <ion-grid>\n  <ion-row *ngFor="let screen of screens">\n    <ion-col>{{screen.title}}<br>\n      <span style="font-size: small">{{screen.description}}</span>\n    </ion-col>\n\n    <ion-col col-auto text-right>\n      <shifubutton name="btnChangeWidget" [small]="true" icon="build" tips="iWall" (click)="changeWidget(screen)"></shifubutton>\n      <shifubutton name="btnDeleteWidget" [small]="true" icon="trash" tips="Trash" (click)="deleteScreen(screen)"></shifubutton>\n      <shifubutton name="btnEditWidget"   [small]="true" icon="create" tips="Edit" (click)="editScreen(screen)"></shifubutton>\n      <shifubutton name="btnViewWidget"   [small]="true" icon="eye" tips="Show" (click)="viewScreen(screen)"></shifubutton>\n    </ion-col>\n  </ion-row>\n  </ion-grid>\n\n\n  <ion-item text-center no-lines>\n    <shifunumpad prefix="S-" (onenter)="addscreen($event)"></shifunumpad>\n  </ion-item>\n  <br>\n\n\n\n  <shifucard title="Scannez un code" [visible]="showQRScanner" (onvisible)="initQRScanner()" (onhide)="disableQRScanner()">\n    <ion-item text-center no-padding no-margin>\n      <qr-scanner\n        style="display: inline-block;"\n        [debug]="false"\n        [stopAfterScan]="true"\n        [canvasWidth]="350"\n        [canvasHeight]="350"\n        [updateTime]="1500">\n      </qr-scanner>\n    </ion-item>\n  </shifucard>\n\n\n  <tuto [if]="showAddEvent" label="SCREEN.TUTOADDEVENT">\n    <shifubutton label="LIB.CREATEEVENT" icon="add-circle" (click)="events.publish(\'event:add\')"></shifubutton>\n  </tuto>\n\n\n  \x3c!--<ion-item no-border *ngIf="searching">--\x3e\n    \x3c!--{{\'SCREENS.WAITING\' | translate}}&nbsp;<img src="./assets/img/wait.gif" style="width:30px">--\x3e\n  \x3c!--</ion-item>--\x3e\n</ion-content>\n'}),o("design:paramtypes",[r.Events,a.NavController,r.LoadingController,a.NavParams,l.UserData,f.EventDataProvider,a.ModalController,a.ToastController,u.AlertController,d.TranslateService])],e)}();t.ScreensPage=g},191:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=n(2),u=n(6),c=n(2),d=n(20),p=function(){function e(e,t,n,i,o,s,a,r){this.navCtrl=e,this.navParams=t,this.alertCtrl=n,this.userData=i,this.viewCtrl=o,this.settings=s,this.toastCtrl=a,this.translate=r,this.showpassword=!1,this.password_ressended=!1,this.login_user={email:"",pseudo:"",password:"",lang:"en"}}return e.prototype.ionViewDidLoad=function(){this.login_user.lang=navigator.language,this.settings.login_email.length>0&&(this.login_user.email=this.settings.login_email,this.email_login(13),this.settings.login_email="")},e.prototype.add=function(e){this.login_user.email=this.login_user.email+e,this.email_login(13)},e.prototype.email_login=function(e){var t=this;if(13==e){var n=this;-1==n.login_user.email.indexOf("@")&&(n.login_user.email+="@gmail.com"),this.userData.getuserbyemail(n.login_user.email).subscribe(function(e){if(null==e){t.resend_password();var i=t.navParams.get("pseudo");null==i&&(i=n.login_user.email.split("@")[0]),i.indexOf(".")>-1&&(i=i.split(".")[0]);var o=null;null!=n.userData.user&&(o=n.userData.user.id),n.userData.add({id:o,pseudo:i,email:n.login_user.email,lang:n.login_user.lang},"mail").subscribe(function(e){},function(e){console.log(e.status)})}n.showpassword=!0})}},e.prototype.password_login=function(e){var t=this;if(13==e){var n=this;this.userData.loginbyemail(n.login_user.email,n.login_user.password).subscribe(function(e){null==e?(t.password_ressended=!1,l.toast(n.toastCtrl,"LOGIN.WRONGPASSWORD",n.translate)):n.viewCtrl.dismiss(e)})}},e.prototype.resend_password=function(){var e=this;c.toast(this.toastCtrl,"Secret code sended"),this.userData.resend_password(this.login_user.email,!1).subscribe(function(){e.login_user.password=""})},e.prototype.checkemail=function(){var e=this.login_user.email.toLowerCase(),t=null;-1!=e.indexOf("gmail.com")&&(t=window.open("https://mail.google.com/mail/","_blank")),-1!=e.indexOf("yahoo.com")&&(t=window.open("https://mail.yahoo.com","_blank")),-1!=e.indexOf("hotmail.com")&&(t=window.open("https://hotmail.com","_blank")),null==t&&window.open(e.split("@")[1],"_blank")},e.prototype.valide=function(){this.showpassword?this.email_login(13):this.password_login(13)},e=i([s.Component({selector:"page-loginemail",template:'\x3c!--\n  Generated template for the LoginemailPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle [menu]="false" [back]="true" title="Email Login">\n    <shifubutton [small]="true" id="btnCancel" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n<ion-content padding text-center>\n\n  <shifuinput id="txtEmail" type="email" [hidden]="showpassword"\n              [(ngModel)]="login_user.email"\n              style="font-size:medium;"\n              label="Email"\n              (keypress)="email_login($event.keyCode)"></shifuinput>\n  <br>\n  <ion-buttons *ngIf="login_user.email.length>3 && !showpassword">\n    <shifubutton size="110" label="@gmail.com" [small]="true" color="secondary" (click)="add(\'@gmail.com\')"></shifubutton>\n    <shifubutton size="110"  label="@hotmail.com" [small]="true" color="secondary"  (click)="add(\'@hotmail.com\')"></shifubutton>\n    <shifubutton size="110"  label="@yahoo.com" [small]="true" color="secondary"  (click)="add(\'@yahoo.com\')"></shifubutton>\n  </ion-buttons>\n  <br>\n\n  <ion-buttons>\n  <shifubutton [hidden]="showpassword" label="valide" id="btnValideUser" class="button icon ion-arrow-right-a" (click)="email_login(13)"></shifubutton>\n  </ion-buttons>\n\n  <br>\n\n  <div *ngIf="showpassword" class="item-input item-button-right">\n\n    <span style="font-size: xx-large">{{login_user.email}}</span><br>\n\n    <shifuinput id="txtPseudo" type="text" [hidden]="showpassword"\n                [(ngModel)]="login_user.pseudo"\n                style="font-size:medium;" label="Pseudo"></shifuinput>\n\n    <div style="width: 100%;text-align: center;" (click)="checkemail()">\n      <span style="font-size: small;font-style: italic">{{\'LOGIN.CODESENDED\' | translate}}</span><br><br>\n      {{\'LIB.CHECKYOUREMAIL\' | translate}}\n    </div>\n\n    <br>\n\n    <shifuinput id="txtPassword" type="text" size="4"\n                label="LIB.SECRETCODE"\n                [(ngModel)]="login_user.password"\n                style="font-size: large;"\n                (keypress)="password_login($event.keyCode)"></shifuinput>\n\n\n    <br>\n    <shifubutton label="LIB.LOGIN" id="btnLogin" style="margin-bottom: 5px" (click)="password_login(13)"></shifubutton>\n  </div>\n  <br>\n  <div *ngIf="showpassword && password_ressended==false" class="item" (click)="resend_password()">\n    <label style="text-decoration: underline;font-style: italic;">{{\'LOGIN.SENDPASSWORD\' | translate}}</label>\n  </div>\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.NavParams,a.AlertController,r.UserData,a.ViewController,d.SettingsProvider,a.ToastController,u.TranslateService])],e)}();t.LoginemailPage=p},192:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(8),u=n(15),c=n(2),d=n(48),p=n(35),h=n(6),f=n(108),m=n(193),g=n(83),v=n(109),E=n(16),b=function(){function e(e,t,n,i,o,s,a,r,l,u){this.navCtrl=e,this.navParams=t,this.events=n,this.api=i,this.translate=o,this.modalCtrl=s,this.toastCtrl=a,this.alertCtrl=r,this.eventData=l,this.userData=u,this.streamingDevices=[],this.autologin={value:!1},this.autologin.value=2==this.eventData.event.autologin}t=e,e.prototype.selImage=function(){var e=this;c.openModal(this.modalCtrl,p.ImageCreatorPage,{ratio:1.5,upload:!0,filter:"photo,phone,cloud"},function(t){null!=t&&(e.eventData.event.welcomePicture=t.value)})},e.prototype.openInvite=function(){c.openModal(this.modalCtrl,d.InvitePage)},e.prototype.ionViewWillLeave=function(){this.updateEvent()},e.prototype.upgradeEvent=function(){var e=this;this.userData.upgradeTarif().subscribe(function(t){c.toast(e.toastCtrl,t.message,e.translate)})},e.prototype.addModerator=function(){this.events.publish("moderator:add")},e.prototype.updateEvent=function(){var e=this;this.eventData.event.autologin=0,this.autologin.value&&(this.eventData.event.autologin=2),this.eventData.updateevent("teams,title,icon,password,autologin,allowAnonymous,visibleOnMap,startJetons,welcomePicture,welcomeDuration,selfservice,loc_query,hTag,needValidate,minCreditToJoin,minDistance,minScoreToJoin,maxOnline,linkToOwner,laCarte,selfservice").subscribe(function(t){null!=t&&(e.userData.user=t)})},e.prototype.openEventSum=function(){c.openModal(this.modalCtrl,f.ClosedeventPage,{event:this.eventData.event})},e.prototype.openPresentations=function(){c.openModal(this.modalCtrl,m.PresentationsPage,{})},e.prototype.changeDefaultWidget=function(){var e=this;c.openModal(this.modalCtrl,g.WidgetstorePage,{from:t.name},function(t){null!=t&&(e.eventData.event.widgetDefault=t.id,e.eventData.updateevent("widgetDefault").subscribe(function(){c.toast(e.toastCtrl,"ADDEVENT.DEFAULTWIDGETSET",e.translate)}))})},e.prototype.onClose=function(){c.closeEvent(this,this.eventData.event)},e.prototype.selIcon=function(){var e=this;c.openModal(this.modalCtrl,p.ImageCreatorPage,{ratio:1,upload:!1,filter:"nothing",click:"icon"},function(t){null!=t&&(e.eventData.event.icon=t.value,e.updateEvent())})},e.prototype.updateTeam=function(){c.openModal(this.modalCtrl,v.TeamsPage,{},function(){})};var t;return e=t=i([s.Component({selector:"page-profil",template:'<ion-header>\n  <shifutitle title="LIB.EVENT" help="event_settings">\n  </shifutitle>\n</ion-header>\n<ion-content no-padding>\n  <tuto label="PROFIL.TUTO" *ngIf="userData.user.id!=eventData.event.owner_id"></tuto>\n\n  \x3c!--<div class="card">--\x3e\n    \x3c!--<div class="item item-divider item-button-right">--\x3e\n      \x3c!--{{userData.user.firstname}}--\x3e\n      \x3c!--<button style="padding-bottom: 15px;" class="button button-icon ion-settings" (click)="openProfil()" title="{{\'PROFIL.CHANGESETTINGS\' | translate}}"></button>--\x3e\n    \x3c!--</div>--\x3e\n\n  \x3c!--<div style="width: 100%;text-align: center" *ngIf="userData.user.id!=eventData.event.owner_id && eventData.event.laCarte.length>0">--\x3e\n    \x3c!--<shifubutton label="LIB.COMMAND" (click)="openCommand()"></shifubutton><br><br>--\x3e\n  \x3c!--</div>--\x3e\n  \x3c!----\x3e\n  \x3c!--</div>--\x3e\n\n  \x3c!--<shifucheckbox id="chkFollow" *ngIf="userData.user.id!=eventData.event.owner_id" label="PROFIL.FOLLOWER" [(ngModel)]="follow" (click)="updateFollow()"></shifucheckbox>--\x3e\n  \x3c!--<shifubutton label="LIB.INVITE" (click)="openInvite()"></shifubutton>--\x3e\n\n  <tuto label="PROFIL.TUTOADMIN" ></tuto>\n\n  \x3c!-- Parametres avances --\x3e\n  <shifucard [visible]="true" title="General" label="LIB.SUMMARIZE" (onclick)="openEventSum()">\n    <shifuinput\n      fontsize="large"\n      position="fixed"\n      id="txtTitle"\n      label="LIB.TITLE"\n      [(ngModel)]="eventData.event.title">\n    </shifuinput>\n\n    <shifuinput\n      id="txtPassword"\n      label="ADDEVENT.PASSWORD"\n      position="fixed"\n      [(ngModel)]="eventData.event.password">\n    </shifuinput>\n\n    <br>\n    <ion-item>\n      <ion-label item-start>\n        {{"LIB.DURATION" | translate}}:<shifutimer [end]="eventData.event.dtEnd"></shifutimer>\n      </ion-label>\n      <shifubutton item-end\n                   [hidewhenclick]="true"\n                   id="btnClose"\n                   [small]="true"\n                   label="Close"\n                   icon="close"\n                   (click)="onClose()">\n      </shifubutton>\n    </ion-item>\n    <ion-item *ngIf="eventData.event.presents.length>1">\n      <ion-label item-start>\n        Ajouter un moderateur\n      </ion-label>\n      <shifubutton [small]="true"\n                   item-end\n                   size="0"\n                   icon="add-circle"\n                   label="LIB.MODERATOR"\n                   (click)="addModerator()">\n      </shifubutton>\n    </ion-item>\n    <ion-item>\n      <ion-label item-start>\n        {{\'LIB.TEAMSETTINGS\' | translate}}\n      </ion-label>\n      <shifubutton [small]="true"\n                   item-end\n                   icon="add-circle"\n                   label="LIB.TEAMS"\n                   (click)="updateTeam()">\n      </shifubutton>\n    </ion-item>\n\n\n    \x3c!--<shifuinput *ngIf="eventData.event.hTag.length>0" label="LIB.HTAG" [(ngModel)]="eventData.event.hTag"></shifuinput>--\x3e\n\n    \x3c!--<div style="width:100%;text-align: center" *ngIf="eventData.event.money==0">--\x3e\n    \x3c!--<shifubutton size="200px" label="PROFIL.PASSTOPREMIUM"  (click)="premiumEvent()"></shifubutton><br><br>--\x3e\n    \x3c!--</div>--\x3e\n\n    \x3c!--<shifurange icon="logo-usd" [(ngModel)]="eventData.event.minCreditToJoin" unite="credits" label="ADDEVENT.MINCREDIT" min="0" max="300" step="10"></shifurange>--\x3e\n\n    \x3c!--<shifucheckbox label="PROFIL.NEEDTOBECLOSE" id="chkDistance" [(ngModel)]="eventData.event.enableDistance" (change)="clickDistance()"></shifucheckbox>--\x3e\n\n    \x3c!--<div *ngIf="eventData.event.enableDistance">--\x3e\n    \x3c!--<shifurange  label="ADDEVENT.MINDISTANCE" unite="km"--\x3e\n    \x3c!--[(ngModel)]="eventData.event.minDistance" label="ADDEVENT.MINDISTANCE"--\x3e\n    \x3c!--min="0.1" max="5" step="0.1">--\x3e\n    \x3c!--</shifurange>--\x3e\n    \x3c!--</div>--\x3e\n\n    <shifucheckbox *ngIf="userData.user.tarif.tarif>0 && userData.user.email.length>0"\n                   help="eventPublicPrivate"\n                   id="chkVisibility"\n                   label="ADDEVENT.VISIBLEONMAP"\n                   [(ngModel)]="eventData.event.visibleOnMap"\n                   (onchange)="updateEvent()">\n    </shifucheckbox>\n\n    <shifucheckbox *ngIf="eventData.event.visibleOnMap==true"\n                   help="eventPublicPrivate"\n                   id="chkAllowAnonymous"\n                   label="ADDEVENT.ALLOWANONYMOUS"\n                   [(ngModel)]="eventData.event.allowAnonymous" (onchange)="updateEvent()">\n    </shifucheckbox>\n\n    <shifucheckbox *ngIf="!eventData.event.visibleOnMap || eventData.event.allowAnonymous"\n                   help="loginPage"\n                   id="chkAutoLogin"\n                   label="ADDEVENT.AUTOLOGIN"\n                   [(ngModel)]="autologin.value" (onchange)="updateEvent()">\n    </shifucheckbox>\n    \x3c!--<shifurange *ngIf="userData.user.connexions.length>20"--\x3e\n    \x3c!--id="txtMinScore" label="ADDEVENT.MINSCORE"--\x3e\n    \x3c!--unite="reputation" [(ngModel)]="eventData.event.minScoreToJoin"--\x3e\n    \x3c!--min="-10" max="50" step="1"></shifurange>--\x3e\n\n\n    <shifubutton\n      label="PROFIL.UPGRADEEVENT"\n      *ngIf="userData.user.connexions.length>10 && userData.user.tarif.tarif==0"\n      (click)="upgradeEvent()">\n    </shifubutton>\n  </shifucard>\n\n\n        \x3c!--<div class="item" style="text-align: center" *ngIf="eventData.event.activities.indexOf(\'music\')>-1">--\x3e\n        \x3c!--<shifubutton--\x3e\n        \x3c!--style="width: 120px"--\x3e\n        \x3c!--label="PROFIL.STARTNEXT_EVENT"--\x3e\n        \x3c!--*ngIf="eventData.event.dtStart<now && eventData.event.nSongs>0 && !eventData.event.hasOwnProperty(\'currentSong\') && eventData.event.musicPlayer!=\'?\' && eventData.event.musicServer<2"--\x3e\n        \x3c!--(click)="startEvent()"></shifubutton>--\x3e\n        \x3c!--<shifubutton [small]="true" icon="ion-play" (click)="openPlayer()" *ngIf="eventData.event.musicServer>1"></shifubutton>--\x3e\n        \x3c!--<button--\x3e\n        \x3c!--style="width: 120px"--\x3e\n        \x3c!--class="button button-small icon-left ion-music-note button-positive"--\x3e\n        \x3c!--*ngIf="eventData.event.dtStart<now && eventData.event.nSongs==0"--\x3e\n        \x3c!--(click)="changePlatform()">{{\'PROFIL.CHANGE_PLAYERTYPE\' | translate}}--\x3e\n        \x3c!--</button>--\x3e\n        \x3c!--<div *ngIf="eventData.event.musicServer==0 && userData.user.accessTokens.hasOwnProperty(\'spotify\') && streamingDevices.length>1">--\x3e\n        \x3c!--<label class="item item-input item-select">--\x3e\n        \x3c!--<div class="item-button-left input-label">--\x3e\n        \x3c!--<button style="display: inline" class="button ion-refresh button-icon" (click)="refreshDeviceList()"></button>--\x3e\n        \x3c!--Player--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--<select ng-options="x.name for x in streamingDevices" [(ngModel)]="streamingDevices_sel" (change)="changeDevice(streamingDevices_sel)">--\x3e\n        \x3c!--</select>--\x3e\n        \x3c!--</label>--\x3e\n        \x3c!--</div>--\x3e\n\n        \x3c!--<div *ngIf="eventData.event.dtStart<now && eventData.event.musicPlayer==\'?\'">--\x3e\n        \x3c!--<img src="/img/wait.gif">&nbsp;--\x3e\n        \x3c!--Waiting for player {{streamingPlatform}}--\x3e\n        \x3c!--</div>--\x3e\n\n        \x3c!--<div *ngIf="eventData.event.dtStart<now && eventData.event.musicPlayer!=\'?\'">--\x3e\n        \x3c!--Music playing on {{eventData.event.musicPlayer}}--\x3e\n        \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n\n\n\n        \x3c!--<ion-item *ngIf="eventData.event.activities.indexOf(\'music\')>-1 && !eventData.event.limitSearchToOwnerPlaylist && eventData.event.musicServer==2">--\x3e\n        \x3c!--<div class="item item-divider">{{\'PROFIL.SEARCHSOURCE\' | translate}}</div>--\x3e\n        \x3c!--<ion-checkbox *ngFor="let item of srcList" [(ngModel)]="item.checked" ng-checked="item.checked" (change)="updateSource()">--\x3e\n        \x3c!--{{ item.text }}--\x3e\n        \x3c!--</ion-checkbox>--\x3e\n        \x3c!--</ion-item>--\x3e\n\n        \x3c!--<div class="item text-center">--\x3e\n\n           \x3c!--<shifubutton *ngIf="userData.user.connexions.length>20" icon="ion-link" margin="10" label="PROFIL.LINKTOWIDGET" (click)="enterCode(false)"></shifubutton>&nbsp; --\x3e\n          \x3c!--<br>--\x3e\n\n        \x3c!--</div>--\x3e\n\n  <shifucard text-center title="ADDEVENT.WELCOMESCREEN" icon="add-circle" (onclick)="selImage()">\n    <tuto [if]="eventData.event.welcomePicture!=null && eventData.event.welcomePicture.length>0" label="PROFIL.TUTO_WELCOMEPICTURE"></tuto>\n    <div *ngIf="eventData.event.welcomePicture!=null && eventData.event.welcomePicture.length>0">\n      <img\n        src="{{eventData.event.welcomePicture}}"\n        style="max-width:200px;display:inline-block;"\n        class="image-photo">\n      <shifurange\n        unite="secondes" step="1" min="0" max="10"\n        id="txtWelcomeDuration" icon="time"\n        label="ADDEVENT.WELCOMEDURATION"\n        [(ngModel)]="eventData.event.welcomeDuration">\n      </shifurange>\n    </div>\n  </shifucard>\n\n  <shifucard title="LIB.ADVANCED" help="event_advanced_settings">\n    <div *ngIf="userData.user.email!=null && userData.user.email.length>0">\n      <shifurange\n        unite="iCoin"\n        help="iCoin"\n        icon="logo-usd"\n        label="ADDEVENT.STARTJETONS"\n        min="0" max="100" step="1"\n        id="txtStartJetons"\n        [(ngModel)]="eventData.event.startJetons"\n        (onchange)="updateEvent()">\n      </shifurange>\n\n      <ion-item class="text-center text-wrap">\n        <span class="text-center" *ngIf="eventData.event.startJetons>0">Chaque participant recoit {{eventData.event.startJetons}} iCoin lorsqu\'il entre dans l\'événement</span><br>\n      </ion-item>\n    </div>\n    <ion-item *ngIf="eventData.event.icon.length>0">\n      <ion-label>Change Map Icon:</ion-label>\n      <img item-right style="display:inline;max-width:60px" (click)="selIcon()" src="{{eventData.event.icon}}"><br><br>\n    </ion-item>\n    <ion-item>\n      <ion-label>Default widget : {{eventData.event.widgetDefault}}</ion-label>\n      <shifubutton item-right [small]="true" label="LIB.MODIFY" (click)="changeDefaultWidget()"></shifubutton>\n    </ion-item>\n    <br>\n\n    <ion-item>\n      <ion-label>{{"LIB.EVENTTYPE" | translate}}</ion-label>\n      <ion-select [(ngModel)]="eventData.event.ihm" okText="Okay" cancelText="Dismiss" (ionChange)="updateEvent()">\n        <ion-option value="pro">Pro</ion-option>\n        <ion-option value="perso">Loisir</ion-option>\n      </ion-select>\n    </ion-item>\n\n  </shifucard>\n</ion-content>\n'}),o("design:paramtypes",[r.NavController,r.NavParams,a.Events,E.ApiProvider,h.TranslateService,r.ModalController,r.ToastController,a.AlertController,u.EventDataProvider,l.UserData])],e)}();t.ProfilPage=b},193:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(16),u=n(15),c=n(6),d=n(8),p=n(2),h=n(2),f=n(329),m=n(20),g=n(330),v=n(110),E=function(){function e(e,t,n,i,o,s,a,r,l,u,c,d,p){this.events=e,this.navCtrl=t,this.navParams=n,this.loadingCtrl=i,this.api=o,this.alertCtrl=s,this.modalCtrl=a,this.toastCtrl=r,this.eventData=l,this.userData=u,this.settings=c,this.viewCtrl=d,this.translate=p,this.presentations=[]}t=e,e.prototype.refresh=function(){var e=this;this.settings.mustRefresh(t.name)&&(h.$$("Récupération des presentations"),this.eventData.getpresentations().subscribe(function(t){for(var n=!1,i=0;i<e.presentations.length;i++)null!=t.items[i]&&null!=e.presentations[i]&&t.items[i].id!=e.presentations[i].id&&(n=!0);(t.items.length!=e.presentations.length||n)&&(e.presentations=[]);var o=!1;t.items.forEach(function(t){t.active&&!t.ended&&(o=!0),t.canVote=!0,null!=t.votes&&t.votes.forEach(function(n){n.from==e.userData.user.id&&(t.canVote=!1)}),t.title_complete=h.getDate(t.dtStart,"FR-fr",!0)+" - "+t.title,t.ended?t.title_complete+=" - "+e.translate.instant("LIB.TERMINATED"):null!=t.pages&&(t.title_complete+=" ("+t.page+"/"+t.pages.length+")"),o||t.ended||t.inTreatment||t.active||!(e.eventData.event.Moderators.indexOf(e.userData.user.id)>-1)||(o=!0,t.canActivate=!0);for(var n=0;n<e.presentations.length;n++)if(e.presentations[n].id==t.id){e.presentations[n].active=t.active,e.presentations[n].ended=t.ended,e.presentations[n].inTreatment=t.inTreatment,e.presentations[n].canActivate=t.canActivate,e.presentations[n].page=t.page,e.presentations[n].dtEnd=Number(t.dtEnd),e.presentations[n].dtStart=Number(t.dtStart),e.presentations[n].votes=t.votes,e.presentations[n].canVote=t.canVote,e.presentations[n].title_complete=t.title_complete;break}n>=e.presentations.length&&e.presentations.push(t)})}))},e.prototype.ionViewDidEnter=function(){var e=this;h.$$("ionViewDidEnter"),setTimeout(function(){e.refresh()},h.DELAY_TO_REFRESH)},e.prototype.ionViewDidLoad=function(){p.subscribe("presentation",this)},e.prototype.addPresentation=function(e){var t=this;h.openModal(this.modalCtrl,f.AddpresentationPage,null,function(e){if(null!=e){var n="Presentation upload";e.mega>10&&(n+=" ... it will take more than one minute");var i=h.loading(t,n);t.eventData.sendpresentation(e).subscribe(function(e){null==e&&p.toast(t.toastCtrl,"ERROR.PRESENTATIONUPLOAD",t.translate),i.dismiss()})}})},e.prototype.setCurrentPresentation=function(e,t){var n=this;this.eventData.activepresentation(e,t).subscribe(function(e){200!=e.code&&p.toast(n.toastCtrl,e.message,n.translate)})},e.prototype.removePres=function(e){var t=this;p.showConfirm("PRESENTATION.CONFIRMEDELETE",this.alertCtrl,this.translate,function(){t.eventData.delpresentation(e.id).subscribe(function(){})})},e.prototype.download=function(e){p.openWindow(e.support,"download")},e.prototype.updateEvent=function(){this.eventData.updateevent("maxPresDuration,pricePerMinute,priceToPresent,canDownloadBeforePresentation,delayBetweenPresentationInMinutes").subscribe(function(e){})},e.prototype.changePriority=function(e,t){var n=this,i=this.presentations.indexOf(e),o=null;if(-1==t){if(0==i)return;1==i&&(o=this.presentations[0].priority-1)}else{if(i==this.presentations.length-1)return;i==this.presentations.length-2&&(o=this.presentations[this.presentations.length-1].priority+1)}null==o&&(o=(this.presentations[i+t].priority+this.presentations[i+2*t].priority)/2),e.priority=o,this.eventData.sendpresentation(e).subscribe(function(){p.toast(n.toastCtrl,"Priorité modifiée"),n.presentations=[]})},e.prototype.onSetScore=function(e,t){var n=this;t.canVote=!1;this.userData.sendvote(t.id,{target:t.id,event:this.eventData.event.id,from:this.userData.user.id,value:e,description:""}).subscribe(function(){p.toast(n.toastCtrl,"Vote enregistré")})},e.prototype.changeDuration=function(e){var t=this;p.showPopup({title:"Nouvelle durée (en minutes)",placeholder:"",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(n){null!=(n=Number(n))&&n<600&&n>0&&(e.dtEnd=Number(e.dtStart)+1e3*n*60,t.eventData.sendpresentation(e).subscribe(function(){p.toast(t.toastCtrl,"Durée modifiée"),t.presentations=[]}))})},e.prototype.openRemote=function(e){h.openModal(this.modalCtrl,g.RemotePage,{pres:e})},e.prototype.addQuestion=function(e){var t=this;p.showPopup({title:"PRESENTATION.QUESTIONORCOMMENTS",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",translate:this.translate,type:"text"},this.alertCtrl,function(n){if(null!=n){t.eventData.sendmessage(0,{text:n,photo:"",type:p.TYPE_MESSAGE,title:e.title,tag:"message question presentation "+t.eventData.event.id,from:t.userData.user}).subscribe(function(e){null==e?p.toast(t.toastCtrl,"MESSAGE.ERRORLIMIT",t.translate):p.toast(t.toastCtrl,"PRESENTATION.QUESTIONADDTOMESSAGE")})}})},e.prototype.addSurvey=function(){h.openModal(this.modalCtrl,v.AddbetsPage,{type:5},function(){})};var t;return e=t=i([s.Component({selector:"page-presentations",template:'\x3c!--\n  Generated template for the PresentationsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="Presentations" help="#">\n    <shifubutton\n      id="cmdAddPresentation"\n      *ngIf=" (userData.user.connexions.length>=10) && (eventData.event.priceToPresent==0 ||\n              eventData.event.pricePerMinute==true || userData.user.jetons[eventData.event.owner_id]>=eventData.event.priceToPresent)"\n      icon="add-circle"\n      (click)="addPresentation()">\n    </shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-lines no-border>\n\n  <tuto position="title"\n        label="Ajouter votre présentation pour vous inscrire à l\'ordre du jour"\n        show="cmdAddPresentation">\n  </tuto>\n\n  <ion-item text-center no-lines *ngIf="(eventData.event.priceToPresent==0 ||\n            eventData.event.pricePerMinute==true ||\n            userData.user.jetons[eventData.event.owner_id]>=eventData.event.priceToPresent) &&\n            userData.user.connexions.length<10">\n    <shifubutton\n      id="cmdAddPresentation2"\n      icon="add-circle"\n      size="0"\n      label="PRESENTATION.ADD"\n      (click)="addPresentation()">\n    </shifubutton>\n\n  </ion-item>\n\n  <shifucard title="LIB.EVENTMASTER"\n             icon="desktop"  tuto="TUTO.EVENTMASTER"\n             (onclick)="events.publish(\'open:widget\',\'presentation\')"\n             *ngIf="userData.user.id==eventData.event.owner_id">\n\n    <shifucheckbox label="PRESENTATION.DONWLOADBEFOREPRES"\n                   [(ngModel)]="eventData.event.canDownloadBeforePresentation"\n                   (onchange)="updateEvent()"></shifucheckbox>\n\n    <shifurange\n      icon="time" (onchange)="updateEvent()"\n      [(ngModel)]="eventData.event.delayBetweenPresentationInMinutes"\n      unite="minutes"\n      label="PRESENTATION.DELAYBETWEENPRESENTATION" min="1" max="60" step="1">\n    </shifurange>\n\n    <shifurange\n      icon="time" (onchange)="updateEvent()"\n      [(ngModel)]="eventData.event.maxPresDuration"\n      unite="minutes"\n      label="PRESENTATION.MAXPRESDURATION" min="2" max="300" step="1">\n    </shifurange>\n\n    <shifurange\n      icon="money" (onchange)="updateEvent()"\n      [(ngModel)]="eventData.event.priceToPresent"\n      unite="icoins"\n      label="PRESENTATION.PRICETOPRESENT" min="0" max="100" step="1">\n    </shifurange>\n\n    <shifucheckbox label="PRESENTATION.PRICEPERMINUTE"\n                   [(ngModel)]="eventData.event.pricePerMinute"\n                   (onchange)="updateEvent()"></shifucheckbox>\n\n\n  </shifucard>\n\n\n  <ion-list no-lines no-border>\n    <div *ngFor="let pres of presentations">\n    <shifucard\n      *ngIf="!pres.ended"\n      [showButton]="pres.canActivate==true"\n      [visible]="eventData.event.opened && (pres.from.id==userData.user.id || pres.active)"\n      [title]="pres.title_complete"\n      name="presentation"\n      label="LIB.START"\n      (onclick)="setCurrentPresentation(pres,true)"\n      >\n\n      <ion-item *ngIf="pres.from.id!=userData.user.id" no-lines>\n        <shifuimageprofil [withname]="true" item-start [user]="pres.from"></shifuimageprofil>\n        <span *ngIf="pres.text!=undefined && pres.text.length>0">\n          <br>{{pres.text}}\n        </span>\n      </ion-item>\n\n      <ion-item *ngIf="pres.from.id==userData.user.id && !pres.active && !pres.inTreatment" no-lines>\n        Vous commencez dans <shifutimer [end]="pres.dtStart"></shifutimer>\n      </ion-item>\n\n\n      <span *ngIf="pres.inTreatment && pres.from.id==userData.user.id">\n          <img src="./assets/img/wait.gif" style="width:15px;display:inline;">&nbsp;Préparation de la présentation\n        </span>\n\n      <ion-item text-center *ngIf="pres.active" style="font-size: large">\n        <img *ngIf="pres.from.id!=userData.user.id"\n             class="image-photo"\n             [src]="pres.pages[pres.page-1]"\n             style="display:inline-block;width:80%;max-width:250px;">\n        <br>\n      </ion-item>\n\n      <ion-item no-lines no-margin>\n          \x3c!--<span *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1 && pres.priority>0">--\x3e\n            \x3c!--{{"LIB.PRIORITY" | translate}}:{{pres.priority}}--\x3e\n          \x3c!--</span>--\x3e\n\n        <ion-buttons item-end>\n          <shifubutton\n            *ngIf="pres.active && pres.from.id==userData.user.id && pres.pages.length>1"\n            label="LIB.REMOTE" [small]="true"\n            icon="calculator"\n            (click)="openRemote(pres)">\n          </shifubutton>\n\n          <shifubutton\n            *ngIf="!pres.active && (eventData.event.Moderators.indexOf(userData.user.id)>-1)"\n            [small]="true"\n            icon="close"\n            [hidewhenclick]="true"\n            (click)="removePres(pres)">\n          </shifubutton>\n\n          <shifubutton\n            *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1 || (pres.from.id!=userData.user.id && eventData.event.canDownloadBeforePresentation)"\n            [small]="true"\n            item-end\n            icon="download"\n            (click)="download(pres)">\n          </shifubutton>\n\n          <span *ngIf="!pres.active && eventData.event.Moderators.indexOf(userData.user.id)>-1 && !pres.inTreatment">\n          <shifubutton\n            [hidewhenclick]="true"\n            [small]="true" icon="arrow-up"\n            (click)="changePriority(pres,-1)">\n          </shifubutton>\n\n          <shifubutton\n            [hidewhenclick]="true"\n            [small]="true" icon="arrow-down"\n            (click)="changePriority(pres,+1)">\n          </shifubutton>\n\n            <shifubutton\n              [small]="true"\n              icon="time"\n              (click)="changeDuration(pres)">\n            </shifubutton>\n\n            <shifubutton\n              [small]="true"\n              icon="help"\n              (click)="addSurvey()">\n            </shifubutton>\n        </span>\n\n          <div *ngIf="pres.active &&  pres.from.id!=userData.user.id">\n\n            \x3c!--L\'organisateur ne peut pas voter, il a suffisament de chose a gérer comme ça--\x3e\n            <shifubutton\n              *ngIf="pres.canVote && userData.user.id!=eventData.event.owner_id"\n              [small]="true"\n              name="btnLike"\n              icon="thumbs-up"\n              (click)="onSetScore(1,pres)">\n            </shifubutton>\n\n            <shifubutton\n              *ngIf="pres.canVote  && userData.user.id!=eventData.event.owner_id"\n              [small]="true"\n              name="btnDislike"\n              icon="thumbs-down"\n              (click)="onSetScore(-1,pres)">\n            </shifubutton>\n\n            <shifubutton\n              [small]="true"\n              name="btnAddQuestion"\n              icon="help"\n              (click)="addQuestion(pres)">\n            </shifubutton>\n          </div>\n\n\n          <shifubutton\n            *ngIf="pres.active && eventData.event.Moderators.indexOf(userData.user.id)>-1"\n            [hidewhenclick]="true"\n            [small]="true"\n            icon="hand"\n            label="Stop"\n            (click)="setCurrentPresentation(pres,false)">\n          </shifubutton>\n        </ion-buttons>\n\n      </ion-item>\n\n    </shifucard>\n\n    <shifucard *ngIf="pres.ended" [title]="pres.title_complete" icon="download" (onclick)="download(pres)">\n\n    <ion-item no-lines>\n      Présentation terminée\n\n      \x3c!--L\'organisateur ne peut pas voter, il a suffisament de chose a gérer comme ça--\x3e\n      <div *ngIf="pres.canVote" style="display: inline-block">\n        <shifubutton\n          [small]="true"\n          name="btnLike"\n          icon="thumbs-up"\n          (click)="onSetScore(1,pres)">\n        </shifubutton>\n\n        <shifubutton\n          [small]="true"\n          name="btnDislike"\n          icon="thumbs-down"\n          (click)="onSetScore(-1,pres)">\n        </shifubutton>\n      </div>\n\n    </ion-item>\n\n\n    </shifucard>\n    </div>\n  </ion-list>\n\n  <ion-item text-center no-lines>\n    {{\'LIB.ENDIN\' | translate}}<shifutimer [server]="eventData.event.serverNow" [end]="eventData.event.dtEnd"></shifutimer>\n  </ion-item>\n\n</ion-content>\n'}),o("design:paramtypes",[r.Events,a.NavController,a.NavParams,r.LoadingController,l.ApiProvider,r.AlertController,r.ModalController,a.ToastController,u.EventDataProvider,d.UserData,m.SettingsProvider,a.ViewController,c.TranslateService])],e)}();t.PresentationsPage=E},194:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(6),u=n(2),c=n(8),d=n(16),p=n(20),h=n(22),f=function(){function e(e,t,n,i,o,s,a,r,l,c,d){this.sanitizer=e,this.navCtrl=t,this.navParams=n,this.alertCtrl=i,this.api=o,this.viewCtrl=s,this.userData=a,this.settings=r,this.toastCtrl=l,this.translate=c,this.platform=d,this.pseudo="",this.from="",this.picture="./assets/img/wait.gif",this.currentCategory="",this.message="",this.index=0,this.female=!1,this.items=[],this.avatars=[],this.size=6,this.notRobot=!1,this.handle=null,this.sel_category="",this.index=u.tirage(20),(this.settings.isLocal||"perso"==this.navParams.get("from"))&&(this.notRobot=!0)}return e.prototype.ionViewDidEnter=function(){var e=this;this.sel_category="figurinepop","pro"==this.settings.ihm&&(null!=this.pseudo&&0!=this.pseudo.length||(this.pseudo="MonPseudo"),this.sel_category="pro"),this.changeCategory({value:this.sel_category}),this.message=this.navParams.get("message"),null!=this.message&&setTimeout(function(){e.message=""},3e3+200*this.message.length),this.random(this.sel_category,function(){2==e.navParams.get("autologin")&&e.anonymousLogin()}),this.size=8},e.prototype.random=function(e,t){var n=this;void 0===t&&(t=null),this.currentCategory=e,"pro"!=e&&this.api.getavatar(e).subscribe(function(e){n.picture=e.url,n.pseudo=e.name,null!=t&&t()})},e.prototype.anonymousLogin=function(){var e=this;"MonPseudo"!=this.pseudo?this.pseudo.length>0&&("pixels"==this.currentCategory?this.gen_avatar(!0,function(){e.viewCtrl.dismiss({picture:e.picture,pseudo:e.pseudo})}):(""==this.picture&&(this.picture=this.items[0].picture),this.picture.hasOwnProperty("changingThisBreaksApplicationSecurity")&&(this.picture=this.picture.changingThisBreaksApplicationSecurity),this.viewCtrl.dismiss({picture:this.picture,pseudo:this.pseudo}))):u.toast(this.toastCtrl,"Vous devez modifier le pseudo pour vous connecter",this.translate)},e.prototype.selAvatar=function(e){this.picture=e.url,null!=e.title&&e.title.length>0&&(this.pseudo=e.title)},e.prototype.changeAvatar=function(e){this.index+e>0&&(this.index+=e*this.size),this.index+this.size>this.avatars.length&&(this.index=this.avatars.length-20),this.index<0&&(this.index=0),this.items=[];for(var t=0;t<Math.min(this.size,this.avatars.length);t++)t+this.index<this.avatars.length&&this.items.push({title:this.avatars[t+this.index][1],picture:this.avatars[t+this.index][2]})},e.prototype.changeCategory=function(e){var t=this;if(this.currentCategory=e.value,"pixels"==e.value){var n=["loulou","riri","fifi","coco","kevin","bryan","gégé"];this.pseudo=n[u.tirage(n.length)],this.change_sexe("Male"),this.gen_avatar(!0)}else this.picture="","pro"==this.currentCategory?this.api.getAvatarsPro(36,this.pseudo).subscribe(function(e){t.avatars=[];e.avatars.split("#;#").forEach(function(e){var n=t.sanitizer.bypassSecurityTrustResourceUrl(e);t.avatars.push(["pro","",n])}),t.index=0,t.changeAvatar(0)}):(this.avatars=[["Waiting","Waiting","../assets/img/waiting.gif"]],this.api.getAvatars(e.value).subscribe(function(e){t.avatars=e.items,t.index=u.tirage(e.items.length-20),t.changeAvatar(0),t.refresh_avatar()}))},e.prototype.gen_avatar=function(e,t){var n=this;void 0===t&&(t=null),this.api.avatargenerator(this.pseudo,this.female,e).subscribe(function(e){null!=e&&(n.picture=e.url),null!=t&&t()})},e.prototype.change_sexe=function(e){this.female=!1,"Female"==e.value&&(this.female=!0),this.gen_avatar(!1)},e.prototype.refresh_avatar=function(){var e=this;null!=this.pseudo&&this.pseudo.indexOf("@gtest.com")>-1&&(this.notRobot=!0),"pixels"!=this.currentCategory&&"pro"!=this.currentCategory||(clearTimeout(this.handle),this.handle=setTimeout(function(){"pixels"==e.currentCategory?e.gen_avatar(!1):e.changeCategory({value:"pro"})},1e3))},e.prototype.resolved=function(e){this.notRobot=!0},e.prototype.openGallery=function(e){Math.max(1,this.index)},i([s.ViewChild("container"),o("design:type",s.ElementRef)],e.prototype,"container",void 0),e=i([s.Component({selector:"page-loginavatar",template:'\x3c!--\n  Generated template for the LoginavatarPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle [menu]="false" [back]="true" title="LOGINAVATAR.TITLE">\n    <shifubutton *ngIf="notRobot && pseudo.length>0" id="cmdSave"\n                 [small]="true" label="LIB.SAVE"\n                 (click)="anonymousLogin()"></shifubutton>\n    <shifubutton id="cmdClose" [small]="true" id="btnClose" icon="close" (click)="this.viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content text-center #container no-padding style="background-size: cover ;vertical-align: middle;background-position:0% 0%;background-repeat:no-repeat;">\n\n  <ion-item *ngIf="message!=null && message.length>0" text-center text-wrap no-lines>{{message | translate}}<br></ion-item>\n\n    <shifubuttongroup\n      no-lines no-margin no-padding\n      id="btnCategory"\n      [exclude]="true"\n      labels="FunkoPop,Emoticons,Pokemon,Pixels,Pro"\n      values="figurinepop,emoji,pokemon,pixels,pro"\n      [default]="sel_category"\n      (onchange)="changeCategory($event)">\n    </shifubuttongroup>\n\n  <ion-item no-padding no-margin no-lines text-center text-wrap\n            style="height:30vh">\n    <img style="width:50%;" [src]="picture" *ngIf="currentCategory==\'pixels\'">\n    <shifugallery *ngIf="currentCategory!=\'pixels\'"\n                  size="19%"\n                  [images]="items"\n                  (onclick)="selAvatar($event)">\n    </shifugallery>\n  </ion-item>\n\n    <ion-item no-lines no-padding no-margin *ngIf="currentCategory!=\'pixels\'" text-center >\n      <shifubutton [small]="true" icon="arrow-dropleft" (click)="changeAvatar(-5)"></shifubutton>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n      <shifubutton [small]="true" icon="arrow-dropright" (click)="changeAvatar(+5)"></shifubutton>\n\n      \x3c!--<ion-icon style="font-size: 50px;" name="arrow-dropleft" color="secondary" (click)="changeAvatar(-5)"></ion-icon>--\x3e\n          \x3c!--&nbsp;&nbsp;&nbsp;--\x3e\n          \x3c!--<ion-icon style="font-size: 50px;" name="arrow-dropright" color="secondary" (click)="changeAvatar(5)"></ion-icon>--\x3e\n    </ion-item>\n\n  <shifubuttongroup\n    *ngIf="currentCategory==\'random\'"\n    [exclude]="true" labels="LIB.MALE,LIB.FEMALE"\n    values="Male,Female"\n    (onchange)="change_sexe($event)">\n  </shifubuttongroup>\n\n  <shifuinput\n    id="txtPseudo"\n    *ngIf="navParams.data.pseudo==true || settings.ihm==\'pro\'" size="20"\n    label="Votre pseudo" [(ngModel)]="pseudo"\n    (onchange)="refresh_avatar()"\n    (onenter)="anonymousLogin()">\n  </shifuinput>\n\n  <ion-item text-center no-lines>\n    <re-captcha\n            style="display:inline-block"\n            *ngIf="notRobot==false"\n            (resolved)="resolved($event)"\n            siteKey="6Lcqr20UAAAAABiUyOK8i2AD52Gvg81YrsJdvxSV">\n    </re-captcha>\n\n    <shifubutton\n            *ngIf="notRobot && pseudo!=null && pseudo.length>0"\n            label="LIB.SAVE"\n            (click)="anonymousLogin()">\n    </shifubutton><br>\n  </ion-item>\n\n</ion-content>\n'}),o("design:paramtypes",[h.DomSanitizer,r.NavController,r.NavParams,r.AlertController,d.ApiProvider,a.ViewController,c.UserData,p.SettingsProvider,a.ToastController,l.TranslateService,a.Platform])],e)}();t.LoginavatarPage=f},2:function(e,t,n){"use strict";function i(){var e={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(t,n,i){return e[n]=void 0!==i?i:""}),e}function o(e){return document.getElementById(e)}function s(e,t){if(void 0===t&&(t=void 0),null!=e){var n=(new Date).getMinutes()+":"+(new Date).getSeconds();0==e.indexOf("!")&&alert(e.substr(1));var s=n+" : "+e;if(console.log(s),"screen"==i().debug){if(null==o("console")){var a=document.createElement("div");a.id="console",a.style.cssText="display:block;position:absolute;left:0;top:0;width:200px;height:200px;z-index:100;backgroundColor:none;opacity:0.5;",document.body.appendChild(a)}o("console").innerHTML=o("console").innerHTML+"<br>"+s}void 0!=t&&null!=t&&console.log(t)}}function a(e){return e*(Math.PI/180)}function r(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!0),void 0==o&&(o=!0);var s=new XMLHttpRequest;0!=e.indexOf("http")&&(e=t.ROOT_API+"/shifumix"+t.VERSION_API+"/"+e),s.open("GET",e,o),s.onreadystatechange=function(){if(4==s.readyState){var e={status:s.status,result:""};404!=s.status&&s.responseText.length>0&&(e.result=0==s.responseText.indexOf("{")?JSON.parse(s.responseText):s.responseText),void 0!=n&&n(e)}else void 0!=i&&i(s)},s.send()}function l(e,t,n,i){if(void 0===t&&(t="en"),void 0===n&&(n="jours"),void 0===i&&(i=null),void 0==e)return"";null==i&&(i=(new Date).getTime());var o=Math.abs(e-i);if(o>864e5){return function(e){var t=e+".0";return Number(t.split(".")[0])}(o/864e5)+" "+n}void 0==t&&(t="fr");var s=new Date(o).toUTCString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1");return s=0==s.indexOf("00:")?s.split(":")[1]+":"+s.split(":")[2]:s.split(":")[0]+"h"+s.split(":")[1]}function u(e,t,n){void 0==e.placeholder&&(e.placeholder=""),void 0==e.cancelButton&&(e.cancelButton="Cancel"),void 0==e.confirmButton&&(e.confirmButton="Ok"),void 0==e.value&&(e.value="''"),void 0==e.subtitle&&(e.subtitle=""),void 0==e.default&&(e.default=""),void 0==e.type&&(e.type="text"),void 0!=e.translate&&(e.cancelButton=e.translate.instant(e.cancelButton),e.confirmButton=e.translate.instant(e.confirmButton),e.title=e.translate.instant(e.title),e.hasOwnProperty("placeholder")&&e.placeholder.length>0&&(e.placeholder=e.translate.instant(e.placeholder)));t.create({title:e.title,subTitle:e.subtitle,inputs:[{value:e.default,type:e.type,name:"value",placeholder:e.placeholder}],buttons:[{text:e.cancelButton,role:"cancel",handler:function(e){n(null)}},{text:e.confirmButton,handler:function(e){n(e.value)}}]}).present()}function c(e,t,n,i,o,s){if(void 0===o&&(o=null),void 0===s&&(s=!1),s)i();else{e=n.instant(e);t.create({title:"Confirm",message:e,buttons:[{text:"Cancel",role:"cancel",handler:function(){null!=o&&o()}},{text:"Ok",handler:function(){i()}}]}).present()}}function d(e,t,n,i,o,s,a,r){void 0===s&&(s=1);try{var l=document.createElement("canvas"),u=new Image;u.crossOrigin="anonymous",u.onload=function(){l.width=i,l.height=o;l.getContext("2d").drawImage(u,t,n,i,o,0,0,i,o);var e=l.toDataURL("image/jpeg",s);a(e)},u.src=e}catch(e){null!=r&&r(e)}}function p(e,t,n,i,o,s){if(void 0===n&&(n=null),void 0===i&&(i=void 0),void 0===o&&(o="bottom"),void 0===s&&(s=3),null!=e&&null!=t){t.indexOf(".")>0&&null!=n&&(t=n.instant(t));e.create({message:t,duration:1e3*s,position:o}).present(),void 0!=i&&i()}}function h(e){return Math.trunc(Math.random()*e)}function f(e){return void 0===e&&(e=t.DOMAIN_SERVER),e.indexOf("localhost")>-1?0:e.indexOf("v0-dot")>-1?.5:1}function m(e,t,n){return void 0===t&&(t="_blank"),void 0===n&&(n=""),void 0==n&&(n="location=no, titlebar=no, menubar=no, status=no, scrollbars=no, menubar=no, left=50, top=50, width=400, height=600, center=yes"),void 0==t&&(t="_blank"),window.open(e,t,n)}function g(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function v(e){return g(e[0],e[1])+g(e[1],e[2])==g(e[0],e[2])?[e[0],e[2]]:e}function E(e,t,n,i){if(0==t)i(e);else{var o=new Image;o.onload=function(){var e=document.createElement("canvas");e.width=o.height,e.height=o.width,function(e,t,n){var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.save(),i.translate(e.width/2,e.height/2),i.rotate(n*Math.PI/180),i.drawImage(t,-t.width/2,-t.height/2),i.restore()}(e,this,t);var s=e.toDataURL("image/jpeg",n);i(s)},o.src=e}}function b(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=""),e?t:n}Object.defineProperty(t,"__esModule",{value:!0});n(320);t.REFRESH_INTERVAL=10,t.IMAGE_PROXY="https://images.weserv.nl/?url=/",t.DELAY_TO_REFRESH=400,t.ADMIN_PASSWORD="hh4271",t.ORDER_BETS="bets",t.ORDER_CHARTS="charts",t.ORDER_TWEET="tweet",t.ORDER_CHARTSCREDIT="charts_credit",t.ORDER_USER="user",t.ORDER_BOARD="board",t.ORDER_ALERT="alert",t.ORDER_PLAYLIST="playlist",t.ORDER_SCREEN="screen",t.ORDER_COMMAND="command",t.ORDER_EVENT="event",t.ORDER_STOPREMOTEPLAYER="stopremoteplayer",t.ORDER_PLAYREMOTEPLAYER="playremoteplayer",t.ORDER_PHOTO="photo",t.ORDER_SANITY="sanity",t.ORDER_MESSAGE="message",t.ALL_ORDER=["presentation","user","screen","charts",t.ORDER_PLAYLIST,"sanity","tweet","music",t.ORDER_EVENT,t.ORDER_PHOTO,"command",t.ORDER_MESSAGE,"bets"],t.TYPE_MESSAGE=1,t.TYPE_PHOTO=0,t.TYPE_VIDEO=2,t.TYPE_SONG=3,t.TYPE_BET=4,t.TYPE_SONDAGE=5,t.TYPE_QUESTION=9,t.TAG_MESSAGE="_message",t.TAG_PHOTO="_photo",t.INVITE_GENERAL=1,t.INVITE_BET=4,t.INVITE_SURVEY=5,t.INVITE_PHOTO=2,t.INVITE_PLAYLIST=3,t.PROFIL_PERSO=0,t.PROFIL_PROPRIVE=1,t.PROFIL_PROPUBLIC=4,t.PROFIL_ADMIN=10,t.MUSICSERVER_SPOTIFY=0,t.MUSICSERVER_DEEZER=1,t.MUSICSERVER_LOCAL=2,t.MUSICSERVER_YOUTUBE=3,t.MUSICSERVER_PERSO=4,t.email=null,t.user=null,t.from=null,t.myevent=null,t.CONFIG=n(322),t.DOMAIN_APPLI=window.location.origin+window.location.pathname.substr(0,window.location.pathname.length-1),t.DOMAIN_SERVER="https://"+t.CONFIG.Server.project_id+"."+t.CONFIG.Server.domain,t.SOCKET_SERVER="wss://localhost:4567",t.VERSION_API=t.CONFIG.Server.api.version,t.ROOT_API=t.DOMAIN_SERVER+"/_ah/api",t.API_NAME=t.CONFIG.Server.api.name;t.SPOTIFY_SERVER=0,t.DEEZER_SERVER=1,t.LOCAL_SERVER=2,t.YOUTUBE_SERVER=3,t.setServer=function(e){t.DOMAIN_APPLI=window.location.origin+window.location.pathname.substr(0,window.location.pathname.length-1),"local"==e&&(t.DOMAIN_SERVER="http://localhost:8080"),"beta"==e&&(t.DOMAIN_SERVER="https://v0-dot-shifumixweb.appspot.com:443"),t.ROOT_API=t.DOMAIN_SERVER+"/_ah/api"},t.getCGU=function(){},t.extract=function(e,t,n){var i=e.indexOf(t)+t.length,o=e.length;return i<t.length&&(i=0),n.length>0&&-1==(o=e.indexOf(n,i))?"":e.substring(i,o)},t.getParam=i,t.$=o,t.$$=s,t.base64ToArrayBuffer=function(e){e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var t=atob(e),n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i.buffer},t.convertActivityToDestPage=function(e){return void 0===e&&(e=null),"music"==e?"HomePage":"message"==e?"MessagePage":"presentation"==e?"PresentationPage":"photo"==e?"PhotoPage":"bets"==e||"survey"==e||"loterie"==e?"BetsPage":"ChartsPage"},t.subscribe=function(e,n,i){void 0===i&&(i=t.DELAY_TO_REFRESH),n.events.subscribe(e,function(){s("Appel de refresh pour "+e),null==n.handleRefresh&&(n.handleRefresh={}),clearTimeout(n.handleRefresh),n.handleRefresh=setTimeout(function(){n.refresh()},i)})},t.api=function(e,n,i){return void 0===i&&(i=!0),i&&(n=encodeURI(n)),t.ROOT_API+"/"+t.API_NAME+"/"+t.VERSION_API+"/"+e+"?"+n},t.httpGet=r,t.getDelay=l;t._copy=function(e){return Object.assign({},e)},t.transfert=function(e,t,n){if(void 0===n&&(n=!0),void 0==e)return null;if(void 0==t)t=JSON.parse(JSON.stringify(e));else{for(i in e)t[i]=JSON.parse(JSON.stringify(e[i]));if(n)for(var i in t)e.hasOwnProperty(i)||delete t[i]}return t},t.join=function(e,t){var n="";return e.forEach(function(e){n+=e+t}),n.substring(0,n.length-1)};t.showPopup=u,t.contain=function(e,t){return null!=e&&e.forEach(function(e){if(e.id===t.id)return!0}),!1},t.loading=function(e,t,n){if(void 0===t&&(t="Please wait..."),void 0===n&&(n=60),null!=e.translate&&(t=e.translate.instant(t)),void 0==e.loadingCtrl)throw"Erreur:loadingCtrl not defined";var i=e.loadingCtrl.create({content:t});return i.present(),n>0&&setTimeout(function(){i.dismiss()},1e3*n),i},t.showConfirm=c,t.resizeBase64Img=function(e,t,n,i){null!=e&&""!=e||(s("Probleme d'image vide"),i());var o=document.createElement("canvas"),a=new Image;a.onload=function(){var s=1;if(null!=t&&(s=t/Math.max(a.width,a.height)),s<=1){o.width=a.width*s,o.height=a.height*s,o.getContext("2d").drawImage(a,0,0,o.width,o.height);var r=o.toDataURL("image/jpeg",n)}else r=e;i(r)},a.src=e},t.cropToSquare=function(e,t,n){void 0===t&&(t=1);var i=new Image;i.onload=function(){var i=Math.min(this.width,this.height);d(e,(this.width-i)/2,(this.height-i)/2,i,i,t,n,null)},i.src=e},t.cropBase64Img=d,t.toast=p,t.hashCode=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.getQRCode=function(e,t,n,i,o){o(document.createElement("div").getElementsByTagName("canvas")[0].toDataURL("image/jpeg",.5),"",i)},t.tirage=h,t.tirageString=function(e,t){if(void 0===t&&(t=","),null==e)return null;var n=e.split(t).length;return e.split(t)[h(n)]},t.openMusicPlayer=function(e,n,i){window,window;var o="MusicPlayer.html";e.musicServer==t.MUSICSERVER_YOUTUBE&&(o="widgetVideo.html");var s=t.DOMAIN_SERVER+"/widgets/"+o+"?event="+e.id+"&sc="+n+"&lang="+i;s=s.replace("https","http"),e.musicServer==t.DEEZER_SERVER&&(s+="&filter=deezer");var a=this.openWindow(s,"_blank","titlebar=no,status=no,height=500,width=430,menubar=no");return a.moveTo(0,0),a},t.getEnv=f,t.isLocal=function(){return 0==f()},t.getAllServices=function(e,n,i,o){if(void 0===n&&(n=""),void 0===i&&(i=0),void 0===o&&(o=1),null==e)return[];var s=[];e.services.forEach(function(e){void 0==e.description&&(e.description=e.token.toUpperCase()+".DESCRIPTION"),void 0==e.version&&(e.version=0),void 0==e.minLevel&&(e.minLevel=0),e.text=e.name,e.version>=o&&i>=e.minLevel&&(0==f()||-1==e.name.indexOf("local"))&&s.push(e)});var a=[];void 0==n&&(n="");var r=n.split(",");return s.forEach(function(e){-1!=e.name.indexOf("preprod")&&-1==t.DOMAIN_SERVER.indexOf("v0-dot")||o>=e.version&&(""===n||r.indexOf(e.token)>-1)&&(f()>-1&&e.name.indexOf("local")>-1||-1==e.name.indexOf("local"))&&a.push(e)}),a};t.openGeneral=function(e,n){return new Promise(function(i,o){if(null!=n&&void 0!=n.accessTokens&&null!=n.accessTokens[e])i(n.id);else{var a=t.DOMAIN_SERVER+"/connectTo?user="+n.id+"&service="+e;s("ouverture de "+a),m(a,"Login","menubar=0,status=0"),window.addEventListener("message",function(e){e.origin!==a.split("/connect")[0]&&-1==e.origin.indexOf("shifumixweb")?o():i(e.data)},!1)}})},t.showUser=function(e,t){e.navCtrl.push("public_profil",{user:t.id})},t.openModal=function(e,t,n,i){void 0===n&&(n={}),void 0===i&&(i=null);var o=e.create(t,n);o.onDidDismiss(function(e){null!=i&&i(e)}),o.present()},t.openHelp=function(e,t){void 0===t&&(t="fr");var n="https://shifumix.com/faq.html",i=null;if(0==e.indexOf("#")){e=e.substr(1);var o={homepage:"playlist",addloteriepage:"organiser_tombola",addeventpage:"creer_un_evenement",screenspage:"afficher_iwall",loginpage:"connexion_shifumix",addbetspage:"publier_sondages",oldeventspage:"acceder_evenement_termine",login_avatar:"login_avatar",betspage:"gameList",preparecommandpage:"addMenu",searchpage:"playlistAdd",closed_eventpage:"eventClosing",invitepage:"inviter_participants",widgetpage:"iWall",seleventpage:"event"};i=o.hasOwnProperty(e)?n+"#"+o[e.toLowerCase()]:n+"#"+e.toLowerCase()}else i=0!=e.indexOf("http")?n+"#"+e+"?lang="+t:e+"?lang="+t;m(i,"help","")},t.openWindow=m,t.onCopy=function(e,t){p(e,"WIDGET.URLINCLIPBOARD",t)},t.createSong=function(e,t,n){var i={};return i.title=e.title.replace('"',"").replace('"',"").replace('"',""),i.from=t,i.type=3,i.shortTitle=i.title,i.idEvent=n.id,i.origin=e.origin,i.text=e.text,i.author=e.author,i.picture=e.picture,i.computer=e.computer,i.dtPlay=null,i.Id=n.id+"_"+e.text,i.duration=e.duration,i.playlist="Search",i.tag=i.playlist+" "+i.title+" "+i.author,i},t.preparePlaylist=function(e,t){for(var n=[],i=[],o=0;o<e.length;o++){var s=e[o];-1==i.indexOf(s.playlist)&&i.push(s.playlist),s.order=o,s.id=s.text,s.author=s.artist,s.title=s.title.replace(new RegExp("'","g")," "),n.push(s)}t(n,i)};t.createPhoto=function(e,n,i,o){void 0===i&&(i=""),void 0===o&&(o="");var a={text:i,tags:[],from:e,legend:"",format:"jpeg",anonymous:e.anonymous,photo:n,type:t.TYPE_PHOTO};return""==n&&s("Probleme de contenu sur la photo"),a.tags=void 0==o?[]:o.split(","),a},t.isFavorite=function(e,t){return!!(e.hasOwnProperty("favoriteWidget")&&e.favoriteWidget.indexOf(t.id)>-1)},t.distance=function(e,t,n,i){var o=a(n-e),s=a(i-t),r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(a(e))*Math.cos(a(n))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},t.distancePlane=g,t.reduce=v,t.reduce_list=function(e){var t=[];if(e.length<3)return e;for(var n=0;n<e.length-3;n+=3)v([e[n],e[n+1],e[n+2]]).forEach(function(e){t.push(e)});return e.length-n>1&&e.slice(n).forEach(function(e){t.push(e)}),t},t.renderDraw=function(e,t){var n=e.getContext("2d");t.forEach(function(t){if("C"==t.command&&n.clearRect(0,0,e.width,e.height),t.hasOwnProperty("points")){n.beginPath(),n.moveTo(t.points[0].x,t.points[0].y),n.strokeStyle=t.color,n.lineWidth=t.pencil+"px";for(var i=1;i<t.points.length;i++){var o=t.points[i];n.lineTo(o.x,o.y)}n.stroke()}})},t.scrollElt=function(e,t){e.scrollTo(0,document.getElementById(t).offsetTop,1e3)},t.getDelayInDays=function(e){return Math.round(((new Date).getTime()-e)/864e5)},t.getDelayInMinutes=function(e){return Math.round((e-(new Date).getTime())/6e4)},t.rotate=E,t.geocode=function(e,t,n){(new e.Geocoder).geocode({address:t},function(e){1==e.length?n({lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()}):n()}),n()},t.reverse_geocode=function(e,t,n,i){var o=new e.LatLng(t,n);(new e.Geocoder).geocode({location:o},function(t,n){i(n===e.GeocoderStatus.OK&&t[0]?t[0].formatted_address:"")})},t.encode=function(e){var t=JSON.stringify(e);return btoa(t.normalize())},t.restart=function(){document.location.reload()},t.iif=b,t.buildTabs=function(e,t,n){void 0===n&&(n="");var i=[];return t.activities.indexOf("music")>-1&&i.push({name:"music",tabTitle:"LIB.MUSIC",root:"HomePage",tabUrl:"music",tabIcon:"musical-notes"}),t.activities.indexOf("photo")>-1&&i.push({name:"photo",tabTitle:"Photos",root:"PhotosPage",tabUrl:"music",tabIcon:"camera"}),t.activities.indexOf("command")>-1&&(""!=t.laCarte||t.Preparators.indexOf(e.id)>-1)&&i.push({name:"command",tabTitle:"LIB.COMMAND",root:"Command",tabUrl:"commands",tabIcon:"beer"}),t.activities.indexOf("message")>-1&&i.push({name:"message",tabTitle:"Messages",root:"MessagesPage",tabUrl:"messages",tabIcon:"chatbubbles"}),(t.activities.indexOf("loterie")>-1||t.activities.indexOf("bets")>-1||t.activities.indexOf("survey")>-1)&&i.push({name:"bet",tabTitle:b("pro"==n,"LIB.SURVEY","LIB.GAMES"),root:"BetsPage",tabUrl:"games",tabIcon:"baseball"}),t.activities.indexOf("presentation")>-1&&i.push({name:"presentation",tabTitle:"LIB.PRESENTATION",root:"PresentationsPage",tabUrl:"presentations",tabIcon:"albums"}),i.push({name:"charts",tabTitle:"People",root:"ChartsPage",tabUrl:"charts",tabIcon:"people"}),i.push({name:"story",tabTitle:"Story",root:"StoryPage",tabUrl:"story",tabIcon:"book"}),i},t.autoRotate=function(e,t,n){var i=new Image;i.onload=function(){EXIF.getData(this,function(){var i=0;switch(EXIF.getAllTags(this).Orientation){case 8:i=-90;break;case 3:i=180;break;case 6:i=90}E(e,i,t,n)})},i.src=e},t.askforaddscreen=function(e,t,n){void 0===t&&(t=null),u({title:"PROFIL.ENTERCODE",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:e.translate},e.alertCtrl,function(e){null!=e&&n(e,t)})},t.notif=function(e,t,n){null!=e&&"granted"==e.permission&&(null!=n&&(t.body=n.instant(t.body),t.title=n.instant(t.title)),e.create(t.title,t).subscribe(function(){},function(){}))},t.getDate=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t="FR-fr"),void 0===n&&(n=!1),null==e&&(e=(new Date).getTime());var i="",o=new Date;return o.setTime(e),i=n?(i=o.toLocaleTimeString(t)).split(":")[0]+"h"+i.split(":")[1]:o.toLocaleString(t)},t.closeEvent=function(e,t,n){void 0===n&&(n=null),c("LIB.EVENTCLOSING",e.alertCtrl,e.translate,function(){e.api.closeevent(e.userData.user.id,t).subscribe(function(t){null!=t&&(e.userData.user=t,p(e.toastCtrl,"End in "+l(Number(e.userData.user.message))),null!=n&&n())})})}},20:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(16),l=n(2),u=function(){function e(e,t){this.platform=e,this.api=t,this.app_name=l.CONFIG.Client.name,this.app_version=l.CONFIG.version,this.oauth_services=l.CONFIG.Client.oauth_services,this.version=0,this.lastSearchImage="#",this.lastImages=[],this.type_invite="",this.musicChartsItems=null,this.code=null,this.ihm="perso",this.autologin=0,this.connexion="",this.login_email="",this.lastyear="",this.lastcatalogue="",this.lastquery="",this.dest="",this.logo=l.CONFIG.Client.logo,this.isLocal=!1,this.about_url=l.CONFIG.Client.AboutPage,this.forum_url=l.CONFIG.Client.Support.forum,this.feedback_url=l.CONFIG.Client.Support.feedback,this.blog_url=l.CONFIG.Client.Support.blog,this.theme="",this.services=null,this.lastRefresh=[],this.version=Number(this.app_version.substr(0,this.app_version.lastIndexOf(".")-1)),this.ihm=e.getQueryParam("ihm"),null==this.ihm&&(this.ihm="perso"),this.connexion=e.getQueryParam("connexion"),null==this.connexion&&(this.connexion=""),this.autologin=e.getQueryParam("autologin"),null==this.autologin&&(this.autologin=0),this.login_email=e.getQueryParam("login_email"),null==this.login_email&&(this.login_email=""),this.theme=e.getQueryParam("theme"),null==this.theme&&(this.theme=""),this.isLocal=l.DOMAIN_APPLI.indexOf("localhost")>-1}return e.prototype.loadtheme=function(){var e=this;this.theme.length>0&&this.api.loadtheme(this.theme).subscribe(function(t){e.logo=t.logo,e.app_name=t.app_name,e.about_url=t.about_url,e.forum_url=t.forum_url,e.feedback_url=t.feedback_url,e.blog_url=t.blog_url})},e.prototype.mustRefresh=function(e,t){return void 0===t&&(t=2),!((new Date).getTime()-this.lastRefresh[e]<t)&&(this.lastRefresh[e]=(new Date).getTime(),!0)},e=i([s.Injectable(),o("design:paramtypes",[a.Platform,r.ApiProvider])],e)}();t.SettingsProvider=u},234:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=234},280:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=280},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLibs=function(){var e=[];return e.push({lang:"en",labels:{"MUSICSERVER.PERSODESCRIPTION":"You are the DJ, you choose the music but you can use the shifumix playlist to be inspired","MUSICSERVER.SPOTIFYDESCRIPTION":"To start the music, run spotify on a device and click on start in the profil screen","MUSICSERVER.DEEZERDESCRIPTION":"Connect a computer to your audio system and open http://player.shifumix.com on it","MUSICSERVER.MULTIPLEDESCRIPTION":"Multiple use Deezer, Youtube and MP3 files (on your Google Drive) as music. Connect a computer to your audio system and open http://player.shifumix.com on it","MUSICSERVER.YOUTUBEDESCRIPTION":"Connect a computer to your audio system and open http://video.shifumix.com on it","PERSO.MUSICSERVER":"What is your musical catalog ?","ADDEVENT.TITLE":"Make your event","ADDEVENT.VISIBLEONMAP":"Public event","ADDEVENT.USEFACEBOOK":"Use facebook as model for your event ?","LIB.ADDRESS":"Address","ADDEVENT.DEFAULTADDRESSCHANGE":"Your address has been changed","LIB.DURATION":"Duration","LIB.RANDOM":"Random","LIB.STARTIN":"Start in","LIB.START":"Start","LIB.PERSONS":"People","LIB.VIEW":"View","LIB.CHARTS":"Charts","LIB.WEBLINK":"Image URL","LIB.UPLOAD":"Upload","LIB.UPLOADING":"Uploading","LIB.NOTHING":"Nothing","LIB.FILTER":"Filter","LIB.WIDGET":"iWall","LIB.FAVORITE":"Favorite","LIB.PARTICIPANTS":"presents","LIB.SONG":"song","LIB.BOARD":"Board","LIB.AUTOEVENT":"Simplified Event","LIB.AUTOSCREENEVENT":"Screen Event","LIB.LEGEND":"Legend","LIB.SAVE":"Save","LIB.BEGININ":"Start in","LIB.DESCRIPTION":"Description","LIB.TEASER":"Teaser","LIB.SETTINGS":"Settings","LIB.EVENTSETTINGS":"Event settings","LIB.INVITE":"Invite","LIB.TITLE":"Title","LIB.VALIDATE":"Validate","LIB.CREDITS":"credits","LIB.DEBITS":"debits","LIB.REPUTATION":"reputation","LIB.SCREENCODE":"Screen Code","LIB.MESSAGE":"Message","LIB.LIKE":"like","LIB.CLEAR":"Clear","LIB.UPDATE":"update","LIB.STORY":"Story","LIB.MODERATOR":"Add a new moderator","LIB.ONAIR":"on air","LIB.PREPARATOR":"Preparator","LIB.CASHIER":"Cashier","LIB.EVENTMASTER":"Event Master","LIB.ENDIN":"End in","LIB.EXPERT":"Expert","LIB.HTAG":"HTag","LIB.YOUHAVE":"You have ","LIB.TARIFS":"Tarifs","LIB.ABO":"Subscription","LIB.NEWEVENT":"New event","LIB.ENGAGEMENT":"Commitment","LIB.DAYS":"days","LIB.OLDEVENTS":"Old events","LIB.NEXTEVENTS":"Next events","LIB.TERMINATED":"Terminated","LIB.SCREEN":"Screen","LIB.NOTORIETY":"notoriety","LIB.LOGIN":"Login","LIB.BUILDING":"Building of","LIB.NOW":"Now","LIB.JOIN":"Join","LIB.FORTHISEVENT":"for this event","LIB.CLEARACCOUNT":"Clear account","LIB.TIRAGEDANS":"Tirage dans","LIB.SUBSCRIBE":"Subscribe","LIB.CAGNOTTE":"Start width","LIB.NEXT":"Next","LIB.EVENT":"Event","LIB.EVENTCLOSING":"Event closing ?","LIB.NOTRECOMMENDED":"Not recommended","LIB.CHECKYOUREMAIL":"Check your email","LOGIN.CODESENDED":"A secret code to connect to Shifumix has been send by email","LOGIN.SENDPASSWORD":"Resend my secret code","LOGIN.CONNEXIONINVITATION":"Connect you with ...","SELEVENT.CREATE":"New Event","SELEVENT.NOEVENT":"Create your Event !","SELEVENT.WELCOME":"Hello, Find an event !","SELEVENT.LOCALIZING":"Localization","SELEVENT.CMDLOCALIZE":"Fix the map on your position","SELEVENT.CMDSHOWEVENT":"Show events for you","SELEVENT.CMDINVITE":"Create link to follow the events of this zone","PERSO.NOSERVICE":"No service","OLDEVENTS.EVENTCODETITLE":"Event code ?","OLDEVENTS.NOEVENTFORTHISCODE":"No event for this code","OLDEVENTS.JOINBYCODE":"By code","INVITE.SENDTOME":"View on my mail","PERSO.GIVEYOURPLATFORM":"Which is your service to listen music ?","ADDEVENT.START":"Start","SELEVENT.TOOFAR":"You are too far for this event","SELEVENT.USELASTPOSITION":"No geolocalisation, Last position used","SELEVENT.ENTERYOURCODE":"Enter your code","SELEVENT.PRIVATE":"Private event. Enter the password","PROFIL.PLAYER":"To play the playlist on your audio system","PROFIL.GALLERY":"Connect this computer to a public display","PROFIL.SLIDESHOW":"Connect this computer to a public display","PROFIL.PHOTOSHOW":"Photos animation","PROFIL.CHARTSSCORE":"See the charts in notoriety","PROFIL.RESET_SECRETCODE":"Reset my code","PROFIL.CHARTSCREDIT":"See the charts in money","PROFIL.LOC_QUERY":"Text to ask localisation","PROFIL.PROMOTION":"Inscription screen","PROFIL.BETSURVEY":"Bet and Survey screen","ADDEVENT.LABELSONG":"songs","ADDEVENT.FINDFLYER":"Images for your flyer","SURVEY.SHARE":"Survey / Bet shared","HOME.ADDSONGONLYBYOWNER":"Add song only by moderator","HOME.ADDSONGONLYBYCHARTS":"Add song only from charts","HOME.ADDSONG":"Track","LIB.DOWNLOAD":"Download","PHOTO.DELETED":"Photo deleted","PHOTO.DELETING":"Delete on going","PHOTO.PREPAREPHOTO":"Preparing ...","PHOTO.KEYWORDSEARCH":"#Htag to find image","PHOTO.LABELMESSAGE":"Enter your message","ADDEVENT.VISIBLE":"Event visible at","ADDEVENT.VISIBILITY":"Event's Visibility","ADDEVENT.SONGSBYDEFAULT":"Start playlist with ","ADDEVENT.WELCOMESCREEN":"Welcome Page","ADDEVENT.WELCOMEPICTURE":"Welcome Picture","ADDEVENT.WELCOMEDURATION":"Duration for the welcome page","ADDEVENT.BEGININ":"Begining","LIB.MYEVENTS":"My events","BETS.NEEDVALIDATIONBEFORE":"its game wait your validation.","SELEVENT.EVENTS":"Events on map","ADDEVENT.CHANGETEMPLATE":"Image","BOARD.SENDPHOTO":"Photos","SELEVENT.NOTENOUGHTSCORE":"Not enought score to create event","SELEVENT.DEMOEVENT":"Evenement de démonstration en construction","SELEVENT.FACEBOOKPAGES":"Your facebook pages","PROFIL.CLOSE_EVENT":"Close This Event","PROFIL.ANONYMOUS":"Anonymous","PROFIL.CHANGE_PLAYERTYPE":"Music platform","PHOTO.TAKEPICTURE":"Take a picture","BETS.DELETE":"Pari deleted","BETS.VOTESRESTANT":"votes available","BETS.GAIN":"Gain between","ADDEVENT.MAXGUEST":"Max guest","ADDEVENT.CGU":"Conditions of use","LIB.SIGNATURE":"Accept","LIB.NEXTSLIDE":"Next slide","ADDEVENT.FLYERPREVIEW":"Flyer preview","ADDEVENT.ACTIVITIES":"Activities","INVITE.MAIL":"Mail address of the person to invite","ADDEVENT.DESCRIPTION":"Teaser of your event","ADDEVENT.WEBSITE":"Web site of your event","ADDEVENT.CHOOSEFILE":"Select an image file","ADDEVENT.PLAYLISTLIMIT":"Playlist size","ADDBET.FORCEUSER":"Force user to answer","ADDEVENT.PLAYLISTLIMITBYUSER":"Playlist limit by user","ADDEVENT.PREPLAYLISTLIMIT":"Pre-playlist size","ADDEVENT.MINDISTANCE":"Min distance to enter","BETS.GAINS":"You can win ","WIDGET.CATEGORIES":"Music,Photos,Messages,Bets,Surveys,Tombola,Orders,Others","WIDGET.CATEGORIESFILTER":"Music,Photos,Messages,Bets,Survey,People,Presentation,Commands","BETS.MESSAGEMISE":"Amount of your bet until ","BETS.BETCLOSED":"Sorry ! the bet is closed now","IMAGECREATOR.NOIMAGE":"No image, try another query","PHOTO.ADDPHOTOONLYBYOWNER":"Add photo only by moderators","ADDBETS.TITLE":"Title","OLDEVENTS.BESTEVENTFORME":"Iterested events","ADDBETS.STARTBET":"Start in ","PRESENTATION.PRICEPERMINUTE":"Price per minute","PRESENTATION.MAXPRESDURATION":"Max presentation duration","LOTERIE.BUYERS":"%1 gamer","SELEVENT.LOGOUT":"Change profil","SELEVENT.TITREPROFIL":"Your profil","SELEVENT.TITLE":"Find events","SELEVENT.NOTSTART":"Event not opened","SELEVENT.FACEBOOKEVENTS":"Your facebook events & places","INVITE.COPY":"Copy the link","PERSO.QUERYAVATAR":"Type of avatar ?","PERSO.CHOOSEAVATAR":"Choose your new avatar","LIB.FOLLOWERS":"Followers","MESSAGE.ENTERDELAY":"Delay to show the message","MESSAGES.LIMITBYUSER":"Fix message limit","MESSAGE.SCHEDULEDMESSAGE":"Scheduled messages","LIB.LOTERIE":"Lotery","INVITE.PERSONAL":"Personal","INVITE.DEST":"Email to invited","INVITE.SHARETITLE":"Invite your friends and followers","INVITE.SENDINVITATION":"Share by mail","SELEVENT.LOCALISE":"Find me","INVITE.SEND":"Send","PHOTO.DOWNLOAD":"Photos download","ADDEVENT.APARTIRDE":"Start time","INVITE.CANCEL":"probleme to invite","SELEVENT.MYLASTEVENTS":"My last events","WIDGET.DESCRIPTION":"iWall description (beginning by 'a', 'an', 'the')","WIDGET.CODE":"HTML code and javascript","PRESENTATION.PRICETOPRESENT":"iCoin to present","INVITE.YOURSELF":"you can't invite yourself","INVITE.FOLLOWERS":"Invite my followers","INVITE.CONFIRM":" receive invite in 1 minutes","INVITE.FRIENDSTOINVITE":"Contacts","INVITE.VIAFACEBOOK":"Send or share the event link on facebook","ADDEVENT.MINCREDIT":"Min. credits","ADDEVENT.MINSCORE":"Min. notoriety","SEARCH.WAITING":"Searching","SEARCH.CONFIRMADD":" songs added","SEARCH.ADDAUTO":"Auto","PERSO.RAZUSER":"You want delete your account from our database. It's irreversible. If you're sure, write 'yes'","ERROR.SPOTIFYCONFIG":"You must refresh the Spotify service","ERROR.NEEDSPOTIFYPREMIUMACCOUNT":"You need a spotify premium account to use spotify catalog","ERROR.DEEZERCONFIG":"You must refresh the Deezer service","PHOTO.WITHMESSAGE":"Photo with message","ADDEVENT.HTAG":"Twitter hTAG","CLOSEDEVENT.USEASMODEL":"Use it as model","PROFIL.DELPHOTO":"Block","PREPARE.NEWCARTE":"New menu","PROFIL.ONLYPLAYLIST":"My playlist only","PROFIL.VALIDATE":"Allow","PROFIL.BLACKLIST":"Blacklist","PROFIL.QUIT_EVENT":"Leave","PROFIL.STARTNEXT_EVENT":"Start","BETS.GIVESOMESCOINBEFORECREATEBETS":"No people can play to your bet because of iCoin.","WIDGETSTORE.SEARCH":"iWall name","PERSO.CHECKEVENT":"Check event","PROFIL.SEARCHSOURCE":"Search source","PERSO.EMAIL":"Your email","PROFIL.GENERAL":"This plugin show any news in the event","PROFIL.LINKTOWIDGET":"iWall","PROFIL.PASSTOPREMIUM":"Premium Event","MUSICSERVER.TITLE":"Music server","PROFIL.ENTERCODE":"iWall code (6 digits)","PROFIL.CONFIRMPASSTOPREMIUM":"Pass to premium, Are you sure ?","PROFIL.PLAYLIST":"Share the current playlist on a screen","PROFIL.VIDEOS":"Show the video playlist of your event","PROFIL.NEEDTOBECLOSE":"Attendees need to be close","PHOTO.ENTERMESSAGE":"Enter a comment","PHOTO.SENDED":"Photo sended","PHOTO.NOTSENDED":"Photo not sended","ERROR.BADPASSWORD":"Bad password","ADDBETS.NEWOPTION":"New choice","ADDBETS.NBVOTE":"Votes by user","ADDBETS.ENDBET":"Duration","ADDEVENT.INSTANTPARTY":"Full party","ADDEVENT.EVENTDESCRIPTION":"Description of your event","ADDEVENT.INSTANTBET":"Bets","ADDEVENT.INSTANTSURVEY":"Survey","ADDEVENT.INSTANTTITLE":"Create instant event","ADDEVENT.USEMODELS":"Other templates","OLDEVENTS.PARTICIPATEDEVENT":"Participated events","ADDEVENT.SETTINGS":"Advanced settings","ADDEVENT.SETDATES":"Start and duration","ADDBET.CAGNOTTE":"Start bet with","ADDBET.PUBLISHING":"Bet/survey online","ERROR.SONGALLREADYPLAYED":"Song already played","ADDBET.MINAMOUNT":"minimum bet at","INVITE.CONTACTPROVIDER":"Contacts provider","WIDGET.COPYCODE":"Copy the code","WIDGET.TITLE":"Titre du iWall","WIDGET.PERSO":"iWall personnalisation","ADDBETS.DESCRIPTION":"Description (optionnal)","ADDEVENT.NEEDLOC":"You must set a position for the event","PRESENTATION.DELAYBETWEENPRESENTATION":"Delay between two presentation","ADDEVENT.NEEDVALIDATE":"Content need moderation","ADDEVENT.ACT_MUSIC":"Music playlist","ADDEVENT.ACT_MESSAGE":"Public messages","ADDEVENT.ACT_PRESENTATION":"Shared presentation","ADDEVENT.ACT_COMMAND":"Phone orders (experimental)","ADDEVENT.ACT_BOARD":"Social board (experimental)","ADDEVENT.ACT_LOTERIE":"Loterie / Tombola (experimental)","ADDEVENT.INSTANTPHOTOPARTY":"Photos party","ADDEVENT.ACT_PHOTO":"Photo sharing","ADDEVENT.ADDRESS":"Address","PROFIL.LINKTOOWNER":"Owner","ADDEVENT.FLYERBUILDING":"Event building ...","PROFIL.LOTERIE":"Show your tombola","ADDEVENT.ACT_BETS":"Bets (expérimental)","ADDEVENT.CHANGEDEFAULTADDRESS":"My address","ADDEVENT.ACT_SONDAGE":"Instant survey","HTMLEDITOR.TITLE":"HTML editor","ADDBETS.OPTIONSLIST":"Choices / Options","ERROR.ACTIVESSONGEXCEED":"Waiting for your songs has been played. You can also delete some song in the current playlist","ERROR.PLAYLISTNUMBEREXCEED":"Playlist full","ADDEVENT.LIBPASSWORD":"Password to connect","ADDEVENT.PASSWORD":"Password","WIDGETHOME.ENTERCODE":"Enter this code to connect to your event","ADDEVENT.ADVANCESETTINGS":"Advance settings","WIDGETSTORE.NEWWIDGET_TITLE":"My iWall title","SCREEN.WARNINGNOSCREEN":"No new connexion, are you sure about the code you enter and the internet connexion of the screen ?","WIDGETSTORE.NEWWIDGET_DESCRIPTION":"iWall description","CHARTS.EARNCREDITS":"Earned Credits","BETS.INFOLOTERIE":"You can play for only ","CHARTS.EARNNOTORIETY":"Earned Notoriety","CHARTS.TOTALCREDITS":"Total Credits","PERSO.PROFILCHANGE":"Now, you can see the public events","CHARTS.TOTALNOTORIETY":"General Notoriety","GEN.VIEWNOTAVAILABLE":"Not available for this event","LIB.HELLO":"Hello","LIB.TEAMDISTRIBUTION":"Team distribution","LIB.EVENTCODE":"Event code","LIB.WITHHIM":"with him","LIB.PROFIL":"Profil","LIB.BET":"Bet","LIB.PUBLISHONTWEETER":"Publish on tweeter","LIB.CANCELMODIF":"Cancel your modifications","LIB.DELETE":"Delete","LIB.TEAM":"Team","LIB.SELECT":"Select","LIB.END":"End","LIB.PRINT":"Print","LIB.DAY":"days","LIB.CLOSE":"Close","LIB.MALE":"Male","LIB.FEMALE":"Female","LIB.FINDEVENTS":"Find events","LIB.TRAJET":"Road","LIB.TEAMS":"Teams","LIB.PHOTO":"photo","LIB.FOLLOW":"Receive his next events","LIB.LOGOUT":"Log out","LIB.LOCALISE":"My position","LIB.DATE":"Date","LIB.LOADING":"Loading ...","LIB.SENDING":"Sending ...","LIB.NOTSTARTED":"Not opened","LIB.COMMAND":"Command","LIB.ONGOING":"on going ...","LIB.READY":"Ready","LIB.PREPARE":"Prepare","LIB.PAY":"Pay","LIB.TAKED":"Taken","LIB.QUESTION":"Question","LIB.RESPONS":"Respons","LIB.CANCELED":"Canceled","LIB.PERSON":"Persons","LIB.UNDO":"Undo","LIB.TUTORIAL":"Tutorial","LIB.ABOUT":"About","LIB.PUBLISH":"Publish","LIB.PENDING":"Pending","LIB.MINUTES":"Minutes","LIB.HOUR":"hrs","LIB.EARNED":"You win","LIB.TOTAL":"You have","LIB.USE":"Use","LIB.CATEGORY":"Category","LIB.TOBET":"Bet","LIB.MODELS":"templates","LIB.TAG":"tag","LIB.TEAMSETTINGS":"Organizing your teams","LIB.PRIVACY":"Privacy","LIB.PLAY":"Play","LIB.OK":"Ok","LIB.TEXTINCLIPBOARD":"Text in the clipboard","LIB.YES":"Yes","LIB.NO":"No","LIB.ITEM":"item(s)","LIB.OVER":"is over","LIB.TEMPLATES":"Templates","LIB.MYPROFIL":"My profil","LIB.SUMMARIZE":"Summarize","LIB.PEOPLE":"People","LIB.PRESENTATION":"Presentations","LIB.USERSETTINGSFILE":"Specifics settings","LIB.MUSIC":"Music","LIB.GAMES":"Games","LIB.SURVEYS":"Surveys","LIB.WINNER":"Winner","LIB.PASSWORD":"Password","LIB.CLOSED":"Terminate","LIB.AGREE":"Agree","LIB.DISAGREE":"Disagree","LIB.GENERAL":"General","LIB.TOTHEPLAYLIST":"to the playlist","LIB.RAZ":"Reset my account","LIB.TERMOFUSE":"Term of Use","LIB.NEW":"New","LIB.BUY":"Buy","LIB.INVITATIONPERMANENT":"Standing invitation","LIB.CANCEL":"Cancel","LIB.ADD":"add","LIB.NEWSONDAGEONLINE":"New survey","LIB.SEARCH":"Search","LIB.SURVEY":"Survey","LIB.DATEFORMAT":"MM-dd hh:mm","LIB.SEND":"Send","LIB.DEVELOPERTOKEN":"Developper token","LIB.REMOTE":"Remote","LIB.COMMANDPANEL":"Commands waiting","LIB.ERRORRETRY":"Treatment error, retry please","LIB.ACCOUNT":"Account","LIB.INVITATION":"invitation","LIB.VOTE":"votes","LIB.BY":"by","LIB.COPY":"Copy","LIB.MEETING":"Meeting","LIB.PARTY":"Party","LIB.FROM":"From","LIB.TO":"at","LIB.MODIFY":"Change","LIB.TAGS":"tags","LIB.OPTION":"Option","LIB.EDIT":"Edit","LIB.WHO":"Who ?","LIB.PHONE":"Phone","LIB.NOMUSIC":"No music","LIB.MULTIPLE":"Multiple","LIB.FIRSTNAME":"Firstname","LIB.FAQ":"Frequently questions","LIB.SWALLSTORE":"sWALL store","HOME.CONFIRMDELETE":"Delete this song ?","HOME.ADDSONGAUTO":"Random","LOGIN.WRONGPASSWORD":"Wrong secret code","LOGIN.FASTAUTHENT":"Fast Login (Anonymous)","LOGIN.PSEUDO":"Give a name for this event","HOME.SONGDELETED":"Song deleted","WIDGET.VIEWONSCREEN":"Show on another screen (with a code)","WIDGET.OPENONTHISSCREEN":"Open this iWall on this screen","SELEVENT.BLACKLIST":"Sorry, you can't enter. You are blacklisted by the owner of this event","HOME.FULLPLAYLIST":"Playlist full","ERROR.LOSTNETWORK":"Network not available","HOME.WAITINGFORPLAYER":"Waiting for spotify player","SELEVENT.NOTEXIST":"This event is closed","PRESENTATION.QUESTIONORCOMMENTS":"Your question or commentary","ADDEVENT.TYPEEVENT":"Type of event ?","SEARCH.PLAYLISTANALYSIS":"Loading your playlists","BETS.NOTENOUGHTTIMETOBET":"Not enought delay to make a bet","MESSAGE.POSTIT":"Message zone as post-it","BETS.LOTERIEWAITINGVALIDATE":"Give the gift to a moderator to publish the loterie","BETS.ADDBUTTON":"Make your bet / survey","BETS.CANCELCONFIRMATION":"You don't choose any respons, the bet is canceled ?","ADDEVENT.MINSONGSINPLAYLIST":"Minimal size of the playlist","BETS.SHARED":"Bet shared","ERROR.NOANONYMOUSINPUBLICEVENT":"Public event are not available for anonymous user","BETS.LIMITOPTIONS":"Max options number by Survey/Bet","BETS.YOUWIN":"You win !","BETS.YOULOOSE":"Sorry, you loose","SCREENS.WAITING":"Waiting for screen connexion","BETS.WINLOTERIE":"Ask your present the organizer then press ","BETS.SHARETITLE":"Invite some friends to play with you","ADDEVENT.STARTJETONS":"Give some sCoin as start gift","BETS.WAITPAY":"Waiting for the result to be payed","PERSO.YOUROFFER":"Your offer","ADDEVENT.EVENTADDRESS":"Event address","PROFIL.FOLLOWER":"Follow the organiser","SELEVENT.ASKLOCALISE":"Share my position with Shifumix","PROFIL.CHANGESETTINGS":"Settings of your profil","SELEVENT.CREATEEVENT":"Create your own event","SELEVENT.CLOSE":"Event closed","PERSO.PROFILTITLE":"Type of event","PERSO.HOME":"Your website","ADDBETS.ADDIMAGE":"Add visual to your bet / survey","SELEVENT.JOIN":"to join an event","SELEVENT.CHANGESETTINGS":"Set your Shifumix profil","SELEVENT.AUTOCONNEXION":"Connexion event checking ...","PROFIL.YOURTAGS":"Your tags","CLOSEDEVENT.TITLE":"Closed event","CLOSEDEVENT.CREATEPLAYLIST":"Save the playlist of this event","PROFIL.MCTITLE":"Master of Ceremony","PROFIL.WIDGETTITLE":"iWall to show your event","HOME.ADDSONGAUTOTITLE":"How many songs to add automatically ?","PROFIL.ACCEPTMESSAGEBEFORESTART":"Accept message post before event start","MESSAGE.DELETED":"Message deleted","PROFIL.MULTIPHOTO":"3 last photo","PROFIL.BOARD":"Share the social board","PROFIL.CHARTS_RE":"Share the reputation chart","LIB.PUBLISHONTWITTER":"Share on tweeter","PROFIL.LASTTWEET":"The last message","PROFIL.THREETWEET":"The last 3 messages","PROFIL.SELFSERVICE":"Self-service","CHARTS.GIVEALL":"Presents","LOGIN.WELCOME":"Welcome on Shifumix","CHARTS.GIVETOKENTOALLTITLE":"sCoin bonus to give to all guest","LIB.AMOUNT":"Amount","ADDEVENT.AUTOLOGIN":"No authentification required (auto-login)","PHOTO.WAITFORVALIDATION":"Photo not shared, validation in progress ...","WIDGETSTORE.TITLE":"iWall store","SELEVENT.JETONS":"You have ","ADDEVENT.SETTITLE":"The big party,Brand brainstorm,Beautiful wedding,Brenda's birthday","BETS.EVALUATE":"Evaluate the bet's maker","BETS.RESPONSE":"Response to win","ADDLOTS.STARTBET":"Start play","ADDLOTS.DURATION":"Duration","ADDLOTS.MINCREDIT":"Minimum sCoin to start the toss","ADDLOTS.MAXCREDITS":"Maximum sCoin per person","WIDGETSTORE.SHOWPUBLICWIDGET":"Show public iWall","LIB.MUSICCHARTS":"Music Charts","ADDLOTS.TITLE":"Title of your item","ADDLOTS.DESCRIPTION":"Description of your item","PRESENTATION.CONFIRMEDELETE":"Remove this presentation ?","PROFIL.RUNREMOTEPLAYER":"Play","PROFIL.STOPREMOTEPLAYER":"Stop","PROFIL.NEXTREMOTEPLAYER":"Next","BETS.ADDONLYBYOWNER":"Only moderator can add bets, survey and game","SEARCH.LIBSEARCH":"Title + Artist to find","SEARCH.PLAYLISTLOADING":"Playlists loading","SEARCH.LIBBUTTON":"Search","WIDGET.FAVORITE":"Add to my favorite iWall","WIDGET.PUBLIC":"Public iWall","PRESENTATION.QUESTIONADDTOMESSAGE":"Question added to message queue","LIB.SECRETCODE":"Secret Code (4 digits)","LIB.YOURCLOUD":"Your cloud","WIDGET.CLONE":"Clone","WIDGET.VIEWONPHONE":"See this sWall on a phone","WIDGET.VIEWONFIRSTSCREEN":"Project iWall on my screens","PERSO.HUMEUR":"A little sentence about you","PERSO.CHANGEMUSICSERVER":"Music provider","PRESENTATION.DONWLOADBEFOREPRES":"Accept download before presentation","PERSO.GIVEEMAIL":"Register my email","ERROR.USER_ALREADY_INVITED":"Person already invited","INFO.SCORELOWTOADDSONG":"your score is very low to add new song","INFO.ANONYMOUSLIMIT":"You can't create ou participate to public event (only private event). Your account is available only on this device and if you logout, you lost your account","INFO.ANONYMELOGOUT":"Be careful, if you logout from your account, you lost all your events, profil informations. To avoid this, attach an email to this account","SEARCH.NOSONGSINPLAYLIST":"No playlist available","SEARCH.NOAVAILABLE":"Song not available for this event","SEARCH.GOPLAYLIST":"My playlists","LIB.ADVANCED":"Advanced settings","SELEVENT.EVENTBYCODE":"Event by code","ADDEVENT.BUILDINGYOUREVENT":"Building your event","SEARCH.ADDALL":"Add All","INVITE.EVENTCODE":"Invite event code","WIDGET.IFRAME":"iWall building","WIDGET.URL":"URL to send","WIDGET.PARENTSTYLE":"iWall style inherited from parent","WIDGET.OPEN":"Open","WIDGET.HTML":"Edit","WIDGET.ONLYFORTHISEVENT":"Only for this event","WIDGET.INPOURCENT":"In pourcent","SCREEN.NAMEFORSCREEN":"Name for the screen","WIDGET.URLINCLIPBOARD":"link in the clipboard","WIDGET.NEWEVENT":"New event template","WIDGET.WIDGETLINK":"Paste the iWall link on your website","LOGINAVATAR.TITLE":"Choose an avatar","WIDGET.IFRAMEINCLIPBOARD":"iWall in the clipboard","LIB.WIDTH":"Width","TARIF.NEWUSERS":"New users since last payment","LIB.DISCOUNT":"Discount","LIB.HEIGHT":"Height","LIB.PLAYLIST":"Playlist","LIB.ACTORS":"Actors","LIB.ACTRESS":"Actresses","LIB.EMOJIS":"Emojis","LIB.THEMOVIE":"The movie","LIB.INVERSECOLOR":"Reverse color","LIB.HYPERLINK":"Internet link","PHOTO.SENDING":"Sending ...","LIB.EVENTS":"Events","LIB.MONEY":"€","LIB.TARIF":"Tarif","LIB.PRIORITY":"Priority","TARIF.NEXTPAYMENT":"Next payment","ERROR.NOTENOUGHTREPUTATIONTOJOIN":"Not enought reputation to join this event","LOGIN.WELCOMECREATEEVENT":"Before to create your event, you must login","ADDEVENT.GIVETITLE":"Give a title to your event","ADDEVENT.TOOMANYACTIFEVENT":"Too many events opened","MESSAGE.SENDSCHEDULED":"Send with delay","INVITE.CHECKYOUREMAIL":"Check your email","HTMLEDITOR.WIDGETCODE":"HTML code","BETS.VOTESENDING":"Vote sending","BETS.NORESPONS":"No response available","ADDEVENT.ALLOWANONYMOUS":"Allow anonymous user (not recommended)","BETS.YOUMUSTGIVERESPONS":"Your bet is over. You must give the respons","SELEVENT.ASKFORLOCALISATION":"I can propose some events around you if you share your position with me","ADDBET.PATTERNTITLE":"Pattern title (explicit title)","CLOSEDEVENT.PUSHSONG":"songs proposed","ADDBETS.NBRESPONS":"Number of respons by user","ERROR.ACTIFBETSEXCEED":"Actif bet exceed","ERROR.NOTENOUGHCREDITS":"Not enough credits for this bets","ERROR.NOACTIVEPLAYER":"No active player to play songs","ERROR.NOTENOUGHTSCORE":"Not enough score to add song","COMMAND.READY":"Your command is ready, take it on the bar","COMMAND.READYWITHTABLE":"Your command is ready, waiting for a minute","MESSAGE.LABELLINK":"Link between message","INFO.LASTBET":"Last actif bet","SURVEY.SHARED":"Survey shared","MESSAGES.YOURMESSAGE":"Write your message here","BETS.BETSENDING":"Bet sending","BETS.WINAMOUNT":"You win ","PRESENTATION.ADD":"Add your presentation","ADDEVENT.DEFAULTWIDGET":"Default iWall","ADDEVENT.DEFAULTWIDGETSET":"Default iWall set","CHARTS.BONUSFORNEWCOMER":"Newcomers","CHARTS.GIVETONEWCOMERTITLE":"Amount for the new commers","PUBLICPROFIL.GIVEEMAILTOFOLLOW":"To follow an organiser you must give your email (to receive the invitations)","CHARTS.GIVESCOIN":"iCoins distribution","SCREEN.CHOOSEWIDGET":"Choose a iWall for your screen","BETS.LOSTAMOUNT":"You lose ","ADDEVENT.CHANGEFLYER":"Modify the photo","LIB.SCREENS":"Shared screens","BETS.NOTENOUGHTTIMETOSONG":"Unsufficient time to push another song","BETS.ALIASVALUE":"Value for the alias : ","ADDBETS.PATTERNLISTTITLE":"Bet pattern list","CHARTS.ENDPARTY":"End:","CHARTS.SHOWTOTAL":"See the total","CHARTS.CHOOSEMODERATOR":"Choose a moderator in the list","PERSO.TITLE":"Personnal settings","PROFIL.LABELSERVICETIERS":"Optional services","PERSO.LOCALFILE":"personnal songs","BET.ONLYWHENSTART":"Share is not possible before start","ERROR.RETRY":"Sorry, a little technical issue, please retry ...","DEEZER.DESCRIPTION":"Use your Deezer playlists","SPOTIFY.DESCRIPTION":"Use your Spotify playlists","CALENDAR.DESCRIPTION":"Write yours events in your calendar","CONTACT.DESCRIPTION":"Use your google contacts to send your invitation","DRIVE.DESCRIPTION":"Use your google drive to share your musicv","LINKEDIN.DESCRIPTION":"Use your Linkedln contacts to share your event","FACEBOOK.DESCRIPTION":"Use your Facebook contacts to share your event","SLACK.DESCRIPTION":"Create a slack channel for your event","TWITTER.DESCRIPTION":"Publier vos événements sur twitter","INSTAGRAM.DESCRIPTION":"Publier les photos sur Instragram","PERSO.SCREENS":"Your screens","PHOTOS.INFOVALIDATION":"Your photo will be visible for all participants after validation by the moderators","CHARTS.BYTEAM":"Charts by team","TARIF.CHANGECONFIRMATION":"You are about to change your tarif. Are you sure ?","SELEVENT.FREEEVENTS":"Available events","SELEVENT.GEOLOCFAILED":"Localization failed","PROFIL.TUTO_WELCOMEPICTURE":"Cette photo apparaitra en plein écran pour toutes les personnes qui entrent dans votre événement","PHOTO.TUTOSTRONGMODERATE":"La modération forte des contenus impliquent que l'organisateur et les modérateurs est validés les photos et les sondages avant leur publication","ADDPRESENTATION.TUTO":"Ajouter votre support au format pdf, powerpoint, video ou image pour illustrer votre présentation puis indiquer sa durée","ADDEVENT.TUTOACTIVITIES":"Suivant le type d'événement vous décidez quelles sont les activités proposées aux participants","ADDEVENT.TUTOWELCOMESCREEN":"Lorsqu'un nouveau participant entre dans un événement vous pouvez lui afficher un écran d'acceuil pendant quelques secondes","ADDEVENT.TUTOEXPERT":"Fabriquer un lien pour simplifier la création d'événemenement du même type","ADDEVENT.TUTOVISIBILITY":"Un événement public sera visible sur une carte et accessible à n'importe qui. Un événement privé n'est accessible que par l'usage d'un code et n'est pas visible sur une carte.","PERSO.TUTO_PRIVACY":"Shifumix conserve quelques données privés pour gérer votre compte. Consulter l'aide pour savoir précisément ce qui est utilisé","PERSO.TUTO_BLACKLIST":"Vous pouvez interdire l'accès a vos événements en gérant une liste de comptes interdits","PERSO.TUTOSERVICETIERS":"Pour offrir des services complémentaires, Shifumix se connecte à d'autres services","PERSO.TUTO_OFFER":"Votre offre tarifaire fixe le prix de votre abonnement Shifumix. Elle peut être modifiée ici","OLDEVENTS.TUTO_MYEVENTS":"Vous n'avez participé à aucun événement.","OLDEVENTS.TUTO_FIRSTEVENTS":"Vous avez créé votre premier événement, vous pouvez maintenant inviter des amis et / ou projeter cet événement sur un écran avec les iWall","OLDEVENTS.TUTO_BESTFORME":"Retrouvez ici des événements qui pourrais vous interesser","OLDEVENTS.TUTO_PARTICIPEDEVENTS":"Retrouvez ici les événements auxquels vous avez participés","SCREEN.TUTOADDEVENT":"Pour utiliser votre écran connecté vous devez créer un événement","PHOTO.TUTO_NOSTARTED_EVENT":"Le partage de photo n'est pas disponible tant que l'événement n'est pas commencé","MESSAGES.TUTO_NOSTARTED_EVENT":"Le partage de message n'est pas disponible tant que l'événement n'est pas commencé","LOGINAVATAR.TUTO":"Grâce à l'avatar vous pouvez rester anonyme, mais vous pouvez décider de remplacer par votre photo ou modifier votre pseudo ultérieurement","MESSAGES.TUTO":"Vous pouvez partager des messages, des smiley avec l'ensemble des participants.","SELEVENTS.TUTO_ANONYMOUS":"Bienvenue dans Shifumix.<br><br>Pour rejoindre un événement, saisissez son code<br><br><br>Ou créer votre propre événement","OLDEVENTS.TUTO":"Retrouvez ici vos événements et ceux auxquels vous avez participé","MESSAGES.TUTO_ADVANCED":"Faites glisser les messages sur le côté pour découvrir de nouvelles options : liker, supprimer ...","OLDEVENTS.TUTO_FIRSTEVENT":"Sélectionner le flyer pour accéder aux options de l'événement","PHOTOS.TUTO_NEEDVALIDATION":"Les photos peuvent être validées avant d'être partagée à tous les participants","CUSTOMERCOMMAND.TUTO":"Cliquer directement sur la carte pour sélectionner ce que vous souhaiter commander","CUSTOMERCOMMAND.TUTO_WITHITEM":"Envoyé votre commande en préparation lorsque votre sélection est terminée","CUSTOMERCOMMAND.TUTO_PREPARE":"Vous serez informé ici lorsque votre commande sera prête","IMAGECREATOR.TUTO":"Utiliser les images de votre téléphone ou d'internet (instagram, pixabay ... etc ...)","IMAGECREATOR.TUTOWITHIMAGE":"Vous pouvez zoomer, recadrer ou pivoter l'image avant de l'utiliser dans Shifumix","HTMLEDITOR.TUTO":"Editer directement vos iWall pour les personnaliser au maximum","WIDGET.TUTO":"Vous choisissez ici l'écran sur lequel vous souhaitez projeter votre iWall","WIDGETSTORE.TUTO":"Les iWall permettent de rendre visible vos événements sur n'importe quel écran connecté : smart TV, projecteur, ordinateur","WIDGETSTORE.TUTOFILTER":"Vous pouvez affichez les iWall par activité et restreindre l'affichage à vos propres iWall","SCREENS.TUTO":"Vous pouvez gérer plusieurs écrans publiques votre téléphone, changer le widget qui s'affiche etc ...","PERSO.TUTO_PLATFORM":"Avant de commencer le premier événement, il nécéssaire de choisir le catalogue à utiliser pour passer la musique.","PERSO.TUTO_SCOREANDCREDIT":"Comme souvent pour les services communautaires, Shifumix vous attribue une réputation et des crédits pour les paris","PERSO.TUTO_SERVICES":"Les services aditionnels vous permette d'étendre les possibilités de Shifumix : utiliser vos contacts, accéder à vos playlist, utiliser votre Google drive ...","ADDLOTERIE.TUTO":"Pour créer une loterie, il faut au minimum un titre et une photo. Le lot doit être remis a l'organisateur pour que le jeu commence.","HOME.RUNPLAYER_TUTO":"Pour entendre la playlist, vous devez lancer un player","ADDEVENT.TUTO_DATETIME":"Chaque événement se définie également par une date de début et une date de fin (au délà de laquelle Shifumix quitte automatiquement l'événement)","ADDEVENT.TUTO_SHIFUMIXTEMPLATE":"Utiliser les modèles proposé par Shifumix pour créer en 1 seul click votre événement Shifumix","ADDEVENT.TUTO_MYEVENTS":"Utiliser mes anciens événements comme modèle pour créer des nouveaux","ADDEVENT.TUTO_FLYER":"Vous pouvez afficher choisir d'afficher le texte ou pas et surtout modifier l'image du flyer","ADDEVENT.TUTO_NAMEANDTEASER":"Donner un titre à votre événement. Vous pouvez également ajouter une phrase d'introduction, un teaser","ADDEVENT.TUTO_SETTINGS":"Ici on détermine les activités d'un événement, son caractère privé ou public, sa page d'acceuil","SELEVENT.TUTO":"Hello $1, Sélectionnez un événement sur la carte ou fabriquez en un","ADDEVENT.TUTO_FACEBOOK":"Shifumix peut utiliser vos événements Facebook ou vos pages désignant des lieux comme model pour créer ses propres événements","ADDEVENT.TUTO":"Voici une première version de votre événement, vous pouvez le personnaliser totalement (flyer, date, titre, activitées) depuis cet écran","ADDEVENT.TUTO_VALIDATE":"Toutes les photos devront être validé par vous avant d'être diffusées","HOME.TUTO":"Soyez le premier à ajouter vos titres dans la playlist de l'événement","HOME.TUTOADMIN":"En tant qu'organisateur, vous pouvez ici régler différents paramétres liés à la musique, playlist, etc ...","HOME.TUTOWITHMUSIC":"Voter pour ou contre les titres de la playlist pour changer l'ordre de passage, et ajouter les votres.","HOME.TUTOADVANCED":"En faisant glisser les titres sur le côté, vous accéder rapidement à des informations supplémentaires","LOGIN.TUTO":"Utilisez un de vos profils pour vous connecter","PERSO.TUTO":"Personnalisé votre compte et étendez les possibilitées de Shifumix","SEARCH.TUTO_ONLYOWNERPLAYLIST":"Pour cette événement, vous pouvez choisir vos titres parmis la playlist de l'organisateur","PHOTO.TUTO":"Prenez une photo depuis votre téléphone, ajoutez un commentaire et partagez la avec tous les participants","PHOTO.TUTOADMIN":"Partager vos photos mais surtout validez les photos des participants avant leur diffusion","PHOTO.TUTO_VALIDATION":"La validation implique que l'ensemble des photos doivent être validées par l'organisateur avant d'être publiée","PHOTO.TUTO_CANDELETE":"Même après partage, vous pouvez supprimer votre dernière photo","INVITE.TUTO":"Faites flasher ce code pour inviter des amis. Vous pouvez également envoyer des invitations par mail, ou copier le lien ci-dessous en l'envoyer par SMS, Messenger ...","PROFIL.TUTOADMIN":"Contrôler la soirée et lancer les écrans de partage de photo ou le DJ automatique","PROFIL.TUTO":"Passez en anonyme ne pas divulguer votre identité dans les photos et musique proposée","PROFIL.STORY":"Social Wall without Twitter (only visible in this event)","SCREEN.TUTO":"Les écrans partagés que vous pilotez sont accessible ici. L'iWall utilisé est listé pour chaque écran, vous pouvez en choisir un autre a tout moment","SCREEN.TUTOADDSCREEN":"Si vous disposez déjà d'un code pour piloter un écran, saisissez le ici, Sinon ouvrez la page http://w.shifumix.com sur l'écran que vous souhaitez piloter, puis saisissez le code affiché","SELEVENT.TUTO_EVENTSAVAILABLE":"Pour participer à un des événements 'public' autour de vous, sélectionnez son flyer","SELEVENT.TUTOJOIN":"Un événement est sélectionné, vous pouvez en faire partie un cliquant sur 'rejoindre'","SELEVENT.TUTOFIRSTCONNEXION":"Bienvenue dans Shifumix. Selectionner un événement sur la carte ou créez en un nouveau","MUSICSERVER.TUTO_WARNINGYOUTUBE":"Attention, youtube est un catalogue très large. Il est préférable de limiter l'ajout de nouveau titre aux modérateurs et de disposer d'un bloqueur de publicité","SLIDESHOW.TUTO":"Ici vont défiler les photos partagées par les participants","SEARCH.TUTO":"Rechercher un artist ou un titre parmis le catalogue de Deezer, YouTube ou votre propres titres","SEARCH.TUTOSEL":"Cliquer sur le titre que vous souhaitez ajouter à la playlist","CHARTS.TUTO":"Retrouver la liste des participants à l'événement, classé par 'like'. Vous pouvez en savoir plus sur eux en cliquant sur leur avatar","SELEVENT.TUTOPAY":"Pour rester sans pub, le fonctionnement de Shifumix implique une modeste contribution de votre part pour pouvoir continuer de créer des centaines d'événements","PUBLICCHART.TUTO":"Affiche le classement des personnes connectées dans l'événement","MUSICPLAYER.TUTO":"Vous êtes chez le DJ automatique, vous devez être raccordé à un système audio et avoir quelques titres dans la playlist","BETS.TUTO":"Parier ou répondez au sondage directement dans Shifumix","BETS.TUTO_CREATEYOURBETS":"Proposer un petit pari express à tous les participants","BETS.TUTO_CREATEYOURSURVEY":"Proposer un petit sondage express à tous les participants","PUBLICPROFIL.TUTO_CREDITS":"Vous pouvez créditer ou débiter des iCoin (la monnaie virtuelle de Shifumix) aux participants. Ces iCoin sont conservés après l'événement. Ils sont directement utilisables notamment pour les jeux","PUBLICPROFIL.TUTO_ADMIN":"En tant que responsable de l'événement vous pouvez assigner des rôles à certains participants comme la possibilité d'encaisser, de modérer les contenus ou de préparer les commandes","ADDBETS.TUTO":"Saisissez simplement un intitulé et les différents choix possibles pour créer instantannément un sondage ou un pari.","ADDBETS.TUTO_VALIDE":"Votre pari est enregistré, en revanche en tant que créateur du pari, vous n'avez pas le droit d'y participer.","ADDEVENT.TUTOVALIDATE":"La modération implique que vous devrez valider les photos, paris et sondages avant leur publication","FIRSTPLAYER.TUTO":"Pour la première connexion, je lance automatiquement l'autoDJ. Vérifier le volume de votre ordinateur pour entendre le résultat.","PUBLICBETS.TUTO":"Cette écran affiche l'ensemble des paris en cours et les paris venant de se terminer.","INVITE.TUTO_COPYLINK":"Collez ce lien dans un SMS, sur facebook ou ailleurs pour inviter des amis","TUTO.MUSICPLAYERRUN":"Cliquer sur le bord de l'écran pour lancer le DJ !","TUTO.FIRSTEVENTCREATED":"Vous avez créé votre premier événement ! Vous pouvez y entrer ou envoyez des invitations en retournant son flyer","TUTO.EVENTMASTER":"Cette zone est réservé à l'organisateur de l'événement. Elle donne accès a certains réglages de votre événement sur le theme de l'onglet sélectionné","TUTO.PHOTO_CANDELETE":"Même après avoir publié une photo vous pouvez encore la supprimer","TUTO.CLOUDPLAYLIST":"Choisissez parmi un titre de vos playlist","HOME.TUTOWITHMUSICANDPERSO":"En mode DJ, vous pouvez indiquer les titres qui passent en utilisant le bouton Play","ADDEVENT.TUTOWARNINGJETONS":"Attention, si les options paris et loterie sont actives, vous devez vous assurer que vos participants disposeront de sCoin pour y participer","TIPS.LOGIN0":"Les photos ou messages peuvent être postée en live sur tweeter","TIPS.LOGIN1":"Organiser vos paris pendant un match de foot, Shifumix gère les mises, les quotes et la répartition des gains","TIPS.LOGIN2":"Pour passer de la musique, Shifumix sait utiliser le catalogue de Spotify, Deezer, Youtube ainsi que vous titres sur Google Drive !","TIPS.LOGIN3":"Avez Shifumix vous pouvez utiliser vos playlist Spotify, même si le catalogue utilisé pour l'événement est Deezer, et réciproquement !","TIPS.LOGIN4":"Shifumix vous permet d'organiser simplement une tombola","TIPS.LOGIN5":"Les photos des flyers peuvent venir d'Instagram, de vos photos et de n'importe quel lien internet","TIPS.LOGIN6":"Même après avoir posté un message ou une photo vous pouvez la supprimer","TIPS.LOGIN7":"Lors de la fin d'un événement, vous recevez un lien vous permettant de consulter cet événement même après sa fin","TIPS.LOGIN8":"Vous pouvez directement télécharger la playlist d'un événement dans votre compte Spotify ou Deezer","TIPS.LOGIN9":"Vous pouvez directement télécharger les photos d'un événement sur votre Google Drive","TIPS.LOGIN10":"Faites glisser les titres de la playlist pour découvrir d'autres options","TIPS.LOGIN11":"Découvrer qui vous like en cliquant sur votre score dans le classement","TIPS.LOGIN12":"Ouvrez les profils des participants pour découvrir de nouvelles options","TIPS.LOGIN13":"Fabriquez vos propres événements directement depuis vos événements Facebook ou votre agenda Google","TIPS.LOGIN14":"Fidéliser vos participants en distribuant des iCoins pour gagner des lots","TIPS.LOGIN15":"Vous pouvez limiter les nouveaux titres qui sont proposés à vos playlist","TIPS.LOGIN16":"Récupérer des photos sur instagram (de votre compte ou celui des autres)","TIPS.LOGIN17":"Vous pouvez limiter la taille de la playlist","TIPS.LOGIN18":"Vous pouvez enregistrer vos sondages ou paris sans les publier, et les mettre en ligne quand vous le souhaitez","TIPS.LOGIN19":"Fabriquez vos propres iWall depuis l'éditeur de Shifumix ou depuis votre éditeur favori","TIPS.LOGIN20":"","TIPS.LOGIN21":"","TIPS.LOGIN22":""}}),e.push({lang:"fr",labels:{"MUSICSERVER.PERSODESCRIPTION":"Vous êtes le DJ. Vous mettez la musique que vous voulez mais vous pouvez vous inspirer de la playlist Shifumix disponible sur votre téléphone. Lorsque vous déclarer jouer un titre de la playlist, celui-ci est immédiatement retiré","MUSICSERVER.SPOTIFYDESCRIPTION":"Pour démarrer la musique, lancer spotify sur votre systeme audio et connectez vous a votre compte","MUSICSERVER.DEEZERDESCRIPTION":"Connecter votre système audio à un ordinateur et ouvrer http://player.shifumix.com dessus","MUSICSERVER.MULTIPLEDESCRIPTION":"Multiple source utilise Deezer, youtube et vos fichiers MP3 (sur Google Drive) comme catalogue. Connecter votre système audio à un ordinateur et ouvrer http://player.shifumix.com dessus","MUSICSERVER.YOUTUBEDESCRIPTION":"Connecter votre système audio à un ordinateur et ouvrer http://video.shifumix.com dessus","PERSO.MUSICSERVER":"Quel catalogue de musique utiliser ?","PERSO.SCREENS":"Vos écrans","WIDGET.CATEGORIES":"Musique,Photos,Messages,Paris,Sondages,Loterie,Commandes,Autres","WIDGET.CATEGORIESFILTER":"Musique,Photos,Messages,Paris,Sondages,Participants,Présentations,Commandes","LIB.BEGININ":" commence dans ","ADDEVENT.TITLE":"Votre événement","ADDEVENT.USEFACEBOOK":"Utiliser facebook comme model ?","SELEVENT.TITREPROFIL":"Mon profil","LIB.ADDRESS":"Adresse","ADDEVENT.APARTIRDE":"A partir de","ADDEVENT.DEFAULTADDRESSCHANGE":"Votre adresse par défaut est modifiée","LIB.DURATION":"Durée","LIB.SAVE":"Enregistrer","LIB.STARTIN":"Commence dans","LIB.TAG":"Etiquettes","LIB.COPY":"Copier","LIB.EXPERT":"Expert","LIB.SENDING":"Envoi ...","LIB.NEXT":"Suivant","LIB.OVER":"est terminée","LIB.BUY":"Acheter","LIB.SUMMARIZE":"Résumé","LIB.PUBLISHONTWEETER":"Publier sur tweeter","LIB.CLOSE":"Fermer","LIB.UPLOAD":"Charge","LIB.ERRORRETRY":"Erreur de traitement, recommencez","LIB.UPLOADING":"Chargement","LIB.PERSONS":"Participants","LIB.TOTHEPLAYLIST":"à la playlist","PERSO.QUERYAVATAR":"Quel avatar (en anglais) ?","LIB.YES":"Oui","LIB.NO":"Non","LIB.TEAMS":"Equipes","LIB.TEAM":"Equipe","LIB.COMMAND":"Commander","LIB.PRIORITY":"Priorité","LIB.ONGOING":"En préparation ...","LIB.PREPARE":"Préparer","LIB.TAKED":"Retirée","LIB.PAY":"Payer","LIB.TEXTINCLIPBOARD":"Texte dans le presse-papier","LIB.DATE":"Date","LIB.TUTORIAL":"Tutoriel","LIB.COMMANDPANEL":"Commandes en attentes","LIB.ABOUT":"A propos de","LIB.QUESTION":"Question","LIB.CATEGORY":"Categorie","LIB.CANCELED":"Annulée","LIB.START":"Commence","LIB.RANDOM":"Au hasard","LIB.TITLE":"Titre","LIB.PARTICIPANTS":"participants","LIB.SONG":"titre","LIB.INVITE":"Invite","LIB.ITEM":"article(s)","LIB.LOADING":"Chargement","LIB.TRAJET":"Trajet","LIB.LIKE":"aime","LIB.ADD":"ajoute","LIB.BOARD":"Tableau","LIB.TERMINATED":"Terminé","LIB.DISCOUNT":"Remise","LIB.EDIT":"Editer","LIB.RESPONS":"Réponses","LIB.CANCELMODIF":"Abandonner les modifications","LIB.AUTOEVENT":"Evénement simplifié","LIB.AUTOSCREENEVENT":"Ecran simplifié","LIB.WIDGET":"sWALL","LIB.SCREENS":"Vos écrans","LIB.MULTIPLE":"Multiple","LIB.SCREEN":"Ecran","LIB.ACTORS":"Acteurs","LIB.ACTRESS":"Actices","LIB.EMOJIS":"Emoticones","LIB.WITHHIM":"avec lui","LIB.FOLLOWERS":"Fans","LIB.STORY":"Story","LIB.MESSAGE":"Message","LIB.FOLLOW":"Connaitre les prochains événements","LIB.CLEAR":"Effacer","LIB.RAZ":"Effacer mon compte","LIB.TIRAGEDANS":"Tirage dans","LIB.FAVORITE":"Favori","LIB.VALIDATE":"Valider","LIB.FROM":"De","LIB.CHARTS":"Tops","LIB.EVENTCODE":"Code événement","LIB.WEBLINK":"URL de l'image","LOTERIE.BUYERS":"%1 participant","LIB.PUBLISH":"Publier","LIB.PENDING":"En attente","LIB.TEMPLATES":"Modèles","LIB.TEAMDISTRIBUTION":"Composition des équipes","LIB.DEVELOPERTOKEN":"Clé développpeur","LIB.PROFIL":"Profil","LIB.CLEARACCOUNT":"Effacer votre compte","LIB.EARNED":"Gagnés","LIB.EVENT":"Evénement","LIB.PRINT":"Imprimer","LIB.FORTHISEVENT":"Pour cet événement","LIB.EVENTCLOSING":"Fermer l'événement ?","LIB.ACCOUNT":"Montant disponible","LIB.TOTAL":"Total","LIB.WINNER":"Gagnant","LIB.PERSON":"Participants","LIB.DELETE":"Supprimer","LIB.READY":"Prêt","LIB.LOCALISE":"Me localiser","LIB.TARIF":"Tarif","LIB.MUSIC":"Musique","LIB.LEGEND":"Légende","LIB.INVERSECOLOR":"Inversion couleurs","LIB.MYPROFIL":"Mon profil","LIB.PEOPLE":"Participants","LIB.SECRETCODE":"Code secret (4 chiffres)","LIB.SCREENCODE":"Code écran","LIB.HTAG":"HTag","LIB.YOUHAVE":"Vous avez ","LIB.GAMES":"Jeux","LIB.VIEW":"Voir","LIB.PLAY":"Jouer","LIB.MODIFY":"Modifier","LIB.FILTER":"Filtre","LIB.SELECT":"Selectionne","LIB.MINUTES":"Minutes","LIB.AGREE":"Accord","LIB.DISAGREE":"Pas d'accord","LIB.TERMOFUSE":"Conditions générales","LIB.NOTRECOMMENDED":"Non recommendé","LIB.TO":"A","LIB.NOMUSIC":"Pas de musique","LIB.TEAMSETTINGS":"Organiser des équipes","LIB.INVITATIONPERMANENT":"Invitation permanente","LIB.YOURCLOUD":"Votre cloud","LIB.PHONE":"Téléphone","LIB.FINDEVENTS":"Rejoindre des événements","LIB.ENDIN":"Fin dans","LIB.END":"Fin","LIB.OPTION":"Option","LIB.NOTSTARTED":"Non commencé","LIB.PRESENTATION":"Présentations","LIB.USE":"Utiliser","LIB.UNDO":"Défaire","LIB.PLAYLIST":"Playlist","LIB.SURVEYS":"Sondages","LIB.DESCRIPTION":"Description","LIB.TEASER":"Teaser","LIB.USERSETTINGSFILE":"Parametrages spécifiques","LIB.ABO":"Abonnement","LIB.NEWEVENT":"Nouvel événement","LIB.ENGAGEMENT":"Engagement","LIB.DAYS":"jours","LIB.EVENTMASTER":"Event Master","LIB.INVITATION":"Invitation","LIB.LOGOUT":"Se deconnecter","LIB.NOTHING":"Aucun","LIB.MALE":"Homme","LIB.MEETING":"Réunion","LIB.NEWSONDAGEONLINE":"Nouveau sondage:","LIB.ONAIR":"en écoute","LIB.PARTY":"Fête","LIB.FEMALE":"Femme","LIB.HOUR":"hrs","LIB.NEXTSLIDE":"Prochain slide","LIB.REMOTE":"Télécommande","ADDEVENT.FLYERBUILDING":"Fabrication de l'evénement","LIB.THEMOVIE":"Le film","LIB.OK":"Ok","LIB.CREDITS":"Créditer","LIB.DEBITS":"Débiter","SELEVENT.NOEVENT":"Créer votre événement !","LIB.REPUTATION":"réputation","LIB.LOGIN":"Se connecter","LIB.JOIN":"Rejoindre","LIB.HELLO":"Bonjour","SELEVENT.EVENTBYCODE":"Evénement par code","LIB.EVENTS":"Evénements","PRESENTATION.QUESTIONORCOMMENTS":"Votre question / commentaire","LIB.SWALLSTORE":"sWALL disponibles","INVITE.CHECKYOUREMAIL":"Vérifier votre email","PERSO.RAZUSER":"Vous souhaitez supprimer votre compte de nos bases. C'est irréversible. Si vous êtes sûr, répondez 'yes'","WIDGET.PARENTSTYLE":"Style du sWALL hérité de la fenêtre parent","WIDGETSTORE.SHOWPUBLICWIDGET":"Inclure les widgets public","WIDGET.VIEWONSCREEN":"Afficher sur un autre écran (en utilisant le code affiché)","WIDGET.OPENONTHISSCREEN":"Ouvrir l'iWall sur cet écran","MESSAGE.DELETED":"Message supprimé","CLOSEDEVENT.PUSHSONG":"titres ont été proposé","ERROR.NOTENOUGHTREPUTATIONTOJOIN":"Réputation insuffisante pour cet événement","ERROR.LOSTNETWORK":"Réseau non disponible","PRESENTATION.CONFIRMEDELETE":"Enlever cette présentation ?","ADDBETS.ADDIMAGE":"Ajouter une illustration :","ERROR.NEEDSPOTIFYPREMIUMACCOUNT":"L'usage du catalogue spotify nécessite de disposer d'un compte premium","ADDEVENT.BUILDINGYOUREVENT":"Construction de votre événement","LIB.SETTINGS":"Paramètres","LIB.EVENTSETTINGS":"Réglage de l'événement","LIB.NOW":"Maintenant","PERSO.EMAIL":"Votre email","BETS.LIMITOPTIONS":"Max d'options par pari / sondage","BETS.GIVESOMESCOINBEFORECREATEBETS":"Attention pour l'instant personne n'a d'iCoin pour participer à votre pari/loterie","MESSAGE.ENTERDELAY":"Délai d'apparition du message","SELEVENT.FACEBOOKPAGES":"Vos pages facebook","LIB.CAGNOTTE":"Cagnotte","LIB.GENERAL":"Général","LIB.BUILDING":"Construction de","PRESENTATION.QUESTIONADDTOMESSAGE":"Question ajouté aux messages","ERROR.BADPASSWORD":"Mot de passe incorrect","MESSAGE.POSTIT":"Zone de message en forme de post-it","ERROR.RETRY":"Désolé, un petit problème technique, recommencez ...","WIDGET.VIEWONFIRSTSCREEN":"Projeter cet iWall sur l'un de vos écrans partagés","WIDGET.NEWEVENT":"Nouveau modele d'événement","PUBLICPROFIL.GIVEEMAILTOFOLLOW":"Pour suivre un organisateur vous devez enregistrer un email (pour recevoir les invitations)","WIDGET.WIDGETLINK":"Afficher dans un site web","LIB.CHECKYOUREMAIL":"Vérifiez votre boîte mail","LOGIN.CONNEXIONINVITATION":"Connectez vous avec ...","LOGIN.SENDPASSWORD":"Recevoir a nouveau mon code secret","ADDEVENT.START":"Start","HOME.ADDSONGAUTO":"Aléatoire","WIDGET.VIEWONPHONE":"Voir ce sWall sur un téléphone","ADDEVENT.DEFAULTWIDGET":"iWall par défaut","ADDEVENT.DEFAULTWIDGETSET":"iWall par défaut modifié","PREPARE.NEWCARTE":"Nouvelle carte","SCREEN.NAMEFORSCREEN":"Nom de l'écran","ADDEVENT.FLYERPREVIEW":"Vue du flyer","PROFIL.ACCEPTMESSAGEBEFORESTART":"Accepter les posts avant début de l'événement","IMAGECREATOR.NOIMAGE":"Aucune image, essayer une autre requête","ADDEVENT.EVENTDESCRIPTION":"Description de votre événement","ADDEVENT.TYPEEVENT":"Quel type d'événement ?","ERROR.SPOTIFYCONFIG":"Vous devez réactiver le service Spotify","ERROR.DEEZERCONFIG":"Vous devez réactiver le service Deezer","SELEVENT.ASKFORLOCALISATION":"Shifumix peut vous proposer les événements autour de vous si vous lui indiquez votre position","ADDEVENT.ACTIVITIES":"Activitées","LIB.FAQ":"Questions fréquentes","ADDEVENT.CHANGEFLYER":"Modifier la photo","ADDEVENT.MINCREDIT":"Crédit min.","PRESENTATION.PRICEPERMINUTE":"Prix par minute de présentation","PRESENTATION.MAXPRESDURATION":"Durée maximum possible par présentation","PRESENTATION.DELAYBETWEENPRESENTATION":"Délai entre chaque présentation","SELEVENT.CMDLOCALIZE":"Positionne la carte sur votre position","SELEVENT.CMDSHOWEVENT":"Montre des événements interessant","SELEVENT.CMDINVITE":"Partage cette carte","SELEVENT.BLACKLIST":"Désolé vous ne pouvez pas entrer. Vous êtes blacklisté par l'organisateur de cet événement","OLDEVENTS.NOEVENTFORTHISCODE":"Aucun événement correspondant à ce code","MESSAGES.YOURMESSAGE":"Ecrire votre message ici","LIB.ADVANCED":"Paramètres avancés","OLDEVENTS.PARTICIPATEDEVENT":"Les événements que j'ai fait","CHARTS.BONUSFORNEWCOMER":"Nouveaux","CHARTS.GIVESCOIN":"Distribution d'iCoins","ADDEVENT.MINSCORE":"Notoriété min.","ADDBETS.STARTBET":"Démarrer dans ","SEARCH.ADDAUTO":"Auto","CHARTS.BYTEAM":"Classement par équipe","LOGIN.WELCOME":"Bienvenu sur Shifumix","INVITE.SENDTOME":"Voir sur mon mail","ADDEVENT.SETTITLE":"Grosse fiesta,L'anniversaire de Léo,Brainstorm marque","ADDEVENT.TOOMANYACTIFEVENT":"Trop d'événement ouvert simultanément","MESSAGE.LABELLINK":"Lien entre les messages","MESSAGE.SENDSCHEDULED":"Envoi programmez","COMMAND.READY":"Votre commande est prête, vous devez la récupérer au bar / comptoire","COMMAND.READYWITHTABLE":"Votre commande est prête, elle va vous être apportée","INVITE.EVENTCODE":"Code d'invitation","OLDEVENTS.EVENTCODETITLE":"Code de l'événement","OLDEVENTS.JOINBYCODE":"Par code","PRESENTATION.PRICETOPRESENT":"iCoin pour présenter","ADDEVENT.USEMODELS":"Utiliser d'autres modèles","ADDEVENT.SETTINGS":"Paramètres avancés","ADDEVENT.SETDATES":"Début et durée","SEARCH.PLAYLISTANALYSIS":"Chargement de vos playlists","CHARTS.CHOOSEMODERATOR":"Choisissez le modérateur parmi la liste","SELEVENT.ASKLOCALISE":"Indiquer ma position a Shifumix","ERROR.USER_ALREADY_INVITED":"Personne déjà invitée","PERSO.GIVEEMAIL":"Enregistrer mon email","SELEVENT.NOTEXIST":"Evénement introuvable","INVITE.MAIL":"Adresse mail de la personne à inviter","LOGIN.FASTAUTHENT":"Connexion rapide & anonyme","ADDEVENT.LIBPASSWORD":"Mot de passe nécéssaire","ADDEVENT.VISIBILITY":"Visibilité de l'événement","ADDEVENT.BEGININ":"Début","ADDBET.FORCEUSER":"Forcer les participants à répondre","HOME.WAITINGFORPLAYER":"En recherche d'un player spotify","PERSO.NOSERVICE":"Pas de service","LOGIN.WELCOMECREATEEVENT":"Avant de créer votre événement vous devez vous authentifier","BETS.LOTERIEWAITINGVALIDATE":"Porter votre lot à un modérateur pour mise en ligne de votre loterie","PERSO.CHOOSEAVATAR":"Choisissez votre nouvel avatar","PERSO.CHANGEMUSICSERVER":"Plateforme musicale","ADDEVENT.GIVETITLE":"Donner un titre a votre événement","PERSO.PROFILTITLE":"Quel type d'événement","PHOTO.WAITFORVALIDATION":"Photo non publiée, validation en cours ...","SEARCH.CONFIRMADD":" titres ajoutés","MESSAGES.LIMITBYUSER":"Limiter le nombre de messages","TARIF.NEXTPAYMENT":"Prochain paiement","PRESENTATION.ADD":"Proposer votre présentation","ADDEVENT.EVENTADDRESS":"Adresse de l'événement","ADDBET.CAGNOTTE":"Cagnotte de départ","ADDEVENT.MINSONGSINPLAYLIST":"Taille minimum de la playlist","ADDBETS.NBRESPONS":"Nombre de réponses possibles","BETS.NEEDVALIDATIONBEFORE":"Sa loterie attend votre validation.","INVITE.FOLLOWERS":"Inviter mes followers","HTMLEDITOR.TITLE":"Editeur HTML","ADDBET.MINAMOUNT":"Mise minimum","ADDBETS.DESCRIPTION":"Description (optionelle)","SCREEN.WARNINGNOSCREEN":"Nouvel écran non identifié, êtes vous sûr du code et de la connexion internet de l'écran à controller ?","SELEVENT.CREATE":"Nouveau","LOGINAVATAR.TITLE":"Créer votre avatar","SCREENS.WAITING":"En attente de la connexion avec l'écran","SEARCH.NOAVAILABLE":"Titre non disponible sur le catalogue de cet événement","SELEVENT.CHANGESETTINGS":"Modifier votre profil Shifumix","SELEVENT.JETONS":"Vous avez ","LOGIN.PSEUDO":"Votre pseudo pour cet événement","SELEVENT.CREATEEVENT":"Fabriquer votre propre événement","WIDGETHOME.ENTERCODE":"Entrer ce code pour con nts","SELEVENT.WELCOME":"Bonjour, Trouver un événement !","SELEVENT.LOCALIZING":"Localisation","PRESENTATION.DONWLOADBEFOREPRES":"Téléchargement du support possible avant les présentations","BET.ONLYWHENSTART":"Partage impossible avant le démarage","ADDEVENT.PASSWORD":"Mot de passe","PHOTO.DELETED":"Photo supprimée","PHOTO.DELETING":"Photo en cours de suppression","CHARTS.GIVETONEWCOMERTITLE":"Montant a attribuer aux nouveaux arrivants","ADDEVENT.LABELSONG":"titres","TARIF.CHANGECONFIRMATION":"Vous êtes sur le point de changer d'offre. Etes vous sûr ?","LIB.OLDEVENTS":"Evénements passés","LIB.NEXTEVENTS":"Evénements prochains","LIB.MUSICCHARTS":"Classements musicaux","HOME.CONFIRMDELETE":"Supprimer ce titre ?","HOME.ADDSONGAUTOTITLE":"Ajout automatique de combien de titre ?","SCREEN.CHOOSEWIDGET":"Sélectionner un iWall pour votre écran","HOME.ADDSONGONLYBYOWNER":"Ajout de musique réservé aux modérateurs","HOME.ADDSONGONLYBYCHARTS":"Ajout de musique uniquement depuis les classements","PHOTO.ADDPHOTOONLYBYOWNER":"Partage de photo réservé aux modérateurs","BETS.ADDONLYBYOWNER":"Seuls les modérateurs peuvent ajouter des paris, sondages et jeux ","OLDEVENTS.BESTEVENTFORME":"Evénements interessants","ADDEVENT.SONGSBYDEFAULT":"Playlist de départ","ADDEVENT.VISIBLEONMAP":"Evénement public","ADDEVENT.CHANGETEMPLATE":"Image","ADDEVENT.ALLOWANONYMOUS":"Autoriser les participant anonymes (non recommendé)","ADDEVENT.VISIBLE":"Evénement visible a","WIDGET.FAVORITE":"sWALL favori","WIDGET.PUBLIC":"sWALL accessible de tous","WIDGET.CLONE":"Cloner","ADDEVENT.AUTOLOGIN":"Pas d'authentification","CLOSEDEVENT.USEASMODEL":"Utiliser comme model","PROFIL.SELFSERVICE":"Service au bar (Self-service)","PROFIL.TUTO_WELCOMEPICTURE":"Cette photo apparaitra en plein écran pour toutes les personnes qui entrent dans votre événement","WIDGET.DESCRIPTION":"Description de l'iWALL (commencer par 'le', 'la', 'un')","WIDGET.CODE":"Code HTML & javascript","PHOTOS.INFOVALIDATION":"Dès validation par les modérateurs, votre photo sera visible pour l'ensemble des participants","INFO.ANONYMOUSLIMIT":"Avec l'avatar vous restez totalement anonyme, vous pourrez modifier la photo ou le pseudo ultérieurement si vous le souhaitez","INFO.ANONYMELOGOUT":"Attention, la deconnexion d'un compte anonyme entraine son effacement total","MESSAGE.SCHEDULEDMESSAGE":"Messages programmés","PERSO.HUMEUR":"Une petite phrase sur vous","PERSO.HOME":"Votre site web","PERSO.YOUROFFER":"Votre offre","HOME.ADDSONG":"Musique","INVITE.PERSONAL":"Invitation personnelle","INVITE.SHARETITLE":"Invitez vos amis","ADDEVENT.HTAG":"Twitter hTAG","ADDEVENT.WELCOMESCREEN":"Page d'accueil","ADDEVENT.WELCOMEPICTURE":"Photo","ADDEVENT.WELCOMEDURATION":"Durée d'affichage de la page","INVITE.DEST":"Email à inviter","ADDBETS.NBVOTE":"Votes par personne","BETS.NOTENOUGHTTIMETOSONG":"Plus assez de temps pour ajouter de nouveau titre","BET.RECUPMONEY":"You get some money about your bet","BETS.MESSAGEMISE":"Montant de votre mise, jusqu'a ","BETS.NOTENOUGHTTIMETOBET":"Plus assez de temps pour les paris / sondage","SELEVENT.USELASTPOSITION":"Localisation impossible, utilisation de la dernière position","SELEVENT.JOINFAILED":"impossible de ce joindre à cet évenement","SELEVENT.ENTERYOURCODE":"Entrez votre code","PERSO.PROFILCHANGE":"Vous avez maintenant accès aux événements public","SELEVENT.JOIN":"pour rejoindre un événement","SELEVENT.TITLE":"Participer","ADDEVENT.ACT_LOTERIE":"Loterie / Tombola (expérimental)","ADDEVENT.ACT_BOARD":"Tableau partagé (expérimental)","ADDEVENT.ACT_PRESENTATION":"Présentations partagées","ADDEVENT.ACT_MESSAGE":"Messages partagés","ADDEVENT.ACT_COMMAND":"Commandes à distance (expérimental)","ADDEVENT.INSTANTPHOTOPARTY":"Photos party","ADDEVENT.MINDISTANCE":"Distance min.","ADDEVENT.CGU":"Conditions générales d'utilisation","LIB.SIGNATURE":"J'accepte les CGU","LIB.LOTERIE":"Loterie","ADDLOTS.STARTBET":"Début de la partie","ADDLOTS.DURATION":"Durée","ADDLOTS.MINCREDIT":"Mise minimum pour faire le tirage","ADDLOTS.MAXCREDITS":"Mise maximum pour acheter","ADDLOTS.TITLE":"Titre de votre partie","ADDLOTS.DESCRIPTION":"Description de l'article","PHOTO.LABELMESSAGE":"Saisissez votre message","PHOTO.KEYWORDSEARCH":"#hTag désignant les images","SELEVENT.NOTENOUGHTSCORE":"Réputation insuffisante pour créer un event","SELEVENT.AUTOCONNEXION":"Vérification d'une connexion","LIB.MYEVENTS":"Mes événements","SELEVENT.CLOSE":"Evénement terminé","SELEVENT.LOCALISE":"Me trouver","SELEVENT.PRIVATE":"Evenement privé. Entrer le mot de passe","ADDBET.PUBLISHING":"pari/sondage publié","PROFIL.CLOSE_EVENT":"Clore l'événement","PROFIL.LOTERIE":"Afficher une tombola, un tirage au sort","PROFIL.LINKTOOWNER":"Lier par l'utilisateur","PROFIL.LOC_QUERY":"Texte pour localiser le demandeur","PROFIL.PASSTOPREMIUM":"Evénement premium","PROFIL.CONFIRMPASSTOPREMIUM":"Etes vous sûr de passer en premium ?","PROFIL.RESET_SECRETCODE":"Nouveau code secret","PROFIL.ANONYMOUS":"Anonyme","PROFIL.STARTNEXT_EVENT":"Start","PROFIL.CHANGESETTINGS":"Paramètres de votre profil","PROFIL.FOLLOWER":"Suivre l'organisateur","PROFIL.QUIT_EVENT":"Partir","PROFIL.PLAYER":"Jouer la playlist","PROFIL.CHANGE_PLAYERTYPE":"Plateforme","PROFIL.PHOTOSHOW":"Défilement progressif des photos","PROFIL.GALLERY":"Afficher un pele mele des photos","PROFIL.PROMOTION":"Ecran d'inscription","PROFIL.VIDEOS":"Voir les vidéos de votre playlist en plein écran","PROFIL.BETSURVEY":"Affichage des sondages et paris","PROFIL.WIDGETTITLE":"sWALLs pour afficher l'événement","PROFIL.SLIDESHOW":"Afficher un slideshow des photos","PROFIL.CHARTSSCORE":"Classement en notoriété","PROFIL.NEEDTOBECLOSE":"Les participants doivent être proches","CLOSEDEVENT.TITLE":"Evenement clôt","PROFIL.CHARTSCREDIT":"Classement en monnaie","PHOTO.TAKEPICTURE":"Partager une photo","ERROR.SONGALLREADYPLAYED":"Titre déjà joué","ERROR.NOANONYMOUSINPUBLICEVENT":"Les événements public ne sont pas compatibles avec les anonymes","WIDGETSTORE.TITLE":"Liste des sWALLs","WIDGETSTORE.SEARCH":"Nom d'un sWALL","ERROR.NOACTIVEPLAYER":"Aucun player actif pour jouer la musique","PERSO.CHECKEVENT":"Vérification événement","ADDEVENT.MAXGUEST":"Participants max","ADDEVENT.INSTANTPARTY":"Auto Soirée","ADDEVENT.INSTANTBET":"Auto Paris","ADDEVENT.INSTANTSURVEY":"Auto Sondage","TARIF.NEWUSERS":"Nouveaux utilisateur depuis dernier paiement","ADDEVENT.INSTANTTITLE":"Création instantanné d'événement","SELEVENT.LOGOUT":"Changer de profil","SELEVENT.FACEBOOKEVENTS":"Vos endroits & événements Facebook","ADDBET.NBVOTE":"Votes par utilisateur","BETS.GAINS":"Vous pouvez gagner ","ADDBETS.ENDBET":"Fermeture à ","BETS.SHARETITLE":"Invitez des amis à jouer avec vous","ADDBET.PATTERNTITLE":"Titre du modèle (titre explicite)","BETS.VOTESENDING":"A voté","ERROR.ACTIFBETSEXCEED":"Nombre de pari actif maximum dépassé","ERROR.NOTENOUGHCREDITS":"Pas assez de crédit pour cette cagnotte","INFO.LASTBET":"Dernier pari actif possible","ADDEVENT.DESCRIPTION":"Teaser de l'événement","ADDEVENT.ADDRESS":"Adresse","ADDEVENT.WEBSITE":"Site web de l'événement","ADDEVENT.CHOOSEFILE":"Choisissez une image","ADDEVENT.ACT_MUSIC":"Playlist communautaire","ADDEVENT.CHANGEDEFAULTADDRESS":"Mon adresse","ADDEVENT.ACT_PHOTO":"Partager des photos","ADDEVENT.ACT_BETS":"Faire des paris (expérimental)","ADDEVENT.PLAYLISTLIMIT":"Taille limite de la playlist","ADDEVENT.PLAYLISTLIMITBYUSER":"Limite de titre par participant","ADDEVENT.PREPLAYLISTLIMIT":"Limite de la playlist avant la soirée","ADDEVENT.ACT_SONDAGE":"Proposer des sondages","ADDBETS.NEWOPTION":"Nouveau choix","ADDBETS.OPTIONSLIST":"Liste des choix","ADDBETS.TITLE":"Titre","ERROR.PLAYLISTNUMBEREXCEED":"Playlist remplie","BETS.BETSENDING":"Mise enregistrée","BETS.WINAMOUNT":"Vous gagnez ","BETS.LOSTAMOUNT":"Vous perdez ","LOGIN.WRONGPASSWORD":"Code secret incorrect","LOGIN.CODESENDED":"Un code vous a été envoyé par email pour vous permettre de vous connecter à l'événement","HOME.SONGDELETED":"Titre supprimé","HOME.FULLPLAYLIST":"Playlist pleine","CHARTS.ENDPARTY":"Fin:","MUSICSERVER.TITLE":"Serveur de musique","BETS.ALIASVALUE":"Valeur pour l'alias : ","ADDBETS.PATTERNLISTTITLE":"Modeles de paris","CHARTS.SHOWTOTAL":"Voir le total","CHARTS.GIVEALL":"Présents","CHARTS.GIVETOKENTOALLTITLE":"Bonus de sCoin à distribuer à tous les participants","LIB.AMOUNT":"Montant","PERSO.TITLE":"Réglages","PERSO.GIVEYOURPLATFORM":"Quel service utilisez vous pour écouter de la musique ?","PROFIL.LABELSERVICETIERS":"Services complémentaires","PERSO.LOCALFILE":"titres persos","PROFIL.RUNREMOTEPLAYER":"Play","PROFIL.STOPREMOTEPLAYER":"Stop","PROFIL.LINKTOWIDGET":"Attacher un sWALL","PROFIL.ENTERCODE":"Code (6 chiffres) du sWALL","PROFIL.SEARCHSOURCE":"Sources pour les recherches","PROFIL.ONLYPLAYLIST":"Catalogue limité à mes playlist","PROFIL.NEXTREMOTEPLAYER":"Suivant","SEARCH.LIBSEARCH":"Titre ou artist a trouver","SEARCH.LIBBUTTON":"Chercher","SEARCH.GOPLAYLIST":"Mes playlists","SEARCH.NOSONGSINPLAYLIST":"Aucune playlist disponible","SEARCH.ADDALL":"Ajouter tout","SEARCH.PLAYLISTLOADING":"chargement de vos playlists","WIDGET.COPYCODE":"Copier le code","WIDGET.PERSO":"Personnalisation","LIB.BET":"Pari","LIB.WHO":"Qui ?","LIB.MONEY":"€","LIB.TOBET":"Parier","BETS.DELETE":"Pari supprimé","LIB.SURVEY":"Sondage","LIB.UPDATE":"mise à jour","LIB.MODELS":"modeles","LIB.MODERATOR":"Ajouter un modérateur","LIB.PRIVACY":"Confidentialité","LIB.PREPARATOR":"Préparateur","LIB.CASHIER":"Caisse","LIB.PASSWORD":"Mot de passe","LIB.CLOSED":"Terminé","LIB.SUBSCRIBE":"Subscribe","LIB.FIRSTNAME":"Prénom","LIB.NOTORIETY":"notoriété","ADDEVENT.ADVANCESETTINGS":"Paramètres avancés","ERROR.ACTIVESSONGEXCEED":"Attendez que vos titres soient passés pour en poster de nouveaux, vous pouvez aussi en supprimer","SURVEY.SHARE":"Sondage / pari envoyé","BETS.VOTESRESTANT":"votes restant","BETS.ADDBUTTON":"Creer un Pari / Sondage","BETS.WAITPAY":"En attente du résultat pour paiement","BETS.CANCELCONFIRMATION":"Vous n'avez choisi aucune réponse possible, le pari est donc annulé ?","BETS.BETCLOSED":"Désolé, le pari est maintenant terminé","BETS.SHARED":"Pari / Sondage envoyé","BETS.YOUWIN":"Vous avez gagné","BETS.YOULOOSE":"Désolé vous avez perdu cette fois","BETS.WINLOTERIE":"Récupérer votre cadeau au près de l'organisateur puis valider : ","BETS.INFOLOTERIE":"Vous pouvez y participer pour ","BETS.YOUMUSTGIVERESPONS":"Votre pari est terminé. Vous devez indiquer la solution","LIB.CANCEL":"Annule","LIB.HYPERLINK":"Lien internet","INVITE.COPY":"Copier le lien","INVITE.SEND":"Envoyer","ERROR.NOTENOUGHTSCORE":"Pas assez de score pour ajouter un titre","INVITE.SENDINVITATION":"Partager par mail","INVITE.CONTACTPROVIDER":"Vos contacts","PHOTO.DOWNLOAD":"Télécharger mes photos","INVITE.CANCEL":"Probleme pour envoyer l'invitation","INVITE.YOURSELF":"Vous ne pouvez pas vous inviter vous même","INVITE.VIAFACEBOOK":"Poster le lien de l'événement directement via facebook","INVITE.CONFIRM":" recevra l'invitation dans 2 minutes","INVITE.FRIENDSTOINVITE":"Vos contacts","SEARCH.WAITING":"Recherche","PROFIL.DELPHOTO":"Bloquer !","PROFIL.VALIDATE":"Valider !","PROFIL.BLACKLIST":"Blacklister","PROFIL.MCTITLE":"Maitre de ceremony","PROFIL.GENERAL":"Ecran partagé pour voir toute l'actualité de l'événement","PROFIL.PLAYLIST":"Partager la playlist","PROFIL.MULTIPHOTO":"Partager les 3 dernières photos","PROFIL.BOARD":"Voir le tableau partagé","PROFIL.CHARTS_RE":"Partager la playlist","LIB.PUBLISHONTWITTER":"Partager sur tweeter","PROFIL.LASTTWEET":"Le dernier message","PROFIL.THREETWEET":"Les 3 derniers messages","PHOTO.ENTERMESSAGE":"Ajouter un commentaire","PHOTO.WITHMESSAGE":"Photo avec un message","PHOTO.SENDED":"Photo envoyée","PHOTO.NOTSENDED":"Photo non envoyée","SURVEY.SHARED":"Sondage envoyé","ADDEVENT.NEEDLOC":"Vous devez préciser une position pour créer un événement","SELEVENT.MYLASTEVENTS":"Mes derniers événements","SELEVENT.NOTSTART":"L'événement n'est pas encore ouvert","SELEVENT.FREEEVENTS":"Evénements disponibles","SELEVENT.EVENTS":"Evénements de la carte","SELEVENT.GEOLOCFAILED":"Echec de localisation","LIB.DATEFORMAT":"dd/MM hh:mm","LIB.PHOTO":"photo","LIB.DAY":"jours","LIB.SEND":"Envoyer","PROFIL.STORY":"Mur social prive","BETS.EVALUATE":"Evaluer le créateur du pari","INFO.SCORELOWTOADDSONG":"Attention pour ajouter de nouveau titre, votre score est bas","BETS.RESPONSE":"Réponse gagnante","BETS.NORESPONS":"Aucune réponse gagnante","PROFIL.YOURTAGS":"Vos tags","CHARTS.EARNCREDITS":"Credits gagnés","CHARTS.EARNNOTORIETY":"Notoriété gagnée","CHARTS.TOTALCREDITS":"Crédits (total)","CHARTS.TOTALNOTORIETY":"Notoriété","WIDGET.IFRAME":"sWALL","WIDGET.URL":"URL pour envoyer","WIDGET.OPEN":"Ouvrir","WIDGET.HTML":"Edit","WIDGET.ONLYFORTHISEVENT":"Uniquement pour cet événement","WIDGET.INPOURCENT":"En pourcentage","LIB.WIDTH":"Longueur","LIB.HEIGHT":"Hauteur","BOARD.SENDPHOTO":"Photos","WIDGET.URLINCLIPBOARD":"Lien dans le presse-papier","WIDGET.IFRAMEINCLIPBOARD":"sWALL dans le presse-papier","HTMLEDITOR.WIDGETCODE":"Code HTML du sWALL","LIB.SEARCH":"Rechercher","LIB.VOTE":"votes","LIB.NEW":"New","LIB.BY":"par","LIB.TAGS":"tags","GEN.VIEWNOTAVAILABLE":"Non disponible pour cet événement","DEEZER.DESCRIPTION":"Utilisez vos playlist Deezer","FB_PUBLISH.DESCRIPTION":"Publier vos photos sur facebook","SPOTIFY.DESCRIPTION":"Utilisez vos playlist Spotify","CALENDAR.DESCRIPTION":"Conserver les évenements dans votre agenda","CONTACT.DESCRIPTION":"Inviter votre carnet d'adresse Google","DRIVE.DESCRIPTION":"Utiliser la musique de votre Drive Google","LINKEDIN.DESCRIPTION":"Inviter vos contacts pro","FACEBOOK.DESCRIPTION":"Inviter vos contacts facebook","SLACK.DESCRIPTION":"Publier vos événements sur Slack","TWITTER.DESCRIPTION":"Publier vos événements sur twitter","INSTAGRAM.DESCRIPTION":"Publier les photos sur Instragram"}}),e}},322:function(e,t){e.exports={"//":"Les sections Client & Server doivent être paramétrer en mode marque blanche",name:"Shifumix",version:"0.9.81118",description:"Web Client for Shifumix platform",license:"Proprietaire",repository:{type:"git",url:"https://Hhoareau@bitbucket.org/Hhoareau/shifumixclient.git"},Client:{name:"Shifumix",logo:"./assets/img/logo440diskonly.png",oauth_services:["email","anonymous","facebook","linkedin","google"],AboutPage:"https://shifumixweb.appspot.com/about.html",Support:{feedback:"https://feedback.userreport.com/ef6875fa-89ce-4b14-8917-b702aec7c6cc/",forum:"https://www.tapatalk.com/groups/shifumix/forum-f2/",blog:"https://medium.com/shifumix"}},Server:{project_id:"shifumixweb",domain:"appspot.com",api:{name:"shifumix",version:"v1",password:"hh4271"}},Author:{Name:"Hervé Hoareau",Company:"F80"},scripts:{clean:"ionic-app-scripts clean",lint:"ionic-app-scripts lint","ionic:build:prod":"ionic-app-scripts build --minifyjs --engine=browser --optimizejs --minifycss --aot=false","ionic:minify":"ionic-app-scripts minify --uglifyjs ","ionic:build:prodv2":"ionic-app-scripts build --engine=browser --aot=false","ionic:build":"ionic-app-scripts build","ionic:serve:local":"ionic-app-scripts serve -o /?server=local -p 8101","ionic:serve":"ionic-app-scripts serve -p 8101"},optionalDependencies:{fsevents:"*"},dependencies:{"@angular/cli":"^7.3.2","@angular/common":"^5.2.1","@angular/compiler":"^5.2.1","@angular/compiler-cli":"^7.2.5","@angular/core":"^5.2.1","@angular/forms":"^5.2.1","@angular/http":"^5.2.1","@angular/platform-browser":"^5.2.11","@angular/platform-browser-dynamic":"^5.2.1","@angular/tsc-wrapped":"^4.4.7","@ctrl/ngx-emoji-mart":"^0.8.2","@ionic-native/app-version":"^4.12.2","@ionic-native/camera":"^4.12.2","@ionic-native/core":"^4.12.2","@ionic-native/facebook":"^4.12.2","@ionic-native/file":"^4.12.2","@ionic-native/file-transfer":"^4.12.2","@ionic-native/geolocation":"^4.12.2","@ionic-native/in-app-browser":"^4.12.2","@ionic-native/native-storage":"^4.12.2","@ionic-native/network":"^4.12.2","@ionic-native/splash-screen":"^4.12.2","@ionic-native/status-bar":"^4.12.2","@ionic-tools/emoji-picker":"^1.4.0","@ionic/storage":"^2.1.3","@ngx-translate/core":"^10.0.2","@ngx-translate/http-loader":"^2.0.1","@types/node":"^11.9.4","@types/ws":"^6.0.1","angular2-qrscanner":"^1.0.7","angular2-websocket":"^0.9.7","angular2-websocket-service":"^0.5.3","array-flatten":"^2.1.1",babel:"^6.23.0",chokidar:"^2.1.2","cordova-browser":"^6.0.0","emoji-mart":"^2.8.1","ionic-angular":"3.9.2","ionic-cache":"^3.1.3",ionicons:"^4.5.5","ng-cast":"0.0.2","ng-emoji-picker":"1.2.4","ng-inline-svg":"^8.0.2","ng-push":"^0.2.2","ng-recaptcha":"^3.0.5","ng-socket-io":"^0.2.4","ng2-ace-editor":"^0.3.8","ng2-translate":"^5.0.0","ngx-clipboard":"^11.1.7","ngx-color-picker":"^7.4.0","node-sass":"^4.11.0","queueing-subject":"^0.2.0",rxjs:"^6.3.2","rxjs-compat":"^6.3.2","rxjs-websockets":"^6.0.2",sass:"^1.3.0",scp2:"^0.5.0","sw-toolbox":"3.6.0","ts-exif-parser":"^0.1.23",tslint:"^5.11.0","uglify-es":"^3.3.10","ui-carousel":"^0.2.0",webpack:"^3.12.0"},devDependencies:{"@ionic/app-scripts":"^3.2.2","babel-register":"^6.26.0",typescript:"3.2.1",ws:"^6.0.0"},config:{ionic_aot_write_to_disk:!0},cordova:{platforms:["browser"],plugins:{}}}},324:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),a=n(0),r=n(2),l=n(8),u=n(2),c=n(6),d=n(16),p=function(){function e(e,t,n,i,o,s){this.viewCtrl=e,this.userData=t,this.api=n,this.loadingCtrl=i,this.toastCtrl=o,this.translate=s,this.facebook_events=[],this.google_events=[],this.myevents=[],this.shifumix_template=[],this.typeModel="shifumix_template",this.refresh()}return e.prototype.refresh=function(){var e=this;this.userData.getFacebookPageAndEvents().subscribe(function(t){e.facebook_events=t.items}),this.userData.geteventsfrom(!0,20).subscribe(function(t){e.myevents=[],t.items.forEach(function(t){t.magiklink=u.DOMAIN_SERVER+"/magiklink?event_model="+t.id,t.type="oldevent",e.myevents.push(t)})}),u.$$("Récupération des modeles Shifumix"),this.api.gettemplates().subscribe(function(t){null!=t&&(e.shifumix_template=[],t.templates.forEach(function(t){t.title=t.title.replace("%from",e.userData.user.firstname),t.flyer=u.tirageString(t.flyer,","),t.type="pro"==t.ihm?"pro":"perso",null==t.templateFlyer&&(t.templateFlyer=t.flyer),null==t.templateTitle&&(t.templateTitle=t.title),null==t.templateDescription&&(t.templateDescription=t.title),null==t.widgetDefault&&null!=t.widgets&&(t.widgetDefault=t.widgets.split(",")[0]),null!=t.templateFlyer&&(t.title=t.title.replace("%from",e.userData.user.firstname),void 0!=e.userData.user.address&&(t.address=t.address.replace("%address",e.userData.user.address)),t.type="basic",e.shifumix_template.push(t))}))})},e.prototype.connectTo=function(e){var t=this;r.openGeneral(e,this.userData.user).then(function(){t.refresh()})},e.prototype.openFacebookEvents=function(){r.openWindow("https://www.facebook.com/events/discovery/")},e.prototype.openFacebookPages=function(){r.openWindow("https://www.facebook.com/pages/discovery/")},e.prototype.showFacebookEvents=function(e){this.facebook_events=e},e.prototype.selectModele=function(e){var t=this;"basic"==e.type?this.viewCtrl.dismiss(e):this.userData.initevent(e).subscribe(function(e){e.option={title:!0,teaser:!0,address:""!=e.address,date:!0},e.type="oldevent",t.viewCtrl.dismiss(e)})},e.prototype.close=function(){this.viewCtrl.dismiss()},e.prototype.onCopy=function(){u.onCopy(this.toastCtrl,this.translate)},e=i([a.Component({selector:"page-addevent-modele",template:'\x3c!--\n  Generated template for the AddeventModelePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="LIB.MODELS">\n    <shifubutton icon="close" (click)="close()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content no-padding no-border>\n  <ion-segment [(ngModel)]="typeModel" color="primary">\n    \x3c!--<ion-segment-button value="facebook">Facebook</ion-segment-button>--\x3e\n    \x3c!--<ion-segment-button value="google">Google</ion-segment-button>--\x3e\n    <ion-segment-button [hidden]="myevents.length==0" value="myevents">{{"LIB.MYEVENTS" | translate}}</ion-segment-button>\n    <ion-segment-button value="shifumix_template">Modeles Shifumix</ion-segment-button>\n  </ion-segment>\n\n  <ion-item no-border no-lines *ngIf="typeModel==\'facebook\'">\n    <tuto label="ADDEVENT.TUTO_FACEBOOK"></tuto>\n    <shifubutton label="facebook" *ngIf="facebook_events.length==0" (click)="connectTo(\'facebook\')"></shifubutton>\n    <div *ngFor="let evt of facebook_events" style="display:inline-block;margin:5px;width:28%;">\n      <shifuflyer [flyer]="evt.flyer">\n        <ion-item no-lines no-border text-center>\n          <shifubutton [small]="true" label="CLOSEDEVENT.USEASMODEL" (click)="selectModele(evt)"></shifubutton>\n        </ion-item>\n      </shifuflyer>\n    </div>\n  </ion-item>\n\n\n  \x3c!--<ion-list *ngIf="typeModel==\'google\'">--\x3e\n  \x3c!--<shifubutton label="Googel Calendar" *ngIf="google_events.length==0" (click)="connectTo(\'calendar\')"></shifubutton>--\x3e\n  \x3c!--<ion-list-header *ngIf="google_events.length>0" (click)="openGoogleEvents()">{{"SELEVENT.GOOGLEEVENTSS" | translate}}</ion-list-header>--\x3e\n  \x3c!--<shifuevent *ngFor="let evt of google_events" (click)="selectModele(evt)" [event]="evt"></shifuevent>--\x3e\n  \x3c!--</ion-list>--\x3e\n\n  <ion-item text-wrap no-border no-lines *ngIf="typeModel==\'myevents\'">\n    <tuto label="ADDEVENT.TUTO_MYEVENTS"></tuto>\n    <div *ngFor="let evt of myevents" style="display:inline-block;margin:5px;width:28%;">\n      <shifuflyer [flyer]="evt.flyer">\n        <ion-item no-lines no-border text-center>\n          <shifubutton [small]="true" label="LIB.USE" (click)="selectModele(evt)"></shifubutton><br><br>\n          <shifubutton [small]="true" label="LIB.AUTOEVENT" ngxClipboard [cbContent]="evt.magiklink" (click)="onCopy()"></shifubutton>\n        </ion-item>\n      </shifuflyer>\n    </div>\n  </ion-item>\n\n  <ion-item text-wrap no-border no-lines *ngIf="typeModel==\'shifumix_template\'">\n    <tuto label="ADDEVENT.TUTO_SHIFUMIXTEMPLATE"></tuto>\n    <div  *ngFor="let evt of shifumix_template"\n          style="display:inline-block;margin:4%;margin-bottom:20px;padding:0px;width:40%;text-align: center;">\n      <div style="width:100%;font-size: medium;line-height: 0.9;margin-bottom: 3px;">{{evt.templateTitle}}</div>\n      <shifuflyer size="100%" name="event_template" [flyer]="evt.templateFlyer">\n        <ion-item text-center padding-left="2px">\n          <div style="font-size:xx-small;line-height: 0.9;">{{evt.templateDescription}}</div><br>\n          <shifubutton name="cmdUse" [small]="true" icon="checkmark" (click)="selectModele(evt)"></shifubutton>\n        </ion-item>\n      </shifuflyer>\n    </div>\n  </ion-item>\n\n</ion-content>\n'}),o("design:paramtypes",[s.ViewController,l.UserData,d.ApiProvider,s.LoadingController,s.ToastController,c.TranslateService])],e)}();t.AddeventModelePage=p},325:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=n(6),u=n(2),c=n(35),d=n(16),p=n(83),h=function(){function e(e,t,n,i,o,s,a){var r=this;this.modalCtrl=e,this.translate=t,this.params=n,this.viewCtrl=i,this.userData=o,this.api=s,this.toastCtrl=a,this.magiklink="",this.magiklink_screen="",this.user={connexions:[]},this.newevent={},this.newevent=this.params.get("newevent"),this.newevent.lst_activities=[],this.userData.get().subscribe(function(e){return r.user=e}),this.newevent.lst_activities=[{text:"ADDEVENT.ACT_MUSIC",checked:this.newevent.activities.indexOf("music")>-1,value:"music"},{text:"ADDEVENT.ACT_PHOTO",checked:this.newevent.activities.indexOf("photo")>-1,value:"photo"},{text:"ADDEVENT.ACT_MESSAGE",checked:this.newevent.activities.indexOf("message")>-1,value:"message"},{text:"ADDEVENT.ACT_SONDAGE",checked:this.newevent.activities.indexOf("survey")>-1,value:"survey"},{text:"ADDEVENT.ACT_COMMAND",checked:this.newevent.activities.indexOf("command")>-1,value:"command"},{text:"ADDEVENT.ACT_BOARD",checked:this.newevent.activities.indexOf("board")>-1,value:"board"},{text:"ADDEVENT.ACT_LOTERIE",checked:this.newevent.activities.indexOf("loterie")>-1,value:"loterie"},{text:"ADDEVENT.ACT_BETS",checked:this.newevent.activities.indexOf("bets")>-1,value:"bets"},{text:"ADDEVENT.ACT_PRESENTATION",checked:this.newevent.activities.indexOf("presentation")>-1,value:"presentation"}],this.refresh()}t=e,e.prototype.refresh=function(){var e=this;this.newevent.activities=[],this.newevent.lst_activities.forEach(function(t){t.checked&&e.newevent.activities.push(t.value)}),this.generateCreateEventLink()},e.prototype.save=function(){this.refresh(),this.viewCtrl.dismiss(this.newevent)},e.prototype.selImage=function(){var e=this;u.openModal(this.modalCtrl,c.ImageCreatorPage,{ratio:1.5,upload:!0},function(t){null!=t&&(e.newevent.welcomePicture=t.value)})},e.prototype.generateCreateEventLink=function(){var e=this;this.api.urlshortener(u.DOMAIN_SERVER+"/magiklink?title="+encodeURIComponent(this.newevent.title)+"&activities="+this.newevent.activities.join(",")+"&flyer="+this.newevent.templateFlyer+"&noprompt=true&autologin=1").subscribe(function(t){e.magiklink=null==t.url?t.long_url:t.url})},e.prototype.onCopyEvent=function(){u.onCopy(this.toastCtrl,this.translate)},e.prototype.setDefaultWidget=function(){var e=this;u.openModal(this.modalCtrl,p.WidgetstorePage,{from:t.name},function(t){e.newevent.widgetDefault=t.name,u.toast(e.toastCtrl,"ADDEVENT.DEFAULTWIDGETSET",e.translate)})};var t;return e=t=i([s.Component({selector:"page-addevent-advanced",template:'\x3c!--\n  Generated template for the AddeventAdvancedPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="LIB.ADVANCED" >\n    <shifubutton icon="checkmark" (click)="save()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content no-padding>\n  <tuto [if]="userData.user.nEventCreated<2" label="ADDEVENT.TUTO_SETTINGS"></tuto>\n  <tuto [if]="(newevent.lst_activities[6].checked==false || newevent.lst_activities[6].checked==false) && newevent.startJetons==0"\n        label="ADDEVENT.TUTOWARNINGJETONS">\n  </tuto>\n\n  <shifucard *ngIf="userData.user.email!=\'\'" title="ADDEVENT.VISIBILITY">\n    <shifucheckbox *ngIf="userData.user.tarif.tarif!=0" id="chkVisibility" label="ADDEVENT.VISIBLEONMAP" [(ngModel)]="newevent.visibleOnMap"></shifucheckbox>\n    <shifuinput *ngIf="newevent.visibleOnMap==true" id="password" label="ADDEVENT.LIBPASSWORD" [(ngModel)]="newevent.password"></shifuinput>\n    <shifuinput label="ADDEVENT.HTAG" [(ngModel)]="newevent.hTag" *ngIf="newevent.visibleOnMap && userData.user.connexions.length>5"></shifuinput>\n    <shifuinput label="ADDEVENT.WEBSITE" id="txtWebSite" [(ngModel)]="newevent.website" *ngIf="userData.user.connexions.length>5" max="80"></shifuinput><br>\n  </shifucard>\n\n  <shifucard help="event_activities" title="ADDEVENT.ACTIVITIES" tuto="ADDEVENT.TUTOACTIVITIES">\n    <shifucheckbox *ngFor="let act of newevent.lst_activities" [(ngModel)]="act.checked" label="{{act.text}}" (click)="refresh()"></shifucheckbox>\n  </shifucard>\n\n  <shifucard title="ADDEVENT.WELCOMESCREEN" tuto="ADDEVENT.TUTOWELCOMESCREEN" [visible]="false">\n    <div style="text-align: center;width:100%">\n      <img src="{{newevent.welcomePicture}}" style="width:80%;margin-left:10%;">\n      <shifubutton id="btnWelcomePicture" icon="images" label="ADDEVENT.WELCOMEPICTURE" size="200px" (click)="selImage()"></shifubutton>\n      <shifurange unite="secondes" step="1" min="0" max="10" id="txtWelcomeDuration" icon="time" label="ADDEVENT.WELCOMEDURATION" [(ngModel)]="newevent.welcomeDuration"></shifurange>\n    </div>\n  </shifucard>\n\n  <shifucard title="LIB.EXPERT" [visible]="userData.user.connexion!=null && userData.user.connexion.length>50">\n    <ion-item>\n      <ion-label text-wrap>{{"ADDEVENT.TUTOEXPERT" | translate}}</ion-label>\n      <shifubutton item-right size="150" label="LIB.AUTOEVENT" ngxClipboard [cbContent]="magiklink" (click)="onCopyEvent()"></shifubutton>&nbsp;\n    </ion-item>\n\n    <ion-item>\n      <ion-label text-wrap>Change the default iWall</ion-label>\n      <shifubutton item-right size="150" label="ADDEVENT.DEFAULTWIDGET" (click)="setDefaultWidget()"></shifubutton>&nbsp;\n    </ion-item>\n\n\n\n  </shifucard>\n\n\n</ion-content>\n'}),o("design:paramtypes",[a.ModalController,l.TranslateService,a.NavParams,a.ViewController,r.UserData,d.ApiProvider,a.ToastController])],e)}();t.AddeventAdvancedPage=h},326:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=function(){function e(e,t,n){var i=this;this.params=e,this.viewCtrl=t,this.userData=n,this.delayFromStart=0,this.delayFromEnd=0,this.showStartIn=!0,this.showDtStart=!0,this.showDtEnd=!0,this.offset=0,this.startin=0,this.dtHour=18,this.duration=8,this.user={connexions:[]},this.newevent={},this.newevent=this.params.get("newevent"),this.offset=60*(new Date).getTimezoneOffset()*1e3,this.duration=this.newevent.duration/36e5;var o=Number(this.newevent.dtStart);this.dtStartLocal=new Date(new Date(o).getTime()-this.offset).toISOString(),this.dtEndLocal=new Date(new Date(o).getTime()-this.offset+this.newevent.duration).toISOString(),this.userData.get().subscribe(function(e){null!=e&&(i.user=e)})}return e.prototype.changeDate=function(e){this.showStartIn=!1},e.prototype.moveDelay=function(){this.dtStartLocal=new Date((new Date).getTime()-this.offset+3600*this.startin*1e3).toISOString(),this.dtEndLocal=new Date(new Date(this.dtStartLocal).getTime()+3600*this.duration*1e3).toISOString()},e.prototype.changeDelayStart=function(){this.showDtStart=!1},e.prototype.changeDelayEnd=function(){this.showDtEnd=!1},e.prototype.save=function(){this.newevent.dtStart=new Date(this.dtStartLocal).getTime()+this.offset,this.newevent.dtEnd=new Date(this.dtEndLocal).getTime()+this.offset,this.newevent.duration=this.newevent.dtEnd-this.newevent.dtStart,this.viewCtrl.dismiss(this.newevent)},e.prototype.recalcDate=function(){new Date(this.dtStartLocal).getTime()>new Date(this.dtEndLocal).getTime()&&(this.dtEndLocal=new Date(new Date(this.dtStartLocal).getTime()+288e5).toISOString()),this.showStartIn||(this.duration=Math.round((new Date(this.dtEndLocal).getTime()-new Date(this.dtStartLocal).getTime())/36e5))},e=i([s.Component({selector:"page-addevent-date",template:'\x3c!--\n  Generated template for the AddeventDatePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle [back]="true" title="Date">\n    <shifubutton id="btnSaveDate" icon="checkmark" (click)="save()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content padding>\n  <tuto label="ADDEVENT.TUTO_DATETIME"></tuto>\n\n  <div class="item text-center" style="width:100%;font-size:x-large;vertical-align: middle;">\n\n    \x3c!--<button id="btnNow" *ngIf="userData.user.connexions.length>15" class="button button-small button-positive" (click)="setNow()">{{\'LIB.NOW\' | translate }}</button><br><br>--\x3e\n\n\n    <shifucard [visible]="true" title="LIB.START">\n      <ion-item  *ngIf="showDtStart">\n        <ion-label>Start</ion-label>\n        <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="dtStartLocal" (ionChange)="recalcDate()" (click)="changeDate($event)"></ion-datetime>\n      </ion-item>\n\n      <ion-item  *ngIf="showDtStart">\n        <ion-label>Hour</ion-label>\n        <ion-datetime displayFormat="HH:mm" [(ngModel)]="dtStartLocal" (ionChange)="recalcDate()" (click)="changeDate($event)"></ion-datetime>\n      </ion-item>\n\n      <shifurange id="txtStartIn" label="LIB.BEGININ" (click)="changeDelayStart()"\n                  [(ngModel)]="startin" *ngIf="showStartIn"\n                  unite="hrs" min="0" max="24" step="1" (onmove)="moveDelay()">\n      </shifurange>\n    </shifucard>\n\n\n    <shifucard [visible]="true"  title="LIB.END">\n      <ion-item *ngIf="showDtEnd">\n        <ion-label>End</ion-label>\n        <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="dtEndLocal" (ionChange)="recalcDate()" (click)="changeDate($event)"></ion-datetime>\n      </ion-item>\n\n\n      <ion-item  *ngIf="showDtEnd">\n        <ion-label>Hour</ion-label>\n        <ion-datetime displayFormat="HH:mm" [(ngModel)]="dtEndLocal" (ionChange)="recalcDate()" (click)="changeDate($event)"></ion-datetime>\n      </ion-item>\n\n\n      <shifurange id="txtDuration" label="LIB.DURATION" (click)="changeDelayEnd()"\n                  [(ngModel)]="duration" unite="hrs" *ngIf="showStartIn"\n                  min="1" max="15" step="1" (onmove)="moveDelay()">\n      </shifurange>\n\n    </shifucard>\n\n    <br><br>\n    <label *ngIf="!showStartIn">{{\'LIB.DURATION\' | translate}}&nbsp;{{this.duration}} hrs</label>\n\n\n\n  </div>\n\n\n\n\n\n</ion-content>\n'}),o("design:paramtypes",[a.NavParams,a.ViewController,r.UserData])],e)}();t.AddeventDatePage=l},327:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=n(2),u=n(6),c=n(2),d=n(35),p=function(){function e(e,t,n,i,o,s){var a=this;this.params=e,this.viewCtrl=t,this.userData=n,this.translate=i,this.alertCtrl=o,this.modalCtrl=s,this.user={connexions:[]},this.newevent={},this.images=[],this.filter="",this.textColor="white",this.imagePlatform=function(e){var t=this;l.showPopup({title:"ADDEVENT.QUERY",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",translate:this.translate,type:"text"},this.alertCtrl,function(n){t.userData.getImageForFlyer(e,n,null,null).subscribe(function(e){e.items.forEach(function(e){t.images.push({picture:e.photo})})})})},this.newevent=this.params.get("newevent"),this.newevent.flyer=this.newevent.templateFlyer,this.onChangePicture(),this.userData.get().subscribe(function(e){return a.user=e})}return e.prototype.save=function(){this.viewCtrl.dismiss(this.newevent)},e.prototype.updateFlyer=function(e){this.newevent.flyer=e},e.prototype.defaultFlyer=function(){},e.prototype.streetView=function(){},e.prototype.selImage=function(){var e=this;c.openModal(this.modalCtrl,d.ImageCreatorPage,{ratio:1.5,upload:!0},function(t){null!=t&&(e.newevent.templateFlyer=t.value,e.onChangePicture())})},e.prototype.urlFlyer=function(){var e=this;l.showPopup({title:"ADDEVENT.URLFLYER",placeholder:"http://",translate:this.translate,type:"text"},this.alertCtrl,function(t){if(void 0!=t){e.newevent.templateFlyer=t;for(var n=0;n<4;n++)this.style_button[n]="";e.onChangePicture()}})},e.prototype.changeOffset=function(){this.onChangePicture()},e.prototype.onChangePicture=function(){var e=this,t=this.filter+this.newevent.templateFlyer;t=(t=t.replace("url=/http://","url=/")).replace("url=/https://","url=/"),this.userData.makeFlyer(this.newevent,this.newevent.option.title,this.newevent.option.address,this.newevent.option.date,this.newevent.option.teaser,this.textColor,t).subscribe(function(t){e.newevent.flyer=t.photo})},e.prototype.inverse_color=function(){this.textColor="white"==this.textColor?"black":"white",this.onChangePicture()},e=i([s.Component({selector:"page-addevent-flyer",template:'<ion-header>\n  <shifutitle title="Flyer">\n    <shifubutton id="btnSaveFlyer" icon="checkmark" (click)="save()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content padding>\n  <tuto label="ADDEVENT.TUTO_FLYER" show="btnChangeTemplate"></tuto>\n\n  <ion-grid no-padding>\n    <ion-row>\n      <ion-col text-center>\n        <svgedit code="{{newevent.flyer}}" (click)="selImage()"></svgedit><br><br>\n\n      </ion-col>\n      <ion-col text-left>\n        <shifucheckbox id="btnTitle" label="Title" [(ngModel)]="newevent.option.title" (onchange)="onChangePicture()"></shifucheckbox><br>\n        <shifucheckbox *ngIf="newevent.address!=null && newevent.address.length>0" id="btnAddress" label="Address" [(ngModel)]="newevent.option.address" (onchange)="onChangePicture()"></shifucheckbox><br>\n        <shifucheckbox id="btnTime" label="Time" [(ngModel)]="newevent.option.date" (onchange)="onChangePicture()"></shifucheckbox><br>\n        <shifucheckbox *ngIf="newevent.description!=null && newevent.description.length>0" id="btnTeaser" label="Teaser" [(ngModel)]="newevent.option.teaser" (onchange)="onChangePicture()"></shifucheckbox>\n\n\n\n          \x3c!--<shifubutton label="LIB.BLUR" (click)="blur()"></shifubutton>--\x3e\n          \x3c!--<shifubutton label="LIB.GRAYSCALE" (click)="grayscale()"></shifubutton>--\x3e\n\n      </ion-col>\n\n    </ion-row>\n<ion-row>\n  <ion-col text-center>\n    <shifubutton size="150" id="btnChangeTemplate" icon="images" label="ADDEVENT.CHANGETEMPLATE" (click)="selImage()"></shifubutton>\n  </ion-col>\n  <ion-col text-center>\n    <shifubutton size="150" label="LIB.INVERSECOLOR" (click)="inverse_color()"></shifubutton>\n  </ion-col>\n</ion-row>\n\n  </ion-grid>\n\n\n\n\n  <br>\n  <span *ngIf="userData.user.connexions!=null && userData.user.connexions.length<10">\n    Pour une personnalisation total du flyer il est préférable d\'utiliser un logiciel de graphisme (type Gimp) puis de télécharger l\'image obtenue\n  </span>\n\n  \x3c!--<ion-card *ngIf="images.length>0">--\x3e\n    \x3c!--<ion-card-header>--\x3e\n      \x3c!--{{"ADDEVENT.FINDFLYER" | translate}}--\x3e\n    \x3c!--</ion-card-header>--\x3e\n    \x3c!--<ion-card-content>--\x3e\n      \x3c!--<img *ngFor="let img of images"--\x3e\n           \x3c!--name="flyerImages"--\x3e\n           \x3c!--src="{{img.picture}}"--\x3e\n           \x3c!--style="margin: 5px;display:inline;width:100px;height:150px;"--\x3e\n           \x3c!--(click)="selImage(img)">--\x3e\n    \x3c!--</ion-card-content>--\x3e\n  \x3c!--</ion-card>--\x3e\n\n\n\n  \x3c!--<shifubutton id="btnLocal" size="150" icon="ion-android-map" (click)="streetView()" label="Local" *ngIf="userData.user.connexions.length>10"></shifubutton>--\x3e\n  \x3c!--<shifubutton id="btnGallery" size="150" icon="ion-image" label="Gallery" (click)="defaultFlyer()"></shifubutton>--\x3e\n  \x3c!--<shifubutton id="btnURL" size="150" icon="ion-link" label="URL" (click)="urlFlyer()"></shifubutton>--\x3e\n  \x3c!--<shifubutton id="btnPixabay"  size="150" icon="ion-image" (click)="imagePlatform(\'pixabay\')" label="PixaBay" *ngIf="userData.user.connexions.length>10"></shifubutton>--\x3e\n  \x3c!--<shifubutton id="btnInstagram" size="150" icon="ion-social-instagram" label="Instagram" (click)="imagePlatform(\'instagram\')"></shifubutton>--\x3e\n\n  \x3c!--<color label="{{\'LIB.COLOR\' | translate}}" size="200" update-color="updateColor(color)" start-color="#ffffff"></color><br><br>--\x3e\n\n</ion-content>\n'}),o("design:paramtypes",[a.NavParams,a.ViewController,r.UserData,u.TranslateService,a.AlertController,a.ModalController])],e)}();t.AddeventFlyerPage=p},328:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=n(2),u=n(2),c=n(6),d=function(){function e(e,t,n,i,o,s,a){this.viewCtrl=e,this.navCtrl=t,this.navParams=n,this.userData=i,this.alertCtrl=o,this.toastCtrl=s,this.translate=a,this.tarifs=[],this.newUsers=0,this.reduction=0}return e.prototype.ionViewDidLoad=function(){var e=this;this.userData.getmynewusers(this.userData.user.tarif.dtLastPayment).subscribe(function(t){void 0!=t.items&&(e.newUsers=t.items.length,e.reduction=.25*e.newUsers),e.userData.getAllTarifs().subscribe(function(t){e.tarifs=t.items})})},e.prototype.selTarif=function(e){var t=this;l.showConfirm("TARIF.CHANGECONFIRMATION",this.alertCtrl,this.translate,function(){var n=t.tarifs.indexOf(e),i=t;t.userData.updatetarif(t.tarifs[n].tarif).subscribe(function(e){t.userData.user=e,l.toast(i.toastCtrl,e.message,i.translate),t.viewCtrl.dismiss()})},function(){t.viewCtrl.dismiss()})},e.prototype.openDoc=function(e){l.openWindow(e.doc)},e.prototype.pay=function(){var e=this;u.showPopup({title:"Payment",placeholder:"",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){null!=t&&e.userData.creditaccount(t).subscribe(function(t){e.userData.user=t})})},e=i([s.Component({selector:"page-tarifs",template:'<ion-header>\n  <shifutitle label="LIB.TARIFS">\n    <shifubutton id="btnClose" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content padding>\n  <h1>{{userData.user.tarif.name}}</h1>\n\n  <ion-row>\n    <ion-col>\n      {{\'LIB.ACCOUNT\' | translate}}\n      <shifubutton [small]="true" label="Credit Card" (click)="pay()" id="btnPayment"></shifubutton>\n    </ion-col>\n    <ion-col text-right>{{userData.user.realCredits}}{{\'LIB.MONEY\' | translate}}</ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col>{{\'TARIF.NEXTPAYMENT\' | translate}} <shifutimer [end]="userData.user.tarif.dtNextPayment"></shifutimer></ion-col>\n    <ion-col text-right>{{userData.user.tarif.recursive_cost}}{{\'LIB.MONEY\' | translate}}</ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col>{{\'TARIF.NEWUSERS\' | translate}}</ion-col>\n    <ion-col text-right>{{newUsers}}&nbsp;<ion-icon name="person"></ion-icon></ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col>{{\'LIB.DISCOUNT\' | translate}}</ion-col>\n    <ion-col text-right>{{reduction}}{{\'LIB.MONEY\' | translate}}</ion-col>\n  </ion-row>\n  <br>\n\n  <shifucard shifuid="tarif" [visible]="userData.user.tarif.label==item.label" [title]="item.label" *ngFor="let item of tarifs" icon="document" (onclick)="openDoc(item)">\n    {{\'LIB.ABO\' | translate}}:{{item.recursive_cost}}&nbsp;<img src="./assets/img/money.png" class="small-money"><br>\n    {{\'LIB.NEWEVENT\' | translate}}:{{item.newevent_cost}}&nbsp;<img src="./assets/img/money.png" class="small-money"><br>\n    \x3c!--{{\'LIB.ENGAGEMENT\' | translate}}:{{item.engagement}}&nbsp;{{\'LIB.DAYS\' | translate}}<br>--\x3e\n    <shifubutton shifuid="btnSubscribe" *ngIf="userData.user.tarif.label!=item.label" label="LIB.SUBSCRIBE" (click)="selTarif(item)"></shifubutton>\n  </shifucard>\n</ion-content>\n'}),o("design:paramtypes",[a.ViewController,a.NavController,a.NavParams,r.UserData,a.AlertController,a.ToastController,c.TranslateService])],e)}();t.TarifsPage=d},329:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=n(15),u=n(2),c=n(6),d=function(){function e(e,t,n,i,o,s,a,r){this.navCtrl=e,this.navParams=t,this.translate=n,this.viewCtrl=i,this.userData=o,this.alertCtrl=s,this.eventData=a,this.toastCtrl=r,this.newpres=null,this.costToPresent=0;var l=Math.min((this.eventData.event.dtEnd-(new Date).getTime())/6e4,this.eventData.event.maxPresDuration),u=l/2;u>180&&(u=180),this.newpres={title:"",text:"",description:"",support:"",file:"",format:"",from:this.userData.user,duration:u,dtStart:Math.max((new Date).getTime(),this.eventData.event.dtStart),dtEnd:Math.max((new Date).getTime(),this.eventData.event.dtStart)+6e4*u,maxdelay:l},this.costToPresent=this.eventData.event.pricePerMinute?this.newpres.duration*this.eventData.event.priceToPresent:this.eventData.event.priceToPresent}return e.prototype.close=function(){this.newpres.dtEnd=this.newpres.dtStart+6e4*this.newpres.duration,this.viewCtrl.dismiss(this.newpres)},e.prototype.setSupport=function(e){e.mega>20?u.toast(this.toastCtrl,"FILE.TOOLARGE",this.translate):(this.newpres.support=e.value,this.newpres.file=e.file,this.newpres.mega=e.mega,this.newpres.size=e.size,this.newpres.format=e.format,""==this.newpres.title&&(this.newpres.title=this.newpres.file.split(".")[0]))},e.prototype.openLink=function(){var e=this;u.showPopup({title:"URL du document",default:"",cancelButton:"LIB.CANCEL",confirmButton:"LIB.OK",type:"text",translate:this.translate},this.alertCtrl,function(t){null!=t&&(e.newpres.support=t,e.newpres.file=t,e.newpres.format=t.substr(t.lastIndex(".")))})},e.prototype.updateDuration=function(){this.costToPresent=this.eventData.event.pricePerMinute?Number(this.newpres.duration)*this.eventData.event.priceToPresent:this.eventData.event.priceToPresent},e=i([s.Component({selector:"page-addpresentation",template:'\x3c!--\n  Generated template for the AddpresentationPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="Nouvelle presentation">\n    <shifubutton [small]="true" icon="checkmark"\n                 label="LIB.SAVE" id="btnSave"\n                 *ngIf="newpres.support.length>0 && newpres.title.length>0 && newpres.text.length>0"\n                 (click)="close()"></shifubutton>\n    <shifubutton [small]="true" id="btnCancel" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content padding>\n  <tuto label="ADDPRESENTATION.TUTO" position="title" show="txtTitle"></tuto>\n  <br>\n  <ion-item text-center no-lines no-border no-margin>\n    <shifufile\n      id="btnTakeFile"\n      tips="Sélectionner un fichier sur votre téléphone"\n      size="50"\n      [hourglass]="true"\n      icon="add-circle"\n      (onTake)="setSupport($event)">\n    </shifufile>\n    <shifubutton size="50" icon="link" (click)="openLink()"></shifubutton><br>\n    <span *ngIf="newpres.file.length>0" style="font-size: small">{{newpres.file}}</span>\n  </ion-item>\n\n  <shifuinput label="LIB.TITLE" [focus]="true" style="font-size: x-large;" id="txtTitle" [(ngModel)]="newpres.title"></shifuinput>\n  <br>\n  <shifuinput label="LIB.TEASER" *ngIf="newpres.title.length>2" [(ngModel)]="newpres.text"></shifuinput>\n\n    \x3c!--<div style="text-align: center;width:100%">--\x3e\n      \x3c!--<img *ngIf="newpres.picture.length>0" src="{{newpres.picture}}" style="width:80%;" class="image-photo" (click)="selImage()"><br>--\x3e\n      \x3c!--<shifubutton id="btnAddImage" *ngIf="newpres.picture.length==0" icon="image" (click)="selImage()"></shifubutton><br>--\x3e\n      \x3c!--<br>--\x3e\n    \x3c!--</div>--\x3e\n\n    <ion-item *ngIf="eventData.event.priceToPresent>0" text-center no-lines style="font-size: x-large">\n      Price to present : {{costToPresent}}\n    </ion-item>\n    <br>\n    <shifurange\n      *ngIf="newpres.title!=null && newpres.title.length>0"\n      icon="time" id="txtDuration" label="LIB.DURATION"\n      unite="minutes" [(ngModel)]="newpres.duration" min="1"\n      max="{{newpres.maxdelay}}"  step="1"\n      (onchange)="updateDuration()"\n    >\n    </shifurange>\n\n\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.NavParams,c.TranslateService,a.ViewController,r.UserData,a.AlertController,l.EventDataProvider,a.ToastController])],e)}();t.AddpresentationPage=d},330:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(16),l=n(6),u=n(8),c=n(15),d=n(22),p=function(){function e(e,t,n,i,o,s,a,r,l){this.userData=e,this.eventData=t,this.viewCtrl=n,this.toastCtrl=i,this.events=o,this.api=s,this.navParams=a,this.domSanitizer=r,this.translate=l,this.pres=null,this.pres=this.navParams.get("pres")}return e.prototype.page=function(e,t){e.page>0&&(e.page=e.page+t,this.eventData.gotopage(e).subscribe(function(){}))},e=i([s.Component({selector:"page-remote",template:'\x3c!--\n  Generated template for the RemotePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="LIB.REMOTE">\n    <shifubutton [small]="true" id="btnClose" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content padding text-center>\n\n\n      <ion-icon name="hourglass"></ion-icon>\n      <shifutimer style="font-size: larger" [end]="pres.dtEnd"></shifutimer>&nbsp;&nbsp;-&nbsp;\n      Page<span style="font-size: large">&nbsp;{{pres.page}}&nbsp;/&nbsp;{{pres.nPages}}</span>\n      <br>\n\n\n <img   *ngIf="pres.pages!=null"\n         class="image-photo"\n         [src]="pres.pages[pres.page-1]"\n         style="max-height:40%;">\n  <br>\n    <ion-item text-center no-lines no-border>\n        <ion-icon *ngIf="pres.page>1" style="font-size: 7em;" name="arrow-dropleft" (click)="page(pres,-1)"></ion-icon>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n        <ion-icon *ngIf="pres.page<pres.nPages" style="font-size: 7em;" name="arrow-dropright" (click)="page(pres,1)"></ion-icon>\n        <br>\n    </ion-item>\n\n\n    <ion-item no-lines text-center *ngIf="pres.page<pres.nPages">\n        {{"LIB.NEXTSLIDE" | translate}}<br>\n        <img\n              *ngIf="pres.pages!=null"\n                class="image-photo"\n                [src]="pres.pages[pres.page]"\n                style="max-height:40%;width:90%;"\n                (click)="page(pres,1)">\n\n    </ion-item>\n\n\n</ion-content>\n'}),o("design:paramtypes",[u.UserData,c.EventDataProvider,a.ViewController,a.ToastController,a.Events,r.ApiProvider,a.NavParams,d.DomSanitizer,l.TranslateService])],e)}();t.RemotePage=p},331:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(15),l=n(8),u=n(2),c=n(20),d=function(){function e(e,t,n,i,o){this.events=e,this.navParams=t,this.settings=n,this.eventData=i,this.userData=o,this.tabs=[],this.myindex=0,this.refresh()}return e.prototype.refresh=function(){u.$$("Refresh des onglets");this.tabs=[],this.tabs=u.buildTabs(this.userData.user,this.eventData.event,u.iif("pro"==this.settings.ihm,"pro",""));for(var e=0;e<this.tabs.length;e++)this.userData.user.connexions.length>5&&(this.tabs[e].tabTitle=""),this.tabs[e].shifuid=this.tabs[e].name,this.tabs[e].name==this.navParams.data.tabName&&(this.myindex=e)},e.prototype.changeTab=function(){this.userData.selectTab=this.tabRef.getSelected().root,void 0!=this.eventData.event.blacklist&&this.eventData.event.blacklist.indexOf(this.userData.user.id)>-1&&this.events.publish("event:logout",{message:"SELEVENT.BLACKLIST"})},i([s.ViewChild("myTabs"),o("design:type",a.Tabs)],e.prototype,"tabRef",void 0),e=i([s.Component({template:'<ion-tabs id="tabShifumix" #myTabs [selectedIndex]="myindex" (ionChange)="changeTab()">\n  <div *ngFor="let tab of tabs" id="{{tab.name}}">\n    <ion-tab\n             tabTitle="{{tab.tabTitle | translate}}"\n             [root]="tab.root"\n             tabIcon="{{tab.tabIcon}}"\n             tabUrlPath="{{tab.tabUrl}}">\n    </ion-tab>\n  </div>\n</ion-tabs>\n\n'}),o("design:paramtypes",[a.Events,a.NavParams,c.SettingsProvider,r.EventDataProvider,l.UserData])],e)}();t.TabsPage=d},332:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(44),l=n(185),u=n(8),c=function(){function e(e,t,n,i,o){var s=this;this.navCtrl=e,this.plt=t,this.menu=n,this.userData=i,this.storage=o,this.showSkip=!0,this.tutos=["./assets/img/tuto1.svg","./assets/img/tuto2.svg","./assets/img/tuto3.svg"],this.type_tuto="normal",this.storage.get("type").then(function(e){s.type_tuto=e});"en"==t.lang()&&(this.tutos=["./assets/img/tuto1.svg","./assets/img/tuto2.svg","./assets/img/tuto3.svg"]),void 0!=this.userData.user&&this.userData.clearhisto().subscribe(function(e){null!=e&&(s.userData.user=e)})}return e.prototype.startApp=function(){var e=this;this.navCtrl.setRoot(l.LoginPage).then(function(){e.storage.set("hasSeenTutorial","true")})},e.prototype.onSlideChangeStart=function(e){this.showSkip=!e.isEnd()},e.prototype.ionViewWillEnter=function(){this.slides.update()},e.prototype.ionViewDidEnter=function(){this.menu.enable(!1)},e.prototype.ionViewDidLeave=function(){this.menu.enable(!0)},i([s.ViewChild("slides"),o("design:type",a.Slides)],e.prototype,"slides",void 0),e=i([s.Component({selector:"page-tutorial",template:'<ion-header no-border>\n  <ion-navbar>\n    <ion-buttons end *ngIf="showSkip">\n      <button id="btnSkip" ion-button (click)="startApp()" color="primary">Skip</button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content>\n  <ion-slides #slides (ionSlideWillChange)="onSlideChangeStart($event)" pager>\n    <ion-slide *ngFor="let tuto of tutos">\n      <img width="100%" height="100%" [src]="tuto" class="slide-image">\n    </ion-slide>\n\n    <ion-slide>\n      <h2 class="slide-title">Ready to Play?</h2>\n      <button ion-button icon-end large clear (click)="startApp()">\n        Continue\n        <ion-icon name="arrow-forward"></ion-icon>\n      </button>\n    </ion-slide>\n\n  </ion-slides>\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.Platform,a.MenuController,u.UserData,r.Storage])],e)}();t.TutorialPage=c},333:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(20),l=function(){function e(e,t,n){this.navCtrl=e,this.viewCtrl=t,this.settings=n,this.view="feedback"}return e=i([s.Component({selector:"page-user",template:'<ion-header>\n  <shifutitle title="Support" menu="false">\n    <shifubutton icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-margin no-padding>\n\n  <ion-segment color="primary" [(ngModel)]="view">\n    <ion-segment-button [hidden]="settings.forum_url==null" id="cmdForum" value="forum">Forum</ion-segment-button>\n    <ion-segment-button [hidden]="settings.feedback_url==null"  id="cmdFeedback" value="feedback">Feedback</ion-segment-button>\n    <ion-segment-button [hidden]="settings.blog_url==null" id="cmdBlog" value="blog">Blog</ion-segment-button>\n  </ion-segment>\n\n\n  <iframe\n    *ngIf="view==\'forum\'"\n    [src]="settings.forum_url | safe"\n    style="width:100%;border-style: none;min-height:750px;">\n  </iframe>\n\n\n  <iframe\n    *ngIf="view==\'feedback\'"\n    [src]="settings.feedback_url | safe"\n    style="width:100%;border-style: none;min-height:750px;">\n  </iframe>\n\n  <iframe\n    *ngIf="view==\'blog\'"\n    [src]="settings.blog_url | safe"\n    style="width:100%;border-style: none;min-height:750px;">\n  </iframe>\n\n\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.ViewController,r.SettingsProvider])],e)}();t.SupportPage=l},334:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(15),r=n(3),l=n(3),u=n(8),c=n(2),d=n(335),p=n(22),h=n(55),f=n(2),m=n(2),g=n(48),v=n(107),E=n(6),b=n(187),y=n(16),T=n(85),I=function(){function e(e,t,n,i,o,s,a,r,l,u,c,d,p){this.events=e,this.modalCtrl=t,this.navCtrl=n,this.navParams=i,this.api=o,this.eventData=s,this.userData=a,this.loadingCtrl=r,this.sanitizer=l,this.translate=u,this.notifs=c,this.alertCtrl=d,this.toastCtrl=p,this.songs=[],this.flyer="",this.catalogues=[],this.lastRefresh=0,this.toSend=[],this.handleToSend=null,this.handle=null,this.musicServers=["Spotify","Deezer","Cloud","YouTube","Perso"],this.lastsong=""}return e.prototype.ionViewDidLoad=function(){var e=this;c.subscribe("playlist",this),this.delay=c.getDelay(this.eventData.event.dtStart,this.userData.user.lang,"LIB.DAY"),this.api.getcatalogues().subscribe(function(t){e.catalogues=t.result.split(",")}),this.eventData.event.owner_id==this.userData.user.id&&(null==this.eventData.event.musicServer&&this.openMusicServer(),0!=this.eventData.event.musicServer||null!=this.userData.user.accessTokens&&null!=this.userData.user.accessTokens.spotify||this.openMusicServer())},e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.refresh(!0)},f.DELAY_TO_REFRESH)},e.prototype.openPublicProfile=function(e){c.openModal(this.modalCtrl,h.PublicProfilPage,{userid:e.from.id})},e.prototype.runPlayer=function(){var e=this;this.eventData.event.musicServer!=m.MUSICSERVER_PERSO?this.userData.getwidgets("music").subscribe(function(t){var n=null;t.items.forEach(function(t){(e.eventData.event.musicServer!=m.MUSICSERVER_YOUTUBE&&"player"==t.name||e.eventData.event.musicServer==m.MUSICSERVER_YOUTUBE&&"videos"==t.name)&&(n=t)}),null!=n&&e.userData.getwidget(n.id,!0).subscribe(function(t){f.openModal(e.modalCtrl,b.WidgetPage,{widget:t,user:e.userData.user,event:e.eventData.event,preview:!1})})}):this.djplay(this.songs[0])},e.prototype.openMusicServer=function(){var e=this;this.eventData.event.musicServer==f.MUSICSERVER_LOCAL&&this.userData.clearPlaylist(),f.openModal(this.modalCtrl,v.MusicserverPage,{from:"home"},function(t){null!=t.user&&(e.userData.user=t.user,e.eventData.event.musicServer=t.user.musicServer)})},e.prototype.addsongs=function(e,t,n,i){var o=this;-1==e.songs.indexOf(t[n])&&(e.songs.push(t[n]),e.lastsong=t[n].Id,e.eventData.addsong(t[n]).subscribe(function(s){c.toast(e.toastCtrl,s.message,e.translate),n<t.length-1&&o.songs.length<o.eventData.event.playlistLimits?e.addsongs(e,t,n+1,i):i()},function(t){c.toast(e.toastCtrl,"LIB.ERRORRETRY",e.translate)}))},e.prototype.addsongauto=function(){var e=this;f.showPopup({title:this.translate.instant("HOME.ADDSONGAUTOTITLE"),value:10,confirmButton:this.translate.instant("LIB.OK"),cancelButton:this.translate.instant("LIB.CANCEL"),type:"number"},this.alertCtrl,function(t){if(t>0){var n=m.loading(e);e.eventData.addsongsauto(t).subscribe(function(t){null!=n&&n.dismiss(),e.refresh(!0)},function(){null!=n&&n.dismiss()})}})},e.prototype.addsong=function(e){var t=this;void 0===e&&(e=null);var n=this;if((n.eventData.event.dtEnd-(new Date).getTime())/6e4<3)c.toast(n.toastCtrl,"BETS.NOTENOUGHTTIMETOSONG",this.translate);else if(n.userData.user.score<n.eventData.event.minScore)c.toast(n.toastCtrl,"ERROR.NOTENOUGHTSCORE",this.translate,function(){n.navCtrl.push("ChartsPage",{type:"score"})});else{if(!this.eventData.event.opened&&this.songs.length>=this.eventData.event.prePlaylistLimits)return void c.toast(n.toastCtrl,"ADDEVENT.PREPLAYLISTLIMIT",this.translate);var i=null;c.openModal(this.modalCtrl,d.SearchPage,{query:e,catalogues:this.catalogues},function(e){e&&(e.songs.length>2&&(i=m.loading(t)),n.addsongs(n,e.songs,0,function(){null!=i&&i.dismiss()}))})}},e.prototype.searchArtist=function(e){this.addsong(e.author)},e.prototype.openInvite=function(){f.openModal(this.modalCtrl,g.InvitePage,{type:c.INVITE_PLAYLIST,event:this.eventData.event,from:this.userData.user,dest:"home"})},e.prototype.openInfo=function(e){""!=e.url&&c.openWindow(e.url,"_blank")},e.prototype.updateEvent=function(){this.eventData.updateevent("minSongsInPlaylist,addSongOnlyByCharts,addSongOnlyByOwner,limitPlaylistSongsByUser,limitSearchToOwnerPlaylist,playlistLimits,prePlaylistLimits,musicServer").subscribe(function(e){})},e.prototype.delSong=function(e){var t=this.songs.indexOf(e),n=this;e.from.id!=n.userData.user.id&&n.userData.user.id!=n.eventData.event.owner.id||c.showConfirm("HOME.CONFIRMDELETE",n.alertCtrl,this.translate,function(){n.songs.splice(t,1),n.eventData.deletemessage(e.id,n.userData.user.id).subscribe(function(e){})})},e.prototype.onSetScore=function(e,t){var n=this,i=this.songs.indexOf(t),o=this;this.toSend.push({target:t.id,event:o.eventData.event.id,from:o.userData.user.id,value:e,description:""}),o.songs[i].canVote=!1,o.songs[i].score=o.songs[i].score+e,null!=this.handleToSend&&clearTimeout(this.handleToSend),this.handleToSend=setTimeout(function(){o.userData.sendvotes({votes:n.toSend}).subscribe(function(e){n.toSend=[],c.toast(o.toastCtrl,null==e?"ERROR.RETRY":o.userData.user.message,o.translate)},function(e){m.$$("error",e),c.toast(o.toastCtrl,"ERROR.RETRY",o.translate)})},2e3)},e.prototype.nextSong=function(){this.eventData.nextsong(this.eventData.event.secretCode).subscribe(function(e){})},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=!1);var n=this;m.$$("Appel de refresh sur HomePage"),(e||void 0==this.userData.selectTab||"HomePage"==this.userData.selectTab)&&(m.$$("Confirmation de refresh"),this.eventData.update(),this.eventData.getplaylist(n.eventData.event.id).subscribe(function(i){if(null!=i){n.songs=i.hasOwnProperty("items")?i.items:[];var o={};if(n.songs.length>0){n.flyer="";for(var s=0;s<n.songs.length;s++)n.songs[s].canVote=n.songs[s].from.id!=n.userData.user.id,n.songs[s].dtCreate>t.lastRefresh&&n.songs[s].from.id!=t.userData.user.id&&(o={title:"Shifumix - Playlist",body:"New track "+n.songs[s].title+" from "+n.songs[s].from.firstname,image:n.songs[s].picture,vibrator:[200,100,200]},t.lastRefresh=n.songs[s].dtCreate),n.songs[s].canVote&&n.songs[s].hasOwnProperty("votes")&&n.songs[s].votes.forEach(function(e){n.songs[s].canVote&&e.from==n.userData.user.id&&(n.songs[s].canVote=!1)});!e&&o.hasOwnProperty("title")&&c.notif(t.notifs,o,t.translate)}n.songs.length>5&&n.lastsong.length>0&&setTimeout(function(){n.scrollTo(n.lastsong),n.lastsong=""},500)}}))},e.prototype.scrollTo=function(e){m.$$("Recherche de "+e);var t=document.getElementById(e);null!=t&&this.content.scrollTo(0,t.offsetTop,2e3)},e.prototype.djplay=function(e){var t=this;this.eventData.event.musicServer==m.MUSICSERVER_PERSO&&this.eventData.djplay(e).subscribe(function(){f.toast(t.toastCtrl,e.title+" "+t.translate.instant("LIB.ONAIR"),t.translate)})},e.prototype.stopcurrentsong=function(){this.eventData.stopcurrentsong().subscribe(function(){})},i([s.ViewChild(r.Content),o("design:type",r.Content)],e.prototype,"content",void 0),e=i([s.Component({selector:"home",template:'<ion-header>\n  <shifutitle help="#" title="Music">\n    <span *ngIf="songs.length>=eventData.event.playlistLimits">{{\'HOME.FULLPLAYLIST\' | translate}}</span>\n\n    <div *ngIf="songs.length>3 && eventData.online && (!eventData.event.addSongOnlyByOwner || eventData.event.Moderators.indexOf(userData.user.id)>-1) && userData.user.score>=eventData.event.minScore && songs.length<eventData.event.playlistLimits">\n      <shifubutton [small]="true"\n                   id="btnAddSongFromCharts"\n                   tips="LIB.CHARTS"\n                   icon="medal"\n                   (click)="addsong(\'charts\')">\n      </shifubutton>\n\n      <shifubutton [small]="true"\n                   id="btnAddSong"\n                   size="0"\n                   label="HOME.ADDSONG"\n                   icon="add-circle"\n                   *ngIf="!eventData.event.addSongOnlyByCharts"\n                   (click)="addsong()">\n      </shifubutton>\n    </div>\n\n  </shifutitle>\n</ion-header>\n\n<ion-content>\n  <tuto position="title"\n    [if]="userData.user.id==eventData.event.owner_id && songs.length==0 && eventData.event.musicServer==4"\n    label="">\n    Vous utiliser le mode manuel de Shifumix. C\'est vous qui mettez la musique en consultant éventuellement la playlist souhaitée.Vous pouvez passer en automatique en changeant de catalogue:<br>\n    <shifubutton item-end [small]="true" *ngIf="songs.length==0" icon="build" label="Change" (click)="openMusicServer()"></shifubutton>\n  </tuto>\n\n\n  <tuto [if]="userData.user.connexions.length>5 && songs.length>2"  label="HOME.TUTOADVANCED"></tuto>\n  <tuto [if]="eventData.event.currentSong==\'\' && eventData.event.opened && userData.user.id==eventData.event.owner_id && songs.length>0"  label="HOME.RUNPLAYER_TUTO"></tuto>\n  <tuto [if]="eventData.event.musicServer==4 && eventData.event.opened && userData.user.id==eventData.event.owner_id && songs.length>0"\n        label="Informer vos invités que vous allez jouer un titre de la playlist"\n        show="cmdPlayInPlaylist"></tuto>\n\n  <ion-item-sliding *ngIf="eventData.event.currentSong!=undefined">\n    <ion-item>\n      <ion-thumbnail item-start>\n        <img src="./assets/img/vinyl.gif">\n      </ion-thumbnail>\n      {{eventData.event.currentSong.title}}<br>\n      <span style="font-size: x-small">{{eventData.event.currentSong.author}}</span>\n      <ion-note item-end *ngIf="eventData.event.musicServer!=4 || userData.user.id!=eventData.event.owner_id">\n        <shifutimer [onlyPositif]="true" [end]="eventData.event.currentSong.dtEnd"></shifutimer>\n      </ion-note>\n\n      <shifubutton [small]="true" item-end *ngIf="eventData.event.currentSong!=null && eventData.event.musicServer==4 && userData.user.id==eventData.event.owner_id"\n                   icon="pause" [hidewhenclick]="true" (click)="stopcurrentsong()"></shifubutton>\n    </ion-item>\n\n    <ion-item-options>\n      <shifubutton *ngIf="userData.user.id==eventData.event.owner_id" icon="play" (click)="nextSong()"></shifubutton>\n      <shifubutton icon="info" (click)="openCurrentSong()"></shifubutton>\n    </ion-item-options>\n\n\n  </ion-item-sliding>\n\n  <ion-item text-center *ngIf="!eventData.event.opened">\n            <span style="font-size: x-large">\n                <span style="font-size:medium">{{eventData.event.title}}</span><br>\n                <span style="font-size:small">{{\'LIB.STARTIN\' | translate}}&nbsp;<shifutimer [end]="eventData.event.dtStart"></shifutimer></span>\n            </span>\n  </ion-item>\n\n  <div class="text-center">\n    <span *ngIf="userData.user.score<eventData.event.minScore">Score:{{userData.user.score}}&nbsp;:&nbsp;{{\'ERROR.NOTENOUGHTSCORE\' | translate}}</span>\n    <span *ngIf="userData.user.score>eventData.event.minScore && userData.user.score-5<eventData.event.minScore">Score={{userData.user.score}}&nbsp;:&nbsp;{{\'INFO.SCORELOWTOADDSONG\' | translate}}</span>\n  </div>\n\n  <ion-list id="playlist_list" no-lines *ngIf="songs.length>0" style="padding: 0px;margin: 0px;">\n\n    <tuto [if]="songs.length>0 && userData.user.id!=eventData.event.owner_id" label="HOME.TUTOWITHMUSIC"></tuto>\n    <tuto [if]="songs.length>0 && userData.user.id==eventData.event.owner_id && musicServer==4"\n          show="btnPlaySingle"\n          label="HOME.TUTOWITHMUSICANDPERSO">\n    </tuto>\n\n    <ion-item-sliding name="playlist_song" [id]="song.id" *ngFor="let song of songs" (dblclick)="djplay(song)">\n      <ion-item>\n        <ion-icon item-start >\n          <img style="box-shadow: 4px 4px 7px #bfbfbf;border: 1px #bfbfbf solid;width:60px;height:60px;" src="{{song.picture}}">\n        </ion-icon>\n\n        <p>{{song.shortTitle}} <span style="font-size: x-small" [hidden]="song.from.anonymous || song.vote==false"> by {{song.from.firstname}}</span></p>\n        <p><span style="font-size: x-small">{{song.author}}</span></p>\n\n        <div item-end *ngIf="song.canVote">\n          <shifubutton [small]="true" name="btnLike" icon="thumbs-up" (click)="onSetScore(1,song)"></shifubutton>\n          <shifubutton [small]="true" name="btnDislike"  icon="thumbs-down" (click)="onSetScore(-1,song)"></shifubutton>\n        </div>\n\n        <ion-note item-end [hidden]="song.canVote || (eventData.event.musicServer==4 && userData.user.id==eventData.event.owner_id)">\n          <shifunote [object]="song"></shifunote>\n        </ion-note>\n\n        <shifubutton item-end *ngIf="eventData.event.musicServer==4 && userData.user.id==eventData.event.owner_id"\n                     [small]="true" [hidewhenclick]="true" name="btnPlaySingle"\n                     icon="play" (click)="djplay(song)"></shifubutton>\n\n      </ion-item>\n      <ion-item-options>\n\n        \x3c!--<div style="width:20px;" text-center *ngIf="song.duration>0" color="information" style="padding-left:5px;">--\x3e\n          \x3c!--<p text-center>{{song.duration}}</p>--\x3e\n          \x3c!--secondes--\x3e\n        \x3c!--</div>--\x3e\n\n        <div style="width:10px;">\n\n        </div>\n\n        <button name="cmdInfoFrom" ion-button color="seconday" *ngIf="song.from.id!=userData.user.id" (click)="openPublicProfile(song)">\n          <ion-icon name="person"></ion-icon>\n        </button>\n\n        <button name="cmdPlay" ion-button color="seconday" *ngIf="eventData.event.musicServer==4 && eventData.event.Moderators.indexOf(userData.user.id)>-1" (click)="djplay(song)">\n          <ion-icon name="play"></ion-icon>\n        </button>\n\n\n        <button name="cmdDelSong" ion-button color="danger" *ngIf="song.from.id==userData.user.id || eventData.event.Moderators.indexOf(userData.user.id)>-1"  (click)="delSong(song)">\n          <ion-icon name="trash"></ion-icon>\n        </button>\n\n        \x3c!--<button name="cmdInfoSong" ion-button color="information" *ngIf="song.url!=\'\'" (click)="openInfo(song)">--\x3e\n          \x3c!--<ion-icon name="information-circle"></ion-icon>--\x3e\n        \x3c!--</button>--\x3e\n\n        <button name="cmdSearchArtist" ion-button color="secondary" (click)="searchArtist(song)">\n          <ion-icon name="search"></ion-icon>\n        </button>\n      </ion-item-options>\n\n    </ion-item-sliding>\n  </ion-list>\n\n  <br>\n\n  <div style="text-align: center;width: 100%;" *ngIf="!eventData.event.addSongOnlyByOwner || eventData.event.owner_id==userData.user.id">\n    <br>\n    <shifubutton id="btnAddSong2"\n                 style="max-width:350px;"\n                 icon="add-circle"\n                 size="120"\n                 label="HOME.ADDSONG"\n                 *ngIf="eventData.online && userData.user.score>=eventData.event.minScore\n                        && songs.length<eventData.event.playlistLimits\n                        && (!eventData.event.addSongOnlyByCharts || eventData.event.Moderators.indexOf(userData.user.id)>-1)"\n                 (click)="addsong()">\n    </shifubutton>\n\n    <shifubutton\n                 *ngIf="eventData.event.addSongOnlyByCharts"\n                 id="btnAddSongFromCharts2"\n                 label="LIB.CHARTS"\n                 size="120"\n                 icon="add-circle"\n                 (click)="addsong(\'charts\')">\n    </shifubutton>\n\n\n    <shifubutton id="btnAddSongAuto"\n                 style="max-width:350px;"\n                 size="120"\n                 icon="add-circle"\n                 label="HOME.ADDSONGAUTO"\n                 *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1\n                      && eventData.online\n                      && userData.user.score>=eventData.event.minScore\n                      && songs.length<5\n                      && eventData.event.musicServer!=2"\n                 (click)="addsongauto()">\n    </shifubutton>\n\n\n  </div>\n  <br>\n\n\n  \x3c!--Zone réserver au master de ceremony--\x3e\n  <shifucard [visible]="(songs.length==0 && userData.user.connexions.length>10) || (songs.length>0 && eventData.event.currentSong==\'\')"\n             title="LIB.EVENTMASTER"\n             id="cardMaster"\n             tuto="TUTO.EVENTMASTER" icon="desktop" (onclick)="events.publish(\'open:widget\',\'music\')"\n             *ngIf="userData.user.id==eventData.event.owner_id">\n    <tuto [if]="songs.length==0 && userData.user.connexions.length>5 && userData.user.id==eventData.event.owner_id" label="HOME.TUTOADMIN"></tuto>\n\n    \x3c!--Player de la musique--\x3e\n    <ion-item>\n      <ion-label item-start>\n        <span style="font-weight: 200">Catalogue:</span>&nbsp;{{musicServers[eventData.event.musicServer]}}\n        <span *ngIf="eventData.event.opened && eventData.event.musicServer==0" style="font-size:small">\n          <span *ngIf="eventData.event.musicPlayer!=\'?\'"><br>{{eventData.event.musicPlayer}}</span>\n          <span *ngIf="eventData.event.musicPlayer==\'?\'">\n            <br><img src="./assets/img/wait.gif" style="display:inline;width:15px;">&nbsp;{{\'HOME.WAITINGFORPLAYER\' | translate}}\n          </span>\n        </span>\n      </ion-label>\n      <shifubutton item-end\n                   [small]="true"\n                   *ngIf="songs.length==0"\n                   icon="build"\n                   label="Change"\n                   (click)="openMusicServer()">\n      </shifubutton>\n\n      <shifubutton item-end [small]="true"\n                   *ngIf="songs.length>0 && eventData.event.musicServer!=0"\n                   icon="play" label="Play"\n                   (click)="runPlayer()">\n      </shifubutton>\n\n    </ion-item>\n\n\n    <shifucheckbox *ngIf="userData.playlist.items!=undefined && userData.playlist.items.length>0"\n                   label="PROFIL.ONLYPLAYLIST"\n                   [(ngModel)]="eventData.event.limitSearchToOwnerPlaylist"\n                   (onchange)="updateEvent()">\n    </shifucheckbox>\n\n\n    <div *ngIf="userData.user.connexions.length>2">\n      <shifucheckbox\n        label="HOME.ADDSONGONLYBYOWNER"\n        [(ngModel)]="eventData.event.addSongOnlyByOwner"\n        (onchange)="updateEvent()">\n      </shifucheckbox>\n\n      <shifucheckbox\n        *ngIf="!eventData.event.addSongOnlyByOwner"\n        label="HOME.ADDSONGONLYBYCHARTS"\n        [(ngModel)]="eventData.event.addSongOnlyByCharts"\n        (onchange)="updateEvent()">\n      </shifucheckbox>\n      <br>\n\n\n      <shifurange\n        icon="list"\n        (onchange)="updateEvent()"\n        [(ngModel)]="eventData.event.playlistLimits"\n        unite="songs"\n        label="ADDEVENT.PLAYLISTLIMIT"\n        min="20" max="100" step="5">\n      </shifurange>\n\n\n      <shifurange icon="list"\n                  (onchange)="updateEvent()"\n                  [(ngModel)]="eventData.event.limitPlaylistSongsByUser"\n                  unite="songs"\n                  label="ADDEVENT.PLAYLISTLIMITBYUSER"\n                  min="3" max="30" step="1">\n      </shifurange>\n\n      <shifurange\n        *ngIf="!eventData.event.opened"\n        icon="list"\n        (onchange)="updateEvent()"\n        [(ngModel)]="eventData.event.prePlaylistLimits"\n        unite="songs"\n        label=\'ADDEVENT.PREPLAYLISTLIMIT\'\n        min="0" max="100" step="1">\n      </shifurange>\n\n    </div>\n    <shifurange\n      *ngIf="eventData.event.musicServer!=2"\n      icon="list"\n      (onchange)="updateEvent()"\n      [(ngModel)]="eventData.event.minSongsInPlaylist"\n      unite="songs"\n      label=\'ADDEVENT.MINSONGSINPLAYLIST\'\n      min="0" max="10" step="1">\n    </shifurange>\n  </shifucard>\n\n  \x3c!--<img src="{{eventData.event.flyer | safe}}" style="width:80%;margin-left:10%">--\x3e\n  <div style="max-width:300px;margin-left:10%;text-align: center;" *ngIf="songs.length<3 && userData.user.id!=eventData.event.owner_id">\n    <shifuflyer size="100%" [autoreturn]="false" [reverse]="false" [flyer]="eventData.event.flyer"></shifuflyer>\n  </div>\n\n</ion-content>\n'}),o("design:paramtypes",[l.Events,l.ModalController,r.NavController,r.NavParams,y.ApiProvider,a.EventDataProvider,u.UserData,r.LoadingController,p.DomSanitizer,E.TranslateService,T.PushNotificationsService,l.AlertController,r.ToastController])],e)}();t.HomePage=I},335:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(15),u=n(8),c=n(2);n(549);var d=n(2),p=n(16),h=n(6),f=n(20),m=n(336),g=function(){function e(e,t,n,i,o,s,a,r,l,u,p,h){this.viewCtrl=e,this.navCtrl=t,this.alertCtrl=n,this.api=i,this.settings=o,this.navParams=s,this.eventData=a,this.toastCtrl=r,this.translate=l,this.userData=u,this.loadingCtrl=p,this.modalCtrl=h,this.songs=[],this.playlists=[],this.env=0,this.multiselect=!1,this.selected={value:"Search"},this.query={value:""},this.songs_search=[],this.showFilter=!1,this.myfilter="",this.playlist_titles=[],this.musicServerName=null,this.viewCharts=function(){c.openWindow("http://www.uk-charts.top-source.info/2000-to-2009.shtml")};var f=this;if(this.musicServerName=["Spotify","Deezer","Cloud","YouTube","Perso"],this.env=c.getEnv(),this.songs=this.userData.lastSearchList,void 0==f.userData.playlist||void 0==f.userData.playlist.items||0==f.userData.playlist.items.length||this.eventData.event.limitSearchToOwnerPlaylist&&f.userData.playlistFrom!=this.eventData.event.owner_id||!this.eventData.event.limitSearchToOwnerPlaylist&&f.userData.playlistFrom==this.eventData.event.owner_id&&f.userData.user.id!=this.eventData.event.owner_id){var m=this.userData.user.id;this.eventData.event.limitSearchToOwnerPlaylist&&(m=this.eventData.event.owner_id);var g=d.loading(f,"SEARCH.PLAYLISTANALYSIS");f.api.getcloudplaylist(m,!0).subscribe(function(e){f.userData.playlist=e,f.userData.playlistFrom=m,g.dismiss(),f.loadplaylist(e)},function(e){d.toast(f.toastCtrl,"ERROR.GENERAL",f.translate),g.dismiss()})}else f.loadplaylist(f.userData.playlist)}return e.prototype.ionViewDidLoad=function(){null==this.navParams.get("query")?null==this.settings.lastquery||this.settings.lastquery.startsWith("playlist")||(this.query.value=this.settings.lastquery,this.search(13)):"charts"==this.navParams.get("query")?this.openMusicCharts():(this.showFilter=!1,this.query.value=this.navParams.get("query"),this.search(13))},e.prototype.valideFilter=function(e){13==e&&(this.showFilter=!1,this.query.value=this.myfilter,this.settings.lastcatalogue="",this.settings.lastquery=this.myfilter,this.search(13))},e.prototype.openPlaylistFrom=function(e){var t=this;d.openGeneral(e,this.userData.user).then(function(){t.api.getcloudplaylist(t.userData.user.id,!0).subscribe(function(e){null!=e&&(t.userData.playlistFrom=t.userData.user.id,t.userData.playlist=e,t.loadplaylist(e))})})},e.prototype.loadplaylist=function(e){var t=this,n=this;c.preparePlaylist(e.items,function(e,i){n.playlists=i,n.playlist_titles=e,null!=n.settings.lastquery&&n.settings.lastquery.startsWith("playlist")&&(n.selected=t.settings.lastquery.replace("playlist:",""),n.loadPlaylist_titles())})},e.prototype.openSearch=function(){this.showFilter=!this.showFilter,!this.showFilter&&this.myfilter.length>0&&(this.query.value=this.myfilter,this.search(13))},e.prototype.loadPlaylist_titles=function(){var e=this;this.songs=[],this.playlist_titles.forEach(function(t){t.playlist==e.selected&&e.addResult(t,e.songs)}),e.songs.length>0&&(e.showFilter=!0,this.settings.lastquery="playlist:"+e.selected)},e.prototype.addResult=function(e,t){e.hasOwnProperty("playlist")||(e.playlist="Search"),e.selected=!1,e.formatDuration="",e.duration>0&&(e.formatDuration=d.getDelay((new Date).getTime()+1e3*e.duration)),void 0==e.author&&(e.author=e.artist),e.tag=e.title+" "+e.artist;for(var n=0;n<t.length&&!(e.order<=t[n].order);n++);return t.splice(n,0,e),t},e.prototype.selectPlaylist=function(){this.query.value=""},e.prototype.goPerso=function(){this.navCtrl.push("perso",{filter:"deezer,spotify,drive",user:this.userData.user.id,autoback:!0,from:"search"})},e.prototype.add=function(e){var t=c.createSong(e,this.userData.user,this.eventData.event);this.viewCtrl.dismiss({songs:[t]})},e.prototype.valide=function(){var e=this,t=[];this.songs.forEach(function(n){n.selected&&t.push(c.createSong(n,e.userData.user,e.eventData.event))}),this.viewCtrl.dismiss({songs:t})},e.prototype.addnewsong=function(e,t){var n=this,i=n.songs;this.eventData.addsong(c.createSong(i[e],n.userData.user,n.eventData.event)).subscribe(function(o){void 0!=o.message&&o.message.length>0&&(t=o.message),e<Math.min(i.length,50)&&n.addnewsong(e+1,t)})},e.prototype.search=function(e){var t=this;if(13==e){var n=this;if(!n.eventData.event.limitSearchToOwnerPlaylist){n.selected="Search",n.myfilter="",n.songs=[];var i=n.query.value;null!=i&&i.length>2&&(n.songs_search.length>0&&(n.songs_search=[]),this.settings.lastquery=i,this.settings.lastcatalogue="",n.eventData.event.sources.indexOf("cloud")>-1&&n.eventData.searchcloud(i,n.userData.user.id,n.eventData.event.id).subscribe(function(e){null==e?d.toast(t.toastCtrl,"ERROR.RETRY",t.translate):e.items.forEach(function(e){n.songs=n.addResult(e,n.songs)})}),n.eventData.event.sources.indexOf("local")>-1&&n.eventData.searchlocal(i,n.userData.user.id,n.eventData.event.id).subscribe(function(e){null==e?d.toast(t.toastCtrl,"ERROR.RETRY",t.translate):e.items.forEach(function(e){n.songs=n.addResult(e,n.songs)})}),n.eventData.event.sources.indexOf("deezer")+n.eventData.event.sources.indexOf("spotify")+n.eventData.event.sources.indexOf("youtube")>-3&&n.eventData.searchstream(i,n.eventData.event.id).subscribe(function(e){null==e?d.toast(t.toastCtrl,"ERROR.RETRY",t.translate):e.items.forEach(function(e){n.songs=n.addResult(e,n.songs)})}))}}},e.prototype.cancel=function(){},e.prototype.showMultiSelect=function(){this.multiselect?this.songs.forEach(function(e){e.selected=!e.selected}):this.multiselect=!0},e.prototype.openMusicCharts=function(){var e=this;d.openModal(this.modalCtrl,m.MusicchartsPage,{catalogues:this.navParams.get("catalogues")},function(t){null!=t&&(e.songs=e.addResult(t,[]),e.viewCtrl.dismiss({songs:e.songs}))})},e=i([s.Component({selector:"page-search",template:'\x3c!--\n  Generated template for the SearchPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="LIB.SEARCH" menu="false" help="music_search">\n    <shifubutton [small]="true" *ngIf="eventData.event.limitSearchToOwnerPlaylist==false && eventData.event.musicServer!=2"  label="Charts"  id="btnCharts"  (click)="openMusicCharts()"></shifubutton>\n    <shifubutton [small]="true" id="btnCancel" icon="close"                       (click)="this.viewCtrl.dismiss()"></shifubutton>\n    <shifubutton [small]="true" id="btnSend" *ngIf="multiselect" icon="checkmark" (click)="valide()"></shifubutton>\n  </shifutitle>\n\n  <ion-toolbar no-border-top>\n    <ion-buttons end [hidden]="eventData.event.limitSearchToOwnerPlaylist">\n      <button ion-button (click)="openSearch()">\n        <span *ngIf="showFilter">Playlist</span>\n        <span style="font-size: small" *ngIf="!showFilter">Catalogue:<br>{{musicServerName[eventData.event.musicServer]}}</span>\n      </button>\n      <shifubutton [small]="true" *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1" icon="checkbox" (click)="showMultiSelect()"></shifubutton>\n\n    </ion-buttons>\n\n    <ion-searchbar *ngIf="!showFilter" id="txtSearch"\n                    color="primary" placeholder="Search"\n                   [(ngModel)]="query.value"\n                   (keypress)="search($event.keyCode)"\n                   (ionCancel)="onCancel($event)"\n                   >\n    </ion-searchbar>\n    <ion-searchbar autofocus\n                   placeholder="Filter on playlist"\n                   *ngIf="showFilter"\n                   [(ngModel)]="myfilter"\n                   (keypress)="valideFilter($event.keyCode)">\n    </ion-searchbar>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <tuto [if]="eventData.event.limitSearchToOwnerPlaylist" label="SEARCH.TUTO_ONLYOWNERPLAYLIST"></tuto>\n  <tuto [if]="!eventData.event.limitSearchToOwnerPlaylist" label="Saisisser un artiste et/ou un titre" show="txtSearch"></tuto>\n\n  <ion-list>\n    <ion-item  name="song_result"  no-padding no-margin *ngFor="let song of songs |  filter: \'tag\':myfilter | orderBy: \'order\'" (click)="add(song)">\n      <ion-icon item-start>\n        <img style="box-shadow: 4px 4px 7px #bfbfbf;border: 1px #bfbfbf solid;width:60px;height:60px;" src="{{song.picture}}">\n      </ion-icon>\n      <span style="font-size: large">{{song.title}}</span>\n      <p>{{song.author}}</p>\n      <ion-note item-end>\n        {{song.formatDuration}}\n      </ion-note>\n      <ion-checkbox item-end *ngIf="multiselect" [(ngModel)]="song.selected"></ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n</ion-content>\n\n\n<ion-footer>\n  <ion-toolbar>\n      <ion-item *ngIf="playlists==undefined" item-start>Your playlists from : </ion-item>\n      <ion-buttons end *ngIf="playlists==undefined || playlists.length==0">\n        <shifubutton\n          id="btnSpotifyPlaylist"\n          *ngIf="userData.user.accessTokens==undefined || userData.user.accessTokens.spotify==undefined"\n          [small]="true" label="Spotify"\n          (click)="openPlaylistFrom(\'spotify\')">\n        </shifubutton>\n\n        <shifubutton\n          id="btnDeezerPlaylist"\n          *ngIf="userData.user.accessTokens==undefined || userData.user.accessTokens.deezer==undefined"\n          [small]="true" label="Deezer"\n          (click)="openPlaylistFrom(\'deezer\')">\n        </shifubutton>\n\n        <shifubutton *ngIf="env==0" [small]="true" label="Deezer_local" (click)="openPlaylistFrom(\'deezer_local\')"></shifubutton>\n      </ion-buttons>\n\n      <ion-item *ngIf="playlists!=undefined && playlists.length>0">\n        <ion-label>Vos playlists</ion-label>\n        <ion-select item-end interface="action-sheet" [(ngModel)]="selected" (ionChange)="loadPlaylist_titles()">\n          <ion-option *ngFor="let playlist of playlists" [value]="playlist">{{playlist}}</ion-option>\n        </ion-select>\n      </ion-item>\n\n\n\n  </ion-toolbar>\n</ion-footer>\n\n\x3c!--<div class="bar bar-footer bar-positive button-bar-inline">--\x3e\n  \x3c!--<shifubutton (click)="goPerso()" color="button-calm" label="SEARCH.GOPLAYLIST"></shifubutton>--\x3e\n  \x3c!--&nbsp;--\x3e\n  \x3c!--<shifubutton color="button-calm" hourglass="wait-addall" (click)="addAll()" *ngIf="event.owner_id==userData.user.id && songs.length>0" label="SEARCH.ADDALL"></shifubutton>--\x3e\n  \x3c!--&lt;!&ndash;--\x3e\n  \x3c!--<button class="button button-calm button-small" style="width:100px;" (click)="addAll()" *ngIf="event.owner_id==userData.user.id && songs.length>0">--\x3e\n    \x3c!--<img style="display:inline;max-width: 16px;" src="/img/hourglass.gif" *ngIf="hourglass">{{\'SEARCH.ADDALL\' | translate }}--\x3e\n  \x3c!--</button>--\x3e\n  \x3c!--&ndash;&gt;--\x3e\n  \x3c!--&nbsp;--\x3e\n  \x3c!--<shifubutton color="button-calm" (click)="addAll()" *ngIf="event.owner_id==userData.user.id && playlists.length==0 && userData.user.connexions.length>10" label="SEARCH.ADDAUTO"></shifubutton>--\x3e\n  \x3c!--<span *ngIf="songs.length>0" style="margin-top:5px;font-size: x-large">{{songs.length}}&nbsp;<i class="ion-disc"></i></span>--\x3e\n\x3c!--</div>--\x3e\n\n'}),o("design:paramtypes",[a.ViewController,r.NavController,r.AlertController,p.ApiProvider,f.SettingsProvider,a.NavParams,l.EventDataProvider,a.ToastController,h.TranslateService,u.UserData,r.LoadingController,a.ModalController])],e)}();t.SearchPage=g},336:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(20),l=n(16),u=n(2),c=n(15),d=n(8),p=function(){function e(e,t,n,i,o,s,a,r,l){this.navCtrl=e,this.navParams=t,this.api=n,this.eventData=i,this.userData=o,this.viewCtrl=s,this.alertCtrl=a,this.settings=r,this.loadingCtrl=l,this.songs=[],this.charts=[],this.catalogues=["official-uk-songs","Digital France"],this.catalogue_sel="ChartsInFrance",this.year_sel="",this.years=["2001","2002","2011","2017","2018","2019"],this.catalogues=this.navParams.get("catalogues"),""==this.settings.lastcatalogue&&(this.settings.lastcatalogue=this.catalogues[0],this.settings.lastyear=""+((new Date).getFullYear()-1))}return e.prototype.ionViewDidLoad=function(){this.catalogue_sel=this.settings.lastcatalogue,this.year_sel=this.settings.lastyear,this.catalogue_change()},e.prototype.catalogue_change=function(e){var t=this;if(void 0===e&&(e=!1),this.settings.lastcatalogue=this.catalogue_sel,this.settings.lastquery="",null==this.settings.musicChartsItems||e){var n=u.loading(this);this.api.getcharts(this.catalogue_sel).subscribe(function(e){n.dismiss(),null!=e&&(t.settings.musicChartsItems=e.items,t.charts=e.items,t.years=[],e.items.forEach(function(e){var n=new Date(Number(e.dtStart)).getFullYear();-1==t.years.indexOf(""+n)&&t.years.push(""+n)}),t.years.sort().reverse(),null!=t.year_sel&&-1!=t.years.indexOf(t.year_sel)||(t.year_sel=t.years[t.years.length-1]),t.year_change())})}else this.charts=this.settings.musicChartsItems},e.prototype.load_songs=function(){},e.prototype.year_change=function(){var e=this;this.settings.lastyear=this.year_sel,this.songs=[],this.charts.forEach(function(t){if(new Date(Number(t.dtStart)).getFullYear()==Number(e.year_sel)){var n=u.createSong({title:t.title,text:t.id,origin:-1,author:t.artist,duration:0,picture:t.picture,computer:""},e.userData.user,e.eventData.event);n.position=t.position;for(var i=!1,o=0;o<e.songs.length&&!i;o++)e.songs[o].position>n.position&&(e.songs.splice(o,0,n),i=!0);i||e.songs.push(n)}})},e.prototype.add=function(e){var t=u.createSong(e,this.userData.user,this.eventData.event);this.viewCtrl.dismiss(t)},e.prototype.year_inc=function(e){var t=this.year_sel;do{this.year_sel=""+(Number(this.year_sel)+e)}while(-1==this.years.indexOf(this.year_sel)&&Number(this.year_sel)>1950&&Number(this.year_sel)<2030);-1==this.years.indexOf(this.year_sel)?this.year_sel=t:this.year_change()},e=i([s.Component({selector:"page-musiccharts",template:'\x3c!--\n  Generated template for the MusicchartsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="LIB.MUSICCHARTS" menu="false" help="music_charts">\n    <shifubutton [small]="true" id="btnCancel" icon="close"  (click)="this.viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content padding>\n\n\n  <div style="width:100%;height: 50px">\n\n    <ion-grid no-padding no-margin>\n      <ion-row align-items-center>\n        <ion-col col-6 text-left>\n          <ion-select id="lstCharts" no-padding style="font-size:medium;max-width:90%;width:90%;" interface="action-sheet" [(ngModel)]="catalogue_sel" (ionChange)="catalogue_change(true)">\n            <ion-option *ngFor="let c of catalogues" [value]="catalogue">{{c}}</ion-option>\n          </ion-select>\n        </ion-col>\n        <ion-col>\n          <ion-select id="lstYear" no-padding style="text-align:right;font-size:medium;max-width:90%;width:90%;" interface="action-sheet" [(ngModel)]="year_sel" (ionChange)="year_change()">\n            <ion-option *ngFor="let y of years" [value]="y">{{y}}</ion-option>\n          </ion-select>\n        </ion-col>\n        <ion-col style="font-size: 50px;"  text-right col-3>\n          <ion-icon id="left_year" name="arrow-dropleft" (click)="year_inc(-1)"></ion-icon>&nbsp;\n          <ion-icon id="right_year" name="arrow-dropright" (click)="year_inc(+1)" ></ion-icon>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n\n\n\n    </div>\n\n  <ion-item  name="song_result"  *ngFor="let song of songs" (click)="add(song)">\n    <ion-note item-start style="font-size: xx-large;padding-right: 5px;">\n      #{{song.position}}\n    </ion-note>\n\n    <ion-icon item-end>\n      <img style="box-shadow: 4px 4px 7px #bfbfbf;border: 1px #bfbfbf solid;width:60px;height:60px;" src="{{song.picture}}">\n    </ion-icon>\n\n    <span style="font-size: large">{{song.title}}</span>\n    <p>{{song.author}}</p>\n\n  </ion-item>\n\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.NavParams,l.ApiProvider,c.EventDataProvider,d.UserData,a.ViewController,a.AlertController,r.SettingsProvider,a.LoadingController])],e)}();t.MusicchartsPage=p},337:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(235),a=n(0),r=n(3),l=n(2),u=n(15),c=n(8),d=n(2),p=n(2),h=n(35),f=n(55),m=n(6),g=n(85),v=n(16),E=function(){function e(e,t,n,i,o,s,a,r,l,u,c,d,p){this.events=e,this.navCtrl=t,this.navParams=n,this.loadingCtrl=i,this.api=o,this.alertCtrl=s,this.modalCtrl=a,this.toastCtrl=r,this.eventData=l,this.userData=u,this.translate=c,this.notifs=d,this.camera=p,this.options={quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE},this.lastphoto={from:{id:""},photo:"",validate:!0,text:"",canVote:!1},this.lastRefresh=0,this.photos=[],this.message=""}return e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.refresh(!0)},d.DELAY_TO_REFRESH)},e.prototype.refreshEvent=function(){this.eventData.updateevent("addPhotoOnlyByOwner,needValidate").subscribe(function(e){})},e.prototype.addTag=function(e){var t=this;d.showPopup({title:"PHOTO.ENTERMESSAGE",placeholder:"",confirmButton:"LIB.VALIDATE",cancelButton:"LIB.CANCEL",type:"text",translate:this.translate},this.alertCtrl,function(n){null!=n&&t.eventData.validatemessage(e,n).subscribe(function(e){t.refresh()})})},e.prototype.addModerator=function(){this.events.publish("moderator:add")},e.prototype.validatephoto=function(){var e=this;this.eventData.validatemessage(this.lastphoto.id).subscribe(function(t){e.refresh()})},e.prototype.sendphoto=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n=null);e=l.createPhoto(this.userData.user,e,t,d.TAG_PHOTO);this.eventData.sendphoto(e).subscribe(function(e){i.eventData.event.needValidate&&i.userData.user.connexions.length<10&&d.toast(i.toastCtrl,"PHOTOS.INFOVALIDATION",i.translate),i.refresh(!0),i.photos.length>0&&i.selLastPhoto(i.photos[0]),null!=n&&n()},function(e){i.refresh(),null!=n&&n()})},e.prototype.addFile=function(){var e=this;d.openModal(this.modalCtrl,h.ImageCreatorPage,{ratio:1,maxsize:2500},function(t){null!=t&&e.sendphoto(t.value)})},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=!1);var n=this;(e||void 0==this.userData.selectTab||"PhotosPage"==this.userData.selectTab)&&this.eventData.getlastphoto(this.userData.user.id,!1,0,5).subscribe(function(i){if(n.photos=[],null!=i&&i.items.length>0){var o={};i.items.forEach(function(e){e.dtCreate>t.lastRefresh&&e.from.id!=t.userData.user.id&&(o={title:"Shifumix - photo",body:"New photo from "+e.from.firstname,image:e.photo,vibrator:[200,100,200]},t.lastRefresh=e.dtCreate),(e.validate||t.eventData.event.Moderators.indexOf(t.userData.user.id)>-1||e.from.id==t.userData.user.id)&&n.photos.push(e)}),!e&&o.hasOwnProperty("title")&&l.notif(t.notifs,o,t.translate);for(var s=!1,a=0;a<Math.min(5,n.photos.length);a++)if(n.photos[a].Id==n.lastphoto.Id){s=!0;break}s&&t.userData.user.id!=t.eventData.event.owner_id||(a=0),n.selLastPhoto(n.photos[a])}0==n.photos.length&&t.selLastPhoto(null)})},e.prototype.ionViewDidLoad=function(){var e=this;this.events.subscribe("photo",function(){e.refresh()})},e.prototype.showUser=function(e){d.openModal(this.modalCtrl,f.PublicProfilPage,{userid:e.id,from:"tab.photos"})},e.prototype.onSetScore=function(e,t){var n=this,i={event:this.eventData.event.id,from:this.userData.user.id,value:t,description:""};this.lastphoto.canVote=!1,this.userData.sendvote(e,i).subscribe(function(e){null!=e&&(n.userData.user.message.length>0&&l.toast(n.toastCtrl,n.userData.user.message,n.translate),n.refresh(!0))})},e.prototype.getPhoto=function(e,t,n){var i=this;void 0===t&&(t=!1),void 0===n&&(n=void 0),void 0!=e.value&&(this.message="PHOTO.SENDING",setTimeout(function(){p.autoRotate(e.value,1,function(e){i.message="PHOTO.SENDING",p.cropToSquare(e,.75,function(e){i.message="PHOTO.SENDING",i.sendphoto(e,"",function(){i.message=""})})})},100))},e.prototype.addmessage=function(e){var t=this;d.showPopup({title:"PHOTO.ENTERMESSAGE",default:this.lastphoto.text,placeholder:"",confirmButton:"LIB.VALIDATE",cancelButton:"LIB.CANCEL",type:"text",translate:this.translate},this.alertCtrl,function(e){null!=e&&t.eventData.addlegend(t.lastphoto.id,e).subscribe(function(n){t.lastphoto.text=e,t.refresh()})})},e.prototype.deleteMessage=function(e){var t=this,n=this;d.toast(n.toastCtrl,"PHOTO.DELETING",this.translate),this.eventData.deletemessage(e,this.userData.getId()).subscribe(function(e){d.toast(n.toastCtrl,"PHOTO.DELETED",t.translate)})},e.prototype.selLastPhoto=function(e){var t=this;null==e&&(e={from:{id:""},photo:"",validate:!0,text:"",canVote:!1}),t.lastphoto=e,t.lastphoto.hasOwnProperty("votes")&&t.lastphoto.from.id!=t.userData.user.id?(t.lastphoto.canVote=!0,t.lastphoto.votes.forEach(function(e){t.lastphoto.canVote&&e.from==t.userData.user.id&&(t.lastphoto.canVote=!1)})):t.lastphoto.from.id!=t.userData.user.id&&(t.lastphoto.canVote=!0)},e.prototype.downloadPhotos=function(e){e.items.forEach(function(e){})},e.prototype.addtoblacklist=function(e,t){this.deleteMessage(t),this.api.blacklist(this.userData.user.id,e,!0).subscribe(function(){})},e=i([a.Component({selector:"page-photos",template:'\x3c!--\n  Generated template for the PhotosPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="Photos" help="#">\n    \x3c!--<shifubutton [small]="true" id="btnSend" [hidden]="!eventData.online" icon="LIB.SEND" (click)="writemessage(13)"></shifubutton>--\x3e\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding>\n  <tuto [if]="eventData.event.opened"  position="title" label="PHOTO.TUTO" show="btnTakeInstantPhoto"></tuto>\n  <tuto position="title" [if]="!eventData.event.opened" label="PHOTO.TUTO_NOSTARTED_EVENT"></tuto>\n  <tuto [if]="lastphoto!=undefined && lastphoto.validate==false && eventData.event.Moderators.indexOf(userData.user.id)>-1" label="PHOTO.TUTOADMIN"></tuto>\n\n  <ion-item text-center style="font-size: xx-large;" *ngIf="message!=null && message.length>0">\n    <img src="./assets/img/wait.gif" style="width:25px;">\n    {{message | translate}}\n  </ion-item>\n\n  <div\n    *ngIf="eventData.online && (eventData.event.opened || eventData.event.Moderators.indexOf(userData.user.id)>-1) && (eventData.event.Moderators.indexOf(userData.user.id)>-1 || !eventData.event.addPhotoOnlyByOwner)"\n    style="width:100%;text-align:center;margin-top:10px;">\n    \x3c!--<shifucamera id="btnTakePhoto" icon="camera" (onTake)="getPhoto($event,true,false)"></shifucamera>--\x3e\n    <shifubutton id="btnAddFile" label="Images" icon="images" (click)="addFile()"></shifubutton>\n    <shifucamera id="btnTakeInstantPhoto" button="Photo" icon="camera" (onTake)="getPhoto($event)"></shifucamera>\n  </div>\n\n  \x3c!--Affichage de la derniere photo publiée--\x3e\n  <tuto [if]="lastphoto.from.id==userData.user.id && lastphoto.photo!=null"\n        position="title"\n        label="TUTO.PHOTO_CANDELETE"></tuto>\n  <div *ngIf="lastphoto.photo!=null && lastphoto.text!=null && lastphoto.photo.length+lastphoto.text.length>0"\n       style="text-align: center;margin-top:10px;position:relative;">\n\n    <ion-item no-border no-lines>\n      <div *ngFor="let photo of photos"  style="margin:5px;position:relative;display:inline-block;width:50px;height:50px" (click)="selLastPhoto(photo)">\n        <img style="width:100%;height:100%;" shifuid="vignette" class="image-photo" [src]="photo.photo">\n        <div *ngIf="photo.validate==false" style="position:absolute;top:10px;left:0px;width:100%;text-align:center;font-size: xx-large">?</div>\n      </div>\n    </ion-item>\n\n    <div *ngIf="lastphoto.photo.length>0" style="position:relative;display:inline-block;width:90%;">\n      \x3c!--Commandes disponibles sur les messages--\x3e\n      <div *ngIf="lastphoto.validate" style="position:absolute;left:0px;width:100%;top:10px;display: block;text-align: center;z-index: 100;">\n          <shifubutton style="display:inline-block;" *ngIf="lastphoto.canVote" [small]="true" icon="thumbs-up" name="btnLike" (click)="onSetScore(lastphoto.id,1)"></shifubutton>\n          <shifubutton style="display:inline-block;" *ngIf="lastphoto.canVote" [small]="true" icon="thumbs-down" name="btnDislike" (click)="onSetScore(lastphoto.id,-1)"></shifubutton>\n\n          <shifubutton style="display:inline-block;" id="btnDelMessage" *ngIf="lastphoto.from.id==userData.user.id || eventData.event.Moderators.indexOf(userData.user.id)>-1"\n                     icon="trash" [small]="true"\n                     (click)="deleteMessage(lastphoto.id)"></shifubutton>\n\n          <shifubutton style="display:inline-block;" id="btnAddMessage" *ngIf="lastphoto.from.id==userData.user.id" icon="chatboxes" [small]="true"\n                     (click)="addmessage(lastphoto.id)"></shifubutton>\n\n          <shifubutton style="display:inline-block;" id="btnAddTag"\n                       *ngIf="userData.user.connexions.length>50 && (lastphoto.from.id==userData.user.id || eventData.event.Moderators.indexOf(userData.user.id)>-1)"\n                       icon="pricetag" [small]="true"\n                      (click)="addTag(lastphoto.id)">\n          </shifubutton>\n      </div>\n\n      \x3c!--Commandes pour la modération--\x3e\n      <div\n        *ngIf="lastphoto.photo.length>0 && lastphoto.validate==false && eventData.event.Moderators.indexOf(userData.user.id)>-1"\n        style="display:block;position:absolute;top:8%;left:5%;width:20%">\n\n        <shifubutton [small]="true" size="80"\n                     margin="5" id="btnRemove" label="PROFIL.DELPHOTO"\n                     (click)="deleteMessage(lastphoto.id)"></shifubutton><br>\n\n        <shifubutton [small]="true" size="80"\n                     margin="5" id="btnValidate" label="PROFIL.VALIDATE"\n                     (click)="validatephoto()"></shifubutton><br>\n\n        <shifubutton [small]="true" size="80"\n                     margin="5" id="btnBlackList" label="PROFIL.BLACKLIST"\n                     (click)="addtoblacklist(lastphoto.from.id,lastphoto.id)"></shifubutton><br>\n      </div>\n\n      <div\n        *ngIf="lastphoto.photo.length>0 && lastphoto.validate==false && lastphoto.from.id==userData.user.id"\n        style="display:block;position:absolute;text-align:center;top:8%;left:10%;width:80%;font-size:large;">\n        <h1>{{\'PHOTO.WAITFORVALIDATION\' | translate}}</h1>\n      </div>\n\n      <div style="position:absolute;left:0px;text-align:center;width:100%;top:90%;display: block;z-index: 200;font-size: large;color:white;font-weight: 200;">\n        {{lastphoto.text}}\n      </div>\n      <div style="pointer-events:none;position:absolute;left:0px;text-align:right;width:100%;top:5px;display: block;z-index: 50;font-size: large;color:white;font-weight: 200;">\n        <span *ngIf="lastphoto.from.id!=userData.user.id" (click)="showUser(lastphoto.from)">&nbsp;by&nbsp;{{lastphoto.from.firstname}}</span><br>\n        <shifunote style="font-size:medium;" [object]="lastphoto"></shifunote>\n      </div>\n\n      <img class="image-photo" src="{{lastphoto.photo}}" style="max-height:50vh;">\n      <br>\n    </div>\n  </div>\n\n  <shifucard [visible]="userData.user.connexions.length>5"\n             icon="desktop" (onclick)="events.publish(\'open:widget\',\'photo\')"\n             *ngIf="userData.user.id==eventData.event.owner_id"\n             title="LIB.EVENTMASTER"  tuto="TUTO.EVENTMASTER">\n    <tuto [if]="eventData.event.needValidate" label="PHOTO.TUTO_VALIDATION"></tuto>\n\n    <shifucheckbox label="ADDEVENT.NEEDVALIDATE" id="chkValidate"\n                   [(ngModel)]="eventData.event.needValidate"\n                   (onchange)="refreshEvent()"></shifucheckbox>\n\n    <div *ngIf="userData.user.connexions.length>10">\n      <shifucheckbox label="PHOTO.ADDPHOTOONLYBYOWNER" [(ngModel)]="eventData.event.addPhotoOnlyByOwner" (onchange)="refreshEvent()"></shifucheckbox><br>\n      <ion-item no-line no-border text-center>\n        <shifubutton [small]="true" icon="add-circle" label="LIB.MODERATOR" (click)="addModerator()"></shifubutton>\n      </ion-item>\n    </div>\n  </shifucard>\n\n</ion-content>\n\n'}),o("design:paramtypes",[r.Events,r.NavController,r.NavParams,r.LoadingController,v.ApiProvider,r.AlertController,r.ModalController,r.ToastController,u.EventDataProvider,c.UserData,m.TranslateService,g.PushNotificationsService,s.Camera])],e)}();t.PhotosPage=E},338:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(44),u=n(2),c=n(2),d=n(2),p=n(110),h=n(48),f=n(339),m=n(15),g=n(8),v=n(22),E=n(6),b=n(340),y=function(){function e(e,t,n,i,o,s,a,r,l,u,c){this.events=e,this.modalCtrl=t,this.storage=n,this.navCtrl=i,this.navParams=o,this.toastCtrl=s,this.eventData=a,this.userData=r,this.translate=l,this.sanitizer=u,this.alertCtrl=c,this.bets=[],this.lot={validation:!1},this.bet={from:{}},this.loteries=[],this.env=0,this.now=(new Date).getTime(),this.modalOpened=!1,this.end_loteries=[],this.loteries_forvalidation=[],this.bets_tovalidate=[],this.bets_toevaluate=[],this.env=d.getEnv()}return e.prototype.ionViewDidLoad=function(){var e=this;c.subscribe("bets",this),this.storage.get("todo").then(function(t){"survey"==t&&(e.newbet(5),e.storage.remove("todo"))})},e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.refresh(!0)},u.DELAY_TO_REFRESH)},e.prototype.newbet=function(e){var t=this;null!=this.fab&&this.fab.close();var n=this;this.eventData.getnuserswithscoin(function(i){i<3&&4==e&&c.toast(t.toastCtrl,"BETS.GIVESOMESCOINBEFORECREATEBETS",t.translate,null,"middle",5);(n.eventData.event.dtEnd-(new Date).getTime())/6e4>3?d.openModal(t.modalCtrl,p.AddbetsPage,{type:e},function(){n.refresh()}):c.toast(n.toastCtrl,"BETS.NOTENOUGHTTIMETOBETS")})},e.prototype.newloterie=function(){var e=this,t=this;this.eventData.getnuserswithscoin(function(n){0==n&&c.toast(e.toastCtrl,"BETS.GIVESOMESCOINBEFORECREATEBETS",e.translate);(t.eventData.event.dtEnd-(new Date).getTime())/6e4>3?d.openModal(e.modalCtrl,f.AddloteriePage,{},function(){t.refresh()}):c.toast(t.toastCtrl,"BETS.NOTENOUGHTTIMETOBETS")})},e.prototype.updateEvent=function(){this.eventData.updateevent("addBetOnlyByOwner,limitOptions,needValidate").subscribe(function(e){})},e.prototype.remove=function(e){var t=this,n=t.bets.indexOf(e);t.userData.removebet(e.id).subscribe(function(e){0==t.userData.user.message.length&&t.bets.splice(n,1)})},e.prototype.close=function(e){var t=this;this.userData.closebet(e.id).subscribe(function(e){t.refresh(!0)})},e.prototype.shareBet=function(e){void 0===e&&(e=null),d.openModal(this.modalCtrl,h.InvitePage,null==e?{from:this.userData.user,event:this.eventData.event}:{from:this.userData.user,event:this.eventData.event,tab:"BetsPage",type:e.type,message:e.id})},e.prototype.getTotals=function(e,t){e.votants=[];for(var n=0;n<e.options.length;n++)e.options[n].totaluser=0;e.hasOwnProperty("votes")&&e.votes.forEach(function(n){if(e.votants.push(n.from),n.from===t){var i=Number(n.description);e.options[i].totaluser+=n.value}})},e.prototype.buy=function(e){var t=this;1==e.maxCredits?t.userData.buyticket(e.id,1).subscribe(function(n){e.hasTicket=""==n.message,""==n.message&&(n.message="LIB.SUBSCRIBE"),c.toast(t.toastCtrl,n.message,t.translate),t.userData.user=n}):c.showPopup({title:t.translate.instant("BETS.LOTERIE")+Math.round(t.userData.user.credit),value:Math.min(10,Math.round(t.userData.user.credit)),confirmButton:t.translate.instant("LIB.BUY"),cancelButton:t.translate.instant("LIB.CANCEL"),type:"number"},t.alertCtrl,function(n){n>0&&t.userData.buyticket(e.id,n).subscribe(function(e){t.userData.user=e,e.message.length>0&&c.toast(t.toastCtrl,e.message)})})},e.prototype.changeRespons=function(e,t){13==t.keyCode&&this.sendRespons(e)},e.prototype.sendRespons=function(e){var t=this;void 0!=e.freetext&&e.freetext.length>0&&this.eventData.sendRespons(e.id,this.userData.user.id,e.freetext).subscribe(function(){t.refresh(!0)})},e.prototype.mise=function(e,t){var n=e.options.indexOf(t),i=this,o={from:i.userData.user.id,value:1,description:n};e.type==u.TYPE_BET&&(o.value=0,c.showPopup({title:i.translate.instant("BETS.MESSAGEMISE")+Math.round(i.userData.user.jetons[i.eventData.event.owner_id]),value:Math.min(10,Math.round(i.userData.user.credit)),confirmButton:"LIB.BET",cancelButton:"LIB.CANCEL",type:"number",translate:i.translate},i.alertCtrl,function(t){o.value=t,o.value>0&&(i.userData.user.jetons[i.eventData.event.owner_id]-=o.value,e.options[n].totaluser+=o.value,i.userData.sendvote(e.id,o).subscribe(function(e){null!=e&&(i.userData.user=e)}))})),e.type==u.TYPE_SONDAGE&&1==e.canVote&&(e.nRestVote--,e.options[n].total+=o.value,e.canVote=e.nRestVote>0,i.userData.sendvote(e.id,o).subscribe(function(e){null!=e&&(i.userData.user=e)}))},e.prototype.validate=function(e){var t=this,n=0;for(n=0;n<e.options.length&&e.options[n].lib!=e.result;n++);-1==e.result?d.showConfirm(t.translate.instant("BETS.CANCELCONFIRMATION"),t.alertCtrl,this.translate,function(){t.eventData.validebet(e.id,-1).subscribe(function(){t.refresh(!0)})},function(){}):t.eventData.validebet(e.id,n).subscribe(function(){t.refresh(!0)})},e.prototype.programTimeout=function(e){var t=this,n=null;if(e.forEach(function(e){e.dtStart>(new Date).getTime()&&(n=null==n?e.dtStart:Math.min(e.dtStart,n))}),null!=n){var i=n-(new Date).getTime();i>0&&(d.$$("refresh dans "+i/1e3+" secondes"),setTimeout(function(){t.refresh(!0,function(){t.programTimeout(e)})},i+1e3))}},e.prototype.validateLoterie=function(e){var t=this;t.userData.validate(e.id).subscribe(function(n){""==n.message&&(e.validate=!0,t.refresh())})},e.prototype.refresh=function(e,t){var n=this;void 0===e&&(e=!0),void 0===t&&(t=null);var i=this;this.now=(new Date).getTime(),(e||void 0==this.userData.selectTab||"BetsPage"==this.userData.selectTab)&&(i.eventData.getloteries(i.userData.user.id).subscribe(function(e){null!=e&&(i.loteries=[],i.loteries_forvalidation=[],i.end_loteries=[],e.items.forEach(function(e){if(e.buyers=[],void 0!=e.tickets)for(var t in e.tickets)-1==e.buyers.indexOf(t)&&e.buyers.push(t);if(e.available){if(e.dtStart<=i.now||e.from.id==i.userData.user.id)if(e.dtEnd>i.now)e.opened=!0,1==e.maxCredits?e.hasOwnProperty("tickets")&&(e.hasTicket=!!e.tickets.hasOwnProperty(i.userData.user.id)):e.hasTicket=!1,i.loteries.push(e);else{e.opened=!1,e.closed=!0;var n=((new Date).getTime()-e.dtEnd)/1e3;2==e.status&&0==e.validate&&n<120&&e.buyers.indexOf(i.userData.user.id)>-1&&i.end_loteries.push(e)}}else(i.userData.user.id==e.from.id||i.eventData.event.Moderators.indexOf(i.userData.user.id)>-1)&&i.loteries_forvalidation.push(e)}))}),i.eventData.getbets(i.userData.getId(),!1,!1,"").subscribe(function(e){i.bets=[],i.bets_tovalidate=[],i.bets_toevaluate=[];var o=0;if(void 0!=e){for(var s=0;s<e.items.length;s++){var a=e.items[s];if(a.opened=Number(a.status)>-1,a.closed=Number(a.status)>=1,a.type!=u.TYPE_SONDAGE&&a.type!=u.TYPE_QUESTION||(void 0!=a.options&&a.options.length>0&&(a.optionByImage=0==a.options[0].lib.indexOf("http")),a.closed||(a.canVote=!0,a.priority=0,o=0,a.hasOwnProperty("votes")&&(a.votes.forEach(function(e){e.from===i.userData.user.id&&o++}),o>=a.nVotes&&(a.canVote=!1,a.priority=1)),a.nRestVote=a.nVotes-o,(a.opened||a.from.id==i.userData.user.id||i.eventData.event.needValidate&&i.eventData.event.Moderators.indexOf(i.userData.user.id)>-1)&&(i.bets.push(a),!n.modalOpened&&a.modal&&a.nRestVote>0&&-1==n.eventData.event.Moderators.indexOf(n.userData.user.id)&&(n.modalOpened=!0,d.openModal(n.modalCtrl,b.ModalbetPage,{bet:a},function(e){a.nRestVote=0,n.modalOpened=!1,n.refresh(!0)}))))),a.type==u.TYPE_BET){var r=[];if(i.getTotals(a,i.userData.user.id),a.options.forEach(function(e){r.push(e.totaluser*e.quot)}),a.canVote=!0,a.gainMax=Math.max.apply(null,r),a.gainMin=Math.min.apply(null,r),a.dtEnd>i.now&&(a.dtStart<i.now||a.from.id==i.userData.user.id)&&i.bets.push(a),1==a.status&&(a.votants.indexOf(i.userData.user.id)>-1||a.from.id==i.userData.user.id)&&(d.$$("Pari à valider ",a),a.result=-1,i.bets_tovalidate.push(a)),2==a.status){d.$$("Parieur à évaluer",a);var l=Number(a.text);a.lib_response=-1==l?i.translate.instant("BETS.NORESPONSE"):i.translate.instant("BETS.RESPONSE")+" : "+a.options[l].lib,(!a.hasOwnProperty("reputations")||-1==a.reputations.indexOf(i.userData.user.id))&&a.votants.indexOf(i.userData.user.id)>-1&&i.bets_toevaluate.push(a)}}a.visibleCard=1==e.items.length||5==a.type&&a.nRestVote>0||4==a.type||9==a.type}void 0!=t&&t()}}))},e.prototype.makeLoterieAvailable=function(e,t){var n=this;this.eventData.makeLoterieAvailable(e.id,t).subscribe(function(e){n.refresh(!0)})},e.prototype.start=function(e){var t=this;this.eventData.startbet(e).subscribe(function(){setTimeout(function(){t.refresh(!0)},2e3)})},e.prototype.closeLoterie=function(e){this.userData.closebet(e.id).subscribe(function(){})},e.prototype.viewOnTop=function(){},i([s.ViewChild("fab"),o("design:type",a.FabContainer)],e.prototype,"fab",void 0),e=i([s.Component({selector:"page-bets",template:'\x3c!--\n  Generated template for the BetsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="Games"  help="#">\n    <span *ngIf="userData.user.id!=eventData.event.owner_id">\n      <span style="font-size: large;">{{userData.user.jetons[eventData.event.owner_id]}}</span>\n      <img src="./assets/img/money.png" class="small-money">\n    </span>\n    <shifubutton *ngIf="bets?.length+loteries?.length>0 && eventData.event.presents.length==1"\n                 label="LIB.INVITE" id="cmdShareGame"\n                  (click)="shareBet(null)"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n<ion-content no-padding>\n  <tuto position="title"\n        [if]="eventData.event.opened && eventData.event.activities.indexOf(\'survey\')>-1"\n        label="BETS.TUTO_CREATEYOURSURVEY" show="btnNewSurvey"\n        *ngIf="bets!=null && bets.length==0"></tuto>\n  <tuto position="title"\n        [if]="eventData.event.opened && eventData.event.activities.indexOf(\'bets\')>-1"\n        label="BETS.TUTO_CREATEYOURBETS" show="btnNewSurvey"\n        *ngIf="bets!=null && bets.length==0"></tuto>\n  <tuto label="BETS.TUTO" *ngIf="bets!=null && bets.length>0"></tuto>\n  <tuto label="BETS.SHARETITLE" *ngIf="bets?.length+loteries?.length>0 && eventData.event.presents.length==1" show="cmdShareGame">\n    <shifubutton label="LIB.INVITE" icon="add-people" (click)="shareBet()"></shifubutton>\n  </tuto>\n\n  \x3c!--Menu flottant--\x3e\n  <ion-fab #fab bottom right *ngIf="eventData.event.opened && eventData.event.activities!=undefined && (!eventData.event.addBetOnlyByOwner || eventData.event.Moderators.indexOf(userData.user.id)>-1)">\n    <button ion-fab color="primary"><ion-icon name="add-circle"></ion-icon></button>\n    <ion-fab-list *ngIf="eventData.event.activities!=undefined" side="top">\n      <button *ngIf="eventData.event.activities.indexOf(\'survey\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newbet(5)">\n        <ion-icon name="help"></ion-icon>\n        <div class="label">{{"LIB.SURVEY" | translate}}</div>\n      </button>\n\n      <button *ngIf="eventData.event.activities.indexOf(\'survey\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newbet(9)">\n        <ion-icon name="help"></ion-icon>\n        <div class="label">{{"LIB.QUESTION" | translate}}</div>\n      </button>\n\n      <button *ngIf="eventData.event.activities.indexOf(\'bets\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newbet(4)">\n        <ion-icon name="football"></ion-icon>\n        <div class="label">{{"LIB.BET" | translate}}</div>\n      </button>\n\n      <button *ngIf="eventData.event.activities.indexOf(\'loterie\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newloterie()" >\n        <ion-icon name="cube"></ion-icon>\n        <div class="label">{{"LIB.LOTERIE" | translate}}</div>\n      </button>\n\n    </ion-fab-list>\n  </ion-fab>\n\n  \x3c!--Zone du master of ceremony--\x3e\n  <shifucard *ngIf="eventData.event.owner_id==userData.user.id"\n             [visible]="userData.user.connexions.length>25"\n             style="margin-top:3%;"\n             icon="desktop" (onclick)="events.publish(\'open:widget\',\'survey\')"\n             title="LIB.EVENTMASTER"  tuto="TUTO.EVENTMASTER">\n    \x3c!--<shifucheckbox *ngIf="eventData.event.visibleOnMap" label="LIB.PUBLISHONTWEETER" (onchange)="updateEvent()"></shifucheckbox>--\x3e\n    <tuto label="PHOTO.TUTOSTRONGMODERATE" *ngIf="eventData.event.needValidate"></tuto>\n    <shifucheckbox label="ADDEVENT.NEEDVALIDATE" id="chkValidate" [(ngModel)]="eventData.event.needValidate" (onchange)="updateEvent()"></shifucheckbox>\n    <shifucheckbox\n      tips="N\'autoriser que les modérateurs à ajouter des paris dans votre événement"\n      label="BETS.ADDONLYBYOWNER"\n      [(ngModel)]="eventData.event.addBetOnlyByOwner"\n      (onchange)="updateEvent()"></shifucheckbox><br>\n    <shifurange label="BETS.LIMITOPTIONS" [(ngModel)]="eventData.event.limitOptions" min="2" max="10" unite="options"></shifurange>\n  </shifucard>\n\n  \x3c!--Zone des boutons--\x3e\n  <ion-item no-lines text-center\n            *ngIf="eventData.event!=undefined && eventData.event.activities!=undefined && (!eventData.event.addBetOnlyByOwner || eventData.event.Moderators.indexOf(userData.user.id)>-1)">\n    <shifubutton size="90" id="btnNewSurvey"\n                 label="LIB.SURVEY" (click)="newbet(5)"\n                 tips="Créer un sondage sur la base d\'une liste de proposition ou d\'images"\n                 [small]="true"\n                 *ngIf="eventData.event.activities.indexOf(\'survey\')>-1">\n    </shifubutton>\n\n    <shifubutton size="90" id="btnNewQuestion"\n                 label="LIB.QUESTION" (click)="newbet(9)"\n                 tips="Poser une question ouvertes aux participants (plusieurs réponses possibles)"\n                 [small]="true"\n                 *ngIf="eventData.event.activities.indexOf(\'survey\')>-1">\n    </shifubutton>\n\n    <shifubutton size="90" id="btnNewBet"\n                 label="LIB.BET" (click)="newbet(4)"\n                 tips="Proposer un pari aux participants"\n                 [small]="true"\n                 *ngIf="eventData.event.activities.indexOf(\'bets\')>-1">\n    </shifubutton>\n\n    <shifubutton size="90" id="btnLoterie"\n                 label="LIB.LOTERIE" (click)="newloterie()"\n                 tips="Faire gagner un cadeau par tirage au sort"\n                 [small]="true"\n                 *ngIf="eventData.event.activities.indexOf(\'loterie\')>-1">\n    </shifubutton>\n\n  </ion-item>\n\n\n  \x3c!-- Loteries pour Validation de la remise --\x3e\n  <shifucard no-padding no-margin [title]="lot.title" *ngFor="let lot of loteries_forvalidation">\n    <ion-item text-center no-border no-lines>\n      <img src="{{lot.picture}}" style="width:200px;">\n      <br>\n      {{lot.descrition}} by {{lot.from.firstname}}<br>\n      {{\'BETS.NEEDVALIDATIONBEFORE\' | translate}}:<shifutimer [end]="lot.dtStart"></shifutimer>\n      <br>\n      <shifubutton [small]="true" size="100" shifuid="btnValidate" *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1" label="Validate" (click)="makeLoterieAvailable(lot,true)"></shifubutton>\n      <shifubutton [small]="true" size="100" label="LIB.CANCEL" (click)="makeLoterieAvailable(lot,false)"></shifubutton>\n    </ion-item>\n    <span *ngIf="lot.from.id==userData.user.id">{{\'BETS.LOTERIEWAITINGVALIDATE\' | translate}}<br></span>\n  </shifucard>\n\n\n  \x3c!-- Loteries pour inscription --\x3e\n  <shifucard [visible]="!lot.hasTicket" [title]="lot.title" *ngFor="let lot of loteries" icon="person-add" (onclick)="shareBet(lot)">\n    <ion-item text-center no-lines no-border>\n      <img *ngIf="lot.picture.length>0" src="{{lot.picture}}" class="image-photo" style="display:inline-block;width:70%;max-width:300px;"><br>\n\n      <div *ngIf="lot.description!=undefined && lot.description.length>0">\n        {{lot.description}}<br>\n      </div>\n\n      <shifubutton\n        *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1"\n        [small]="true" size="100"\n        label="LIB.CLOSE" (click)="closeLoterie(lot)">\n      </shifubutton>\n\n      <div text-center\n           *ngIf="lot.from.id!=userData.user.id && lot.maxCredits>1 && lot.dtEnd>now && ((lot.maxCredits==1 && !lot.hasTicket) || lot.maxCredits>1)">\n        {{\'BETS.INFOLOTERIE\' | translate}}&nbsp;1&nbsp;<img src="./assets/img/money.png" class="small-money"><br><br>\n        <shifubutton *ngIf="userData.user.jetons[eventData.event.owner_id]>0"\n                     label="LIB.BUY" shifuid="btnBuy"\n                     (click)="buy(lot)">\n        </shifubutton>\n      </div>\n\n\n      <div *ngIf="lot.from.id!=userData.user.id && lot.maxCredits==1 && lot.dtEnd>now && ((lot.maxCredits==1 && !lot.hasTicket) || lot.maxCredits>1)">\n        {{\'BETS.INFOLOTERIE\' | translate}}&nbsp;1&nbsp;<img src="./assets/img/money.png" class="small-money">\n\n        <br><br>\n\n        <shifubutton *ngIf="userData.user.jetons[eventData.event.owner_id]>0"\n                     label="LIB.SUBSCRIBE" shifuid="btnSubscribe"\n                     (click)="buy(lot)"></shifubutton>\n      </div>\n    </ion-item>\n\n    <span *ngIf="!lot.opened">{{"LIB.STARTIN" | translate}} <shifutimer [end]="lot.dtStart"></shifutimer></span>\n    <span *ngIf="lot.opened">{{"LIB.TIRAGEDANS" | translate}}<shifutimer [end]="lot.dtEnd"></shifutimer></span>\n    <span *ngIf="lot.text.length>0">&nbsp;-&nbsp;{{lot.text}}</span>\n  </shifucard>\n\n  \x3c!-- Loteries terminees --\x3e\n  <div *ngIf="!lot.validation">\n    <shifucard [title]="lot.title" *ngFor="let lot of end_loteries">\n\n      <div *ngIf="lot.winner==userData.user.id">\n        {{\'BETS.YOUWIN\' | translate}}<br>\n        {{\'BETS.WINLOTERIE\' | translate}}\n        <shifubutton [small]="true" label="LIB.VALIDATE" (click)="validateLoterie(lot)"></shifubutton>\n      </div>\n      <span *ngIf="lot.from.id!=userData.user.id && lot.winner!=userData.user.id">{{"BETS.YOULOOSE" | translate}}</span>\n      <div *ngIf="lot.from.id==userData.user.id">\n        <ion-list *ngFor="let buyer of lot.buyers">\n          <ion-item>\n            {{buyer.firstname}}\n          </ion-item>\n        </ion-list>\n      </div>\n\n    </shifucard>\n  </div>\n\n\n  \x3c!-- createur du pari à évaluer --\x3e\n  <div *ngFor="let bet of bets_toevaluate">\n    <shifubet *ngIf="bet.from.id!=userData.user.id" [bet]="bet" status="toevaluate"></shifubet>\n  </div>\n\n\n  \x3c!-- Pari à valider --\x3e\n  <shifucard style="margin-top:5%;" [title]="bet.title" *ngFor="let bet of bets_tovalidate" (onvisible)="viewOnTop()">\n      <ion-list no-lines padding radio-group *ngIf="bet.from.id==userData.user.id" [(ngModel)]="bet.result">\n        <ion-list-header no-lines>\n          <ion-label>\n            {{\'BETS.YOUMUSTGIVERESPONS\' | translate}}\n          </ion-label>\n          <shifubutton item-right\n                       *ngIf="bet.from.id==userData.user.id"\n                       [small]="true" label="LIB.VALIDATE" (click)="validate(bet)"></shifubutton>\n        </ion-list-header>\n        <ion-item margin-right="5px" *ngFor="let opt of bet.options">\n          <ion-label>{{opt.lib}}</ion-label>\n          <ion-radio [value]="opt.lib"></ion-radio>\n        </ion-item>\n      </ion-list><br>\n\n    <ion-item *ngIf="bet.from.id!=userData.user.id" >\n      {{\'BETS.WAITPAY\' | translate}}<br>\n      {{"BETS.GAINS" | translate}}&nbsp;{{bet.gainMax | number:0}}&nbsp;\n      <img class="small-money" src="./assets/img/money.png">\n    </ion-item>\n  </shifucard>\n\n\n\n  \x3c!-- Pari à miser --\x3e\n  <shifucard [visible]="bet.visibleCard" *ngFor="let bet of bets"\n             title="{{bet.title}}" icon="person-add" (onclick)="shareBet(bet)">\n\n    \x3c!--<span style="font-size: small" *ngIf="userData.user.id!=bet.from.id && bet.type==4">--\x3e\n    \x3c!--{{bet.from.score | number:0}}&nbsp;<ion-icon name="star"></ion-icon>--\x3e\n    \x3c!--</span>--\x3e\n\n    \x3c!--Affichage Brainstorm--\x3e\n    <ion-item no-lines no-border *ngIf="bet.type==9 && bet.votes!=undefined &&  bet.votes.length>0">\n        <span no-lines no-border *ngFor="let vote of bet.votes">\n          <span *ngIf="vote.from==userData.user.id || bet.from.id==userData.user.id">\n            <span *ngIf="bet.from.id==userData.user.id" style="color:lightgrey">{{vote.description}}:</span>\n            {{vote.text}}<br>\n          </span>\n        </span>\n    </ion-item>\n\n    \x3c!--Affichage du visuel du brainstorm--\x3e\n    <div style="width:100%;text-align:center;" *ngIf="!bet.optionByImage && bet.picture!=undefined && bet.picture.length>0">\n      <img src="{{bet.picture}}" class="image-photo" style="display:inline-block;width:80%;max-width:300px;">\n      <br>\n    </div>\n\n    \x3c!--Zone de réponse pour Brainstorm--\x3e\n    <ion-item no-lines no-margin *ngIf="bet.type==9 && bet.canVote==true">\n      <ion-input name="txtRespons" placeholder="Votre réponse" [(ngModel)]="bet.freetext" autocorrect="on" (keypress)="changeRespons(bet,$event)"></ion-input>\n      <shifubutton item-end label="LIB.SEND" name="btnSendBrainstorm" (click)="sendRespons(bet)"></shifubutton>\n    </ion-item>\n\n\n    <div *ngIf="!bet.optionByImage || bet.type==4">\n      <ion-grid>\n        <ion-row align-items-center *ngFor="let opt of bet.options">\n          <ion-col col-auto>\n            \x3c!-- zone de mise des Paris --\x3e\n            <shifubutton size="0" name="btnBet" label="LIB.TOBET" [small]="true" (click)="mise(bet,opt)"\n                         *ngIf="(bet.from.id!=userData.user.id || userData.user.connexions.length<3) &&\n                                  bet.type==4 && !bet.closed && userData.user.jetons[eventData.event.owner_id]>0">\n            </shifubutton>\n\n            \x3c!-- Boutons de vote des Sondages --\x3e\n            <shifubutton [small]="true" name="btnVote"\n                         *ngIf="bet.type==5 && bet.canVote==true && !bet.closed && bet.opened"\n                         icon="arrow-round-forward" (click)="mise(bet,opt)">\n            </shifubutton>\n          </ion-col>\n\n          <ion-col>\n            {{opt.lib}}\n            \x3c!--Les quotes ne sont pas affichés aux nouveaux --\x3e\n            <span *ngIf="userData.user.connexions.length>10 && opt.quot>0 && bet.type==4" style="font-size: small;">({{opt.quot | number:0 }}/1)</span>\n          </ion-col>\n\n          <ion-col col-2>\n                        <span *ngIf="opt.totaluser>0 && bet.type==4" style="font-size: large;">\n                            {{opt.totaluser | number:0 }}&nbsp;<img src="./assets/img/money.png" style="display:inline;width:20px">\n                        </span>\n            <span *ngIf="bet.type==5 && opt.total>0" style="font-size: large">\n                {{opt.total | number:0 }}<ion-icon name="checkmark"></ion-icon>&nbsp;\n              </span>\n          </ion-col>\n\n        </ion-row>\n      </ion-grid>\n    </div>\n\n    <ion-item *ngIf="bet.optionByImage && bet.type==5" text-wrap>\n      <div *ngFor="let opt of bet.options"  style="position:relative;display:inline-block;" (click)="mise(bet,opt)">\n        <img class="image-photo" [src]="opt.lib" style="width:100px;height:100px;display:inline-block;">\n        <div style="font-size:large;color:white;position:absolute;left:10px;top:10px">\n          {{opt.total}}\n        </div>\n      </div>\n    </ion-item>\n\n    \x3c!-- Zone réservée au créateur du pari --\x3e\n    <ion-item shifuid="zone_bet_admin" no-lines\n              *ngIf="(bet.from.id==userData.user.id) || (eventData.event.needValidate && eventData.event.Moderators.indexOf(userData.user.id)>-1)">\n      <ion-label *ngIf="bet.type==4 || bet.type==5">\n        {{bet.total}}&nbsp;\n        <img *ngIf="bet.type==4" src="./assets/img/money.png" class="money-small">\n        <ion-icon *ngIf="bet.type==5" name="checkmark"></ion-icon>\n        &nbsp;&nbsp;{{bet.nPlayers}}&nbsp;<img src="./assets/img/personne.png" class="money-small">\n      </ion-label>\n\n      <ion-item item-end>\n        <shifubutton size="80" *ngIf="bet.dtStart>eventData.event.dtEnd" [small]="true"\n                     name="btnStart" label="LIB.START" (click)="start(bet)"></shifubutton>\n        <shifubutton size="80" *ngIf="bet.opened" [small]="true" name="btnClose" label="LIB.CLOSE" (click)="close(bet)"></shifubutton>\n        <shifubutton size="80" *ngIf="bet.opened" [small]="true" name="btnDelete" label="LIB.CANCEL" (click)="remove(bet)"></shifubutton>\n      </ion-item>\n\n    </ion-item>\n\n\n\n\n\n    <ion-card-header no-margin padding="2px">\n        <span style="font-size: large" *ngIf="bet.opened">\n          <shifutimer [end]="bet.dtEnd"></shifutimer>\n        </span>\n\n        <span *ngIf="bet.from.id==userData.user.id && bet.opened==false && bet.closed==false && bet.dtStart<eventData.event.dtEnd" style="font-size: large">\n          {{"LIB.STARTIN" | translate}}\n          <shifutimer [end]="bet.dtStart"></shifutimer>\n        </span>\n\n        <span style="font-size: medium" *ngIf="bet.type==5 && bet.nRestVote>0 && bet.opened">\n          &nbsp;{{bet.nRestVote}}&nbsp;<ion-icon name="checkmark"></ion-icon>&nbsp;{{"BETS.VOTESRESTANT" | translate}}\n        </span>\n\n        <span style="width:50%;text-align: right;font-size: medium;" *ngIf="bet.gainMax>0 && bet.type==4">\n          {{"BETS.GAINS" | translate}}&nbsp;{{bet.gainMax | number:0}}\n          &nbsp;<img src="./assets/img/money.png" class="small-money">\n        </span>\n\n        <span style="text-align: right;font-size: medium;"\n              *ngIf="bet.gainMax==0 && bet.type==4 && bet.cagnotte>0">\n          {{"LIB.CAGNOTTE" | translate}}&nbsp;{{bet.cagnotte | number:0}}&nbsp;<img src="./assets/img/money.png" class="small-money">\n        </span>\n\n    </ion-card-header>\n\n  </shifucard>\n\n</ion-content>\n'}),o("design:paramtypes",[r.Events,r.ModalController,l.Storage,a.NavController,a.NavParams,a.ToastController,m.EventDataProvider,g.UserData,E.TranslateService,v.DomSanitizer,r.AlertController])],e)}();t.BetsPage=y},339:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(6),l=n(8),u=n(15),c=n(2),d=n(35),p=function(){function e(e,t,n,i,o,s,a,r,l){this.modalCtrl=e,this.viewCtrl=t,this.translate=n,this.navCtrl=i,this.navParams=o,this.toastCtrl=s,this.eventData=a,this.userData=r,this.alertCtrl=l,this.newlot={type:6,question:"",respons:"",from:"",title:"",description:"",picture:"",dtStart:0,startDelay:5,delay:10,minCredits:0,maxCredits:1},this.now=(new Date).getTime(),this.mindelay=3,this.getDtEnd=function(){this.newlot.dtEnd=Number(this.newlot.dtStart)+1e3*Number(this.newlot.delay)*60},this.getDtStart=function(){var e=Math.max(this.now,Number(this.eventData.event.dtStart));this.newlot.dtStart=e+1e3*Number(this.newlot.startDelay)*60,this.getDtEnd()},this.eventData.event.Moderators.indexOf(this.userData.user.id)>-1&&(this.mindelay=0,this.newlot.startDelay=0),this.newlot.question=this.translate.instant("LOTERIE.DEFAULTQUESTION"),this.newlot.respons=this.translate.instant("LOTERIE.DEFAULTRESPONS"),this.newlot.from=this.userData.user,this.newlot.maxdelay=this.eventData.event.dtStart>this.now?(this.eventData.event.dtEnd-this.eventData.event.dtStart)/6e4:(this.eventData.event.dtEnd-this.now)/6e4,this.getDtStart()}return e.prototype.addLot=function(){var e=this;this.getDtStart(),this.eventData.addloterie(this.newlot).subscribe(function(t){t.message.length>0&&c.toast(e.toastCtrl,t.message,e.translate),e.viewCtrl.dismiss()})},e.prototype.selImage=function(){var e=this;c.openModal(this.modalCtrl,d.ImageCreatorPage,{ratio:1,upload:!0},function(t){null!=t&&(e.newlot.picture=t.value)})},e=i([s.Component({selector:"page-addloterie",template:'\x3c!--\n  Generated template for the AddloteriePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="LIB.LOTERIE" help="#">\n    <shifubutton [small]="true" icon="checkmark" id="btnSave" label="LIB.SAVE" *ngIf="(newlot.picture.length>0 || eventData.event.Moderators.indexOf(userData.user.id)>-1) && newlot.title.length>0" (click)="addLot()"></shifubutton>\n    <shifubutton [small]="true" id="btnCancel" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content no-padding>\n  <tuto [if]="eventData.event.Moderators.indexOf(userData.user.id)==-1" label="ADDLOTERIE.TUTO" show="txtTitle"></tuto>\n\n  <shifuinput size="80" [focus]="true" text-align="center"\n              placeholder="Gagner un vélo,5 bieres en jeu,Participez pour gagner cette superbe voiture"\n              id="txtTitle" label="ADDLOTS.TITLE" [(ngModel)]="newlot.title">\n  </shifuinput>\n  <shifuinput id="txtDescription" label="ADDLOTS.DESCRIPTION" [(ngModel)]="newlot.description"></shifuinput>\n\n  <ion-item text-center>\n    <img *ngIf="newlot.picture.length>0" src="{{newlot.picture}}" style="max-width:300px;width:80%;" class="image-photo" (click)="selImage()"><br>\n    <shifubutton id="btnAddImage" icon="image" (click)="selImage()"\n                 *ngIf="newlot.picture.length==0">\n    </shifubutton>\n    <br>\n    <span>De {{newlot.dtStart | date: "HH:mm"}} à {{newlot.dtEnd | date: "HH:mm"}}</span>\n  </ion-item>\n\n  <div *ngIf="(eventData.event.Moderators.indexOf(userData.user.id)>-1 || newlot.picture.length>0) && newlot.title.length>0">\n    <shifurange id="txtStart" label="ADDLOTS.STARTBET" unite="minutes"\n                [(ngModel)]="newlot.startDelay" min="{{minDelay}}"\n                max="60" step="1" (onchange)="getDtStart()"></shifurange>\n    <shifurange id="txtDuration" label="ADDLOTS.DURATION" unite="minutes" [(ngModel)]="newlot.delay" min="1" max="{{newlot.maxdelay}}" step="1" (onchange)="getDtEnd()"></shifurange>\n    <shifurange id="txtMinCredit" label="ADDLOTS.MINCREDIT" unite="iCoin" [(ngModel)]="newlot.minCredits" min="0" max="100" step="1"></shifurange>\n    <shifurange id="txtMaxCredit" label="ADDLOTS.MAXCREDITS" unite="iCoin" [(ngModel)]="newlot.maxCredits" min="1" max="100" step="1"></shifurange>\n\n    \x3c!--<br>--\x3e\n    \x3c!--<shifuinput id="txtQuestion" label="ADDLOTS.QUESTION" [(ngModel)]="newlot.question"></shifuinput>--\x3e\n    \x3c!--<shifuinput id="txtRespons" label="ADDLOTS.RESPONS" [(ngModel)]="newlot.respons"></shifuinput>--\x3e\n  </div>\n\n</ion-content>\n'}),o("design:paramtypes",[a.ModalController,a.ViewController,r.TranslateService,a.NavController,a.NavParams,a.ToastController,u.EventDataProvider,l.UserData,a.AlertController])],e)}();t.AddloteriePage=p},340:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(8),l=function(){function e(e,t,n,i){this.viewCtrl=e,this.userData=t,this.navCtrl=n,this.navParams=i,this.bet={}}return e.prototype.ionViewDidLoad=function(){this.bet=this.navParams.get("bet")},e.prototype.mise=function(e,t){var n=this,i=e.options.indexOf(t),o=this,s={from:o.userData.user.id,value:1,description:i};1==e.canVote&&(e.nRestVote--,e.options[i].total+=s.value,e.canVote=e.nRestVote>0,o.userData.sendvote(e.id,s).subscribe(function(t){null!=t&&(o.userData.user=t),0==e.nRestVote&&n.viewCtrl.dismiss()}))},e=i([s.Component({selector:"page-modalbet",template:'\x3c!--\n  Generated template for the ModalbetPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <shifutitle [menuClose]="false" title="LIB.BET" help="#">\n    </shifutitle>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <ion-item text-center no-margin>\n    <h1 style="color:black;">{{bet.title}}</h1>\n    <span style="font-size: small" *ngIf="bet.opened">\n    <shifutimer [end]="bet.dtEnd"></shifutimer>\n  </span>\n\n  </ion-item>\n\n  <div *ngIf="!bet.optionByImage">\n    <ion-grid>\n      <ion-row align-items-center *ngFor="let opt of bet.options">\n        <ion-col col-auto>\n          \x3c!-- Boutons de vote des Sondages --\x3e\n          <shifubutton [small]="true" name="btnVote"\n                       icon="arrow-round-forward" (click)="mise(bet,opt)">\n          </shifubutton>\n        </ion-col>\n\n        <ion-col>\n          {{opt.lib}}\n        </ion-col>\n\n        <ion-col col-2>\n          <span *ngIf="opt.total>0" style="font-size: large">\n                {{opt.total | number:0 }}<ion-icon name="checkmark"></ion-icon>&nbsp;\n          </span>\n        </ion-col>\n\n      </ion-row>\n    </ion-grid>\n  </div>\n\n  <ion-item *ngIf="bet.optionByImage" text-wrap>\n    <div *ngFor="let opt of bet.options"  style="position:relative;display:inline-block;" (click)="mise(bet,opt)">\n      <img class="image-photo" [src]="opt.lib" style="width:100px;height:100px;display:inline-block;">\n      <div style="font-size:large;color:white;position:absolute;left:10px;top:10px">\n        {{opt.total}}\n      </div>\n    </div>\n  </ion-item>\n\n  <br>\n  <span style="font-size: medium" *ngIf="bet.nRestVote>0">\n          &nbsp;{{bet.nRestVote}}&nbsp;<ion-icon name="checkmark"></ion-icon>&nbsp;{{"BETS.VOTESRESTANT" | translate}}\n  </span>\n\n\n\n</ion-content>\n'}),o("design:paramtypes",[a.ViewController,r.UserData,a.NavController,a.NavParams])],e)}();t.ModalbetPage=l},341:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(8),u=n(15),c=n(2),d=n(6),p=n(342),h=n(2),f=n(44),m=n(85),g=function(){function e(e,t,n,i,o,s,a,r,l,u,c){var d=this;this.modalCtrl=e,this.translate=t,this.alertCtrl=n,this.toastCtrl=i,this.notifs=o,this.navCtrl=s,this.navParams=a,this.events=r,this.eventData=l,this.userData=u,this.storage=c,this._DRAGGGING_STARTED=0,this.lastMousePosition={x:null,y:null},this.command={status:0,items:[]},this.commands=[],this.x=0,this.y=0,this.table="",this.canCommand=!0,this.env=0,this.env=h.getEnv(),this.storage.get("table").then(function(e){d.table=e}),h.subscribe("command",this)}return e.prototype.ionViewDidLoad=function(){this.userData.user.id==this.eventData.event.owner_id&&0==this.eventData.event.laCarte.length?this.openPrepare():this.refresh()},e.prototype.openPrepare=function(){h.openModal(this.modalCtrl,p.PreparecommandPage,{},function(){})},e.prototype.razCommand=function(){this.command.items.forEach(function(e){e.elt.parentNode.removeChild(e.elt)}),this.command={},this.command.items=[],this.refresh()},e.prototype.askForTable=function(){var e=this;if(this.eventData.event.selfService)this.send();else{var t=this;void 0==this.command.table&&this.storage.get("table").then(function(n){null!=n?(e.command.table=n,e.eventData.sendcustomercommand(e.command).subscribe(function(t){e.razCommand()})):c.showPopup({title:e.eventData.event.loc_query,confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:e.translate},e.alertCtrl,function(e){null!=e&&(t.command.table=e,t.send())})})}},e.prototype.send=function(){var e=this;this.command.idEvent=this.eventData.event.id,this.command.from=this.userData.user,this.command.type=8,this.command.laCarte=this.eventData.event.laCarte,this.command.title="Commande de "+this.userData.user.firstname+" à "+(new Date).toLocaleTimeString(),e.eventData.sendcustomercommand(e.command).subscribe(function(t){e.razCommand()})},e.prototype.cancel=function(){this.command.items[this.command.items.length-1].elt.remove(),this.command.items.splice(this.command.items.length-1,1)},e.prototype.clickRandom=function(){var e=Math.random()*this.lacarte.nativeElement.clientWidth,t=Math.random()*this.lacarte.nativeElement.clientHeight;this.selCarte({preventDefault:function(){},offsetX:e,offsetY:t,target:{parentNode:this.lacarte.nativeElement.parentElement,clientWidth:this.lacarte.nativeElement.clientWidth,clientHeight:this.lacarte.nativeElement.clientHeight}})},e.prototype.selCarte=function(e){e.preventDefault();if(void 0!=e.pointers){var t=e.pointers[0].offsetY;e.offsetX=e.pointers[0].offsetX+0,e.offsetY=t-0}var n=this,i=new Image;i.onload=function(){var t=e.target.parentNode.appendChild(i);t.style.position="absolute",t.style.width="70px",t.style.height="70px",n.command.status=0;n.command.items.push({x:e.offsetX/e.target.clientWidth*100,y:e.offsetY/e.target.clientHeight*100,elt:this}),t.style.left=e.offsetX+n.lacarte.nativeElement.offsetLeft-35+"px",t.style.top=e.offsetY+n.lacarte.nativeElement.offsetTop-35+"px"},i.src="./assets/img/pin.png"},e.prototype.refresh=function(){var e=this,t=this;this.eventData.getcommands().subscribe(function(n){t.commands=[],t.canCommand=!0;var i=0;n.items.forEach(function(n){if(1==n.status||2==n.status)if(n.from.id!=t.userData.user.id)i++;else{t.canCommand=!1,n.commandPrecedente=i,i++;2==n.status&&c.notif(e.notifs,{title:"LIB.COMMANDREADY",body:"Votre commande est prete",vibrator:[200,100,200]},e.translate),t.commands.push(n)}})})},e.prototype.mousedown=function(e){this._DRAGGGING_STARTED=1,void 0!=e.touches&&(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),this.lastMousePosition={x:e.offsetX,y:e.offsetY}},e.prototype.mouseup=function(e){this._DRAGGGING_STARTED=0},e.prototype.mousewheel=function(e){e.deltaY>0?e.target.style.width=e.target.offsetWidth+10+"px":e.target.width=e.target.offsetWidth-10},e.prototype.mousemove=function(e){e.preventDefault();var t=0,n=0;if(void 0!=e.touches&&(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),1==this._DRAGGGING_STARTED){var i={x:e.offsetX,y:e.offsetY};t=i.x-this.lastMousePosition.x,n=i.y-this.lastMousePosition.y,this.lastMousePosition=i;var o=e.target.parentElement.clientWidth-e.target.clientWidth,s=e.target.parentElement.clientHeight-e.target.clientHeight;s>0&&(s=0),o>0&&(o=0),this.x+t>0&&(t=-this.x),this.y+n>0&&(n=-this.y),this.x+t<o&&(t=-this.x+o),this.y+n<s&&(n=-this.y+s),0==t&&0==n||(this.y=this.y+n,this.x=this.x+t,this.lacarte.nativeElement.style.top=this.y+"px",this.lacarte.nativeElement.style.left=this.x+"px",this.command.items.forEach(function(e){e.elt.style.left=Number(e.elt.style.left.replace("px",""))+t+"px",e.elt.style.top=Number(e.elt.style.top.replace("px",""))+n+"px"}))}},i([s.ViewChild("lacarte"),o("design:type",s.ElementRef)],e.prototype,"lacarte",void 0),e=i([s.Component({selector:"page-customercommand",template:'<ion-header no-border>\n  <shifutitle [title]="command.items.length+\' article(s)\'">\n      <shifubutton [small]="true" id="btnCancel" *ngIf="command.items.length>0" icon="undo" (click)="cancel()"></shifubutton>\n      <shifubutton [small]="true" id="btnSend" *ngIf="command.items.length>0 && eventData.event.opened" label="LIB.SEND" (click)="askForTable()"></shifubutton>\n      <shifubutton [small]="true" id="btnPrepare" *ngIf="eventData.event.owner_id==userData.user.id" label="LIB.PREPARE" (click)="openPrepare()"></shifubutton>\n      <shifubutton [small]="true" id="btnCommandRandom"\n                   *ngIf="env==0 && eventData.event.opened && commands.length==0 && eventData.event.laCarte.length>0"\n                   label="LIB.RANDOM" (click)="clickRandom()">\n      </shifubutton>\n      <span *ngIf="userData.user.id!=eventData.event.owner_id">\n        <span style="font-size: x-large;color:white">{{userData.user.jetons[eventData.event.owner_id]}}</span>\n        <img src="./assets/img/money.png" style="width:15px;">\n      </span>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-border no-margin no-padding scroll="false" class="has-subheader">\n  <tuto position="title"\n        [if]="command.items.length==0 && eventData.event.laCarte.length>0"\n        label="CUSTOMERCOMMAND.TUTO">\n  </tuto>\n\n  <ion-item *ngIf="commands.length>0" text-center>\n    <tuto label="CUSTOMERCOMMAND.TUTO_PREPARE"></tuto>\n    Actuellement {{commands.length}} commandes en attente<br><br>\n    <div *ngFor="let comm of commands">\n      <h2>Commande #{{comm.numeroCommand}} : <span style="font-size: small">{{comm.title}}</span></h2>\n      {{(comm.delayToPrepare/60+1) | number:"2.0-0"}}&nbsp;minutes<br><br>\n      <span style="font-size: x-large;background-color: #00a8c6">{{comm.text | translate}}</span>\n      <span *ngIf="comm.status==2 && comm.table==null" label="COMMAND.READY"></span>\n      <span *ngIf="comm.status==2 && comm.table!=null" label="COMMAND.READYWITHTABLE"></span>\n    </div>\n  </ion-item>\n\n    <div *ngIf="canCommand" style="display: inline-block;width:100%;height:100%;cursor:move;overflow: hidden;"\n         (mousemove)="mousemove($event)"\n         (touchmove)="mousemove($event)"\n         (touchend)="mouseup($event)"\n         (mouseup)="mouseup($event)"\n         (mousedown)="mousedown($event)"\n         (touchstart)="mousedown($event)"\n         (mousewheel)="mousewheel($event)">\n\n        <img #lacarte (click)="selCarte($event)"\n             [ngStyle]="{\'position\':\'relative\',\'z-index\': 0,\'overflow\':\'hidden\',\'max-width\':userData.user.zoomInitial,\'max-height\':userData.user.zoomInitial}"\n             src="{{eventData.event.laCarte}}">\n    </div>\n</ion-content>\n'}),o("design:paramtypes",[r.ModalController,d.TranslateService,r.AlertController,a.ToastController,m.PushNotificationsService,a.NavController,a.NavParams,r.Events,u.EventDataProvider,l.UserData,f.Storage])],e)}();t.CustomercommandPage=g},342:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(15),u=n(2),c=n(35),d=n(8),p=n(48),h=n(6),f=n(16),m=function(){function e(e,t,n,i,o,s,a,r,l,u,c){this.viewCtrl=e,this.api=t,this.translate=n,this.alertCtrl=i,this.toastCtrl=o,this.modalCtrl=s,this.userData=a,this.events=r,this.navCtrl=l,this.navParams=u,this.eventData=c,this.commands=[],this.command={items:[]},this.user={}}return e.prototype.ionViewDidLoad=function(){u.subscribe("command",this),this.refresh()},e.prototype.updateCommand=function(e,t){var n=this;this.eventData.updatecommand(e.id,t).subscribe(function(e){n.refresh()})},e.prototype.refresh=function(){var e=this;this.eventData.getcommands().subscribe(function(t){e.commands=[],t.items.forEach(function(t){for(var n=0;n<t.items.length;n++)t.items[n].x=t.items[n].x+"%",t.items[n].y=t.items[n].y+"%",t.order=n;e.commands.push(t)})})},e.prototype.generateTableQRCode=function(){var e=this;u.openModal(this.modalCtrl,p.InvitePage,{dest:"command"},function(){u.toast(e.toastCtrl,"LIB.INVITE")})},e.prototype.updateEvent=function(){this.eventData.updateevent("laCarte,selfservice,loc_query").subscribe(function(e){})},e.prototype.uploadLaCarte=function(){var e=this;u.openModal(this.modalCtrl,c.ImageCreatorPage,{upload:!0,ratio:13/9,autocrop:!0,maxsize:800},function(t){null!=t&&(e.eventData.event.laCarte=t.value,e.eventData.event.activities.push("command"),e.eventData.updateevent("laCarte,activities").subscribe(function(e){}))})},e.prototype.pay=function(e){var t=this;u.showPopup({title:"LIB.COST",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(n){null!=n&&(n=Math.abs(n),t.api.chargecredits(t.eventData.event.owner_id,e.from.id,-n).subscribe(function(n){t.refresh(),t.updateCommand(e,5)}))})},e=i([s.Component({selector:"page-preparecommand",template:'\x3c!--\n  Generated template for the PreparecommandPage page.\n\n  See http://ionicframe work.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle help="addMenu" title="LIB.COMMAND">\n    <shifubutton id="btnClose" icon="checkmark" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n<ion-content no-padding>\n  <tuto [if]="eventData.event.laCarte.length>0" label="CUSTOMERCOMMAND.TUTO"></tuto>\n  <tuto label="Vous devez charger un menu pour que la commande à distance soit possible"\n        [if]="eventData.event.laCarte.length==0"\n        show="btnTakePhoto"\n  ></tuto>\n\n  <ion-item text-center *ngIf="commands.length==0 && eventData.event.laCarte.length>0">Aucune commande en attente</ion-item>\n\n  <shifucard title="#{{command.numeroCommand}} - {{command.items.length}}&nbsp;{{\'LIB.ITEM\' | translate}}"\n             label="LIB.READY" (onclick)="updateCommand(command,2)"\n             [showButton]="command.status==1"\n             [visible]="command.order==0"\n             *ngFor="let command of commands">\n    <div style="width:100%;text-align: center;vertical-align: middle;">\n      <span *ngIf="command.status>1">({{command.from.jetons[eventData.event.owner_id]}}&nbsp;<img src="./assets/img/money.png" class="small-money">)</span>\n\n      <span *ngIf="!eventData.event.selfService">Table:{{command.table}}</span>\n\n      <br>\n      \x3c!--<shifubutton name="btnReady" size="80" [small]="true" *ngIf="command.status==1" label="LIB.READY" (click)="updateCommand(command,2)"></shifubutton>--\x3e\n      <shifubutton name="btnCancel" size="80"   [small]="true" *ngIf="command.status==1" label="LIB.CANCEL" (click)="updateCommand(command,3)"></shifubutton>\n      <shifubutton name="btnTake" size="80"   [small]="true" *ngIf="command.status==2" label="LIB.TAKED" (click)="updateCommand(command,4)"></shifubutton>\n      <shifubutton name="btnPay" size="80" [small]="true" *ngIf="command.status==2" label="LIB.PAY" (click)="pay(command)"></shifubutton>\n      <br><br>\n    </div>\n\n    <div style="display:inline-block;width:96%;left:2%;position:relative;" *ngIf="command.status==1">\n      <img style="width:100%;z-index: 0;" src="{{command.laCarte}}">\n      <img *ngFor="let item of command.items"\n           [ngStyle]="{\'z-index\':100,\'width\':\'50px\',\'height\':\'50px\',\'top\':item.y,\'left\':item.x,\'position\':\'absolute\',\'transform\': \'translate(-25px,-25px)\'}"\n           src="./assets/img/pin.png">\n    </div>\n\n  </shifucard>\n  <br>\n\n  \x3c!-- 4 : correspond au PROFIL_PROPUBLIC --\x3e\n  <shifucard\n    [visible]="commands.length==0"\n    title="LIB.EVENTMASTER"\n    *ngIf="eventData.event.owner_id==userData.user.id"\n    icon="desktop"\n    (onclick)="events.publish(\'open:widget\',\'command\')">\n\n    <ion-item text-center no-line>\n\n\n\n      <img *ngIf="eventData.event.laCarte.length>0" class="image-photo" src="{{eventData.event.laCarte}}" style="max-width:90%;"><br>\n\n      <shifubutton\n              id="btnTakePhoto"\n              icon="image"\n              label="PREPARE.NEWCARTE"\n              (click)="uploadLaCarte()">\n      </shifubutton>\n      <shifubutton icon="person-add" (click)="generateTableQRCode()"></shifubutton>\n    </ion-item>\n    <br>\n    <div *ngIf="eventData.event.laCarte.length>0">\n      <shifucheckbox label="PROFIL.SELFSERVICE" [(ngModel)]="eventData.event.selfService" (onchange)="updateEvent()"></shifucheckbox>\n      <div [hidden]="eventData.event.selfService">\n        <shifuinput label="PROFIL.LOC_QUERY" (onenter)="updateEvent()" [(ngModel)]="eventData.event.loc_query" placeholder="Table ?"></shifuinput>\n      </div>\n    </div>\n  </shifucard>\n\n</ion-content>\n'}),o("design:paramtypes",[a.ViewController,f.ApiProvider,h.TranslateService,r.AlertController,a.ToastController,a.ModalController,d.UserData,r.Events,a.NavController,a.NavParams,l.EventDataProvider])],e)}();t.PreparecommandPage=m},343:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=n(15),l=n(8),u=n(3),c=n(3),d=n(2),p=n(6),h=n(20),f=function(){function e(e,t,n,i,o,s,r,l,u,c){this.settings=e,this.events=t,this.navCtrl=n,this.navParams=i,this.toastCtrl=o,this.translate=s,this.alertCtrl=r,this.eventData=l,this.userData=u,this.actionSheetCtrl=c,this.message={type:a.TYPE_MESSAGE,text:"",tags:[d.TAG_MESSAGE]},this.messages=[],this.emoji={},this.scheduled_messages=[],this.toggled=!1,this.messageLimitByUser=0,this.openPopup=null,this.refMessages={},this.link_label="",this.links=[],this.link_source="",this.message.text=s.instant("MESSAGES.YOURMESSAGE")}return e.prototype.setPopupAction=function(e){this.openPopup=e},e.prototype.openMenu=function(e){this.link_source=e},e.prototype.addLink=function(e){var t=this;this.eventData.addlink(this.link_source,e,this.eventData.event.link_label).subscribe(function(){t.link_source=""})},e.prototype.addTag=function(e){var t=this;this.eventData.addTag(e,this.eventData.event.message_tag).subscribe(function(){t.link_source=""})},e.prototype.setScore=function(e,t){var n=this,i={event:this.eventData.event.id,from:this.userData.user.id,value:t,description:""};e.canVote=!1,this.userData.sendvote(e.id,i).subscribe(function(e){null!=e&&(n.userData.user=e)})},e.prototype.ionViewDidLoad=function(){a.subscribe("message",this)},e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.refresh(!0)},d.DELAY_TO_REFRESH),setTimeout(function(){e.removeDefaultMessage()},1500)},e.prototype.writemessage=function(e){13==e&&(null!=this.openPopup&&this.openPopup(!1),this.sendmessage())},e.prototype.sendmessage=function(e){var t=this;void 0===e&&(e=-1),0!=this.message.text.length&&(this.message.from=this.userData.user,this.message.anonymous=this.userData.user.anonymous,this.message.photo="",e<=0?this.messages.splice(0,0,JSON.parse(JSON.stringify(this.message))):(this.message.dtStart=(new Date).getTime()+60*e*1e3,this.scheduled_messages.splice(0,0,JSON.parse(JSON.stringify(this.message)))),this.eventData.sendmessage(e,this.message).subscribe(function(e){null==e&&d.toast(t.toastCtrl,"MESSAGE.ERRORLIMIT",t.translate)}),this.message.text="")},e.prototype.programMessage=function(){var e=this;d.showPopup({title:"MESSAGE.ENTERDELAY",placeholder:"",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){e.sendmessage(Number(t))})},e.prototype.deleteMessage=function(e){var t=this;this.eventData.deletemessage(e,this.userData.getId()).subscribe(function(e){d.toast(t.toastCtrl,"MESSAGE.DELETED",t.translate),t.refresh()})},e.prototype.deleteScheduledMessage=function(e){var t=this;this.eventData.deletemessage(e.id,t.userData.user.id).subscribe(function(){t.refresh(!0)})},e.prototype.refresh=function(e){void 0===e&&(e=!1);var t=this;(e||void 0==this.userData.selectTab||"MessagesPage"==this.userData.selectTab)&&(d.$$("Récupération des derniers messages pour l'event "+this.eventData.event.owner_id+" pour l'utilisateur "+this.userData.user.id),this.eventData.getlastmessages(30).subscribe(function(e){t.messages=[],e.items.length>0&&e.items.forEach(function(e){e.hasOwnProperty("votes")&&e.from.id!=t.userData.user.id?(e.canVote=!0,e.votes.forEach(function(n){e.canVote&&n.from==t.userData.user.id&&(e.canVote=!1)})):e.from.id!=t.userData.user.id&&(e.canVote=!0),e.usertags=[],e.tags.forEach(function(t){t.startsWith("_")||e.usertags.push(t)}),t.messages.push(e),t.refMessages[e.id]=e.text})}),this.eventData.getscheduledmessages(20).subscribe(function(e){t.scheduled_messages=e.items.length>0?e.items:[]}))},e.prototype.openContextMenu=function(e,t){e.preventDefault(),e.stopPropagation();t.startSliding(194),t.moveSliding(194),t.setElementClass("active-options-right",!0),t.setElementClass("active-swipe-right",!0)},e.prototype.updateEvent=function(){this.eventData.updateevent("acceptLinkByUsers,acceptMessageBeforeStart,message_tag,link_label,postItMessage,messageLimitByUser").subscribe(function(){})},e.prototype.changeLimitByUser=function(){this.eventData.event.messageLimitByUser=1},e.prototype.getFocus=function(){},e.prototype.removeDefaultMessage=function(){this.message.text==this.translate.instant("MESSAGES.YOURMESSAGE")&&(this.message.text="")},e.prototype.openDemo=function(){var e=this;this.message.text="jfklsjk fjdsklj kflsdj klfjsd lfsd",setTimeout(function(){e.sendmessage(0)},1e3)},e.prototype.dellink=function(e){var t=e.split(",")[0],n=e.split(",")[1];this.eventData.dellink(t,n).subscribe(function(){})},e.prototype.onkeyPostIt=function(e){13==e.keyCode&&e.altKey&&this.sendmessage()},e=i([s.Component({selector:"page-messages",template:'\x3c!--\n  Generated template for the MessagesPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="Messages"  help="#" >\n    <shifubutton *ngIf="message.text.length>0 && eventData.event.Moderators.indexOf(userData.user.id)>-1 && !eventData.event.postItMessage"\n                style="font-size:1.5em;"\n                id="btnProgram"\n                 size="0"\n                 label="MESSAGE.SENDSCHEDULED"\n                 icon="timer"\n              (click)="programMessage()">\n    </shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding>\n\n  <tuto position="title" [if]="eventData.event.opened || eventData.event.Moderators.indexOf(userData.user.id)>-1" show="send" label="MESSAGES.TUTO"></tuto>\n  <tuto position="title" [if]="!eventData.event.opened" label="MESSAGES.TUTO_NOSTARTED_EVENT"></tuto>\n  <tuto position="title" [if]="userData.user.connexions.length>5 && messages.length>3" label="MESSAGES.TUTO_ADVANCED"></tuto>\n\n  \x3c!-- Zone du master of ceremony --\x3e\n  <shifucard [visible]="userData.user.connexions.length>5"\n             *ngIf="userData.user.id==eventData.event.owner_id"\n             id="cardMaster"\n             title="LIB.EVENTMASTER" tuto="TUTO.EVENTMASTER"\n             icon="desktop" (onclick)="events.publish(\'open:widget\',\'message\')">\n\n    <shifucheckbox label="MESSAGE.POSTIT"\n                   [(ngModel)]="eventData.event.postItMessage"\n                   (onchange)="updateEvent()">\n    </shifucheckbox>\n\n    <shifucheckbox label="PROFIL.ACCEPTMESSAGEBEFORESTART"\n                   *ngIf="!eventData.event.opened"\n                   [(ngModel)]="eventData.event.acceptMessageBeforeStart"\n                   (onchange)="updateEvent()">\n    </shifucheckbox>\n\n    <shifuinput label="MESSAGE.LABELLINK" [clearInput]="true"\n                *ngIf="(settings.ihm==\'pro\' || eventData.event.ihm==\'pro\')"\n                placeholder="est relié à,est la cause de,mange,implique"\n                position="fixed"\n                style="width:90%;"\n                [size]="40"\n                [(ngModel)]="eventData.event.link_label"\n                (onenter)="updateEvent()"\n                (onclear)="updateEvent()"\n                (onblur)="updateEvent()">\n    </shifuinput>\n\n    <shifuinput label="LIB.TAG" [clearInput]="true"\n                placeholder="marketing,informatique,animal,nourriture"\n                position="fixed"\n                *ngIf="(settings.ihm==\'pro\'  || eventData.event.ihm==\'pro\')"\n                style="width:90%;"\n                [size]="40"\n                [(ngModel)]="eventData.event.message_tag"\n                (onenter)="updateEvent()"\n                (onclear)="updateEvent()"\n                (onblur)="updateEvent()">\n    </shifuinput>\n\n    <shifucheckbox label="Accept link by users"\n                   *ngIf="eventData.event.link_label?.length>0"\n                   [(ngModel)]="eventData.event.acceptLinkByUsers"\n                   (onchange)="updateEvent()">\n    </shifucheckbox>\n\n\n    <shifubutton *ngIf="eventData.event.messageLimitByUser==0" label="MESSAGES.LIMITBYUSER" id="btnLimitMessage" (click)="changeLimitByUser()"></shifubutton>\n    <shifurange *ngIf="eventData.event.messageLimitByUser>0 && (settings.ihm==\'pro\' || eventData.event.ihm==\'pro\')"\n                label="MESSAGES.LIMITBYUSER"\n                (onchange)="updateEvent()"\n                icon="chatbubbles"\n                min="0" max="200" unite="messages"\n                [(ngModel)]="eventData.event.messageLimitByUser">\n    </shifurange>\n\n    <ion-list no-lines no-border>\n      <ion-item-sliding *ngFor="let item of scheduled_messages">\n        <ion-item name="scheduled_message">\n          <ion-avatar item-start>\n            <shifuimageprofil size="40px" [user]="item.from"></shifuimageprofil>\n          </ion-avatar>\n          <span item-left>{{item.text}} - <shifutimer [end]="item.dtStart"></shifutimer></span>\n          <shifubutton [small]="true" item-end icon="trash" (click)="deleteScheduledMessage(item)"></shifubutton>\n        </ion-item>\n      </ion-item-sliding>\n    </ion-list>\n\n  </shifucard>\n\n\n\n  \x3c!--Zone de saisie du message --\x3e\n  <ion-grid>\n    <ion-row align-items-center *ngIf="!eventData.event.postItMessage && eventData.online && (eventData.event.opened || eventData.event.acceptMessageBeforeStart)">\n       <ion-col col-auto text-left>\n          <ion-icon\n            id="btnSmiley" style="padding-left: 0px;margin: 0px;font-size: x-large;"\n            color="light" name="happy"\n            color="primary"\n            (click)="openPopup(null)">\n          </ion-icon>\n        </ion-col>\n        <ion-col text-left>\n          <emoji-input\n            id="txtMessage"\n            [inputClass]="\'input_class\'"\n            [(model)]="message.text"\n            [autofocus]="true"\n            [popupAnchor]="\'top\'"\n            [closeAfterSelection]="false"\n            (blur)="getFocus()"\n            (focus)="getFocus()"\n            (keyup)="writemessage($event.keyCode)"\n            (setPopupAction)="setPopupAction($event)">\n          </emoji-input>\n        </ion-col>\n        <ion-col col-auto text-right>\n          <ion-icon *ngIf="message.text.length==0" id="send" style="font-size:1.5em;color:lightgrey"></ion-icon>\n          <ion-icon *ngIf="message.text.length>0" color="primary" style="font-size:2em;" id="btnSend" name="send" (click)="writemessage(13)"></ion-icon>\n        </ion-col>\n    </ion-row>\n\n    <tuto [if]="eventData.event.postItMessage && message.text?.length>10"\n          label="Utiliser ALT+ENTER pour envoyé le message directement depuis le clavier"></tuto>\n\n    \x3c!--Zone postit--\x3e\n    <ion-row *ngIf="eventData.event.postItMessage && eventData.online && (eventData.event.opened || eventData.event.acceptMessageBeforeStart)">\n      <ion-col col-8>\n        <div style="position: relative;width:100%;height:32vh;">\n          <img src="https://shifumixweb.appspot.com/assets/img/postit.png" style="position:absolute;left:0;top:0;width:80vw;height:30vh;max-width: 500px;">\n          <ion-textarea style="position: absolute;left:20px;top:10px;width:77vw;height:23vh;font-size: 3vh;max-width: 600px;"\n                        rows="7" cols="12"\n                        placeholder="Your message here"\n                        [(ngModel)]="message.text"\n                        (keydown)="onkeyPostIt($event)">\n          </ion-textarea>\n        </div>\n      </ion-col>\n      <ion-col text-left>\n        <ion-icon *ngIf="message.text.length>0"\n                  color="primary" style="font-size: 6vmin;"\n                  id="btnSend2"\n                  title="{{\'LIB.SEND\' | translate}}"\n                  name="send" (click)="writemessage(13)">\n        </ion-icon>\n\n\n        <br>\n\n        <ion-icon *ngIf="message.text.length>0 && eventData.event.Moderators.indexOf(userData.user.id)>-1"\n                  style="font-size: 6vmin;"\n                  color="primary"\n                  title="{{\'MESSAGE.SENDSCHEDULED\' | translate}}"\n                  id="btnProgram2" name="timer"\n                  (click)="programMessage()">\n        </ion-icon>\n      </ion-col>\n    </ion-row>\n\n\n\n\n\n  </ion-grid>\n\n  <ion-item text-wrap\n            *ngIf="eventData.event.link_label!=null && eventData.event.link_label.length>0 && (eventData.event.acceptLinkByUsers || eventData.event.Moderators.indexOf(userData.user.id)>-1)"\n            >\n    Vous pouvez relier les messages par la relation : <strong>{{eventData.event.link_label}}</strong>\n  </ion-item>\n\n  \x3c!-- Affichage des messages sous forme de conversation --\x3e\n  <tuto position="title"\n        [if]="(userData.user.screens?.length==0) && eventData.event.owner_id==userData.user.id && messages!=null && messages.length>1"\n        label="Souhaitez-vous voir les messages sur un iWall ?"\n  >\n  </tuto>\n\n  <ion-list no-lines no-border>\n    <ion-item-sliding #slidingItem *ngFor="let item of messages">\n      <ion-item name="item_messages">\n        <ion-avatar item-start>\n          <shifuimageprofil [follower]="userData.user.id" size="40px" [user]="item.from" [me]="userData.user.id==item.from.id"></shifuimageprofil>\n        </ion-avatar>\n        <span text-wrap>\n          {{item.text}}\n          <div *ngIf="item.usertags!=null && item.usertags.length>0"></div>\n          <div *ngFor="let usertag of item.usertags" style="display:inline;font-size: x-small">{{usertag}}&nbsp;</div>\n        </span>\n\n        <ion-icon color="primary"\n                  item-end\n                  *ngIf="eventData.event.link_label!=null && eventData.event.link_label.length>0 && link_source.length==0 && (eventData.event.acceptLinkByUsers || eventData.event.Moderators.indexOf(userData.user.id)>-1)"\n                  name="cmdLinkMessage"\n                  style="font-size: xx-large"\n                  name="log-out"\n                  (click)="openMenu(item.id)">\n        </ion-icon>\n\n        <ion-icon color="primary"\n                  item-end\n                  style="font-size: xx-large;"\n                  *ngIf="link_source!=null && link_source.length>0"\n                  name="log-in"\n                  (click)="addLink(item.id)">\n        </ion-icon>\n\n        <ion-icon color="primary"\n                  item-end\n                  style="font-size: xx-large;"\n                  *ngIf="eventData.event.message_tag!=null && eventData.event.message_tag.length>0 && item.tags.indexOf(eventData.event.message_tag)==-1"\n                  name="pricetag"\n                  (click)="addTag(item.id)">\n        </ion-icon>\n\n\n        <img item-end class="image-photo" style="width:60px" *ngIf="item.photo.length>0" [src]="item.photo">\n      </ion-item>\n\n      <ion-item-options padding="3px" side="left">\n        <ion-icon color="primary" name="cmdLikeMessage" style="font-size: xx-large" *ngIf="item.canVote" name="thumbs-up" (click)="setScore(item,1)"></ion-icon>&nbsp;&nbsp;\n        <ion-icon color="primary" name="cmdDislikeMessage" style="font-size: xx-large" *ngIf="item.canVote" name="thumbs-down" (click)="setScore(item,-1)"></ion-icon>&nbsp;&nbsp;\n        <ion-icon color="primary" name="cmdDeleteMessage" style="font-size: xx-large"\n                  *ngIf="eventData.event.Moderators.indexOf(userData.user.id)>-1 || item.from.id==userData.user.id"\n                  name="trash" (click)="deleteMessage(item.id)">\n        </ion-icon>&nbsp;&nbsp;&nbsp;\n        \x3c!--<ion-select interface="popover" *ngIf="" (ionChange)="addlink(item.id,$event)">--\x3e\n        \x3c!--<ion-option *ngFor="let mes of messages" [value]="mes.id" >{{mes.text}}</ion-option>--\x3e\n        \x3c!--</ion-select>--\x3e\n\n      </ion-item-options>\n\n    </ion-item-sliding>\n  </ion-list>\n\n  \x3c!--<div class="network-canvas"--\x3e\n  \x3c!--[visNetwork]="visNetwork"--\x3e\n  \x3c!--[visNetworkData]="visNetworkData"--\x3e\n  \x3c!--[visNetworkOptions]="visNetworkOptions"--\x3e\n  \x3c!--(initialized)="networkInitialized()">--\x3e\n  \x3c!--</div>--\x3e\n\n\n\n  <shifucard title="Graphe" [visible]="true"\n             *ngIf="eventData.event.links!=null && eventData.event.links.length>0 && eventData.event.Moderators.indexOf(userData.user.id)>-1">\n    <ion-list>\n      <ion-item *ngFor="let link of eventData.event.links">\n        <ion-label>\n          {{refMessages[link.split(",")[0]]}} - {{link.split(",")[2]}} - {{refMessages[link.split(",")[1]]}}\n        </ion-label>\n        <shifubutton icon="trash" item-right [small]="true" (click)="dellink(link)"></shifubutton>\n\n      </ion-item>\n    </ion-list>\n\n  </shifucard>\n\n\n\n</ion-content>\n'}),o("design:paramtypes",[h.SettingsProvider,u.Events,c.NavController,c.NavParams,c.ToastController,p.TranslateService,u.AlertController,r.EventDataProvider,l.UserData,u.ActionSheetController])],e)}();t.MessagesPage=f},344:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(2),l=n(8),u=n(15),c=n(2),d=n(3),p=n(48),h=n(55),f=n(6),m=n(345),g=n(16),v=n(109),E=function(){function e(e,t,n,i,o,s,a,r,l,u,c){var d=this;this.events=e,this.navCtrl=t,this.navParams=n,this.translate=i,this.loadingCtrl=o,this.toastCtrl=s,this.modalCtrl=a,this.alertCtrl=r,this.api=l,this.eventData=u,this.userData=c,this.user={connexions:[]},this.orderby={critere:"scoreEvent"},this.users=[],this.message=null,this.invites=[],this.teams=[],this.teamChart={value:!1},this.delay="",this.target=null,this.teams=[],null!=this.eventData.event.teams&&Object.keys(this.eventData.event.teams).forEach(function(e){d.teams.push(d.eventData.event.teams[e])})}return e.prototype.update=function(e,t){this.orderby=e},e.prototype.ionViewWillEnter=function(){this.message=this.navParams.get("message")},e.prototype.showUser=function(e){c.openModal(this.modalCtrl,h.PublicProfilPage,{userid:e.id,follower:this.userData.user.id})},e.prototype.changeEvent=function(){this.eventData.updateevent("maxOnline").subscribe(function(e){})},e.prototype.ionViewDidLoad=function(){r.subscribe(c.ORDER_CHARTS,this),void 0!=this.navParams.get("message")&&c.toast(this.toastCtrl,this.navParams.get("message"),this.translate)},e.prototype.ionViewDidEnter=function(){var e=this;setTimeout(function(){e.refresh(!0)},500)},e.prototype.openInvite=function(){r.getDelayInMinutes(this.eventData.event.dtEnd)>10?c.openModal(this.modalCtrl,p.InvitePage,{from:this.userData.user,event:this.eventData.event}):c.toast(this.toastCtrl,"ERROR.NOTENOUGHTTIME",this.translate)},e.prototype.setTarget=function(e){this.target=e,this.refresh()},e.prototype.clearTarget=function(){this.target=null,this.refresh()},e.prototype.openWholikeme=function(e){c.openModal(this.modalCtrl,m.WholikemePage,{target:e})},e.prototype.refresh=function(e){var t=this;if(void 0===e&&(e=!1),e||void 0==this.userData.selectTab||"ChartsPage"==this.userData.selectTab){this.delay=r.getDelay(this.eventData.event.dtEnd);var n="";null!=this.target&&(n=this.target.id),this.eventData.getinvites().subscribe(function(e){t.invites=e}),this.eventData.getpresents(!0,n).subscribe(function(e){null!=e&&(t.users=[],e.items.forEach(function(e){e.total=e.nbDislike-e.nbLike,t.users.push(e)}))})}},e.prototype.GiveToAll=function(){var e=this;c.showPopup({title:"CHARTS.GIVETOKENTOALLTITLE",placeholder:"LIB.AMOUNT",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){null!=t&&e.api.chargecredits(e.userData.user.id,e.eventData.event.id,t).subscribe(function(e){})})},e.prototype.GiveToNewcomer=function(){var e=this;c.showPopup({title:"CHARTS.GIVETONEWCOMERTITLE",placeholder:"LIB.AMOUNT",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(t){null!=t&&(e.eventData.event.startJetons=t,e.eventData.updateevent("startJetons").subscribe(function(e){}))})},e.prototype.updateTeam=function(){c.openModal(this.modalCtrl,v.TeamsPage,{},function(){})},e=i([s.Component({selector:"page-charts",template:'\x3c!--\n  Generated template for the ChartsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="LIB.PERSONS">\n    <shifubutton [small]="true" *ngIf="eventData.online" icon="person-add" (click)="openInvite()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\x3c!--TODO: a voir qui fera l\'entrance--\x3e\n<ion-content no-padding no-lines>\n\n  <span *ngIf="message!=null">{{message | translate}}</span>\n  <tuto [if]="message==null" position="title" label="CHARTS.TUTO"></tuto>\n\n  <shifucard *ngIf="userData.user.id==eventData.event.owner_id"\n             id="cardMaster"\n             icon="desktop" (onclick)="events.publish(\'open:widget\',\'people\')"\n             title="LIB.EVENTMASTER" tuto="TUTO.EVENTMASTER">\n\n      <tuto help="iCoin" [delay]="20" show="btnTeam" position="title"\n            label="Vous pouvez répartir, par équipe, les participants et les nouveaux arrivants dans votre événement"></tuto>\n      <ion-item>\n        <ion-label item-start>\n          {{"LIB.TEAMSETTINGS" | translate}}\n        </ion-label>\n        <shifubutton\n          item-end\n          size="90"\n          [small]="true"\n                     id="btnTeam"\n                     icon="add-circle"\n                     label="LIB.TEAMS"\n                     (click)="updateTeam()">\n        </shifubutton>\n      </ion-item>\n\n\n      <tuto help="iCoin" [delay]="40"\n            show="cmdGiveToAll" position="title" label="Distribuer la monnaie virtuelle à vos participants pour leurs achats, paris, loterie"></tuto>\n      <ion-item>\n        <ion-label item-start no-border text-wrap no-margin>\n          {{\'CHARTS.GIVESCOIN\' | translate}}\n        </ion-label>\n        <shifubutton [small]="true" size="90" item-end id="cmdGiveToAll" label="CHARTS.GIVEALL" (click)="GiveToAll()"></shifubutton>\n        <shifubutton [small]="true" size="90" item-end id="cmdGiveToNew" label="CHARTS.BONUSFORNEWCOMER" (click)="GiveToNewcomer()"></shifubutton>\n      </ion-item>\n\n\n    <shifurange id="txtMaxOnline" icon="person"\n                *ngIf="userData.user.connexions.length>20 && users.length/userData.user.tarif.max_guests>0.6"\n                label="ADDEVENT.MAXGUEST" unite="{{\'LIB.PERSON\' | translate}}"\n                [(ngModel)]="eventData.event.maxOnline"\n                min="0" max="userData.user.tarif.max_guests" step="1"\n                (onchange)="changeEvent()"></shifurange>\n\n    <ion-list no-lines *ngIf="invites!=null && invites.length>0">\n      <ion-list-header>Invites</ion-list-header>\n      <ion-item *ngFor="let user of invites">\n        <ion-avatar item-start>\n          <shifuimageprofil [follower]="userData.user.id" [user]="user"></shifuimageprofil>\n        </ion-avatar>\n        <span style="font-size: large;">{{user.firstname}}</span>\n      </ion-item>\n    </ion-list>\n  </shifucard>\n\n\n  <ion-item text-center *ngIf="target!=null">\n    <shifubutton label="Clear" (click)="clearTarget()"></shifubutton>\n    <h1>{{target.firstname}} aime :</h1>\n  </ion-item>\n\n  <shifucheckbox [(ngModel)]="teamChart.value" label="CHARTS.BYTEAM" *ngIf="teams!=null && teams.length>1"></shifucheckbox>\n\n  <ion-list *ngIf="!teamChart.value" id="present_users" no-lines no-border>\n    \x3c!--<ion-list-header>--\x3e\n      \x3c!--<shifubutton id="btnCredit" label="Score" (click)="update(\'creditEvent\',0)">{{\'LIB.CREDITS\' | translate}}</shifubutton>--\x3e\n      \x3c!--<shifubutton id="btnScore" label="Credit" (click)="update(\'scoreEvent\',1)">{{\'LIB.NOTORIETY\' | translate}}</shifubutton>--\x3e\n    \x3c!--</ion-list-header>--\x3e\n\n    <ion-item-sliding *ngFor="let user of users | orderBy : \'total\' " style="padding: 4px;">\n      <ion-item *ngIf="target==null || user.id!=target.id">\n\n        <ion-avatar item-start>\n          <shifuimageprofil size="80px"\n                            [me]="user.id==userData.user.id"\n                            [follower]="userData.user.id"\n                            shifuid="users"\n                            [user]="user">\n          </shifuimageprofil>\n        </ion-avatar>\n        <span *ngIf="user.online" style="font-size: large;">{{user.firstname}}</span>\n        <span *ngIf="!user.online" style="font-size: large;color:darkgrey;">{{user.firstname}}</span>\n\n        <span *ngIf="user.id==eventData.event.owner_id" style="font-size: small">(Master)</span>\n        <span *ngIf="user.id!=eventData.event.owner_id && eventData.event.Moderators.indexOf(user.id)>-1" style="font-size: small">(Moderateur)</span><br>\n        <span *ngIf="user.currentTeam!=null && user.currentTeam.length>0 && eventData.event.teams!=null && eventData.event.teams[user.currentTeam]!=null"\n              style="font-size: small;">{{eventData.event.teams[user.currentTeam].name}}\n        </span>\n\n\n        <span *ngIf="userData.user.id==eventData.event.owner_id && user.jetons!=undefined && user.id!=userData.user.id">\n          ({{user.jetons[eventData.event.owner_id]}}&nbsp;<img src="./assets/img/money.png" style="width:15px;">)\n        </span>\n\n        <ion-note item-end style="font-size: large">\n          <shifunote shifuid="notesPerson" [object]="user" (click)="openWholikeme(user)"></shifunote>\n          \x3c!--<span *ngIf="orderby.critere==\'scoreEvent\'" style="font-size:large"><span *ngIf="user.scoreEvent>0">+</span>{{user.scoreEvent | number:"1.0"}}</span>&nbsp;--\x3e\n          \x3c!--<span *ngIf="orderby.critere==\'creditEvent\'" style="font-size:large"><span *ngIf="user.creditEvent>0">+</span>{{user.creditEvent | number:"1.0"}}</span>&nbsp;<img src="./assets/img/money.png" class="money-small">--\x3e\n        </ion-note>\n\n      </ion-item>\n      <ion-item-options>\n        \x3c!--<span *ngIf="orderby.critere==\'scoreEvent\'" style="font-size:large">{{user.score | number:"1.0"}}</span>&nbsp;--\x3e\n        \x3c!--<span *ngIf="orderby.critere==\'creditEvent\'" style="font-size:large">{{user.credit | number:"1.0"}}</span>--\x3e\n        <button ion-button color="seconday" (click)="setTarget(user)">\n          {{\'LIB.WHO\' | translate}}\n        </button>\n      </ion-item-options>\n    </ion-item-sliding>\n  </ion-list>\n  <ion-list *ngIf="teamChart.value">\n    <ion-item *ngFor="let team of teams">\n      <ion-grid><ion-row>\n        <ion-col col-auto>\n          <img [src]="team.logo" style="width:80px;height: 80px;">\n        </ion-col>\n        <ion-col>\n          {{team.name}}\n        </ion-col>\n        <ion-col text-right>\n          <ion-note>\n            {{team.nbLike}} / {{team.nbDislike}}\n          </ion-note>\n        </ion-col>\n      </ion-row></ion-grid>\n    </ion-item>\n  </ion-list>\n\n</ion-content>\n'}),o("design:paramtypes",[a.Events,d.NavController,d.NavParams,f.TranslateService,a.LoadingController,a.ToastController,d.ModalController,a.AlertController,g.ApiProvider,u.EventDataProvider,l.UserData])],e)}();t.ChartsPage=E},345:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(15),l=n(6),u=function(){function e(e,t,n,i,o,s,a,r){this.navCtrl=e,this.navParams=t,this.viewCtrl=n,this.translate=i,this.loadingCtrl=o,this.modalCtrl=s,this.alertCtrl=a,this.eventData=r,this.target={},this.users=[]}return e.prototype.ionViewDidLoad=function(){var e=this;this.target=this.navParams.get("target"),this.eventData.getuserslikeme(this.target.id).subscribe(function(t){void 0!=t.items?(e.users=[],t.items.forEach(function(t){t.total=t.nbDislike-t.nbLike,(t.nbDislike>0||t.nbLike>0)&&e.users.push(t)})):e.viewCtrl.dismiss()})},e=i([s.Component({selector:"page-wholikeme",template:'\x3c!--\n  Generated template for the WholikemePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="WHOLIKEME.TITLE">\n    <shifubutton [small]="true" id="btnClose" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n\n<ion-content no-padding>\n  <h1>Qui aime {{target.firstname}} ?</h1>\n  <ion-item *ngFor="let user of users | orderBy : \'total\'">\n    <ion-avatar item-start>\n      <shifuimageprofil shifuid="users" [user]="user"></shifuimageprofil>\n    </ion-avatar>\n    <span style="font-size: large;">{{user.firstname}}</span>\n    <ion-note item-end style="font-size: large" >\n      <shifunote [object]="user"></shifunote>\n    </ion-note>\n  </ion-item>\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.NavParams,a.ViewController,l.TranslateService,a.LoadingController,a.ModalController,a.AlertController,r.EventDataProvider])],e)}();t.WholikemePage=u},346:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(16),u=n(8),c=n(2),d=n(108),p=n(6),h=n(82),f=n(48),m=n(2),g=function(){function e(e,t,n,i,o,s,a,r,l,u){this.navCtrl=e,this.userData=t,this.alertCtrl=n,this.api=i,this.navParams=o,this.loadingCtrl=s,this.translate=a,this.eventBus=r,this.toastCtrl=l,this.modalCtrl=u,this.events=[],this.myevents=[]}return e.prototype.ionViewDidLoad=function(){this.refresh()},e.prototype.refresh=function(){var e=this,t=this;t.api.geteventsfrom(this.userData.user.id,20,!1).subscribe(function(n){null!=n&&void 0!=n.items&&(t.myevents=[],t.events=[],n.items.forEach(function(n){n.owner_id==e.userData.user.id?t.myevents.push(n):t.events.push(n)}))})},e.prototype.deleteEvent=function(e){var t=this;c.$$("Suppression de "+e.id),this.userData.delevent(e.id).subscribe(function(e){t.refresh()})},e.prototype.joinEvent=function(e){this.eventBus.publish("event:login",{event:e,user:this.userData.user,type:1,url:"index.html?event="+e.id+"&from="+this.userData.user.id})},e.prototype.openEvent=function(e){var t=this;e.password.length>0&&e.owner.id!=this.userData.user.id?m.showPopup({title:"SELEVENT.PRIVATE",placeholder:"password",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"text",translate:this.translate},this.alertCtrl,function(n){e.password==n?c.openModal(t.modalCtrl,d.ClosedeventPage,{event:e}):c.toast(t.toastCtrl,"ERROR.BADPASSWORD")}):c.openModal(this.modalCtrl,d.ClosedeventPage,{event:e})},e.prototype.addEvent=function(){var e=this;c.openModal(this.modalCtrl,h.AddeventPage,{user:this.userData.user},function(t){e.refresh()})},e.prototype.inviteEvent=function(e){c.openModal(this.modalCtrl,f.InvitePage,{event:e})},e.prototype.onClose=function(e){var t=this;c.closeEvent(this,e,function(){setTimeout(function(){t.refresh()},15e3)})},i([s.ViewChild(a.Content),o("design:type",a.Content)],e.prototype,"content",void 0),e=i([s.Component({selector:"page-oldevents",template:'\x3c!--\n  Generated template for the OldeventsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle title="LIB.MYEVENTS" help="#">\n    <shifubutton\n      [small]="true" size="110"\n      tips="Créer votre propre événement" [small]="events.length+myevents.length>0"\n      id="btnAddEvent" icon="add-circle"\n      label="SELEVENT.CREATE" (click)="addEvent()">\n    </shifubutton>\n\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding>\n  <tuto position="title" [if]="myevents.length>0" help="tuto_myfirstevent" label="OLDEVENTS.TUTO_FIRSTEVENTS"></tuto>\n\n  <ion-item text-wrap no-lines text-center *ngIf="events.length+myevents.length==0">\n    {{"OLDEVENTS.TUTO" | translate}}<br>\n  </ion-item>\n\n  <div *ngIf="events.length+myevents.length>0">\n    <tuto [if]="userData.user.nEventCreated>0" label="TUTO.FIRSTEVENTCREATED"></tuto>\n\n\n    \x3c!-- MyEvents --\x3e\n    <shifucard [visible]="myevents.length>0" id="MyEvents" title="LIB.MYEVENTS" help="myevents">\n      <div *ngFor="let event of myevents" style="display:inline-block;width:150px;margin:5px;">\n        <shifuflyer style="marge:5px" [closed]="event.closed" [flyer]="event.flyer" size="100%">\n          <div style="width:100%;text-align: center">\n            <br>\n            <ion-buttons *ngIf="!event.closed">\n              <shifubutton shifuid="btnJoin" label="LIB.JOIN" (click)="joinEvent(event)"></shifubutton><br><br>\n              <shifubutton shifuid="btnInvite" icon="person-add" (click)="inviteEvent(event)"></shifubutton>\n              <shifubutton shifuid="btnClose" icon="close-circle" (click)="onClose(event)"></shifubutton>\n            </ion-buttons>\n            <ion-item text-center *ngIf="event.closed==false">\n              {{\'LIB.EVENTCODE\' | translate}}<br>\n              {{event.code}}\n            </ion-item>\n\n            <ion-buttons *ngIf="event.closed==true">\n              <shifubutton shifuid="btnDelete" [small]="true" icon="trash" (click)="deleteEvent(event)"></shifubutton>\n              <shifubutton shifuid="btnView" [small]="true" icon="eye" (click)="openEvent(event)"></shifubutton>\n            </ion-buttons>\n\n          </div>\n        </shifuflyer>\n      </div>\n    </shifucard>\n  </div>\n\n\n  <shifucard *ngIf="events.length>0" [visible]="true" id="ParticipedEvents"  title="OLDEVENTS.PARTICIPATEDEVENT" tuto="OLDEVENTS.TUTO_PARTICIPEDEVENTS">\n    <div *ngFor="let event of events" style="display:inline-block;width:150px;margin:5px;">\n      <shifuflyer style="marge:5px" [closed]="event.closed" [flyer]="event.flyer" size="100%">\n        <ion-item text-center no-border no-lines>\n          <shifubutton *ngIf="event.closed" [small]="true" label="LIB.VIEW" (click)="openEvent(event)"></shifubutton>\n          <shifubutton *ngIf="!event.closed" [small]="true" label="LIB.JOIN" (click)="joinEvent(event)"></shifubutton>\n        </ion-item>\n      </shifuflyer>\n    </div>\n  </shifucard>\n\n</ion-content>\n'}),o("design:paramtypes",[r.NavController,u.UserData,a.AlertController,l.ApiProvider,a.NavParams,a.LoadingController,p.TranslateService,r.Events,a.ToastController,r.ModalController])],e)}();t.OldeventsPage=g},347:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(20),l=function(){function e(e,t){this.settings=e,this.viewCtrl=t,this.version=""}return e=i([s.Component({selector:"page-about",template:'<ion-header>\n  <shifutitle title="LIB.ABOUT">\n  </shifutitle>\n</ion-header>\n\n<ion-content text-center>\n  <ion-item text-center no-lines>\n    {{settings.app_name}} - version {{settings.app_version}}\n  </ion-item>\n  <iframe\n    [src]="settings.about_url  | safe"\n    width="94%"\n    style="margin:3%;border: none;"\n    height="80%">\n  </iframe>\n\n</ion-content>\n'}),o("design:paramtypes",[r.SettingsProvider,a.ViewController])],e)}();t.AboutPage=l},348:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=function(){function e(e,t){this.navParams=e,this.viewCtrl=t,this.image="",this.image=this.navParams.get("image")}return e.prototype.ionViewDidLoad=function(){var e=this;this.navParams.get("duration")>0&&setTimeout(function(){e.viewCtrl.dismiss()},this.navParams.get("duration"))},e=i([s.Component({selector:"page-welcome",template:'\x3c!--\n  Generated template for the WelcomePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-content no-padding no-border no-margin style="overflow: hidden;">\n  <div style="position:relative;width:100vw;height:100vh;">\n    <img src="{{image}}" style="height:100%;object-fit: cover;object-position: 50% 50%;" (click)="viewCtrl.dismiss()">\n  </div>\n</ion-content>\n'}),o("design:paramtypes",[a.NavParams,a.ViewController])],e)}();t.WelcomePage=r},349:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(6),l=n(22),u=n(8),c=function(){function e(e,t,n,i,o,s){this.navCtrl=e,this.navParams=t,this.translate=n,this.domSanitizer=i,this.userData=o,this.viewCtrl=s}return e.prototype.ionViewDidEnter=function(){this.page.nativeElement.contentDocument.body.innerHTML=this.navParams.get("CG")},i([s.ViewChild("page"),o("design:type",s.ElementRef)],e.prototype,"page",void 0),e=i([s.Component({selector:"page-term-of-use",template:'\x3c!--\n  Generated template for the TermOfUsePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle label="LIB.TERMOFUSE">\n    <shifubutton id="btnAgree" icon="checkmark" label="LIB.AGREE" (click)="viewCtrl.dismiss(true)"></shifubutton>\n    <shifubutton id="btnDisagree" icon="close" label="LIB.DISAGREE" (click)="viewCtrl.dismiss(false)"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content no-padding no-border no-lines overflow-scroll="true">\n    <iframe style="width:100%;height: 100%" #page></iframe>\n</ion-content>\n'}),o("design:paramtypes",[a.NavController,a.NavParams,r.TranslateService,l.DomSanitizer,u.UserData,a.ViewController])],e)}();t.TermOfUsePage=c},35:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(2),u=n(2),c=n(2),d=n(8),p=n(6),h=n(16),f=n(20),m=function(){function e(e,t,n,i,o,s,a,r,l,u){this.navCtrl=e,this.navParams=t,this.api=n,this.toastCtrl=i,this.viewCtrl=o,this.userData=s,this.loadingCtrl=a,this.translate=r,this.alertCtrl=l,this.settings=u,this.images=[],this.valide=!1,this.img={src:""},this.imgHD={src:""},this.x=0,this.y=0,this.scale=1,this.width=0,this.height=0,this.ech=100,this.angle=0,this.lastdist=0,this.filter="",this._DRAGGGING_STARTED=0,this._LAST_MOUSE_POSITION={x:null,y:null}}return e.prototype.ionViewDidLoad=function(){var e=this;this.filter=this.navParams.get("filter"),null!=this.filter&&0!=this.filter.length||(this.filter="cloud,photo,phone,icons");var t=this.navParams.data.ratio;null==t&&(t=1);this.cadre.nativeElement.style.height=this.cadre.nativeElement.clientWidth*t+"px",this.cadre.nativeElement.style.width=this.cadre.nativeElement.clientWidth+"px",this.settings.lastImages.length>0?this.images=this.settings.lastImages:this.userData.getPreviousImages(20).subscribe(function(t){null!=t&&(e.images=[],t.items.forEach(function(t){-1==t.title.indexOf(".svg")&&e.images.push(t)}))}),"icon"==this.navParams.get("click")&&setTimeout(function(){e.addIcon()},1e3)},e.prototype.mousemove=function(e){e.preventDefault();var t=0,n=0,i=0;if(void 0!=e.touches&&(1==e.touches.length&&(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY),2==e.touches.length&&(t=Math.abs(e.touches[0].clientX-e.touches[1].clientX)+Math.abs(e.touches[0].clientY-e.touches[1].clientY))),1==this._DRAGGGING_STARTED){var o={x:e.offsetX,y:e.offsetY};if(n=o.x-this._LAST_MOUSE_POSITION.x,i=o.y-this._LAST_MOUSE_POSITION.y,this._LAST_MOUSE_POSITION=o,void 0!=e.touches&&2==e.touches.length)this.mousewheel(t>this.lastdist?{wheelDelta:1}:{wheelDelta:-1}),this.lastdist=t;else{if(null!=e.target.parentElement){var s=e.target.parentElement.clientWidth-e.target.clientWidth,a=e.target.parentElement.clientHeight-e.target.clientHeight;a>0&&(a=0),s>0&&(s=0),this.x+n>0&&(n=-this.x),this.y+i>0&&(i=-this.y),this.x+n<s&&(n=-this.x+s),this.y+i<a&&(i=-this.y+a)}0==n&&0==i||(this.y=this.y+i,this.x=this.x+n,this.img.style.top=this.y+"px",this.img.style.left=this.x+"px")}}},e.prototype.mousewheel=function(e){if(this.img.src.length>0){if(e.wheelDelta>0)this.scale+=.01;else{if(this.img.width+this.x<this.img.parentElement.clientWidth)return;if(this.img.height+this.y<this.img.parentElement.clientHeight)return;this.scale-=.01}this.ech=100*this.scale,this.img.style.width=this.width*this.scale+"px",this.img.style.height=this.height*this.scale+"px"}},e.prototype.mousedown=function(e){this._DRAGGGING_STARTED=1,void 0!=e.touches&&(1==e.touches.length?(e.offsetX=e.touches[0].clientX,e.offsetY=e.touches[0].clientY,this._LAST_MOUSE_POSITION={x:e.offsetX,y:e.offsetY}):this.lastdist=Math.abs(e.touches[0].clientX-e.touches[1].clientX)+Math.abs(e.touches[0].clientY-e.touches[1].clientY))},e.prototype.mouseup=function(e){this._DRAGGGING_STARTED=0},e.prototype.onChange=function(e){var t=this;if(e.target.files&&e.target.files[0]){var n=new FileReader;n.onload=function(e){t.loadImage(e.target.result)},n.readAsDataURL(e.target.files[0])}},e.prototype.rotateImage=function(e){var t=this;this.angle=this.angle+e,this.scale=1,this.x=0,this.y=0,c.rotate(this.img.src,this.angle,.3,function(e){t.img.src=e})},e.prototype.getMyCloudFile=function(){var e=this,t=u.loading(e);c.openGeneral("instagram",this.userData.user).then(function(){e.userData.getImagesFromMyCloud().subscribe(function(n){t.dismiss(),n.items.forEach(function(t){e.images.push(t)})},function(e){t.dismiss()})})},e.prototype.addIcon=function(){this.images=[];for(var e=1;e<300;e++)this.images.push({photo:"https://shifumix.com/avatars/file_emojis"+e+".png"})},e.prototype.imagePlatform=function(e){var t=this;t.images=[],c.showPopup({title:"PHOTO.KEYWORDSEARCH",default:this.settings.lastSearchImage,confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",translate:this.translate,type:"text"},this.alertCtrl,function(n){if(null!=n){n=n.replace("#","");var i=u.loading(t);t.userData.getImageForFlyer(e,n,null,null).subscribe(function(e){i.dismiss(),0==e.items.length?c.toast(t.toastCtrl,"IMAGECREATOR.NOIMAGE",t.translate):(e.items.forEach(function(e){t.images.push(e)}),t.settings.lastImages=t.images,t.settings.lastSearchImage=n)},function(e){i.dismiss()})}})},e.prototype.loadImage=function(e,t){void 0===t&&(t=null),this.imgHD.src=e;var n=this;c.resizeBase64Img(e,null,.3,function(e){n.x=0,n.y=0,n.scale=1,n.img.src.length>0&&n.img.parentElement==n.cadre.nativeElement&&n.cadre.nativeElement.removeChild(n.img),n.img=new Image,n.img.onload=function(){n.valide=!0,n.width=this.width,n.height=this.height,n.scale=Math.max(n.cadre.nativeElement.clientWidth/this.width,n.cadre.nativeElement.clientHeight/this.height),n.ech=100*n.scale,this.style.maxWidth="10000px",this.style.maxHeight="10000px";var e=this.width*n.scale,i=this.height*n.scale;this.style.width=e+"px",this.style.height=i+"px",n.cadre.nativeElement.appendChild(this),n.cadre.nativeElement.style.visibility="visible",this.style.position="relative";var o=(n.cadre.nativeElement.clientWidth-e)/4,s=(n.cadre.nativeElement.clientHeight-i)/4;n.mousedown({}),n.mousemove({preventDefault:function(){},target:this,offsetX:o,offsetY:s,touches:[]}),n.mouseup({}),null!=t&&t()},0==e.indexOf("http")?n.api.uploadimage(!0,l.createPhoto(n.userData.user,e)).subscribe(function(e){n.img.crossOrigin="anonymous",n.img.src=e.content,null!=t&&t()},function(e){l.$$("erreur d'upload"+e),t()}):n.img.src=e})},e.prototype.addLink=function(){var e=this;c.showPopup({title:"LIB.WEBLINK",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",translate:this.translate,type:"text"},this.alertCtrl,function(t){e.api.uploadimage(!0,l.createPhoto(e.userData.user,t)).subscribe(function(t){null==t?c.toast(e.toastCtrl,"ERROR.BADFORMAT",e.translate):e.loadImage(t.content)})})},e.prototype.selImage=function(e){var t=this;if(e.photo.indexOf("shifumix.com")>-1)this.viewCtrl.dismiss({value:e.photo});else{this.images=[];var n=u.loading(this,this.translate.instant("LIB.UPLOADING"));this.api.uploadimage(!0,l.createPhoto(this.userData.user,e.photo)).subscribe(function(e){t.loadImage(e.content,function(){n.dismiss()})},function(e){c.toast(t.toastCtrl,"LIB.ERRORRETRY",t.translate),n.dismiss()})}},e.prototype.getPhoto=function(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===i&&(i=void 0);var o=this,s=u.loading(this);setTimeout(function(){l.autoRotate(e.value,1,function(e){o.loadImage(e,function(){s.dismiss()})})},100)},e.prototype.close=function(){var e=this,t=this;this.img.crossOrigin="anonymous";var n=1e6/this.img.src.length;n>1&&(n=1);var i=-this.x/this.scale,o=-this.y/this.scale,s=Math.min(this.cadre.nativeElement.offsetWidth/this.scale,this.img.width/this.scale),a=Math.min(this.cadre.nativeElement.offsetHeight/this.scale,this.img.height/this.scale),r=u.loading(this);setTimeout(function(){c.rotate(e.imgHD.src,e.angle,1,function(e){l.cropBase64Img(e,i,o,s,a,.5,function(e){if(t.navParams.get("upload")){var n=l.createPhoto(t.userData.user,e);t.api.uploadimage(!1,n).subscribe(function(e){r.dismiss(),t.viewCtrl.dismiss({value:e.url})},function(e){c.toast(t.toastCtrl,"LIB.ERRORRETRY",t.translate),r.dismiss(),t.viewCtrl.dismiss()})}else r.dismiss(),t.viewCtrl.dismiss({value:e})},function(e){c.toast(t.toastCtrl,"LIB.ERRORRETRY",t.translate),r.dismiss(),t.viewCtrl.dismiss()})})},100)},i([s.ViewChild("cadre"),o("design:type",s.ElementRef)],e.prototype,"cadre",void 0),e=i([s.Component({selector:"page-image-creator",template:'\x3c!--\n  Generated template for the ImageCreatorPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n<shifutitle title="Images">\n  <shifubutton id="btnSaveImage" [hidewhenclick]="true" [small]="true" id="btnValide" *ngIf="valide" label="LIB.SAVE" icon="checkmark" (click)="close()"></shifubutton>\n  <shifubutton [small]="true" id="btnCancel" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n</shifutitle>\n</ion-header>\n\n<ion-content padding>\n\n  <tuto position="title" [if]="images.length==0" label="IMAGECREATOR.TUTO"></tuto>\n  <tuto position="title" [if]="images.length>0" label="IMAGECREATOR.TUTOWITHIMAGE"></tuto>\n\n  <div style="width:100%;text-align: center;">\n\n    <div *ngIf="userData.user.connexions.length>20">\n      <shifucamera shifuid="btnTakePhoto"\n                   sizeiconwidth="20px"\n                   name="command"\n                   *ngIf="filter.indexOf(\'photo\')>-1"\n                   tips="Prendre une photo avec son appareil"\n                   sizeiconheight="20px" icon="camera"\n                   (onTake)="getPhoto($event,true,false)">\n      </shifucamera>\n\n      <shifubutton\n        name="command"\n        *ngIf="filter.indexOf(\'cloud\')>-1"\n        shifuid="btnAddCloudFile"\n        icon="image"\n        tips="Selectionner une photo depuis des banques d\'images publique (Instagram, ...)"\n        (click)="imagePlatform(\'pixabay,fotocommunity,instagram\')">\n      </shifubutton>\n\n      <shifubutton\n        name="command"\n        *ngIf="filter.indexOf(\'link\')>-1"\n        shifuid="btnAddLink"\n        icon="link"\n        size="120"\n        tips="Prendre directement une photo depuis son lien internet (URL)"\n        (click)="addLink()">\n      </shifubutton>\n\n      <shifubutton\n        name="command"\n        size="120"\n        *ngIf="filter.indexOf(\'icon\')>-1 && filter!=\'icon\'"\n        shifuid="btnAddIcon"\n        icon="person"\n        tips="Selectionner une icone"\n        (click)="addIcon()">\n      </shifubutton>\n\n      <shifubutton\n        name="command"\n        size="120"\n        *ngIf="userData.user.connexions.length>50 && filter.indexOf(\'insta\')>-1"\n        tips="Sélectionner une photo de mon cloud (Instagram, Google Drive)"\n        shifuid="btnMyFile"\n        icon="person"\n        (click)="getMyCloudFile()">\n      </shifubutton>\n\n      \x3c!--<shifubutton id="btnCloud" icon="cloud-upload" (click)="getFiles()"></shifubutton>--\x3e\n      <shifucamera\n        name="command"\n        *ngIf="filter.indexOf(\'phone\')>-1"\n        shifuid="btnTakeFile"\n        size="120"\n        tips="Sélectionner une photo stockée sur mon téléphone"\n        [onlyfile]="true"\n        icon="phone-portrait"\n        (onTake)="getPhoto($event,true,false)">\n      </shifucamera>\n\n    </div>\n\n    <div *ngIf="userData.user.connexions.length<=20">\n\n      <shifubutton size="130"\n                   shifuid="btnAddCloudFile"\n                   *ngIf="filter.indexOf(\'cloud\')>-1"\n                   icon="image"\n                   label="Internet"\n                   (click)="imagePlatform(\'pixabay,fotocommunity,instagram\')">\n      </shifubutton>\n\n      <shifubutton\n        shifuid="btnAddIcon"\n        *ngIf="filter.indexOf(\'icon\')>-1"\n        icon="person"\n        label="Icons"\n        tips="Selectionner une icone"\n        (click)="addIcon()">\n      </shifubutton>\n\n      <shifucamera size="130px"\n                   *ngIf="filter.indexOf(\'photo\')>-1"\n                   shifuid="btnTakePhoto"\n                   button="Photo"\n                   icon="camera"\n                   (onTake)="getPhoto($event,true,false)">\n      </shifucamera>\n\n      <shifucamera style="margin-right:5px;" size="130px"\n                   *ngIf="filter.indexOf(\'phone\')>-1"\n                   shifuid="btnTakeFile"\n                   [onlyfile]="true"\n                   button="LIB.PHONE"\n                   icon="phone-portrait"\n                   (onTake)="getPhoto($event,true,false)">\n      </shifucamera>\n\n    </div>\n\n    <br>\n      <img *ngFor="let img_item of images"\n           name="flyerImages"\n           src="{{img_item.photo}}"\n           style="display:inline;width:20%;"\n           class="image-photo"\n           (click)="selImage(img_item)">\n\n    <div #cadre class="image-photo"\n         style="visibility:hidden;margin-top:5px;margin-bottom:5px;cursor:move;overflow: hidden;display:inline-block;width:90%;box-shadow: 3px 3px 5px #bfbfbf;border:1px solid #efeef4;"\n         (mousemove)="mousemove($event)"\n         (touchmove)="mousemove($event)"\n         (touchend)="mouseup($event)"\n         (mouseup)="mouseup($event)"\n         (mousedown)="mousedown($event)"\n         (mousewheel)="mousewheel($event)"\n         (touchstart)="mousedown($event)">\n    </div>\n\n    <div *ngIf="img.src.length>0" style="width:100%;text-align: center;">\n      <tuto label="IMAGECREATOR.TUTOWITHIMAGE"></tuto>\n      <shifubutton icon="add-circle" (click)="mousewheel({wheelDelta:+1})"></shifubutton>\n      \x3c!--<shifubutton icon="./assets/img/rotate_left.png" id="btnRotateLeft" (click)="rotateImage(-90)"></shifubutton>--\x3e\n      \x3c!--<shifubutton icon="./assets/img/rotate_right.png" id="btnRotateRight" (click)="rotateImage(+90)"></shifubutton>--\x3e\n      <shifubutton icon="remove-circle" (click)="mousewheel({wheelDelta:-1})"></shifubutton>\n    </div>\n\n  </div>\n</ion-content>\n'}),o("design:paramtypes",[r.NavController,r.NavParams,h.ApiProvider,r.ToastController,r.ViewController,d.UserData,a.LoadingController,p.TranslateService,a.AlertController,f.SettingsProvider])],e)}();t.ImageCreatorPage=m},350:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(2),u=n(6),c=n(16),d=n(15),p=n(8),h=n(2),f=n(2),m=n(2),g=n(35),v=n(110),E=function(){function e(e,t,n,i,o,s,a,r,l,u,c){this.events=e,this.navCtrl=t,this.navParams=n,this.translate=i,this.loadingCtrl=o,this.toastCtrl=s,this.modalCtrl=a,this.alertCtrl=r,this.api=l,this.eventData=u,this.userData=c,this.story=[]}return e.prototype.ionViewDidEnter=function(){this.refresh(!0)},e.prototype.refresh=function(e){var t=this;void 0===e&&(e=!1),(e||void 0==this.userData.selectTab||"StoryPage"==this.userData.selectTab)&&this.eventData.getstory("",0,50).subscribe(function(e){if(null!=e){t.story=[];var n=0;e.items.forEach(function(e){n++,e.marginLeft="20%",e.marginRight="0%",e.signAlign="right",n%2==0&&(e.marginLeft="0%",e.marginRight="20%",e.signAlign="left"),e.text=t.translateLabel(e.text),e.html=e.text.indexOf("<br>")>-1||e.text.indexOf("<img")>-1,e.class="story-entry",e.tags.indexOf("message")>-1&&(e.class="story-message"),e.tags.indexOf("photo")>-1&&(e.class="story-photo",e.text=""),(e.tags.indexOf("create")>-1||e.tags.indexOf("close")>-1)&&(e.class="story-event"),t.story.push(e)})}})},e.prototype.translateLabel=function(e){for(var t=e.split("#"),n=0;n<e.length;n++)null!=t[n]&&t[n].indexOf(".")>-1&&(e=e.replace("#"+t[n]+"#",this.translate.instant(t[n])));return e},e.prototype.ionViewDidLoad=function(){h.subscribe("event",this)},e.prototype.newbet=function(e){var t=this,n=this;this.eventData.getnuserswithscoin(function(i){i<3&&4==e&&f.toast(t.toastCtrl,"BETS.GIVESOMESCOINBEFORECREATEBETS",t.translate,null,"middle",5);(n.eventData.event.dtEnd-n.eventData.event.serverNow)/6e4>3?m.openModal(t.modalCtrl,v.AddbetsPage,{type:e},function(){n.refresh()}):f.toast(n.toastCtrl,"BETS.NOTENOUGHTTIMETOBETS")})},e.prototype.newmessage=function(){var e=this;h.showPopup({title:"PHOTO.ENTERMESSAGE",placeholder:"",confirmButton:"LIB.VALIDATE",cancelButton:"LIB.CANCEL",type:"text",translate:this.translate},this.alertCtrl,function(t){var n={};n.from=e.userData.user,n.anonymous=e.userData.user.anonymous,n.photo="",n.text=t,e.eventData.sendmessage(0,n).subscribe(function(t){null==t&&f.toast(e.toastCtrl,"MESSAGE.ERRORLIMIT",e.translate)})})},e.prototype.newphoto=function(){var e=this;m.openModal(this.modalCtrl,g.ImageCreatorPage,{ratio:1,maxsize:2500},function(t){if(null!=t){var n=l.createPhoto(e.userData.user,t.value,"","photo");e.eventData.sendphoto(n).subscribe(function(t){e.eventData.event.needValidate&&e.userData.user.connexions.length<10&&f.toast(e.toastCtrl,"PHOTOS.INFOVALIDATION",e.translate),e.refresh(!0)})}})},e=i([s.Component({selector:"page-story",template:'\x3c!--\n  Generated template for the StoryPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="LIB.STORY">\n\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content padding>\n\n  \x3c!--Menu flottant--\x3e\n  <ion-fab #fab bottom right *ngIf="eventData.event.opened">\n    <button ion-fab color="primary"><ion-icon name="add-circle"></ion-icon></button>\n    <ion-fab-list *ngIf="eventData.event.activities!=undefined" side="top">\n      <button *ngIf="eventData.event.activities.indexOf(\'survey\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newbet(5)"\n              [title]="\'LIB.SURVEY\' | translate"\n      >\n        <ion-icon name="checkbox-outline"></ion-icon>\n      </button>\n\n      <button *ngIf="eventData.event.activities.indexOf(\'survey\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newbet(9)"\n              [title]="\'LIB.QUESTION\' | translate">\n        <ion-icon name="help"></ion-icon>\n      </button>\n\n      <button *ngIf="eventData.event.activities.indexOf(\'loterie\')>-1 && (!eventData.event.addBetOnlyByOwner || eventData.event.owner_id==userData.user.id)"\n              ion-fab (click)="newloterie()"\n              [title]="\'LIB.LOTERIE\' | translate">\n        <ion-icon name="cube"></ion-icon>\n      </button>\n\n    <button *ngIf="eventData.event.activities.indexOf(\'photo\')>-1" [title]="\'LIB.PHOTO\' | translate"\n              ion-fab (click)="newphoto()" >\n        <ion-icon name="camera"></ion-icon>\n\n      </button>\n\n    <button *ngIf="eventData.event.activities.indexOf(\'message\')>-1"\n              ion-fab (click)="newmessage()"\n            [title]="\'LIB.MESSAGE\' | translate">\n        <ion-icon name="text"></ion-icon>\n\n      </button>\n\n    </ion-fab-list>\n  </ion-fab>\n\n\n\n  <div *ngFor="let entry of story" [ngStyle]="{\'width\':\'100%\',\'text-align\':\'center\'}">\n\n    <div *ngIf="entry.tags.indexOf(\'join\')==-1" [ngClass]="entry.class" [ngStyle]="{\'margin-left\':entry.marginLeft,\'margin-right\':entry.marginRight}">\n      <div *ngIf="!entry.html">{{entry.text}}</div>\n      <div *ngIf="entry.html" [innerHTML]="entry.text"></div>\n    <div *ngIf="entry.picture?.length>0">\n      <img [src]="entry.picture" class="image-photo" style="max-width: 150px;margin:15px;"><br>\n    </div>\n\n      <div style="width:100%;" *ngIf="entry.tags.indexOf(\'create\')==-1">\n        <ion-grid no-padding><ion-row>\n          <ion-col text-left no-margin>\n            <img *ngIf="entry.signAlign==\'right\'" [src]="entry.from.picture" style="max-width: 30px;display: inline;">\n          </ion-col>\n          <ion-col text-right no-margin>\n            <img *ngIf="entry.signAlign==\'left\'" [src]="entry.from.picture" style="max-width: 30px;display: inline;">\n          </ion-col>\n        </ion-row></ion-grid>\n      </div>\n    </div>\n\n    <div *ngIf="entry.tags.indexOf(\'join\')>-1" [ngStyle]="{\'margin-left\':entry.marginLeft,\'margin-right\':entry.marginRight,\'text-align\':\'middle\',\'width\':\'150px\'}">\n      <img [src]="entry.from.picture" style="max-width: 100px;margin:15px;">\n      {{entry.from.firstname}}\n    </div>\n\n\n    </div>\n</ion-content>\n'}),o("design:paramtypes",[a.Events,r.NavController,r.NavParams,u.TranslateService,a.LoadingController,r.ToastController,r.ModalController,a.AlertController,c.ApiProvider,d.EventDataProvider,p.UserData])],e)}();t.StoryPage=E},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(366),o=n(485);i.platformBrowserDynamic().bootstrapModule(o.AppModule),t.CONFIG=n(322)},48:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(2),l=n(8),u=n(15),c=n(2),d=n(6),p=n(16),h=function(){function e(e,t,n,i,o,s,a,r,l,u){this.viewCtrl=e,this.toastCtrl=t,this.navCtrl=n,this.alertCtrl=i,this.navParams=o,this.api=s,this.loadingCtrl=a,this.userData=r,this.translate=l,this.eventData=u,this.email={dest:"",personal:!1},this.autologin={value:!1},this.numberOfInvitation=0,this.qrcode="",this.url="",this.forceAnonymous=!0,this.event=null,0==this.userData.friends.length&&r.loadcontacts(),this.event=o.get("event"),null==this.event&&(this.event=this.eventData.event)}return e.prototype.ionViewDidLoad=function(){this.autologin.value=2==this.event.autologin,this.refresh()},e.prototype.refresh=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1);var n=this;if(null==e&&(e=this.navParams.get("url")),null==e){var i=c.loading(this);this.userData.shareevent(this.event.id,this.navParams.get("message"),this.navParams.get("tab"),"link",this.forceAnonymous,t).subscribe(function(e){i.dismiss(),null!=e&&(n.qrcode=e.qrcode,n.url=e.url)})}else this.api.getqrcode(e+"&anonymous="+this.forceAnonymous,150,t).subscribe(function(e){null!=e&&(n.qrcode=e.photo,n.url=e.title)})},e.prototype.copyLink=function(){c.toast(this.toastCtrl,"INVITE.TUTO_COPYLINK",this.translate)},e.prototype.del_email=function(e){},e.prototype.sendInvitationToFollower=function(){var e=this,t=this;null==this.eventData.event&&(this.eventData.event=this.event),this.eventData.sendinvitetofollower(t.numberOfInvitation).subscribe(function(n){null!=n&&(t.userData.user=n,r.toast(e.toastCtrl,n.message,e.translate))})},e.prototype.openContactProvider=function(){this.navCtrl.push("Perso",{filter:"facebook,contact",user:this.userData.user.id,autoback:!0,from:"invite"})},e.prototype.addEmail=function(){var e=this;r.showPopup({title:"INVITE.EMAIL",placeholder:"@",translate:this.translate,type:"email"},this.alertCtrl,function(t){null!=t&&e.sendInvitations({email:t})})},e.prototype.sendInvitations=function(e){if(null!=this.navParams.data.template){this.api.sendtemplate(this.userData.user.email,this.userData.user.id,this.navParams.data.template,{qrcode:this.qrcode,url:this.url}).subscribe(function(){})}else{var t=this;if(0==e.email.indexOf("facebook"))c.openWindow("https://www.facebook.com/"+e.email.replace("facebook",""));else t.eventData.shareevent(t.navParams.get("message"),e.email,t.userData.user.id,e.name,this.event).subscribe(function(n){if(void 0==n.error||0==n.error.length){var i=e.name;null==i&&(i=e.email),c.toast(t.toastCtrl,"INVITE.CONFIRM",t.translate),t.userData.addfriendsemail(e.email).subscribe(function(e){})}else c.toast(t.toastCtrl,n.error,t.translate)})}},e.prototype.sendMe=function(){this.sendInvitations({email:this.userData.user.email,name:this.userData.user.firstname}),c.toast(this.toastCtrl,"INVITE.CHECKYOUREMAIL",this.translate)},e.prototype.makePermanentInvitation=function(){var e=this;c.showConfirm("INVITE.CONFIRMEPERMANENTEINVITATION",this.alertCtrl,this.translate,function(){e.userData.makePermanentInvitation("music").subscribe(function(t){c.toast(e.toastCtrl,"INVITE.CHECKYOUREMAIL",e.translate)})})},e.prototype.updateEvent=function(){var e=this;this.event.autologin=this.autologin.value?2:0,this.eventData.updateevent("autologin",this.event).subscribe(function(){e.refresh()})},e.prototype.printCode=function(){var e=r.openWindow("","Print");e.document.body.innerHTML=document.getElementById("printable").innerHTML,e.document.body.style.height="100%",e.document.body.style.textAlign="center",e.print(),e.close()},e.prototype.inverse=function(){this.refresh(null,!0)},e=i([s.Component({selector:"page-invite",template:'\x3c!--\n  Generated template for the InvitePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle [menu]="false" title="{{\'INVITE.SHARETITLE\' | translate}}" help="inviter_participants">\n    <shifubutton [small]="true" id="btnClose" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding>\n  <tuto label="INVITE.TUTO"></tuto>\n\n  \x3c!-- Invitation des followers --\x3e\n  <shifucard title="INVITE.FOLLOWERS" label="LIB.SEND"\n             *ngIf="userData.user.followers!=undefined && userData.user.followers.length>0 && userData.user.tarif.tarif!=0"\n             (onclick)="sendInvitationToFollower()">\n\n\n    <label *ngIf="userData.user.tarif.cost_byfollower>0" id="lblMontant" style="margin-left:20px;width:150px" class="input-label">{{ \'LIB.INVITATION\' | translate }}s\n      &nbsp;&nbsp;{{numberOfInvitation*userData.user.tarif.cost_byfollower}}&nbsp;{{"LIB.MONEY" | translate}}\n      ({{"LIB.ACCOUNT" | translate}}:{{userData.user.realCredits}}&nbsp;{{"LIB.MONEY" | translate}})\n    </label>\n\n    <shifurange unite="person" icon="person" id="txtnumberOfInvitation" [(ngModel)]="numberOfInvitation" min="1" max="{{userData.user.followers.length}}" step="1"></shifurange>\n  </shifucard>\n\n  <div id="printable" style="visibility:hidden;height:0px;width: 100%;text-align: center;">\n    <br>\n    <span style="font-size: xx-large">{{event.title}}</span><br><br><br>\n    <div style="text-align:center;display:inline-block;position:relative;width:80%;">\n      <img id="qrcode" src="{{qrcode}}" style="width:100%;display:inline-block;"><br><br>\n    </div>\n    <br>\n    <ion-item no-lines text-center *ngIf="event!=undefined && event.code!=undefined">\n      {{"INVITE.EVENTCODE" | translate}}<br>\n      <span style="font-size: xx-large" id="inviteCode">{{event.code}}</span>\n    </ion-item>\n  </div>\n\n\n  <ion-item text-center>\n    <div style="width: 100%;text-align: center;">\n      <span style="font-size: x-large">{{event.title}}</span><br><br>\n      <div style="text-align:center;display:inline-block;position:relative;width:50%;">\n        <img src="./assets/img/wait.gif" style="width:100px" *ngIf="qrcode.length==0">\n        <img src="{{qrcode}}" style="display:inline-block;" (tap)="inverse()"><br>\n      </div>\n      <br>\n      <ion-item no-lines text-center *ngIf="event!=undefined && event.code!=undefined" id="lblEventCode">\n        {{"INVITE.EVENTCODE" | translate}}<br>\n        <span style="font-size: xx-large">{{event.code}}</span>\n      </ion-item>\n    </div>\n\n    <br>\n    <ion-item no-margin text-center no-lines no-border>\n      <shifubutton id="cmdPrintCode" size="120" [small]="true" label="LIB.PRINT" icon="print" (click)="printCode()"></shifubutton>\n      <shifubutton size="120" [small]="true" style="margin-bottom:5px;"\n                   id="btnCopy" icon="link" label="LIB.COPY" ngxClipboard [cbContent]="url"\n                   (click)="copyLink()">\n      </shifubutton>\n    </ion-item>\n\n    <shifucheckbox *ngIf="event.owner_id==userData.user.id && (!event.visibleOnMap || event.allowAnonymous)" id="chkAutoLogin" label="ADDEVENT.AUTOLOGIN"\n                   [(ngModel)]="autologin.value" (onchange)="updateEvent()">\n    </shifucheckbox>\n\n    <shifubutton *ngIf="userData.user.email.length>0 && userData.user.connexions.length>10"\n                 id="cmdPermamentInvite"\n                 title="Permet d\'envoyer une invitation permanente à vos événements actifs"\n                 size="200" label="LIB.INVITATIONPERMANENT"\n                 (click)="makePermanentInvitation()"></shifubutton>\n  </ion-item>\n\n  \x3c!--<shifucheckbox *ngIf="!event.visibleOnMap" label="INVITE.FORCEANONYMOUS" [(ngModel)]="forceAnonymous" (onchange)="refresh()"></shifucheckbox>--\x3e\n\n  \x3c!--<shifucheckbox label="INVITE.PERSONAL" *ngIf="userData.user.connexions.length>10" [(ngModel)]="email.personal"></shifucheckbox>--\x3e\n\n  <shifucard [visible]="userData.friends.length>0" id="cardInvite"  title="INVITE.FRIENDSTOINVITE" icon="person-add" (onclick)="addEmail()">\n      <shifuinput *ngIf="userData.friends.length>15" placeholder="LIB.FILTER"\n                  title="Filtrer votre liste de contacts avec les premières lettres des noms"\n                  size="3" type="text" [(ngModel)]="friendfilter">\n      </shifuinput>\n      <ion-list no-border no-margin no-padding>\n        <ion-item *ngFor="let friend of userData.friends | filter: \'name\':friendfilter">\n          <ion-avatar item-start>\n            <img *ngIf="friend.picture.length>0" src="{{friend.picture}}">\n          </ion-avatar>\n            <ion-label>{{friend.name}}</ion-label>\n          <ion-icon\n            item-end\n            color="primary"\n            name="mail" (click)="sendInvitations(friend)"\n            ngxClipboard [cbContent]="url">\n          </ion-icon>\n\n          \x3c!--<i name="btnDelete" class="icon ion-trash-b" *ngIf="friend.origin==\'shifumix\'" (click)="del_email($index)"></i>--\x3e\n        </ion-item>\n    </ion-list>\n  </shifucard>\n\n\n  <br>\n  \x3c!--<div class="text-center" *ngIf="friends.length==0 && userData.user.connexions.length>5">--\x3e\n    \x3c!--<button id="btnContact" style="margin-bottom: 6px;" class="button button-positive" (click)="openContactProvider()" >--\x3e\n      \x3c!--{{\'INVITE.CONTACTPROVIDER\' | translate}}--\x3e\n    \x3c!--</button>--\x3e\n  \x3c!--</div>--\x3e\n</ion-content>\n'}),o("design:paramtypes",[a.ViewController,a.ToastController,a.NavController,a.AlertController,a.NavParams,p.ApiProvider,a.LoadingController,l.UserData,d.TranslateService,u.EventDataProvider])],e)}();t.InvitePage=h},485:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=n(0),a=n(235),r=n(237),l=n(493),u=n(3),c=n(44),d=n(537),p=n(347),h=n(552),f=n(84),m=n(185),g=n(186),v=n(82),E=n(331),b=n(332),y=n(333),T=n(189),I=n(55),D=n(328),O=n(187),S=n(83),C=n(335),R=n(337),x=n(107),P=n(48),L=n(188),A=n(108),w=n(110),N=n(339),M=n(338),B=n(553),_=n(344),k=n(334),V=n(8),U=n(6),F=n(15),G=n(192),z=n(554),j=n(555),W=n(191),H=n(326),Y=n(325),q=n(327),$=n(341),Q=n(342),K=n(324),X=n(556),J=n(558),Z=n(559),ee=n(560),te=n(561),ne=n(567),ie=n(568),oe=n(569),se=n(570),ae=n(571),re=n(572),le=n(573),ue=n(574),ce=n(575),de=n(576),pe=n(343),he=n(16),fe=n(577),me=n(578),ge=n(579),ve=n(580),Ee=n(581),be=n(346),ye=n(35),Te=n(190),Ie=n(582),De=n(588),Oe=n(589),Se=n(590),Ce=n(345),Re=n(591),xe=n(348),Pe=n(349),Le=n(592),Ae=n(194),we=n(20),Ne=n(85),Me=n(336),Be=n(193),_e=n(593),ke=n(329),Ve=n(594),Ue=n(330),Fe=n(595),Ge=n(596),ze=n(601),je=n(106),We=n(602),He=n(350),Ye=n(340),qe=n(109),$e=n(605),Qe=n(606),Ke=function(){function e(){}return e=i([s.NgModule({declarations:[Z.ShifubuttonComponent,_e.ShifufileComponent,ze.ShifunumpadComponent,Le.ShifubuttongroupComponent,ee.ShifuinputComponent,Se.ShifubetComponent,Qe.ShifulabelComponent,De.ShifunoteComponent,Ve.ShifudateComponent,Ee.ShifuimageprofilComponent,te.ShifurangeComponent,ve.ShifutimerComponent,ve.ShifutimerComponent,Fe.ShifugalleryComponent,ne.TutoComponent,ie.ShifuimagefileComponent,de.ShifucardComponent,fe.ShifuflyerComponent,oe.ShifugroupComponent,se.ShifutitleComponent,ae.ShifuwaitComponent,re.ShifucheckboxComponent,le.ShifucameraComponent,ue.SvgeditComponent,ge.ShifuprofilComponent,me.ShifueventComponent,J.FocusmeDirective,Ie.AceEditorDirective,z.OrderByPipe,j.FilterPipe,ce.SafePipe,d.ConferenceApp,p.AboutPage,Ce.WholikemePage,k.HomePage,f.PersoPage,W.LoginemailPage,T.ScreensPage,I.PublicProfilPage,Pe.TermOfUsePage,D.TarifsPage,O.WidgetPage,S.WidgetstorePage,C.SearchPage,R.PhotosPage,ke.AddpresentationPage,Be.PresentationsPage,Ae.LoginavatarPage,Ue.RemotePage,ye.ImageCreatorPage,x.MusicserverPage,Me.MusicchartsPage,Ye.ModalbetPage,P.InvitePage,L.HtmleditorPage,A.ClosedeventPage,xe.WelcomePage,w.AddbetsPage,H.AddeventDatePage,K.AddeventModelePage,q.AddeventFlyerPage,Y.AddeventAdvancedPage,$.CustomercommandPage,Q.PreparecommandPage,N.AddloteriePage,M.BetsPage,qe.TeamsPage,B.BoardPage,_.ChartsPage,pe.MessagesPage,m.LoginPage,G.ProfilPage,g.SeleventPage,He.StoryPage,be.OldeventsPage,v.AddeventPage,h.PopoverPage,E.TabsPage,b.TutorialPage,y.SupportPage],exports:[Z.ShifubuttonComponent,_e.ShifufileComponent,De.ShifunoteComponent,Se.ShifubetComponent,fe.ShifuflyerComponent,ee.ShifuinputComponent,te.ShifurangeComponent,de.ShifucardComponent,Fe.ShifugalleryComponent,ve.ShifutimerComponent,Ee.ShifuimageprofilComponent,Qe.ShifulabelComponent,ne.TutoComponent,ie.ShifuimagefileComponent,oe.ShifugroupComponent,Le.ShifubuttongroupComponent,se.ShifutitleComponent,ae.ShifuwaitComponent,re.ShifucheckboxComponent,le.ShifucameraComponent,ze.ShifunumpadComponent,ue.SvgeditComponent,Ve.ShifudateComponent,ge.ShifuprofilComponent,me.ShifueventComponent,J.FocusmeDirective,Ie.AceEditorDirective,z.OrderByPipe,j.FilterPipe,ce.SafePipe,U.TranslateModule],imports:[$e.ColorPickerModule,U.TranslateModule.forRoot(),We.EmojiPickerModule,Te.NgQrScannerModule,Ge.RecaptchaModule.forRoot(),o.BrowserModule,Ne.PushNotificationsModule,X.ClipboardModule,je.HttpClientModule,u.IonicModule.forRoot(d.ConferenceApp,{},{links:[{component:m.LoginPage,name:"LoginPage",segment:"login"},{component:E.TabsPage,name:"TabsPage",segment:"tabs"},{component:f.PersoPage,name:"PersoPage",segment:"perso"},{component:p.AboutPage,name:"About",segment:"about"},{component:xe.WelcomePage,name:"Welcome",segment:"welcome"},{component:Pe.TermOfUsePage,name:"TermOfUse",segment:"tmu"},{component:b.TutorialPage,name:"Tutorial",segment:"tutorial"},{component:y.SupportPage,name:"SupportPage",segment:"support"},{component:Ae.LoginavatarPage,name:"LoginavatarPage",segment:"support"},{component:I.PublicProfilPage,name:"PublicProfil",segment:"publicprofil"},{component:D.TarifsPage,name:"Tarifs",segment:"tarifs"},{component:ye.ImageCreatorPage,name:"ImageCreator",segment:"imagecreator"},{component:O.WidgetPage,name:"Widget",segment:"widget"},{component:S.WidgetstorePage,name:"Widgetstore",segment:"widgetstore"},{component:C.SearchPage,name:"Search",segment:"tab/:event/music/search"},{component:R.PhotosPage,name:"PhotosPage",segment:"tab/photos"},{component:Be.PresentationsPage,name:"PresentationsPage",segment:"presentations"},{component:ke.AddpresentationPage,name:"AddPresentationsPage",segment:"presentation/add"},{component:x.MusicserverPage,name:"Musicserver",segment:"musicserver"},{component:P.InvitePage,name:"Invite",segment:"invite/:event"},{component:L.HtmleditorPage,name:"Htmleditor",segment:"editor/widget"},{component:k.HomePage,name:"HomePage",segment:"home"},{component:$.CustomercommandPage,name:"Command",segment:"command"},{component:Ue.RemotePage,name:"RemotePage",segment:"presentation/remote"},{component:Q.PreparecommandPage,name:"Preparecommand",segment:"command/prepare"},{component:G.ProfilPage,name:"Profil",segment:"perso"},{component:A.ClosedeventPage,name:"Closedevent",segment:"close"},{component:W.LoginemailPage,name:"Loginemail",segment:"login"},{component:w.AddbetsPage,name:"Perso",segment:"perso"},{component:Ce.WholikemePage,name:"Wholikeme",segment:"wholikeme"},{component:v.AddeventPage,name:"Perso",segment:"login"},{component:g.SeleventPage,name:"SeleventPage",segment:"selevent"},{component:be.OldeventsPage,name:"OldeventsPage",segment:"oldevents"},{component:N.AddloteriePage,name:"Addloterie",segment:"perso"},{component:M.BetsPage,name:"BetsPage",segment:"tab/bets"},{component:Ye.ModalbetPage,name:"ModalBetPage",segment:"tab/bets"},{component:B.BoardPage,name:"BoardPAge",segment:"tab/board"},{component:_.ChartsPage,name:"ChartsPage",segment:"tab/charts"},{component:qe.TeamsPage,name:"TeamsPage",segment:"teams"},{component:He.StoryPage,name:"StoryPage",segment:"tab/story"},{component:pe.MessagesPage,name:"MessagesPage",segment:"tab/messages"},{component:T.ScreensPage,name:"ScreensPage",segment:"screens"}]}),c.IonicStorageModule.forRoot({name:"shifumix_storage",driverOrder:["localstorage"]})],bootstrap:[u.IonicApp],entryComponents:[d.ConferenceApp,xe.WelcomePage,Ae.LoginavatarPage,p.AboutPage,f.PersoPage,G.ProfilPage,m.LoginPage,D.TarifsPage,ye.ImageCreatorPage,S.WidgetstorePage,O.WidgetPage,T.ScreensPage,Be.PresentationsPage,ke.AddpresentationPage,W.LoginemailPage,h.PopoverPage,E.TabsPage,b.TutorialPage,Pe.TermOfUsePage,y.SupportPage,I.PublicProfilPage,C.SearchPage,R.PhotosPage,x.MusicserverPage,Me.MusicchartsPage,P.InvitePage,Ce.WholikemePage,$.CustomercommandPage,Q.PreparecommandPage,k.HomePage,pe.MessagesPage,L.HtmleditorPage,A.ClosedeventPage,w.AddbetsPage,Ue.RemotePage,g.SeleventPage,be.OldeventsPage,v.AddeventPage,He.StoryPage,qe.TeamsPage,Ye.ModalbetPage,H.AddeventDatePage,K.AddeventModelePage,q.AddeventFlyerPage,Y.AddeventAdvancedPage,N.AddloteriePage,M.BetsPage,B.BoardPage,_.ChartsPage],providers:[{provide:s.ErrorHandler,useClass:u.IonicErrorHandler},V.UserData,Re.Network,Oe.AppVersion,a.Camera,l.File,r.Geolocation,F.EventDataProvider,he.ApiProvider,we.SettingsProvider]})],e)}();t.AppModule=Ke},537:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,r)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,o=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){r=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){r.label=n[1];break}if(6===n[0]&&r.label<s[1]){r.label=s[1],s=n;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(n);break}s[2]&&r.ops.pop(),r.trys.pop();continue}n=t.call(e,r)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var i,o,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=n(3),u=n(3),c=n(44),d=n(320),p=n(185),h=n(331),f=n(332),m=n(333),g=n(8),v=n(186),E=n(334),b=n(337),y=n(338),T=n(48),I=n(15),D=n(192),O=n(6),S=n(189),C=n(22),R=n(341),x=n(83),P=n(343),L=n(344),A=n(2),w=n(2),N=n(2),M=n(346),B=n(16),_=n(55),k=n(347),V=n(348),U=n(349),F=n(108),G=n(82),z=n(20),j=n(84),W=n(193),H=n(2),Y=n(350),q=n(37),$=n(17);r.enableProdMode();var Q=function(){function e(e,t,n,i,o,s,a,r,l,u,c,h,f,m,g,E){var b=this;this.events=e,this.modalCtrl=t,this.userData=n,this.menu=i,this.platform=o,this.api=s,this.toastCtrl=a,this.storage=r,this.location=l,this.translate=u,this.eventData=c,this.domSanitizer=h,this.settings=f,this.alertCtrl=m,this.loadingCtrl=g,this.app=E,this.jetons=0,this.appPages=[],this.loggedInPages=[{title:"LIB.FINDEVENTS",name:"SeleventPage",component:v.SeleventPage,icon:"compass",visible:!0,help:"Recherche des événements autour de vous ou recommendez pour vous"},{title:"LIB.MYEVENTS",name:"OldeventsPage",component:M.OldeventsPage,icon:"list",visible:!0,help:"Consulter les événements que j'ai créer ou auxquels j'ai participé"},{title:"LIB.SCREENS",name:"ScreensPage",component:S.ScreensPage,icon:"desktop",visible:!0,help:"Voir mes écrans partagés"},{title:"LIB.LOGOUT",name:"LoginPage",component:p.LoginPage,icon:"log-out",logsOut:!0,visible:!0,help:"Quitter l'application Shifumix"}],this.loggedInPagesWithEvent=[{title:"LIB.SCREENS",name:"ScreensPage",component:S.ScreensPage,icon:"desktop",onlyAdmin:!0,visible:!0,help:"Voir mes écrans partagés"}],this.loggedOutPages=[{title:"LIB.LOGIN",name:"LoginPage",component:p.LoginPage,icon:"log-in",visible:!0,help:"Se connecter à Shifumix"}],o.ready().then(function(){u.setDefaultLang("en"),u.use(b.platform.lang()),d.getLibs().forEach(function(e){u.setTranslation(e.lang,e.labels,!0)}),E._setDisableScroll(!0),b.initPages(),h.bypassSecurityTrustUrl("https://storage.googleapis.com/"),N.$$("Analyse du reseau"),$.fromEvent(window,"offline").subscribe(function(e){N.toast(b.toastCtrl,"ERROR.LOSTNETWORK",b.translate),b.eventData.online=!1}),$.fromEvent(window,"online").subscribe(function(e){b.eventData.online=!0,b.eventData.update();for(var t=0,n=A.ALL_ORDER;t<n.length;t++){b.events.publish(n[t])}});o.getQueryParam("mode");b.storage.set("notuto",o.getQueryParam("notuto")),b.storage.set("withplayer",o.getQueryParam("withplayer")),b.storage.set("inviteEvent",o.getQueryParam("inviteEvent")),b.storage.set("from",o.getQueryParam("from")),b.storage.set("from",o.getQueryParam("login")),b.storage.set("sc",o.getQueryParam("sc")),b.storage.set("location_lat",o.getQueryParam("location_lat")),b.storage.set("location_lng",o.getQueryParam("location_lng")),b.storage.set("location_zoom",o.getQueryParam("location_zoom")),b.storage.set("flyer",decodeURIComponent(o.getQueryParam("flyer"))),b.settings.code=o.getQueryParam("code"),b.settings.dest=o.getQueryParam("dest"),b.storage.set("profil",o.getQueryParam("profil")),b.storage.set("widgetFilter",o.getQueryParam("widgetFilter")),b.storage.set("server",o.getQueryParam("server")),b.storage.set("for",o.getQueryParam("for")),b.storage.set("type",o.getQueryParam("type")),b.storage.set("todo",o.getQueryParam("todo")),b.settings.type_invite=o.getQueryParam("type_invite"),b.storage.set("message",o.getQueryParam("message")),b.storage.set("instantEvent",o.getQueryParam("instantEvent")),b.storage.set("scaling",o.getQueryParam("scaling")),"true"==o.getQueryParam("raz")&&b.storage.remove("user"),b.storage.set("anonymous",o.getQueryParam("anonymous")),N.$$("Check if the user has already seen the tutorial"),b.storage.get("hasSeenTutorial").then(function(e){var t=b;b.api.connectToServer(o.getQueryParam("server"),b.platform.userAgent(),function(e){b.eventData.socketServerAddress=e.socketserver},function(e){N.$$("error",e)}),o.getQueryParam("follower")?b.api.connectToServer(o.getQueryParam("server"),b.platform.userAgent(),function(e){b.eventData.socketServerAddress=e.socketserver,t.nav.setRoot(_.PublicProfilPage,{userid:o.getQueryParam("userid"),follower:o.getQueryParam("follower")})},function(e){N.$$("error",e)}):b.rootPage=p.LoginPage}),b.enableMenu("loggedOutMenu"),b.listenToLoginEvents(),clearTimeout(b.handleUser),b.handleUser=setTimeout(function(){b.events.subscribe("user",function(){b.userData.get().subscribe(function(e){b.userData.user=e,null!=b.userData.user.jetons&&null!=b.eventData.event&&null!=b.eventData.event.owner_id&&(b.jetons=b.userData.user.jetons[b.eventData.event.owner_id])})})},1e3)})}return e.prototype.initPages=function(){this.appPages=[{title:"LIB.EVENTSETTINGS",name:"Profil",component:h.TabsPage,tabComponent:D.ProfilPage,icon:"settings",activity:"",onlyAdmin:!0,visible:!0,help:"régler certains paramètres de votre événement"},{title:"LIB.MUSIC",name:"TabsPage",component:h.TabsPage,tabComponent:E.HomePage,index:0,icon:"musical-notes",activity:"music",onlyAdmin:!1,visible:!0,help:"Chercher des nouveaux titres, voter sur la playlist"},{title:"Photos",name:"TabsPage",component:h.TabsPage,tabComponent:b.PhotosPage,index:1,icon:"camera",activity:"photo",onlyAdmin:!1,visible:!0,help:"Partagez vos photos, voter sur les photos des autres"},{title:"LIB.PLAY",name:"TabsPage",component:h.TabsPage,tabComponent:y.BetsPage,index:2,icon:"baseball",activity:"bets,survey,loterie",onlyAdmin:!1,visible:!0,help:"Participer ou créer vos sondages, loteries, paris"},{title:"LIB.COMMAND",name:"TabsPage",component:h.TabsPage,tabComponent:R.CustomercommandPage,index:3,icon:"beer",activity:"command",onlyAdmin:!1,visible:!0,help:"Commander à distance"},{title:"Message",name:"TabsPage",component:h.TabsPage,tabComponent:P.MessagesPage,index:4,icon:"chatbubbles",activity:"message",onlyAdmin:!1,visible:!0,help:"Partager des messages, voter sur les messages des autres"},{title:"LIB.PRESENTATION",name:"TabsPage",component:h.TabsPage,tabComponent:W.PresentationsPage,index:5,icon:"albums",activity:"presentation",onlyAdmin:!1,visible:!0,help:"Suivre des présentation, les télécharger, partager vos présentations"},{title:"LIB.PEOPLE",name:"TabsPage",component:h.TabsPage,tabComponent:L.ChartsPage,index:6,icon:"people",activity:"",onlyAdmin:!1,visible:!0,help:"Consulter les participants, voir les classement"},{title:"LIB.STORY",name:"TabsPage",component:h.TabsPage,tabComponent:Y.StoryPage,index:7,icon:"book",activity:"",onlyAdmin:!1,visible:!0,help:"Sur un même écran, tout ce qui se passe dans l'événement"}]},e.prototype.inviteEvent=function(){N.openModal(this.modalCtrl,T.InvitePage,{from:this.userData.user,event:this.eventData.event})},e.prototype.openPageByName=function(e,t,n){if(void 0===n&&(n={}),null==t)this.openPage(e[0],n);else{t=t.toLowerCase();var i=null;e.forEach(function(e){(e.name.toLowerCase()==t||"TabsPage"==e.name&&e.tabComponent.name.toLowerCase()==t)&&(i=e)}),null==i?(N.$$("page "+t+" introuvable"),this.openPage(e[1],n)):this.openPage(i,n)}},e.prototype.openPage=function(e,t,n){var i=this;if(void 0===t&&(t={}),void 0===n&&(n=null),N.$$(void 0!=e.tabComponent?"Ouveture de : "+e.name+" avec tab="+e.tabComponent.name:"Ouveture de : "+e.name),!0!==e.logsOut){var o=0;if(e.hasOwnProperty("index")){var s=0;A.buildTabs(this.userData.user,this.eventData.event).forEach(function(t){t.tabIcon==e.icon&&(o=s),s++}),t={tabIndex:o,tabName:e.tabComponent.name},void 0!=e.tabComponent&&(this.userData.selectTab=e.tabComponent.name)}this.nav.getActiveChildNavs().length&&void 0!=e.index?this.nav.getActiveChildNavs()[0].select(o):this.nav.setRoot(e.name,t,{},function(){null!=n&&n(),i.nav.getActiveChildNavs().length>0&&i.nav.getActiveChildNavs()[0].select(o)}).catch(function(e){N.$$("Didn't set nav root: "+e)})}else this.events.publish("user:logout",{})},e.prototype.openTutorial=function(){this.nav.setRoot(f.TutorialPage)},e.prototype.openSupport=function(){N.openModal(this.modalCtrl,m.SupportPage)},e.prototype.openAbout=function(){this.nav.setRoot(k.AboutPage)},e.prototype.checkInvitation=function(){return s(this,void 0,void 0,function(){var e,t,n,i,o;return a(this,function(s){switch(s.label){case 0:return e=this,t=null,[4,this.userData.autoconnexion(this.settings.connexion).toPromise()];case 1:return n=s.sent(),N.$$("autoconnexion retourne",n),null==n?[3,5]:(e.userData.user=n,e.userData.user.hasOwnProperty("currentEvent")&&e.userData.user.currentEvent.length>0?[4,e.api.getevent(e.userData.user.currentEvent).toPromise()]:[3,3]);case 2:return t=s.sent(),e.storage.remove("inviteEvent"),e.storage.remove("for"),[2,t];case 3:return e.userData.user.message.length>0&&e.userData.user.message.startsWith("SELEVENT.CLOSED")?(i=e.userData.user.message.replace("SELEVENT.CLOSED:",""),[4,e.api.getevent(i).toPromise()]):[3,5];case 4:o=s.sent(),e.storage.remove("inviteEvent"),N.openModal(e.modalCtrl,F.ClosedeventPage,{event:o,user:e.userData.user},function(){}),s.label=5;case 5:return[2,t]}})})},e.prototype.showPage=function(e){var t=this;if(null==this.eventData.event||0==this.eventData.event.activities.length)return!1;if(e.activity.length>0){var n=!1;if(e.activity.split(",").forEach(function(e){!n&&t.eventData.event.activities.indexOf(e)>-1&&(n=!0)}),!n)return!1}return("command"!=e.activity||0!=this.eventData.event.laCarte.length||-1!=this.eventData.event.Preparators.indexOf(this.userData.user.id))&&(!e.onlyAdmin||this.userData.user.id==this.eventData.event.owner_id)},e.prototype.findPage=function(e,t){var n=null;return e.forEach(function(e){if(e.name.toLowerCase()==t.toLowerCase()||null!=e.tabComponent&&e.tabComponent.name.toLowerCase()==t.toLowerCase())return n=e}),n},e.prototype.checkCGU=function(e,t){var n=this;N.$$("Vérification de signature des CGUs"),this.api.termofuse(this.userData.user.lang).subscribe(function(i){Number(i.dtCGU)>n.userData.user.dtSignatureCGU&&null!=n.userData.user.email&&n.userData.user.email.length>0?N.openModal(n.modalCtrl,U.TermOfUsePage,{CG:i.body},function(i){i?(n.userData.user.dtSignatureCGU=(new Date).getTime(),n.userData.senduser("dtSignatureCGU").subscribe(function(e){null!=e&&(n.userData.user=e)}),e()):t()}):e()})},e.prototype.createDefaultEvent=function(e,t){var n=this,i=this,o="party";"pro"==this.settings.ihm&&(o="meeting"),w.showPopup({title:"ADDEVENT.GIVETITLE",default:this.userData.user.firstname+"' "+o,confirmButton:"LIB.OK",type:"text",translate:this.translate},this.alertCtrl,function(e){N.$$("Il n'y a auncun évenement actif, on créé un evénement par défaut:",event),i.eventData.addbasic(n.userData.user.id,e,0,480,"music,message,photo","",n.userData.user.lat,n.userData.user.lng).subscribe(function(e){if(0==e.error.length){var i=w.loading(n);setTimeout(function(){i.dismiss(),n.api.getevent(e.event).subscribe(function(e){t(e)})},2e3)}else N.toast(n.toastCtrl,e.message,n.translate)})})},e.prototype.joinEvent=function(e,t){this.events.publish("event:login",{event:t,user:this.userData.user,type:1,url:"index.html?event="+t.id+"&from="+this.userData.user.id,dest:e})},e.prototype.listenToLoginEvents=function(){var e=this;N.$$("Enregistrement des 4 principaux événements : event:login, user:login, event:logout, user:logout");var t=this;this.events.subscribe("user:refresh",function(n){N.$$("L'utilisateur a recupere un mail, on met a jour le menu"),e.loggedInPages[3].visible=n.email.length>0,t.enableMenu(n.currentEvent.length>0?"loggedInMenuWithEvent":"loggedInMenu")}),this.events.subscribe("user:login",function(n){t.userData.get(n.id).subscribe(function(n){e.userData.user=n,e.translate.use(n.lang),N.$$("L'utilisateur vient de se connecter : ",e.userData.user),e.toastCtrl.create({message:e.translate.instant("LOGIN.WELCOME")+", "+e.userData.user.firstname,duration:1500,position:"bottom"}).present(),t.enableMenu("loggedInMenu"),e.storage.set("user",t.userData.user.id),e.checkCGU(function(){N.$$("Récupération du code d'écran s'il y en a un et traitement"),null!=e.settings.code&&(N.$$("Mise a jour du user avec le code de l'écran pour assusrer le ratachement",e.settings),t.userData.user.code=e.settings.code,t.userData.senduser("code").subscribe(function(){e.settings.code=null})),e.checkInvitation().then(function(n){e.userData.user.currentView.length>0&&(e.settings.dest=e.userData.user.currentView),null!=e.settings.dest&&null==n&&(N.$$("Débranchement demandé vers "+e.settings.dest),N.$$("On essaye de récupérer un événement"),e.api.geteventsfrom(e.userData.user.id,1,!0,!0).subscribe(function(t){void 0==t||0==t.items.length?e.events.publish("screen:add"):(N.$$("l'utilisateur a des événements actifs, on se connect au premier"),e.joinEvent(e.settings.dest,t.items[0]))})),null!=n?(N.$$("Invitation à un événement ",n),e.joinEvent(e.settings.dest,n)):(N.$$("Pas d'invitation à un événement particulier"),t.openPageByName(t.loggedInPages,"SeleventPage"))})},function(){e.events.publish("user:logout")})})}),this.events.subscribe("event:logout",function(t){var n=e;null==t&&(t={}),n.userData.quitEvent().subscribe(function(i){if(null!=i){N.toast(e.toastCtrl,t.message,e.translate),e.initPages(),n.enableMenu("loggedInMenu");var o=e.findPage(n.loggedInPages,"OldEventsPage");n.openPage(o),n.userData.user=i,setTimeout(function(){n.eventData.quit()},1e3)}else e.events.publish("user:logout")})}),this.events.subscribe("moderator:add",function(){var n=e.findPage(e.appPages,"ChartsPage");null!=n&&t.openPage(n,{},function(){H.toast(e.toastCtrl,"CHARTS.CHOOSEMODERATOR",e.translate,null,"center")})}),this.events.subscribe("user:logout",function(){N.$$("Demande de deconnexion du l'utilisateur"),N.showConfirm("INFO.ANONYMELOGOUT",e.alertCtrl,e.translate,function(){var t=e;e.enableMenu("loggedOutMenu"),t.userData.logout().subscribe(function(){var e=location.href;e.indexOf("?")>-1&&(e=e.substr(0,location.href.indexOf("?"))),e.indexOf("#/")>-1&&(e=e.substr(0,e.indexOf("#/"))),A.isLocal()&&(e+="?server=local"),w.openWindow(e,"_self")})},function(){t.openPage(e.loggedInPages[2])},e.userData.user.email.length>0)}),this.events.subscribe("oldevents:open",function(){e.openPage(e.loggedInPages[1])}),this.events.subscribe("open:widget",function(t){N.openModal(e.modalCtrl,x.WidgetstorePage,{widgetFilter:t})}),this.events.subscribe("event:login",function(t){N.$$("Demande de connexion a ",t.event),t.event.hasOwnProperty("password")&&t.event.password.length>0&&t.event.owner_id!=e.userData.user.id?H.showPopup({title:"SELEVENT.PRIVATE",placeholder:"password",confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"text",translate:e.translate},e.alertCtrl,function(n){t.password=n,e.join(t)}):e.join(t)}),this.events.subscribe("screen:add",function(t){e.openPageByName(e.loggedInPagesWithEvent,S.ScreensPage.name,t)}),this.events.subscribe("event:add",function(t){e.openPageByName(e.loggedInPages,G.AddeventPage.name,t)})},e.prototype.join=function(e){var t=this,n=w.loading(this,"Connexion "+e.event.title);this.userData.join(e.event.id,e.password,"","",this.userData.user.lat+","+this.userData.user.lng,"",this.userData.user.currentView).subscribe(function(i){if(n.dismiss(),null!=i)if(t.userData.user=i,0==i.message.length){var o=t.userData.user.email;""==o&&(o=t.userData.user.firstname),t.eventData.join(e.event.id,t.userData.user.id,o,function(n){void 0!=t.userData.user.jetons&&(t.jetons=t.userData.user.jetons[t.eventData.event.owner_id]),N.$$("Suppression des options non présentes dans l'événements");t.enableMenu("loggedInMenuWithEvent");var i=t.userData.user.currentView.toLowerCase();"undefined"!=i&&null!=i&&0!=i.length||(i=e.dest),"undefined"!=i&&null!=i&&0!=i.length||(i=null,t.appPages.forEach(function(e){null==i&&t.showPage(e)&&(i=e.tabComponent.name)})),t.eventData.event.welcomePicture.length>0?N.openModal(t.modalCtrl,V.WelcomePage,{image:t.eventData.event.welcomePicture,duration:1e3*t.eventData.event.welcomeDuration},function(){t.openPageByName(t.appPages,i)}):t.openPageByName(t.appPages,i)})}else N.toast(t.toastCtrl,i.message,t.translate),N.$$("Refus de connexion"),t.events.publish("event:logout");else N.$$("non reponse de join")})},e.prototype.enableMenu=function(e){this.menu.enable(!1,"loggedInMenuWithEvent"),this.menu.enable(!1,"loggedInMenu"),this.menu.enable(!1,"loggedOutMenu"),this.menu.enable(!0,e),"loggedInMenu"==e&&null!=this.userData.user&&(this.loggedInPages[3].title=this.translate.instant(null==this.userData.user.email||0==this.userData.user.email.length?"LIB.CLEARACCOUNT":"LIB.LOGOUT"))},e.prototype.isActive=function(e){var t=this.nav.getActiveChildNavs()[0];if(t){if(t.getSelected()&&t.getSelected().root===e.tabComponent)return"primary"}else if(this.nav.getActive()&&this.nav.getActive().name===e.name)return"primary"},e.prototype.openProfil=function(){N.openModal(this.modalCtrl,j.PersoPage,{from:null})},e.prototype.openTrajet=function(){w.openWindow("https://www.google.com/maps/dir/'"+(this.userData.user.lat+","+this.userData.user.lng)+"'/'"+this.eventData.event.lat+","+this.eventData.event.lng+"'")},i([r.ViewChild(l.Nav),o("design:type",l.Nav)],e.prototype,"nav",void 0),e=i([r.Component({template:'<ion-split-pane>\n\n  \x3c!-- logged out menu --\x3e\n  <ion-menu id="loggedOutMenu" [content]="content">\n\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Menu</ion-title>\n        <ion-icon style="font-size:xx-large;margin-right: 15px" shifuid="btnHideMenu" menuToggle="left" name="arrow-dropleft"></ion-icon>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content class="outer-content">\n      <ion-list>\n        <button shifuid="buttonMenu" ion-item menuClose *ngFor="let p of loggedOutPages" [title]="p.help" (click)="openPage(p)">\n          <ion-icon item-start [title]="p.icon" [name]="p.icon" [color]="isActive(p)"></ion-icon>\n          <span style="font-weight: 200">{{p.title | translate}}</span>\n        </button>\n      </ion-list>\n\n      <ion-list style="font-weight: 200">\n        <button title="Les fonctions de bases de l\'application" id="cmdTutorial" ion-item menuClose (click)="openTutorial()"><ion-icon item-start name="hammer"></ion-icon>{{\'LIB.TUTORIAL\' | translate}}</button>\n        <button title="Les questions fréquentes sur le fonctionnement" id="cmdFAQ" ion-item menuClose (click)="openFaq()"><ion-icon item-start name="question"></ion-icon>{{\'LIB.FAQ\' | translate}}</button>\n        <button title="A propos" id="cmdAbout" ion-item menuClose (click)="openAbout()"><ion-icon item-start name="help"></ion-icon>{{\'LIB.ABOUT\' | translate}}&nbsp;{{settings.app_name}}</button>\n      </ion-list>\n    </ion-content>\n  </ion-menu>\n\n\n  \x3c!-- logged in menu --\x3e\n  <ion-menu id="loggedInMenu" [content]="content">\n    <ion-header>\n      <ion-toolbar>\n        <ion-title item-start>{{userData.user.firstname}}</ion-title>\n        <ion-icon style="font-size:xx-large;margin-right: 15px" shifuid="btnHideMenu" menuToggle="left" name="arrow-dropleft"></ion-icon>\n      </ion-toolbar>\n\n    </ion-header>\n\n    <ion-content class="outer-content">\n      <ion-list>\n        <ion-list-header no-margin no-padding>\n          <ion-row>\n            <ion-col col-3>\n              <shifuimageprofil [me]="true" size="70px" [user]="userData.user"></shifuimageprofil>\n            </ion-col>\n            <ion-col text-center style="font-weight: 200;">\n              {{userData.user.email}}<br><br>\n              <shifubutton [small]="true" label="LIB.SETTINGS" (click)="openProfil()"></shifubutton>\n            </ion-col>\n          </ion-row>\n        </ion-list-header>\n        <button ion-item menuClose *ngFor="let p of loggedInPages" [name]="p.name" [title]="p.help" [hidden]="!p.visible" (click)="openPage(p)">\n          <ion-icon item-start [name]="p.icon" [title]="p.icon" [color]="isActive(p)"></ion-icon>\n          <span style="font-weight: 200">{{p.title | translate}}</span>\n        </button>\n      </ion-list>\n\n      <ion-list>\n        \x3c!--<button ion-item menuClose (click)="openTutorial()"><ion-icon item-start name="hammer"></ion-icon>{{\'LIB.TUTORIAL\' | translate}}</button>--\x3e\n        <button ion-item menuClose (click)="openAbout()"><ion-icon item-start name="help"></ion-icon>{{\'LIB.ABOUT\' | translate}}&nbsp;{{settings.app_name}}</button>\n        <button ion-item menuClose (click)="openSupport()"><ion-icon item-start name="build"></ion-icon>Support</button>\n      </ion-list>\n\n    </ion-content>\n\n  </ion-menu>\n\n\n  \x3c!-- logged in menu with event --\x3e\n  <ion-menu id="loggedInMenuWithEvent" [content]="content">\n\n    <ion-header>\n      <ion-toolbar>\n        <ion-title item-left>{{eventData.event.title}}</ion-title>\n        <ion-icon style="font-size:xx-large;margin-right: 15px" shifuid="btnHideMenu" menuToggle="left" name="arrow-dropleft"></ion-icon>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content class="outer-content">\n      <ion-list>\n      <ion-list-header>\n        <ion-row no-padding no-margin>\n          <ion-col text-left>\n            <shifuflyer *ngIf="eventData.online" [flyer]="eventData.event.flyer" height="165px" width="110px">\n              <div style="margin:10px;font-size: small;font-weight: bold;">\n                Photos:{{eventData.event.nPhotos}}<br>\n                Songs:{{eventData.event.nSongs}}<br>\n                Messages:{{eventData.event.nMessages}}<br><br>\n                Fin:{{(eventData.event.dtEnd-eventData.event.serverNow)/(60000*60) | number:\'1.0-0\'}}h{{((eventData.event.dtEnd-eventData.event.serverNow)/60000)%60 | number:\'1.0-0\'}}<br>\n                <br>\n                <shifubutton name="openTrajet"\n                             *ngIf="eventData.event.address!=null && eventData.event.address.length>0"\n                             [small]="true" icon="navigate" (click)="openTrajet()">\n                </shifubutton>\n              </div>\n            </shifuflyer>\n          </ion-col>\n          <ion-col text-center>\n            <shifubutton id="btnInvite" [small]="true" size="85" label="Invite" icon="person-add" (click)="inviteEvent()"></shifubutton><br>\n            <shifubutton [hidewhenclick]="true" id="btnQuitEvent" [small]="true" size="85" label="Quit" icon="log-out" (click)="events.publish(\'event:logout\')"></shifubutton><br>\n            <div *ngIf="userData.user!=undefined && userData.user.id==eventData.event.owner_id">\n              <shifubutton id="btnWidgets" [small]="true" size="85" label="iWall" icon="browsers" (click)="events.publish(\'open:widget\')"></shifubutton><br>\n            </div>\n            <br>\n            <div *ngIf="(jetons==null || jetons==0) && eventData.event.dtEnd-eventData.event.serverNow<60*1000*60">\n              {{\'LIB.ENDIN\' | translate}}<shifutimer [server]="eventData.event.serverNow" [end]="eventData.event.dtEnd"></shifutimer>\n            </div>\n\n            <div style="display: inline" *ngIf="eventData.event.serverNow-eventData.event.dtStart<0">\n              {{\'LIB.NOTSTARTED\' | translate}}\n            </div>\n\n\n          </ion-col>\n        </ion-row>\n\n      </ion-list-header>\n      <button ion-item menuClose *ngFor="let p of appPages" (click)="openPage(p)" [title]="p.help" [hidden]="!showPage(p)">\n          <ion-icon item-start [title]="p.icon" [name]="p.icon" [color]="isActive(p)"></ion-icon>\n        <span style="font-weight: 200">{{p.title | translate}}</span>\n      </button>\n      </ion-list>\n\n      <ion-list>\n        <ion-list-header>\n          <ion-row>\n            <ion-col col-auto>\n              <shifuimageprofil id="imgProfil" [me]="true" [user]="userData.user"></shifuimageprofil>\n            </ion-col>\n            <ion-col col-auto text-left>\n              {{userData.user.firstname}}<br>\n\n              <span *ngIf="userData.user!=null && userData.user.currentTeam!=null && userData.user.currentTeam.length>0 && eventData.event.teams!=null && eventData.event.teams[userData.user.currentTeam]!=null"\n                    style="font-size: x-small;">{{eventData.event.teams[userData.user.currentTeam].name}}\n              </span>\n\n            </ion-col>\n            <ion-col text-right>\n              <span style="font-size: medium" *ngIf="jetons>0">\n              {{jetons}}&nbsp;<img src="./assets/img/money.png" style="width:15px;">\n            </span>\n              <shifunote [object]="userData.user"></shifunote>\n            </ion-col>\n          </ion-row>\n        </ion-list-header>\n        <div *ngFor="let p of loggedInPagesWithEvent">\n          <button ion-item menuClose *ngIf="!p.onlyAdmin || userData.user.id==eventData.event.owner_id" (click)="openPage(p)">\n            <ion-icon item-start [title]="p.icon" [name]="p.icon" [color]="isActive(p)"></ion-icon>\n            <span style="font-weight: 200">{{p.title | translate}}</span>\n          </button>\n        </div>\n      </ion-list>\n\n      <ion-list>\n        <button ion-item menuClose (click)="openAbout()"><ion-icon item-start name="help"></ion-icon>{{\'LIB.ABOUT\' | translate}}&nbsp;{{settings.app_name}}</button>\n        <button ion-item menuClose (click)="openSupport()"><ion-icon item-start name="build"></ion-icon>Support</button>\n      </ion-list>\n\n    </ion-content>\n\n  </ion-menu>\n\n\n  \x3c!-- main navigation --\x3e\n  <ion-nav [root]="rootPage" #content swipeBackEnabled="false" main name="app"></ion-nav>\n\n</ion-split-pane>\n'}),o("design:paramtypes",[l.Events,l.ModalController,g.UserData,l.MenuController,u.Platform,B.ApiProvider,u.ToastController,c.Storage,q.Location,O.TranslateService,I.EventDataProvider,C.DomSanitizer,z.SettingsProvider,l.AlertController,l.LoadingController,l.App])],e)}();t.ConferenceApp=Q},55:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(2),u=n(8),c=n(16),d=n(15),p=n(2),h=n(6),f=n(84),m=n(109),g=function(){function e(e,t,n,i,o,s,a,r,u,c){this.api=e,this.eventData=t,this.userData=n,this.translate=i,this.viewCtrl=o,this.navCtrl=s,this.toastCtrl=a,this.modalCtrl=r,this.navParams=u,this.alertCtrl=c,this.old_events=[],this.next_events=[],this.follow=!1,this.reader=null,this.roles=[!1,!1,!1,!1],this.teams=[],this.photos=[],this.jetons=0,this.reader_jetons=0,this.user={id:"",firstname:"",picture:"",score:0},this.openWebsite=function(e){l.openWindow(e.home,e.firstname+" website")},this.refresh()}return e.prototype.refresh=function(){var e=this,t=this;this.reader=t.navParams.get("follower");var n=t.navParams.get("userid");null!=this.reader&&this.api.get(this.reader).subscribe(function(i){null!=i&&void 0!=i.jetons&&(e.reader_jetons=i.jetons[n]),void 0!=t.eventData.event&&(t.roles[1]=t.eventData.event.Moderators.indexOf(n)>-1,t.roles[2]=t.eventData.event.Cashiers.indexOf(n)>-1,t.roles[3]=t.eventData.event.Preparators.indexOf(n)>-1)}),this.api.get(n).subscribe(function(n){t.user=n,void 0!=n.jetons&&void 0!=n.jetons[t.reader]&&(t.jetons=n.jetons[t.reader]),void 0==t.user.readers&&(t.user.readers=[]),void 0!=t.user.followers&&(t.follow=t.user.followers.indexOf(t.reader)>-1),t.api.getphotofromuser(e.user.id).subscribe(function(e){t.photos=e.items}),t.api.geteventsfrom(e.user.id).subscribe(function(e){e.items.forEach(function(e){var n=(new Date).getTime();e.dtEnd<n&&t.old_events.push(e),e.dtStart>n&&t.next_events.push(e)})})})},e.prototype.updaterole=function(e){var t=this;this.eventData.updaterole(this.user.id,e,!this.roles[e]).subscribe(function(e){null!=e&&(t.eventData.event=e,p.toast(t.toastCtrl,t.user.firstname+" "+t.translate.instant("LIB.UPDATE")),t.refresh())})},e.prototype.updateFollow=function(){var e=this;0==this.userData.user.email.length&&(p.toast(this.toastCtrl,"PUBLICPROFIL.GIVEEMAILTOFOLLOW",this.translate),setTimeout(function(){p.openModal(e.modalCtrl,f.PersoPage,{},function(){e.userData.user.email.length>0?e.updateFollow():e.follow=!1})},2e3)),this.follow?this.api.addFollower(this.user.id,this.reader).subscribe(function(e){}):this.api.delFollower(this.user.id,this.reader).subscribe(function(e){})},e.prototype.addBlacklist=function(){var e=this;this.api.blacklist(this.navParams.get("follower"),this.navParams.get("userid"),!0).subscribe(function(t){null!=t&&p.toast(e.toastCtrl,e.user.firstname+" "+e.translate.instant("PUBLICPROFIL.ADDTOBLACKLIST"))})},e.prototype.chargeCredits=function(e,t){void 0===t&&(t=!0);var n=this,i="LIB.CREDITS";t||(i="LIB.DEBITS"),p.showPopup({title:i,confirmButton:"LIB.OK",cancelButton:"LIB.CANCEL",type:"number",translate:this.translate},this.alertCtrl,function(i){t||(i=-i),null!=i&&n.api.chargecredits(n.eventData.event.owner_id,e.id,i).subscribe(function(e){n.refresh()})})},e.prototype.select_team=function(){var e=this;p.openModal(this.modalCtrl,m.TeamsPage,{method:"sel"},function(t){null!=t&&(e.userData.user.currentTeam=t.value),e.userData.senduser("currentTeam").subscribe(function(){})})},e=i([s.Component({selector:"page-public-profil",template:'\x3c!--\n  Generated template for the PublicProfilPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <shifutitle title="Public profil">\n    <shifubutton id="btnClose" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content no-padding>\n  <tuto [if]="userData.user.connexions.length>5 && eventData.event.Cashiers!=undefined && eventData.event.Cashiers.indexOf(userData.user.id)>-1" label="PUBLICPROFIL.TUTO_CREDITS"></tuto>\n  <shifuprofil [user]="user" [openprofil]="false">\n    <div *ngIf="reader!=undefined && user.id!=reader">\n      <shifucheckbox id="chkFollow" label="LIB.FOLLOW" [(ngModel)]="follow" (onchange)="updateFollow()"></shifucheckbox><br>\n      <span *ngIf="reader_jetons>0">{{"LIB.YOUHAVE" | translate}}&nbsp;\n        {{reader_jetons}}<img src="./assets/img/money.png" class="money-small">\n        &nbsp;{{"LIB.WITHHIM" | translate}}\n    </span><br>\n      <span style="margin-left:5px">\n        <shifubutton item-end id="btnCredit" [small]="true" *ngIf="eventData.event.Cashiers!=undefined && eventData.event.Cashiers.indexOf(userData.user.id)>-1" icon="add" (click)="chargeCredits(user,true)"></shifubutton>\n        <shifubutton item-end id="btnDebit" [small]="true" *ngIf="eventData.event.Cashiers!=undefined && eventData.event.Cashiers.indexOf(userData.user.id)>-1" icon="remove" (click)="chargeCredits(user,false)"></shifubutton>\n      </span>\n    </div>\n\n    <ion-item *ngIf="eventData.event.id!=undefined && user.id!=reader">\n      \x3c!--<span style="font-size: medium">--\x3e\n      \x3c!--{{"LIB.ACCOUNT" | translate}}:{{jetons_in_event}}&nbsp;<img src="./assets/img/money.png" class="money-small">--\x3e\n      \x3c!--</span>--\x3e\n    </ion-item>\n\n  </shifuprofil>\n\n\n  <div *ngIf="userData.user.id!=undefined && user.id!=userData.user.id">\n\n    <shifucard title="LIB.ADVANCED">\n      <ion-item no-lines *ngIf="eventData.event.teams!=null && eventData.event.teams[user.currentTeam]!=null">\n        <ion-label>{{"LIB.TEAM" | translate}}:{{eventData.event.teams[user.currentTeam].name}}</ion-label>\n        <shifubutton item-right label="Change team" (click)="select_team()"></shifubutton>\n      </ion-item>\n      <div *ngIf="eventData.event.owner_id==userData.user.id" style="text-align: center;width:100%">\n        <shifubutton id="btnBlacklist" label="Blacklist" (click)="addBlacklist(user.id)"></shifubutton>\n      </div>\n    </shifucard>\n\n    <tuto [if]="eventData.event.owner_id==userData.user.id && user.id!=userData.user.id" label="PUBLICPROFIL.TUTO_ADMIN"></tuto>\n    <shifucard title="Roles" *ngIf="userData.user.id==eventData.event.owner_id && user.id!=userData.user.id">\n      <shifucheckbox id="chkModerator" label="LIB.MODERATOR" [(ngModel)]="roles[1]" (onchange)="updaterole(1)"></shifucheckbox>\n      <shifucheckbox id="chkCashier" label="LIB.CASHIER" [(ngModel)]="roles[2]"  (onchange)="updaterole(2)"></shifucheckbox>\n      <shifucheckbox id="chkPreparator" label="LIB.PREPARATOR" [(ngModel)]="roles[3]"  (onchange)="updaterole(3)"></shifucheckbox>\n    </shifucard>\n\n\n  </div>\n\n  <br>\n  <img *ngFor="let photo of photos" class="vignette" src="{{photo.photo}}">\n\n\n  <shifucard [id]="NextEvents" title="LIB.NEXTEVENTS" *ngIf="next_events.length>0" >\n    <div *ngFor="let evt of next_events" style="display:inline-block;width:150px;margin:5px;">\n      <shifuevent [event]="evt"></shifuevent>\n    </div>\n  </shifucard>\n\n  \x3c!--<shifucard [id]="MyEvents" title="LIB.OLDEVENTS" *ngIf="old_events.length>0" >--\x3e\n  \x3c!--<div *ngFor="let evt of old_events" style="display:inline-block;width:150px;margin:5px;">--\x3e\n  \x3c!--<shifuevent [event]="evt"></shifuevent>--\x3e\n  \x3c!--</div>--\x3e\n  \x3c!--</shifucard>--\x3e\n\n\n</ion-content>\n'}),o("design:paramtypes",[c.ApiProvider,d.EventDataProvider,u.UserData,h.TranslateService,a.ViewController,a.NavController,a.ToastController,r.ModalController,a.NavParams,r.AlertController])],e)}();t.PublicProfilPage=g},552:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=function(){function e(e,t,n,i){this.viewCtrl=e,this.navCtrl=t,this.app=n,this.modalCtrl=i}return e.prototype.support=function(){this.app.getRootNav().push("SupportPage"),this.viewCtrl.dismiss()},e.prototype.close=function(e){window.open(e,"_blank"),this.viewCtrl.dismiss()},e=i([s.Component({template:'\n    <ion-list>\n      <button ion-item (click)="close(\'http://ionicframework.com/docs/v2/getting-started\')">Learn Ionic</button>\n      <button ion-item (click)="close(\'http://ionicframework.com/docs/v2\')">Documentation</button>\n      <button ion-item (click)="close(\'http://showcase.ionicframework.com\')">Showcase</button>\n      <button ion-item (click)="close(\'https://github.com/ionic-team/ionic\')">GitHub Repo</button>\n      <button ion-item (click)="support()">Support</button>\n    </ion-list>\n  '}),o("design:paramtypes",[a.ViewController,a.NavController,a.App,a.ModalController])],e)}();t.PopoverPage=r},553:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=function(){function e(e,t){this.navCtrl=e,this.navParams=t}return e.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad BoardPage")},e=i([s.Component({selector:"page-board",template:"\x3c!--\n  Generated template for the BoardPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  <ion-navbar>\n    <ion-title>board</ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n\n</ion-content>\n"}),o("design:paramtypes",[a.NavController,a.NavParams])],e)}();t.BoardPage=r},554:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){}return e.prototype.transform=function(e,t){return e.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}),e},e=i([o.Pipe({name:"orderBy"})],e)}();t.OrderByPipe=s},555:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(){}return e.prototype.transform=function(e,t,n){return e?n&&0!=n.length?e.filter(function(e){var i=!0;return n.split(" AND ").forEach(function(n){n=n.trim(),i&&-1==e[t].toLowerCase().indexOf(n.toLowerCase())&&(i=!1)}),i}):e:[]},e=i([o.Pipe({name:"filter"})],e)}();t.FilterPipe=s},558:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(e){this.el=e,setTimeout(function(){e.nativeElement.focus()},100)}return e=i([s.Directive({selector:"[focusme]"}),o("design:paramtypes",[s.ElementRef])],e)}();t.FocusmeDirective=a},559:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=function(){function e(e){this.translate=e,this.icon="",this.small=!1,this.hidewhenclick=!1,this.tips="",this.help="",this.outline=!1,this.color="primary",this.size="",this.label="",this.fontsize="normal",this.sizeicon="large",this.paddingLeftRight="12px",this.size_number=0,this.beclick=!1,this.height="35px"}return e.prototype.ngOnInit=function(){0==this.tips.length&&(this.tips=this.help),null==this.size&&(this.size=""),0==this.size.length&&(0==this.label.length&&this.icon.length>0&&(this.size="40px"),this.label.length>0&&0==this.icon.length&&(this.size="80px"),this.label.length>0&&this.icon.length>0&&(this.size="100px")),"0"!=this.size&&"nosize"!=this.size||(this.size=""),this.small?(this.paddingLeftRight="6px",this.sizeicon="large",this.fontsize="small",this.height="30px"):(this.sizeicon="x-large",this.fontsize="normal"),this.size.endsWith("px")||(this.size=this.size+"px"),this.size_number=Number(this.size.replace("px","")),this.label.indexOf(".")>-1&&(this.label=this.translate.instant(this.label))},e.prototype.onclick=function(){var e=this;this.beclick=!0,setTimeout(function(){e.beclick=!1},1e4)},i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("small"),o("design:type",Boolean)],e.prototype,"small",void 0),i([s.Input("hidewhenclick"),o("design:type",Boolean)],e.prototype,"hidewhenclick",void 0),i([s.Input("tips"),o("design:type",String)],e.prototype,"tips",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),i([s.Input("outline"),o("design:type",Boolean)],e.prototype,"outline",void 0),i([s.Input("color"),o("design:type",String)],e.prototype,"color",void 0),i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),e=i([s.Component({selector:"shifubutton",template:'\x3c!-- Generated template for the ShifubuttonComponent component --\x3e\n<button [color]="color"\n        [outline]="outline"\n        [ngStyle]="{\'width\':size,\'font-size\':fontsize,\n                    \'padding-left\':paddingLeftRight,\'padding-right\':paddingLeftRight,\n                    \'padding-top\':\'0px\',\'padding-bottom\':\'0px\',\n                    \'margin\':\'2px\',\'height\':height}"\n        [small]="small"\n        title="{{tips | translate}}"\n        ion-button\n        (click)="onclick()"\n>\n\n    <div *ngIf="icon.length>0 && (hidewhenclick==false || (beclick==false && hidewhenclick==true))">\n      <ion-icon [ngStyle]="{\'font-size\':sizeicon}" *ngIf="icon.indexOf(\'assets\')==-1" name="{{icon}}"></ion-icon>\n      <img *ngIf="icon.indexOf(\'assets\')>-1" src="{{icon}}" [ngStyle]="{\'width\':(size_number*0.9)+\'px\',\'font-size\':fontsize}">\n    </div>\n\n    <div *ngIf="label.length>0 && icon.length>0  && (hidewhenclick==false || (beclick==false && hidewhenclick==true)) ">&nbsp;&nbsp;</div>\n    <div *ngIf="label.length>0  && (hidewhenclick==false || (beclick==false && hidewhenclick==true)) ">\n      {{label | translate }}\n    </div>\n\n  <div *ngIf="hidewhenclick && beclick">\n    <img src="./assets/img/wait.gif" style="width:18px;">\n  </div>\n\n</button>\n'}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifubuttonComponent=r},560:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=function(){function e(){this.placeholder=" ",this.label="",this.size=300,this.fontsize="normal",this.elt="",this.clearInput=!1,this.align="left",this._type="text",this.focus=!1,this.onchange=new s.EventEmitter,this.onclear=new s.EventEmitter,this.onclick=new s.EventEmitter,this.onblur=new s.EventEmitter,this.onenter=new s.EventEmitter,this.label_position="floating",this.len_text=0,this.pos_placeholder=0,this.placeholders=[],this.handle=null}return e.prototype.onkeypress=function(e){clearInterval(this.handle),this.placeholder="",13!=e.keyCode?(this.onchange.emit(),this.len_text=null!=this.myinput.value?this.myinput.value.length:0,this.len_text>this.size&&(this.myinput.value=this.myinput.value.substring(0,this.size-1),this.len_text=this.myinput.value.length,e.preventDefault())):this.onenter.emit({value:this.myinput.value})},e.prototype.ngAfterViewInit=function(){var e=this;this.myinput.setElementStyle("font-size",this.fontsize),this.myinput.setElementStyle("text-align",this.align),this.placeholders=this.placeholder.split(","),this.placeholders.length>1&&(this.label_position="stacked",this.handle=setInterval(function(){e.placeholder="Exemple: "+e.placeholders[e.pos_placeholder],e.pos_placeholder=(e.pos_placeholder+1)%e.placeholders.length},700+1e3*Math.random())),this.focus&&setTimeout(function(){e.myinput.setFocus()},500)},i([s.Input("placeholder"),o("design:type",String)],e.prototype,"placeholder",void 0),i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("size"),o("design:type",Number)],e.prototype,"size",void 0),i([s.Input("fontsize"),o("design:type",String)],e.prototype,"fontsize",void 0),i([s.Input("elt"),o("design:type",String)],e.prototype,"elt",void 0),i([s.Input("clearInput"),o("design:type",Object)],e.prototype,"clearInput",void 0),i([s.Input("align"),o("design:type",String)],e.prototype,"align",void 0),i([s.Input("type"),o("design:type",String)],e.prototype,"_type",void 0),i([s.Input("focus"),o("design:type",Boolean)],e.prototype,"focus",void 0),i([s.Output("onchange"),o("design:type",s.EventEmitter)],e.prototype,"onchange",void 0),i([s.Output("onclear"),o("design:type",s.EventEmitter)],e.prototype,"onclear",void 0),i([s.Output("onclick"),o("design:type",s.EventEmitter)],e.prototype,"onclick",void 0),i([s.Output("onblur"),o("design:type",s.EventEmitter)],e.prototype,"onblur",void 0),i([s.Output("onenter"),o("design:type",s.EventEmitter)],e.prototype,"onenter",void 0),i([s.Input("position"),o("design:type",Object)],e.prototype,"label_position",void 0),i([s.ViewChild("myinput"),o("design:type",a.TextInput)],e.prototype,"myinput",void 0),e=i([s.Component({selector:"shifuinput",template:'\x3c!-- Generated template for the ShifuinputComponent component --\x3e\n<ion-item style="font-weight: 200">\n  <ion-label (click)="clickLabel()"\n             *ngIf="label_position==\'floating\'"\n             color="primary"\n             floating>\n\n    {{label | translate }}<span *ngIf="myinput.value.length==0 && label!=null && label.length>0">&nbsp;?</span>\n  </ion-label>\n\n  <ion-label (click)="clickLabel()"\n             *ngIf="label_position==\'fixed\'"\n             color="primary"\n             fixed\n             >\n\n    {{label | translate }}<span *ngIf="myinput.value.length==0 && label!=null && label.length>0">&nbsp;?</span>\n  </ion-label>\n\n\n  <ion-label (click)="clickLabel()"\n             *ngIf="label_position==\'stacked\'"\n             color="primary"\n             stacked\n             >\n\n    {{label | translate }}<span *ngIf="myinput.value.length==0 && label!=null && label.length>0">&nbsp;?</span>\n  </ion-label>\n\n\n    <ion-input #myinput\n               id="{{elt}}" type="{{_type}}"\n               max="{{size}}"\n               (ionBlur)="onblur.emit()"\n               [clearInput]="clearInput"\n               placeholder=\'{{placeholder | translate}}\'\n               (keyup)="onkeypress($event)">\n    </ion-input>\n</ion-item>\n<span style="font-size: x-small;color:lightgray;" *ngIf="size-len_text<20">\n      {{len_text}}/{{size}}\n</span>\n'}),o("design:paramtypes",[])],e)}();t.ShifuinputComponent=r},561:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(32),r=n(351),l=n(6),u=n(2);t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR={provide:a.NG_VALUE_ACCESSOR,useExisting:s.forwardRef(function(){return c}),multi:!0};var c=function(){function e(e){this.translate=e,this.onchange=new s.EventEmitter,this.onmove=new s.EventEmitter,this.label="",this.min=0,this.icon="",this.max=100,this.step=1,this.unite="",this.help="",this.innerValue="",this.handle=null,this.onTouchedCallback=r.noop,this.onChangeCallback=r.noop}return Object.defineProperty(e.prototype,"value",{get:function(){return this.innerValue},set:function(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e),this.onChangeValue())},enumerable:!0,configurable:!0}),e.prototype.changeValue=function(e){this.writeValue(this.innerValue+e),this.onChangeValue()},e.prototype.onChangeValue=function(){var e=this;e.onmove.emit(),null!=this.handle&&(clearTimeout(this.handle),this.handle=null),this.handle=setTimeout(function(){e.onchange.emit({value:e.value})},1e3)},e.prototype.writeValue=function(e){e!==this.innerValue&&(this.innerValue=e)},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.ngOnInit=function(){this.label.indexOf(".")>-1&&(this.label=this.translate.instant(this.label))},e.prototype.openHelp=function(){u.openHelp(this.help)},i([s.Output("onchange"),o("design:type",s.EventEmitter)],e.prototype,"onchange",void 0),i([s.Output("onmove"),o("design:type",s.EventEmitter)],e.prototype,"onmove",void 0),i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("min"),o("design:type",Number)],e.prototype,"min",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("max"),o("design:type",Number)],e.prototype,"max",void 0),i([s.Input("step"),o("design:type",Number)],e.prototype,"step",void 0),i([s.Input("unite"),o("design:type",String)],e.prototype,"unite",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),e=i([s.Component({selector:"shifurange",template:'\x3c!-- Generated template for the ShifurangeComponent component --\x3e\n<ion-row text-left no-padding style="margin-top:20px;margin-bottom:20px">\n  <ion-col margin-left="5px" >\n    <ion-label\n            style="font-weight: 200;font-size:medium;" no-margin no-padding>\n      {{label | translate }}\n      <ion-icon color="secondary" *ngIf="help!=\'\'" (click)="openHelp()" name="help-circle"></ion-icon>\n    </ion-label>\n\n    <ion-range  no-margin no-padding min="{{min}}" max="{{max}}" step="{{step}}" [(ngModel)]="value" color="secondary">\n      <ion-icon range-left small name="{{icon}}" (click)="changeValue(-1)"></ion-icon>\n      <ion-icon range-right name="{{icon}}" (click)="changeValue(+1)"></ion-icon>\n    </ion-range>\n  </ion-col>\n  <ion-col *ngIf="unite.length>0" no-margin no-padding text-center col-2>\n    <span *ngIf="value<100" no-margin style="font-size: xx-large">\n      <ion-input type="number" text-center no-padding no-margin style="text-align: center" [(ngModel)]="value"></ion-input>\n    </span>\n\n    <span *ngIf="value>100" no-margin no-padding style="font-size: x-large;padding-bottom:6px;">\n      <ion-input  type="number" text-center style="text-align: center" [(ngModel)]="value"></ion-input>\n    </span>\n    <p style="margin:0px;padding:0px;font-size: x-small">{{unite | translate}}</p>\n  </ion-col>\n</ion-row>\n',providers:[t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]}),o("design:paramtypes",[l.TranslateService])],e)}();t.ShifurangeComponent=c},567:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(8),r=n(2),l=n(44),u=n(2),c=n(6),d=function(){function e(e,t,n,i){this.renderer=e,this.userData=t,this.storage=n,this.translate=i,this.label="",this._if=!0,this.icon="",this.help="",this.eltToShow="",this.delay=15,this.pseudo="",this.start=2,this.position="relative",this.show=!1,this.alignText="left",this.labels=[]}return e.prototype.getPosition=function(e){for(var t=0,n=0;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,o=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,n+=e.offsetTop-o+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:n}},e.prototype.ngOnInit=function(){var e=this;this.label.indexOf("%%")>-1&&(this.label=this.label.split("%%")[0]+u.tirage(Number(this.label.split("%%")[1]))),this.label.length>0&&(this.label=this.translate.instant(this.label));var t=this,n=r.hashCode(this.label);0!=this.icon.length&&"title"!=this.position&&"center"!=this.position&&"middle"!=this.position||(this.alignText="center"),this._if&&this.label.length>0&&!this.userData.tutoOnGoing&&setTimeout(function(){e.storage.get(e.pseudo+":"+e.label).then(function(i){if(!t.userData.tutoOnGoing&&(void 0==t.userData.user.history&&null==i||void 0!=t.userData.user.history&&-1==t.userData.user.history.indexOf(n))){t.show=!0,t.userData.tutoOnGoing=!0,t.userData.user.history+=";"+r.hashCode(e.label),t.userData.senduser("history").subscribe(function(){});var o=document.getElementById(t.eltToShow);if(null==o){var s=document.getElementsByName(t.eltToShow);s.length>0&&(o=s[0])}null!=o&&(o.style.animationName="clignote",o.style.animationDuration="1s",o.style.animationIterationCount="5"),void 0==t.userData.user.history?t.storage.set(e.pseudo+":"+e.label,"viewed"):setTimeout(function(){t.show=!1,t.userData.tutoOnGoing=!1},1e3*e.delay)}else t.userData.tutoOnGoing=!1;e.labels=e.label.split("<br>")})},1e3+1e3*this.start)},e.prototype.onMouseUp=function(){var e=this;setTimeout(function(){e.show=!1},500)},e.prototype.onHelp=function(){this.help.length>0&&u.openHelp(this.help)},i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("if"),o("design:type",Boolean)],e.prototype,"_if",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),i([s.Input("show"),o("design:type",String)],e.prototype,"eltToShow",void 0),i([s.Input("delay"),o("design:type",Number)],e.prototype,"delay",void 0),i([s.Input("pseudo"),o("design:type",String)],e.prototype,"pseudo",void 0),i([s.Input("start"),o("design:type",Number)],e.prototype,"start",void 0),i([s.Input("position"),o("design:type",String)],e.prototype,"position",void 0),e=i([s.Component({selector:"tuto",template:'<ion-item\n  text-center text-wrap no-border no-lines no-margin no-padding\n  style="font-weight: 200;padding-left:10px;padding-right:10px;"\n  (mouseup)="onMouseUp()"\n  *ngIf="position==\'title\' && show">\n    <span style="font-size:large;"\n          text-wrap\n          *ngFor="let line of labels">{{line}}<br>\n    </span>\n    <ng-content></ng-content>\n</ion-item>\n\n<ion-item *ngIf="position==\'relative\' && show"\n          no-border no-lines text-center text-wrap\n          (click)="show=false"\n          style="background-color: transparent;padding:3px;">\n\n    <ion-icon\n            *ngIf="icon!=undefined && icon.length>0"\n            style="font-size: xx-large;padding:3px;"\n            [name]="icon">\n    </ion-icon>\n\n  <span (click)="onHelp()" style="font-size: small;font-weight: 200;margin: 5px;">\n    {{label | translate}}\n    &nbsp;\n    <ion-icon color="secondary"\n              *ngIf="help.length>0"\n              name="help-circle">\n    </ion-icon>\n  </span>\n\n</ion-item>\n'}),o("design:paramtypes",[s.Renderer2,a.UserData,l.Storage,c.TranslateService])],e)}();t.TutoComponent=d},568:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(){console.log("Hello ShifuimagefileComponent Component"),this.text="Hello World"}return e=i([s.Component({selector:"shifuimagefile",template:"\x3c!-- Generated template for the ShifuimagefileComponent component --\x3e\n<div>\n  {{text}}\n</div>\n"}),o("design:paramtypes",[])],e)}();t.ShifuimagefileComponent=a},569:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(){this.labels=[]}return i([s.Input("labels"),o("design:type",Array)],e.prototype,"labels",void 0),e=i([s.Component({selector:"shifugroup",template:'\x3c!-- Generated template for the ShifugroupComponent component --\x3e\n<ion-segment color="primary" (ionChange)="segmentChanged($event)" *ngFor="let item of labels" >\n  <ion-segment-button [value]="item.value">\n    {{item.label}}\n  </ion-segment-button>\n</ion-segment>\n'}),o("design:paramtypes",[])],e)}();t.ShifugroupComponent=a},570:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=n(3),l=n(8),u=function(){function e(e,t){this.navCtrl=e,this.userData=t,this.label="",this.title="",this.menu=!0,this.demo=!1,this.back=!0,this.help="",this.icon="",this.onclick=new s.EventEmitter,this.onclose=new s.EventEmitter,this.ondemo=new s.EventEmitter,this.close=!1}return e.prototype.ngOnInit=function(){this.onclose.observers.length>0&&(this.close=!0)},e.prototype.openDemo=function(){this.ondemo.emit()},e.prototype.showHelp=function(){a.openHelp("#"==this.help?"#"+this.navCtrl.getActive().id:this.help)},i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("title"),o("design:type",String)],e.prototype,"title",void 0),i([s.Input("menu"),o("design:type",Boolean)],e.prototype,"menu",void 0),i([s.Input("demo"),o("design:type",Boolean)],e.prototype,"demo",void 0),i([s.Input("back"),o("design:type",Boolean)],e.prototype,"back",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Output("onclick"),o("design:type",s.EventEmitter)],e.prototype,"onclick",void 0),i([s.Output("onclose"),o("design:type",s.EventEmitter)],e.prototype,"onclose",void 0),i([s.Output("ondemo"),o("design:type",s.EventEmitter)],e.prototype,"ondemo",void 0),e=i([s.Component({selector:"shifutitle",template:'\x3c!-- Generated template for the ShifutitleComponent component --\x3e\n<ion-navbar>\n  <ion-buttons left>\n    <button id="btnMenu" *ngIf="!close && menu" ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n\n  </ion-buttons>\n\n    <span style="font-size: medium;font-weight: 200;">{{title | translate}}</span>\n    &nbsp;\n    <ion-icon color="secondary" *ngIf="help.length>0" (click)="showHelp()" name="help-circle"></ion-icon>\n\n\n  <ion-buttons end>\n    <ng-content></ng-content>\n    <shifubutton [small]="true" label="DEMO" *ngIf="demo && userData.user.connexions.length<3" (click)="openDemo()"></shifubutton>\n    <shifubutton *ngIf="close" icon="close" (click)="onclose.emit()"></shifubutton>\n    <shifubutton *ngIf="icon.length>0" [icon]="icon" (click)="onclick.emit()"></shifubutton>\n  </ion-buttons>\n</ion-navbar>\n'}),o("design:paramtypes",[r.NavController,l.UserData])],e)}();t.ShifutitleComponent=u},571:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(){console.log("Hello ShifuwaitComponent Component"),this.text="Hello World"}return e=i([s.Component({selector:"shifuwait",template:"\x3c!-- Generated template for the ShifuwaitComponent component --\x3e\n<div>\n  {{text}}\n</div>\n"}),o("design:paramtypes",[])],e)}();t.ShifuwaitComponent=a},572:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=n(32),l=n(351),u=n(2);t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR={provide:r.NG_VALUE_ACCESSOR,useExisting:s.forwardRef(function(){return c}),multi:!0};var c=function(){function e(e){this.translate=e,this.label="",this.tips="",this.help="",this.onchange=new s.EventEmitter,this.onclick=new s.EventEmitter,this.innerValue="",this.onTouchedCallback=l.noop,this.onChangeCallback=l.noop}return Object.defineProperty(e.prototype,"value",{get:function(){return this.innerValue},set:function(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e),this.onchange.emit())},enumerable:!0,configurable:!0}),e.prototype.changeevent=function(e){this.onchange.emit()},e.prototype.writeValue=function(e){e!==this.innerValue&&(this.innerValue=e)},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.ngOnInit=function(){this.label.indexOf(".")>-1&&(this.label=this.translate.instant(this.label))},e.prototype.showHelp=function(){u.openHelp(this.help)},i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("tips"),o("design:type",String)],e.prototype,"tips",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),i([s.Output("onchange"),o("design:type",s.EventEmitter)],e.prototype,"onchange",void 0),i([s.Output("onclick"),o("design:type",s.EventEmitter)],e.prototype,"onclick",void 0),e=i([s.Component({selector:"shifucheckbox",template:'<ion-item no-lines no-border>\n  <ion-label title="{{tips}}" text-wrap style="font-size: medium;font-weight: 200;">\n    {{label}}\n    <ion-icon color="secondary" *ngIf="help.length>0" (click)="showHelp()" name="help-circle"></ion-icon>\n  </ion-label>\n  <ion-toggle style="margin-left:20px;" [(ngModel)]="value"></ion-toggle>\n</ion-item>\n',providers:[t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifucheckboxComponent=c},573:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=function(){function e(e){this.translate=e,this.sizeiconwidth="30px",this.sizeiconheight="30px",this.icon="",this.tips="",this.onlyFile=!1,this.photo="",this.size="",this.button="",this.onTake=new s.EventEmitter,this.sizeiconheight.endsWith("px")||(this.sizeiconheight+="px"),this.sizeiconwidth.endsWith("px")||(this.sizeiconwidth+="px"),this.button.indexOf(".")>-1&&(this.button=this.translate.instant(this.button))}return e.prototype.onChange=function(e){var t=this,n=e.target.files[0],i=new FileReader;i.onload=function(){t.onTake.emit({value:this.result})},i.readAsDataURL(n)},e.prototype.takePhoto=function(){this.inputElement.nativeElement.click()},i([s.Input("sizeiconwidth"),o("design:type",String)],e.prototype,"sizeiconwidth",void 0),i([s.Input("sizeiconheight"),o("design:type",String)],e.prototype,"sizeiconheight",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("tips"),o("design:type",String)],e.prototype,"tips",void 0),i([s.Input("onlyfile"),o("design:type",Boolean)],e.prototype,"onlyFile",void 0),i([s.Input("photo"),o("design:type",String)],e.prototype,"photo",void 0),i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([s.Input("button"),o("design:type",String)],e.prototype,"button",void 0),i([s.Output("onTake"),o("design:type",s.EventEmitter)],e.prototype,"onTake",void 0),i([s.ViewChild("inputElement"),o("design:type",s.ElementRef)],e.prototype,"inputElement",void 0),e=i([s.Component({selector:"shifucamera",template:'\x3c!-- Generated template for the ShifucameraComponent component --\x3e\n\n  <input *ngIf="!onlyFile"\n         #inputElement\n         type="file"\n         capture="camera"\n         accept="image/*"\n         id="camera" style="visibility: hidden;width:0px;height: 0px;"\n         (change)="onChange($event)"/>\n\n  <input *ngIf="onlyFile"\n         #inputElement\n         type="file" accept="image/*"\n         style="visibility: hidden;width:0px;height: 0px;"\n         (change)="onChange($event)"/>\n\n  <img *ngIf="photo.length>0" [src]="photo" [ngStyle]="{\'width\':sizeiconwidth,\'height\':sizeiconheight}" (click)="takePhoto()">\n  <shifubutton *ngIf="photo.length==0"\n               size="{{size}}" icon="{{icon}}" (click)="takePhoto()" label="{{button}}"></shifubutton>\n\n'}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifucameraComponent=r},574:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(22),r=function(){function e(e){this.sanitizer=e,this.code="",this.shadow=!1,this.width="150px",this.height="225px"}return e.prototype.ngOnChanges=function(e){this.flyer.nativeElement.innerHTML=this.code,this.shadow&&(this.flyer.nativeElement.className="flyer-shadow")},i([s.Input("code"),o("design:type",String)],e.prototype,"code",void 0),i([s.Input("shadow"),o("design:type",Boolean)],e.prototype,"shadow",void 0),i([s.Input("width"),o("design:type",String)],e.prototype,"width",void 0),i([s.Input("height"),o("design:type",String)],e.prototype,"height",void 0),i([s.ViewChild("flyer"),o("design:type",s.ElementRef)],e.prototype,"flyer",void 0),e=i([s.Component({selector:"svgedit",template:"<div #flyer [ngStyle]=\"{'margin':'0px','display':'inline-block','width':width,'height':height}\">\n</div>\n"}),o("design:paramtypes",[a.DomSanitizer])],e)}();t.SvgeditComponent=r},575:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(22),r=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)},e=i([s.Pipe({name:"safe"}),o("design:paramtypes",[a.DomSanitizer])],e)}();t.SafePipe=r},576:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=n(2),l=function(){function e(e){this.translate=e,this.visible=!1,this.label="",this.sizeButton="",this.showButton=!0,this.icon="",this.tuto="",this.id="",this.help="",this.title="",this.post_title="",this.color="primary",this.onclick=new s.EventEmitter,this.onvisible=new s.EventEmitter,this.onhide=new s.EventEmitter,this.forceHelp=!1}return e.prototype.click=function(){this.forceHelp?this.onHelp():(this.visible=!0,void 0!=this.onclick&&this.onclick.emit())},e.prototype.flipVisibility=function(){this.visible=!this.visible,this.visible?this.onvisible.emit({target:this}):this.onhide.emit()},e.prototype.onHelp=function(){r.openHelp(this.help)},e.prototype.ngOnInit=function(){this.help.length>0&&0==this.icon.length&&(this.icon="help",this.forceHelp=!0)},i([s.Input("visible"),o("design:type",Boolean)],e.prototype,"visible",void 0),i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("sizeButton"),o("design:type",String)],e.prototype,"sizeButton",void 0),i([s.Input("showButton"),o("design:type",Boolean)],e.prototype,"showButton",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("tuto"),o("design:type",String)],e.prototype,"tuto",void 0),i([s.Input("id"),o("design:type",String)],e.prototype,"id",void 0),i([s.Input("help"),o("design:type",String)],e.prototype,"help",void 0),i([s.Input("title"),o("design:type",String)],e.prototype,"title",void 0),i([s.Input("posttitle"),o("design:type",String)],e.prototype,"post_title",void 0),i([s.Input("color"),o("design:type",String)],e.prototype,"color",void 0),i([s.Output("onclick"),o("design:type",s.EventEmitter)],e.prototype,"onclick",void 0),i([s.Output("onvisible"),o("design:type",s.EventEmitter)],e.prototype,"onvisible",void 0),i([s.Output("onhide"),o("design:type",s.EventEmitter)],e.prototype,"onhide",void 0),e=i([s.Component({selector:"shifucard",template:'\x3c!-- Generated template for the ShifucardComponent component --\x3e\n<ion-card style="margin-left: 8px;">\n  <ion-card-title no-margin no-padding>\n        <ion-item>\n          <ion-label style="font-weight: 200" (click)="flipVisibility()" color="{{color}}">\n            <ion-icon *ngIf="visible" name="arrow-dropup"></ion-icon>\n            <ion-icon *ngIf="!visible" name="arrow-dropdown"></ion-icon>\n            &nbsp;\n            {{title | translate}}&nbsp;{{post_title | translate}}\n            <ion-icon color="{{color}}"\n                      *ngIf="help.length>0 && !forceHelp"\n                      (click)="onHelp()"\n                      name="help-circle">\n            </ion-icon>\n          </ion-label>\n\n\n          <shifubutton name="buttonCard"\n                       item-end [small]="true"\n                       *ngIf="label.length>0 && showButton"\n                       [size]="sizeButton"\n                       label="{{label | translate}}"\n                       (click)="click()">\n          </shifubutton>\n\n          <ion-icon item-end\n                    shifuid="buttonCard"\n                    style="font-size: x-large;"\n                    *ngIf="icon.length>0 && showButton"\n                    color="{{color}}"\n                    name="{{icon}}"\n                    (click)="click()">\n          </ion-icon>\n\n        </ion-item>\n\n  </ion-card-title>\n\n  <ion-card-content [hidden]="!visible" style="margin-left:8px;margin-bottom:5px;" no-padding no-margin>\n    <tuto *ngIf="visible && tuto.length>0" start="1" label="{{tuto}}"></tuto>\n    <ng-content no-margin no-padding></ng-content>\n  </ion-card-content>\n</ion-card>\n'}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifucardComponent=l},577:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(0),r=function(){function e(){this.icon="",this.flyer="",this.size="",this.closed=!1,this.reverse=!1,this.autoreturn=0,this.showSVG=!1,this.width="",this.height="",0==this.width.length&&(this.width=this.size)}return e.prototype.flip=function(e){this.reverse&&e.parentNode.classList.toggle("hover")},e.prototype.ngAfterContentInit=function(){var e=this;setTimeout(function(){e.card.nativeElement.clientWidth>0&&(e.height=1.5*e.card.nativeElement.clientWidth+"px",e.width=e.card.nativeElement.clientWidth+"px")},100)},e.prototype.ngOnChanges=function(e){void 0!=this.flyer?0==this.flyer.indexOf("<?xml")?(this.showSVG=!0,this.flyerPaper.nativeElement.innerHTML=this.flyer):this.flyerPaper.nativeElement.innerHTML=-1==this.flyer.indexOf("getfile?code")?"<img style='position:absolute;top:0px;left:0px;height:100%;' src='"+this.flyer+"'>":"<object height='100%' width='100%' type='image/svg+xml' data='"+this.flyer+"'>":this.flyerPaper.nativeElement.innerHTML="<br><br><br><div style='width:100%;text-align: center'><img src='./assets/img/wait.gif' style='width:50px'></div>"},i([a.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([a.Input("flyer"),o("design:type",String)],e.prototype,"flyer",void 0),i([a.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([a.Input("closed"),o("design:type",Boolean)],e.prototype,"closed",void 0),i([a.Input("reverse"),o("design:type",Boolean)],e.prototype,"reverse",void 0),i([a.Input("autoreturn"),o("design:type",Number)],e.prototype,"autoreturn",void 0),i([s.ViewChild("card"),o("design:type",a.ElementRef)],e.prototype,"card",void 0),i([s.ViewChild("flyerPaper"),o("design:type",a.ElementRef)],e.prototype,"flyerPaper",void 0),i([a.Input("width"),o("design:type",Object)],e.prototype,"width",void 0),i([a.Input("height"),o("design:type",Object)],e.prototype,"height",void 0),e=i([a.Component({selector:"shifuflyer",template:'\n  <div #card class="flip-container" (mouseenter)="flip($event.target)" (touchstart)="flip($event.target)"\n       [ngStyle]="{\'width\':width,\'height\':height}">\n\n    <div class="flipper">\n\n      <div class="front flyer-shadow" [ngStyle]="{\'position\':\'relative\',\'width\':width,\'height\':height}">\n\n        <img *ngIf="closed" src="./assets/img/closed.svg"\n             style="width: 100%;height:100%;z-index: 100;position:absolute;display:block;left:0px;top:0px;">\n\n        <ion-icon name="{{icon}}"\n                  *ngIf="icon.length>0"\n                  style="position:absolute;display:block;left:5px;top:5px;z-index:200;">\n        </ion-icon>\n\n        <div #flyerPaper style="position:absolute;left:0px;top:0px;height:100%;width:100%;"></div>\n      </div>\n\n      <div class="back flyer-shadow" [ngStyle]="{\'width\':width,\'height\':height,\'padding\':\'0px\',\'margin\':\'0px\'}">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div>\n'}),o("design:paramtypes",[])],e)}();t.ShifuflyerComponent=r},578:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=n(3),l=n(6),u=function(){function e(e,t){this.modalCtrl=e,this.translate=t,this.lang="fr",this.now=0,this.delay="",this.now=(new Date).getTime()}return e.prototype.ngOnInit=function(){this.delay=a.getDelay(this.event.dtStart,this.lang)},i([s.Input("event"),o("design:type",Object)],e.prototype,"event",void 0),i([s.Input("lang"),o("design:type",String)],e.prototype,"lang",void 0),e=i([s.Component({selector:"shifuevent",template:'\x3c!-- Generated template for the ShifueventComponent component --\x3e\n\n  <shifuflyer [closed]="event.closed" style="margin-bottom:10px" height="150px" width="100px" *ngIf="event.flyer!=undefined && event.flyer.length>0" [flyer]="event.flyer">\n\n    <span *ngIf="event.dtStart<=now">{{event.dtStart | date:\'dd/MM/yy\'}}</span>\n\n    {{event.description}}<br>\n    \x3c!--<span *ngIf="event.delay.length>0"><br>{{\'ADDBETS.STARTBET\' | translate}}&nbsp;{{event.delay}}</span>--\x3e\n    <span *ngIf="event.minScoreToJoin>0"><br>Min reputation: {{event.minScoreToJoin}}</span>\n    <span *ngIf="event.minCreditToJoin>0"><br>Min credit: {{event.minCreditToJoin}}</span>\n    <span *ngIf="event.nPresents>3"><br>Presents: {{event.nPresents}}</span>\n    \x3c!--<span *ngIf="event.totalCredits>0"><br>Total: {{event.totalCredits}}<img src="./assets/img/money.png"></span>--\x3e\n    <br>\n\n    <ion-item *ngIf="event.dtStart>now">\n      {{\'LIB.STARTIN\' | translate}}&nbsp;{{delay}}\n    </ion-item>\n    <ng-content></ng-content>\n  </shifuflyer>\n\n\n\n'}),o("design:paramtypes",[r.ModalController,l.TranslateService])],e)}();t.ShifueventComponent=u},579:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=function(){function e(){this.user={},this.light=!1,this.openprofil=!0}return e.prototype.openSocial=function(){null!=this.user.home&&this.user.home.length>0&&a.openWindow(this.user.home)},i([s.Input("user"),o("design:type",Object)],e.prototype,"user",void 0),i([s.Input("light"),o("design:type",Boolean)],e.prototype,"light",void 0),i([s.Input("openprofil"),o("design:type",Boolean)],e.prototype,"openprofil",void 0),e=i([s.Component({selector:"shifuprofil",template:'\x3c!-- Generated template for the ShifuprofilComponent component --\x3e\n\n  <shifucard [visible]="true" *ngIf="!light" title="{{user.firstname}}">\n    <ion-grid no-border no-lines>\n      <ion-row align-items-start>\n        <ion-col col-auto align-self-start>\n          <shifuimageprofil [openprofil]=[openprofil] *ngIf="!user.anonymous" size="100px" [user]="user"></shifuimageprofil>\n          <img *ngIf="user.anonymous"  src="./assets/img/anonymous.jpg">\n        </ion-col>\n        <ion-col align-self-start>\n          <span *ngIf="user.description!=undefined && user.description.length>0">{{user.description}}<br></span>\n          \x3c!--<shifunote [object]="user"></shifunote><br>--\x3e\n          <ng-content></ng-content>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </shifucard>\n\n  <ion-item *ngIf="light">\n    <ion-avatar item-start>\n      <shifuimageprofil *ngIf="!user.anonymous" size="50px" [user]="user"></shifuimageprofil>\n      <img *ngIf="user.anonymous"  src="./assets/img/anonymous.jpg">\n    </ion-avatar>\n    <p (click)="openSocial()">{{user.firstname}}</p>\n    <shifunote [object]="user" end></shifunote><br>\n  </ion-item>\n'}),o("design:paramtypes",[])],e)}();t.ShifuprofilComponent=r},580:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=function(){function e(){this.label="",this.end=0,this.server=null,this.noSecond=!1,this.onlyPositif=!1,this.handle=null,this.offset=0,this.delay=""}return e.prototype.refresh=function(){if(this.end<(new Date).getTime()-this.offset)null!=this.handle&&(clearInterval(this.handle),this.handle=null);else if(!this.onlyPositif||this.end>(new Date).getTime()-this.offset){var e=a.getDelay(this.end,"fr","jours",(new Date).getTime()-this.offset);this.noSecond&&(e=e.split(":")[0]),this.delay=""!=this.label?this.label+" "+e:e}},e.prototype.ngOnInit=function(){var e=this;null==this.server&&(this.server=(new Date).getTime()),this.offset=this.server-(new Date).getTime(),this.handle=setInterval(function(){e.refresh()},1e3)},i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Input("end"),o("design:type",Number)],e.prototype,"end",void 0),i([s.Input("server"),o("design:type",Number)],e.prototype,"server",void 0),i([s.Input("noSecond"),o("design:type",Boolean)],e.prototype,"noSecond",void 0),i([s.Input("onlyPositif"),o("design:type",Boolean)],e.prototype,"onlyPositif",void 0),e=i([s.Component({selector:"shifutimer",template:"\x3c!-- Generated template for the ShifutimerComponent component --\x3e\n<span>\n  {{delay}}\n</span>\n"}),o("design:paramtypes",[])],e)}();t.ShifutimerComponent=r},581:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=n(55),l=n(3),u=n(84),c=function(){function e(e){this.modalCtrl=e,this.user={},this.me=!1,this.withName=!1,this.openprofil=!0,this.follower=null,this.size="40px",this.fontsize="xx-large",this.toggle=!1,this.firstname=""}return e.prototype.ngOnInit=function(){null!=this.user.firstname&&(this.firstname=this.user.firstname.substr(0,Math.min(15,this.user.firstname.length)));var e=this.size.replace("px","");Number(e)>50&&(this.fontsize=Number(e)/15+"em")},e.prototype.openProfil=function(){0!=this.openprofil&&(this.me?a.openModal(this.modalCtrl,u.PersoPage,{from:null}):a.openModal(this.modalCtrl,r.PublicProfilPage,{userid:this.user.id,follower:this.follower}))},i([s.Input("user"),o("design:type",Object)],e.prototype,"user",void 0),i([s.Input("me"),o("design:type",Boolean)],e.prototype,"me",void 0),i([s.Input("withname"),o("design:type",Boolean)],e.prototype,"withName",void 0),i([s.Input("openprofil"),o("design:type",Boolean)],e.prototype,"openprofil",void 0),i([s.Input("follower"),o("design:type",String)],e.prototype,"follower",void 0),i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),e=i([s.Component({selector:"shifuimageprofil",template:'\x3c!-- Generated template for the ShifuimageprofilComponent component --\x3e\n<div *ngIf="user.picture!=undefined && !user.anonymous" style="display:inline" (click)="openProfil()">\n  <img *ngIf="user.picture.indexOf(\'http\')==0 || user.picture.indexOf(\'data:\')==0"\n       [ngStyle]="{\'width\':size,\'height\':size}"\n       [src]="user.picture | safe">\n\n  <img class="avatar-small"\n       src="/img/anonymous.jpg"\n       style="width: 50px;height: 50px;"\n       *ngIf="user.anonymous">\n\n  <span [hidden]="user.picture.indexOf(\'http\')==0 || user.picture.indexOf(\'data:\')==0"\n        [ngStyle]="{\'font-size\': fontsize}">\n    {{user.picture}}\n  </span>\n\n  <span *ngIf="withName" style="font-size: xx-small;">{{fistname}}</span>\n\n</div>\n\n'}),o("design:paramtypes",[l.ModalController])],e)}();t.ShifuimageprofilComponent=c},588:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(){this.object={nbLike:0,nbDislike:0}}return i([s.Input("object"),o("design:type",Object)],e.prototype,"object",void 0),e=i([s.Component({selector:"shifunote",template:'\x3c!-- Generated template for the ShifunoteComponent component --\x3e\n\n<span *ngIf="object.nbLike>0">\n  {{object.nbLike}}&nbsp;<ion-icon name="thumbs-up"></ion-icon>\n</span>\n\n<span *ngIf="object.nbLike>0 && object.nbDislike>0">\n  &nbsp;/&nbsp;\n</span>\n\n<span *ngIf="object.nbDislike>0">\n  {{object.nbDislike}}&nbsp;<ion-icon name="thumbs-down"></ion-icon>\n</span>\n\n'}),o("design:paramtypes",[])],e)}();t.ShifunoteComponent=a},590:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(8),r=n(6),l=function(){function e(e,t){this.userData=e,this.translate=t,this.status="show",this.onchange=new s.EventEmitter}return e.prototype.vote=function(e,t){var n=this;this.userData.setreputation(e.id,t).subscribe(function(){n.onchange.emit()})},i([s.Input("bet"),o("design:type",Object)],e.prototype,"bet",void 0),i([s.Input("status"),o("design:type",String)],e.prototype,"status",void 0),i([s.Output("onchange"),o("design:type",s.EventEmitter)],e.prototype,"onchange",void 0),e=i([s.Component({selector:"shifubet",template:'\x3c!-- Generated template for the ShifubetComponent component --\x3e\n<shifucard *ngIf="status==\'toevaluate\'" [title]="bet.title">\n  <ion-grid>\n    <ion-row>\n      <ion-col text-left>\n        {{bet.lib_response}}&nbsp;<br>\n        <span *ngIf="bet.gains[userData.user.id]>0" style="font-size: x-large">{{\'BETS.WINAMOUNT\' | translate}}&nbsp;{{bet.gains[userData.user.id] | number:0}}&nbsp;<img src="./assets/img/money.png" class="small-money"></span>\n        <span *ngIf="bet.gains[userData.user.id]<0" style="font-size: x-large">{{\'BETS.LOSTAMOUNT\' | translate}}&nbsp;{{bet.gains[userData.user.id]*(-1)  | number:0 }}&nbsp;<img src="./assets/img/money.png" class="small-money"></span>\n        <br>\n        {{\'BETS.EVALUATE\' | translate}}&nbsp;:&nbsp;{{bet.from.firstname}}\n      </ion-col>\n      <ion-col col-auto text-left>\n        <shifubutton [small]="true" name="btnVotePos" style="margin:2px;" icon="thumbs-up"  (click)="vote(bet,1)"></shifubutton><br>\n        <shifubutton [small]="true" name="btnVoteNeg" style="margin:2px;" icon="thumbs-down" (click)="vote(bet,-1)"></shifubutton>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</shifucard>\n\n<shifucard *ngIf="status==\'show\'" title="bet.title">\n  {{bet.lib_response}}<br>\n</shifucard>\n'}),o("design:paramtypes",[a.UserData,r.TranslateService])],e)}();t.ShifubetComponent=l},592:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=function(){function e(e){this.translate=e,this.onchange=new s.EventEmitter,this.size="80px",this.position="center",this.fontsize="normal",this.labels=null,this.descriptions=null,this.images=null,this.exclude=!1,this.values="",this._default="",this.buttons=[],this.realValues=[],this.message=""}return Object.defineProperty(e.prototype,"default",{get:function(){return this._default},set:function(e){this._default=e,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){null!=this.labels&&this.labels.length>0&&","==this.labels[this.labels.length-1]&&(this.labels=this.labels.substr(0,this.labels.length-1)),this.buttons=[];var e=0;null==this.images?this.labels.length>0&&(e=this.labels.split(",").length):this.images.length>0&&(e=this.images.split(",").length);for(var t=0;t<e;t++){var n=this._default.indexOf(this.values.split(",")[t])>-1,i={value:this.values.split(",")[t],selected:n,borderstyle:"none",opacity:"0.5",description:""};if(null!=this.descriptions){var o=this.descriptions.split(",");i.description=this.translate.instant(o[t])}null!=this.labels&&(i.label=this.translate.instant(this.labels.split(",")[t])),null!=this.images&&(i.src=this.images.split(",")[t],n&&(i.borderstyle="solid",i.opacity="1")),this.buttons.push(i)}},e.prototype.ngOnInit=function(){this.refresh()},e.prototype.switch=function(e){var t=this;this.exclude&&this.buttons.forEach(function(e){e.selected=!1}),e.selected=!e.selected,e.selected&&e.description.length>0&&(this.message=e.description,setTimeout(function(){t.message=""},2e3));var n="";this.buttons.forEach(function(e){e.selected&&(n=n+e.value+",")}),n.endsWith(",")&&(n=n.substr(0,n.length-1)),this._default=n,this.refresh(),this.onchange.emit({value:n})},i([s.Output("onchange"),o("design:type",s.EventEmitter)],e.prototype,"onchange",void 0),i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([s.Input("position"),o("design:type",String)],e.prototype,"position",void 0),i([s.Input("fontsize"),o("design:type",String)],e.prototype,"fontsize",void 0),i([s.Input("labels"),o("design:type",String)],e.prototype,"labels",void 0),i([s.Input("descriptions"),o("design:type",String)],e.prototype,"descriptions",void 0),i([s.Input("images"),o("design:type",String)],e.prototype,"images",void 0),i([s.Input("exclude"),o("design:type",Boolean)],e.prototype,"exclude",void 0),i([s.Input("values"),o("design:type",String)],e.prototype,"values",void 0),i([s.Input("default"),o("design:type",String),o("design:paramtypes",[String])],e.prototype,"default",null),e=i([s.Component({selector:"shifubuttongroup",template:"\x3c!-- Generated template for the ShifubuttongroupComponent component --\x3e\n<div *ngIf=\"images==null\" [ngStyle]=\"{'text-align':position,'width':'100%'}\">\n  <div [ngStyle]=\"{'display':'inline-block'}\" *ngFor=\"let bt of buttons\">\n    <button\n            ion-button\n            name=\"btn\" small\n            [title]=\"bt.description\"\n            [ngStyle]=\"{'width': size,'font-size':fontsize}\"\n            color=\"secondary\" [outline]=\"!bt.selected\"\n            (tap)=\"switch(bt)\">\n      {{ bt.label }}\n    </button>\n  </div>\n  <div *ngIf=\"message.length>0\" style=\"font-size:small;\">{{message}}</div>\n</div>\n\n<div *ngIf=\"images!=null\" [ngStyle]=\"{'text-align':position,'width':'100%','vertical-align':'top'}\">\n  <div *ngFor=\"let bt of buttons\"\n       [ngStyle]=\"{\n              'text-align':'center',\n              'margin':'5px',\n              'display':'inline-block',\n              'border-color':'grey',\n              'border-width':'thin',\n              'width': size,\n              'height':size,\n              'border-style':bt.borderstyle,\n              'opacity':bt.opacity\n              }\">\n\n    <img style=\"height:100%;object-fit: cover;\"\n         [src]=\"bt.src\"\n         name=\"btn\"\n         (click)=\"switch(bt)\"\n    >\n\n    <span *ngIf=\"bt.label!=null\">{{ bt.label }}</span>\n\n  </div>\n</div>\n\n"}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifubuttongroupComponent=r},593:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(6),r=n(16),l=n(3),u=n(2),c=function(){function e(e,t,n){this.loadingCtrl=e,this.translate=t,this.api=n,this.size="",this.icon="",this.tips="",this.hourglass=!1,this.label="",this.onTake=new s.EventEmitter}return e.prototype.onChange=function(e){var t=this,n=e.target.files[0],i=new FileReader,o=null;this.hourglass&&(o=u.loading(this)),i.onload=function(){null!=o&&o.dismiss();var e=n.type;if(""==e){var s=n.name.lastIndexOf(".")+1;e=s>-1?"application/"+n.name.substr(s):"application/octet-stream"}t.onTake.emit({length:n.size,size:n.size,mega:n.size/1048576,value:i.result,file:n.name,format:e})},setTimeout(function(){i.readAsDataURL(n)},500)},e.prototype.takePhoto=function(){this.inputElement.nativeElement.click()},i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([s.Input("icon"),o("design:type",String)],e.prototype,"icon",void 0),i([s.Input("tips"),o("design:type",String)],e.prototype,"tips",void 0),i([s.Input("hourglass"),o("design:type",Boolean)],e.prototype,"hourglass",void 0),i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),i([s.Output("onTake"),o("design:type",s.EventEmitter)],e.prototype,"onTake",void 0),i([s.ViewChild("inputElement"),o("design:type",s.ElementRef)],e.prototype,"inputElement",void 0),e=i([s.Component({selector:"shifufile",template:'\x3c!-- Generated template for the ShifufileComponent component --\x3e\n<div title="{{tips}}" style="display:inline;padding: 0px;margin: 0px;font-size:small">\n  <input #inputElement type="file" accept="*/*" style="visibility: hidden;width:0px;height: 0px;" (change)="onChange($event)"/>\n  <shifubutton [hidewhenclick]="hourglass" size="{{size}}" icon="{{icon}}" (click)="takePhoto()" label="{{label}}"></shifubutton>\n</div>\n'}),o("design:paramtypes",[l.LoadingController,a.TranslateService,r.ApiProvider])],e)}();t.ShifufileComponent=c},594:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(2),r=function(){function e(){this.lang="fr-FR",this.dt=0,this.onlyHour=!1,this.text=""}return e.prototype.ngOnInit=function(){this.text=a.getDate(this.dt,this.lang,this.onlyHour)},i([s.Input("lang"),o("design:type",String)],e.prototype,"lang",void 0),i([s.Input("value"),o("design:type",Number)],e.prototype,"dt",void 0),i([s.Input("onlyHour"),o("design:type",Boolean)],e.prototype,"onlyHour",void 0),e=i([s.Component({selector:"shifudate",template:'\x3c!-- Generated template for the ShifudateComponent component --\x3e\n<span *ngIf="text.length>0">\n  {{text}}\n</span>\n'}),o("design:paramtypes",[])],e)}();t.ShifudateComponent=r},595:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(22),r=function(){function e(e){this.sanitizer=e,this.images=[],this.size="20%",this.margin="5px",this.onclick=new s.EventEmitter}return e.prototype.selImage=function(e,t){var n=this;if(e.hasOwnProperty("src")){var i=new Image;i.onload=function(){n.onclick.emit({picture:i.src,src:e.src})},i.src=e.src}else{var o=document.getElementsByName("image_items");null!=o&&o.forEach(function(e){e.parentNode.style.backgroundColor="white"}),t.currentTarget.parentNode.style.backgroundColor="lightgrey",this.onclick.emit({picture:e.picture,url:e.picture,title:e.title})}},i([s.Input("images"),o("design:type",Array)],e.prototype,"images",void 0),i([s.Input("size"),o("design:type",String)],e.prototype,"size",void 0),i([s.Input("margin"),o("design:type",String)],e.prototype,"margin",void 0),i([s.Output("onclick"),o("design:type",s.EventEmitter)],e.prototype,"onclick",void 0),e=i([s.Component({selector:"shifugallery",template:'\x3c!-- Generated template for the ShifugalleryComponent component --\x3e\n\n<div style="margin:0px;padding:0px;display:inline-block;height:100%;width:100%;">\n  <div *ngFor="let img_item of images"\n       [ngStyle]="{\'display\':\'inline-block\',\'width\':size,\'height\':size,\'margin\':margin}">\n    <img\n      name="image_items" style="width: 100%;height:100%;"\n      [src]="img_item.picture"\n      (click)="selImage(img_item,$event)">\n  </div>\n</div>\n\n'}),o("design:paramtypes",[a.DomSanitizer])],e)}();t.ShifugalleryComponent=r},601:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=function(){function e(){this.code="",this.prefix="",this.onenter=new s.EventEmitter}return e.prototype.addKey=function(e){this.code+=e,6==this.code.length&&(this.onenter.emit({value:this.code}),this.clearCode())},e.prototype.clearCode=function(){this.code=""},i([s.Input("prefix"),o("design:type",Object)],e.prototype,"prefix",void 0),i([s.Output("onenter"),o("design:type",s.EventEmitter)],e.prototype,"onenter",void 0),e=i([s.Component({selector:"shifunumpad",template:'\x3c!-- Generated template for the ShifunumpadComponent component --\x3e\n<div style="display:inline-block;width:180px" no-lines text-center>\n  <ion-item no-lines text-center no-padding>\n\n    <span style="font-size: 30px;" *ngIf="code.length==0">{{prefix}}######</span>\n    <span style="font-size: 30px;" *ngIf="code.length>0">{{prefix}}{{code}}</span>\n  </ion-item>\n\n  <ion-grid no-padding no-margin no-lines>\n    <ion-row align-items-center *ngFor="let i of [0,1,2]">\n      <ion-col *ngFor="let j of [0,1,2]">\n        <shifubutton name="btnNumpad" color="secondary" size="45" label="{{i*3+j+1}}" (click)="addKey(i*3+j+1)"></shifubutton>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col><shifubutton name="btnNumpadClear" color="secondary" size="45" label="C" (click)="clearCode()"></shifubutton></ion-col>\n      <ion-col><shifubutton name="btnNumpad" color="secondary" size="45" label="0" (click)="addKey(0)"></shifubutton></ion-col>\n      <ion-col><shifubutton name="btnNumpadValid" color="secondary" size="45" icon="checkmark" (click)="onenter.emit({value:code})"></shifubutton></ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n'}),o("design:paramtypes",[])],e)}();t.ShifunumpadComponent=a},606:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(607),r=function(){function e(e){this.translate=e,this.label=""}return i([s.Input("label"),o("design:type",String)],e.prototype,"label",void 0),e=i([s.Component({selector:"shifulabel",template:"\x3c!-- Generated template for the ShifulabelComponent component --\x3e\n<ion-item no-lines no-margin>\n  <ion-label>\n    {{label | translate}}\n  </ion-label>\n  <ion-content item-end></ion-content>\n</ion-item>\n"}),o("design:paramtypes",[a.TranslateService])],e)}();t.ShifulabelComponent=r},8:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(44),l=n(106),u=n(2),c=n(5),d=function(){function e(e,t,n){this.events=e,this.storage=t,this.http=n,this.HAS_SEEN_TUTORIAL="hasSeenTutorial",this.lastSearchList=[],this.user={tarif:{tarif:3},connexions:[]},this.playlist={items:[]},this.playlistFrom="",this.friends=[],this.selectTab="",this.tutoOnGoing=!1}return e.prototype.join=function(e,t,n,i,o,s,a){return void 0===a&&(a=""),this.http.get(u.api("join","dest="+a+"&event="+e+"&user="+this.user.id+"&password="+t+"&from="+i+"&position="+o+"&message="+n+"&type_invite="+s))},e.prototype.clearPlaylist=function(){this.playlist=[],this.playlistFrom="",this.lastSearchList=[]},e.prototype.add=function(e,t){return void 0===t&&(t="mail"),this.http.post(u.api("adduser","method="+t),e)},e.prototype.load=function(e){var t=this;this.storage.get("user").then(function(n){null==n||c.isUndefined(n)?e(!1):(t.user.id=n,e(!0))}).catch(function(t){console.log(t),e(!1)})},e.prototype.get=function(e){return void 0===e&&(e=null),null!=e&&(this.user.id=e),this.http.get(u.api("getuser","user="+this.user.id))},e.prototype.login=function(e,t){return this.http.get(u.api("loginbyemail","email="+e+"&password="+t))},e.prototype.logout=function(){return u.$$("Demande de déconnexion, effacement des clé"),this.storage.clear(),this.http.get(u.api("logout","user="+this.user.id))},e.prototype.setId=function(e){this.user.id=e},e.prototype.getId=function(){return this.user.id},e.prototype.checkHasSeenTutorial=function(){return this.storage.get(this.HAS_SEEN_TUTORIAL).then(function(e){return e})},e.prototype.deleteScreen=function(e){return this.http.get(u.api("deleteScreen","user="+this.user.id+"&screen="+e))},e.prototype.calclikes=function(){return this.http.get(u.api("calclikes","user="+this.user.id))},e.prototype.delwidget=function(e){return this.http.get(u.api("delwidget","widget="+e+"&user="+this.user.id))},e.prototype.addfriendsemail=function(e){return this.http.get(u.api("addfriendsemail","email="+e+"&user="+this.user.id))},e.prototype.makePermanentInvitation=function(e){return this.http.get(u.api("makepermanentinvitation","dest="+e+"&user="+this.user.id))},e.prototype.loadcontacts=function(){var e=this;this.http.get(u.api("loadcontacts","user="+this.user.id)).subscribe(function(t){null!=t&&t.hasOwnProperty("items")&&(e.friends=[],t.items.forEach(function(t){e.friends.push({email:t.email,name:t.name,picture:t.picture})}))})},e.prototype.uploadto=function(e,t){return void 0===t&&(t="drive"),this.http.get(u.api("uploadto","event="+e+"&user="+this.user.id+"&service="+t)).timeout(1e5)},e.prototype.getPreviousImages=function(e){return void 0===e&&(e=20),this.http.get(u.api("getpreviousimages","user="+this.user.id+"&size="+e))},e.prototype.updatescreen=function(e){return this.http.post(u.api("updatescreen","user="+this.user.id),e)},e.prototype.shareevent=function(e,t,n,i,o,s){return void 0===t&&(t=""),void 0===n&&(n="home"),void 0===i&&(i="link"),void 0===o&&(o=!0),void 0===s&&(s=!1),this.http.get(u.api("shareevent","inverse="+s+"&event="+e+"&tab="+n+"&message="+t+"&from="+this.user.id+"&dests="+i+"&anonymous="+o))},e.prototype.creditaccount=function(e){return this.http.get(u.api("creditaccount","amount="+e+"&user="+this.user.id))},e.prototype.getmynewusers=function(e){return this.http.get(u.api("getmynewusers","user="+this.user.id+"&since="+e))},e.prototype.updatetarif=function(e){return this.http.get(u.api("updatetarif","user="+this.user.id+"&tarif="+e))},e.prototype.senduser=function(e,t){return void 0===t&&(t=null),null==t&&(t=this.user),this.http.post(u.api("senduser","update="+e),this.user)},e.prototype.addwidgettoscree=function(e,t){return this.http.get(u.api("addwidgettoscreen","widget="+e+"&code="+t+"&user="+this.user))},e.prototype.fusion=function(e){return this.http.get(u.api("fusion","email="+e))},e.prototype.delevent=function(e){return this.http.get(u.api("delevent","user="+this.user.id+"&event="+e))},e.prototype.sendvote=function(e,t){return this.http.post(u.api("sendvote","message="+e),t)},e.prototype.sendvotes=function(e){return this.http.post(u.api("sendvotes",""),e)},e.prototype.sendwidget=function(e){return this.http.post(u.api("sendwidget","user="+this.user.id),e)},e.prototype.getwidget=function(e,t){return void 0===t&&(t=!1),this.http.get(u.api("getwidget","user="+this.user.id+"&widget="+e+"&code="+t))},e.prototype.getwidgetfrommodel=function(e,t){return this.http.get(u.api("getwidgetfrommodel","user="+this.user.id+"&title="+e+"&description="+t))},e.prototype.bestEventsForMe=function(e){return void 0===e&&(e=""),this.http.get(u.api("besteventsforme","user="+this.user.id+"&filter="+e))},e.prototype.quitEvent=function(){return this.http.get(u.api("quit","user="+this.user.id))},e.prototype.autoconnexion=function(e){return this.http.get(u.api("autoconnexion","connexion="+e+"&user="+this.user.id))},e.prototype.getwidgets=function(e){return this.http.get(u.api("getwidgets","user="+this.user.id+"&activities="+e))},e.prototype.resend_password=function(e,t){return void 0===t&&(t=!1),this.http.get(u.api("resend_password","user="+e+"&reinit="+t))},e.prototype.loginbyemail=function(e,t){return this.http.get(u.api("loginbyemail","email="+e+"&password="+t))},e.prototype.getuserbyemail=function(e){return this.http.get(u.api("getuser","user="+e))},e.prototype.getAllTarifs=function(){return this.http.get(u.api("getalltarifs",""))},e.prototype.getFacebookPageAndEvents=function(){return this.http.get(u.api("getfacebookpageandevents","user="+this.user.id))},e.prototype.geteventsfrom=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=20),this.http.get(u.api("geteventsfrom","filter="+e+"&limit="+t+"&user="+this.user.id))},e.prototype.revoketoken=function(e){return this.http.get(u.api("revoketoken","token="+e+"&user="+this.user.id))},e.prototype.setwidgetonscreen=function(e,t){return this.http.get(u.api("setwidgetonscreen","screen="+e+"&widget="+t+"&user="+this.user.id))},e.prototype.getImageForFlyer=function(e,t,n,i){return void 0===e&&(e="local"),void 0===t&&(t=""),void 0===n&&(n=null),void 0===i&&(i=null),this.http.get(u.api("getimageforflyer","user="+this.user.id+"&source="+e+"&query="+t+"&lat="+n+"&lng="+i)).timeout(5e3)},e.prototype.getImagesFromMyCloud=function(e){return void 0===e&&(e=""),this.http.get(u.api("getimagesfrommycloud","user="+this.user.id+"&source="+e)).timeout(1e4)},e.prototype.canlogin=function(){return this.http.get(u.api("canlogin","user="+this.user.id))},e.prototype.getUsersBlacklist=function(){return this.http.get(u.api("getusersblacklist","user="+this.user.id))},e.prototype.closebet=function(e){return this.http.get(u.api("closebet","user="+this.user.id+"&bet="+e))},e.prototype.validate=function(e){return this.http.get(u.api("validate","user="+this.user.id+"&loterie="+e))},e.prototype.setreputation=function(e,t){return this.http.get(u.api("setreputation","user="+this.user.id+"&bet="+e+"&value="+t))},e.prototype.removebet=function(e){return this.http.get(u.api("removebet","user="+this.user.id+"&bet="+e))},e.prototype.clearhisto=function(){return this.http.get(u.api("clearhisto","user="+this.user.id))},e.prototype.buyticket=function(e,t){return void 0===t&&(t=0),this.http.get(u.api("buyticket","user="+this.user.id+"&loterie="+e+"&somme="+t))},e.prototype.upgradeTarif=function(){return this.http.get(u.api("upgradetarif","user="+this.user.id))},e.prototype.razme=function(){return this.http.get(u.api("razme","user="+this.user.id))},e.prototype.initdefaultevent=function(e,t,n,i,o){return void 0===o&&(o="public"),this.http.get(u.api("initevent",null==t&&null==n||i>1e4?"type="+o+"&version="+e+"&user="+this.user.id:"type="+o+"&version="+e+"&user="+this.user.id+"&lat="+t+"&lng="+n))},e.prototype.initevent=function(e){return this.http.post(u.api("initeventwithmodele","user="+this.user.id),e)},e.prototype.sendflyer=function(e){return this.http.post(u.api("sendflyer","user="+this.user.id),e)},e.prototype.makeFlyer=function(e,t,n,i,o,s,a){if(void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===s&&(s="white"),void 0===a&&(a=""),e.hasOwnProperty("title")&&e.hasOwnProperty("dtStart")){var r=" ";if(n&&(r=e.address).length>30){var l=r.indexOf(",");l>15&&(r=r.substr(0,l)+"\n"+r.substr(l+1))}var c="";if(i){var d=new Date;d.setTime(e.dtStart),c=d.toLocaleDateString()+" "+d.getHours()+":"+d.getMinutes()}var p=" ";o&&e.hasOwnProperty("description")&&(p=e.description);var h=" ";t&&(h=e.title);var f={title:{text:h,size:15,color:s},address:{text:r,size:10,color:s},teaser:{text:p,size:12,color:s},date:{text:c,size:10,color:s},templateFlyer:e.templateFlyer};return this.http.post(u.api("makeflyer","user="+this.user.id+"&url="+a),f)}},e.prototype.findeventbycode=function(e){return this.http.get(u.api("findeventbycode","code="+e+"&user="+this.user.id))},e.prototype.addtofavoritewidget=function(e){},e.prototype.delfavoritewidget=function(e){},e.prototype.sendwidgetbymail=function(e){},e.prototype.getusersifollow=function(){return this.http.get(u.api("getusersifollow","user="+this.user.id))},e=i([s.Injectable(),o("design:paramtypes",[a.Events,r.Storage,l.HttpClient])],e)}();t.UserData=d},82:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(15),u=n(8),c=n(324),d=n(325),p=n(326),h=n(327),f=n(107),m=n(2),g=n(6),v=n(35),E=n(16),b=n(20),y=function(){function e(e,t,n,i,o,s,a,r,l,u){this.modalCtrl=e,this.translate=t,this.viewCtrl=n,this.loadingCtrl=i,this.navParams=o,this.eventData=s,this.toastCtrl=a,this.api=r,this.settings=l,this.userData=u,this.newevent={address:"",option:{title:!0,date:!0,address:!0,teaser:!0}},this.showTypeEvent=!0,this.activities="Music,Photos,Messages,Sondages,Paris,Loterie,Presentation",this.showAddEventButton=!0,this.updateTitle=!1,this.defaultActivities="",this.defaultTypeOfEvent="",this.delayToStart=0}return e.prototype.ionViewDidLoad=function(){var e=this,t=this.navParams.get("zoom");null==t&&(t=10),t<15&&(t=15),this.userData.initdefaultevent(this.settings.version,this.navParams.get("lat"),this.navParams.get("lng"),this.navParams.get("precision")).subscribe(function(n){n.option={title:!0,date:!0,address:!0,teaser:!0},e.newevent=n,e.updateCategorie(e.defaultTypeOfEvent),null!=e.userData.user.connexions&&e.userData.user.connexions.length<3&&(e.newevent.title=""),e.defaultActivities=m.join(e.newevent.activities,","),null!=e.navParams.get("modele")&&(e.newevent=e.navParams.get("modele")),e.newevent.duration=e.newevent.dtEnd-e.newevent.dtStart,e.newevent.type="",e.newevent.ihm=e.settings.ihm,e.computeAddress(n),e.refreshDelay(),e.initMap(n.lat,n.lng,t)}),this.defaultTypeOfEvent="pro"==this.settings.ihm?"meeting":""},e.prototype.computeAddress=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=0),setTimeout(function(){null==e&&(e=n.newevent),m.reverse_geocode(google.maps,e.lat,e.lng,function(e){n.newevent.option.address=!0,n.newevent.address=e,n.refreshFlyer()})},1e3*t)},e.prototype.initTarget=function(){var e=this.map.getCenter();null!=this.target?this.target.setPosition(e):this.target=new google.maps.Marker({icon:this.newevent.icon,position:e,name:"Soiree",draggable:!0,map:this.map})},e.prototype.refreshDelay=function(){this.newevent.delay=m.getDelayInMinutes(this.newevent.dtStart),m.scrollElt(this.content,"eventFlyer")},e.prototype.initMap=function(e,t,n,i){void 0===i&&(i=null),null!=e&&null!=t||(e=48,t=2,n=3);var o=this.mapElement.nativeElement,s=this;s.map=new google.maps.Map(o,{center:{lat:e,lng:t},zoom:n}),s.map.addListener("mousedown",function(e){s.newevent.address=""}),s.map.addListener("mouseup",function(e){var t=this.getCenter();s.newevent.lat=t.lat(),s.newevent.lng=t.lng(),m.reverse_geocode(google.maps,t.lat(),t.lng(),function(e){s.newevent.address=e,s.refreshFlyer()})}),s.map.addListener("bounds_changed",function(e){s.initTarget();var t=s.map.getCenter();void 0!=t&&(s.newevent.lat=t.lat(),s.newevent.lng=t.lng())}),s.map.setOptions({disableDefaultUI:!0,rotateControl:!1,clickableIcons:!1}),s.initTarget(),setTimeout(function(){null!=i&&i()},500)},e.prototype.searchAddress=function(e){var t=this;if(13==e){var n=this.newevent.address;null!=n&&n.length>0&&m.geocode(google.maps,n,function(e){null!=e&&null!=e.lat&&null!=e.lng&&(t.map.setCenter(e),t.newevent.address=n,t.refreshFlyer())})}},e.prototype.refreshFlyer=function(e){var t=this;void 0===e&&(e=null),null==this.newevent.templateFlyer&&(this.newevent.activities.indexOf("bets")>-1&&(this.newevent.templateFlyer="bets"),this.newevent.activities.indexOf("photo")>-1&&(this.newevent.templateFlyer="photo"),this.newevent.activities.indexOf("music")>-1&&(this.newevent.templateFlyer="music"),"meeting"==this.newevent.type&&(this.newevent.templateFlyer="pro")),this.userData.makeFlyer(this.newevent,this.newevent.option.title,this.newevent.option.address,this.newevent.option.date,this.newevent.option.teaser,"white",this.newevent.templateFlyer).subscribe(function(n){t.newevent.flyer=n.photo,t.newevent.templateFlyer=n.text,null!=e&&e()})},e.prototype.quitAddEvent=function(e){var t=this;void 0===e&&(e=!0);var n=this;if(e){var i=m.loading(this,this.translate.instant("ADDEVENT.BUILDINGYOUREVENT"),20);n.eventData.add(n.userData.user.id,n.newevent).subscribe(function(e){i.dismiss(),t.userData.user=e,m.toast(n.toastCtrl,e.message,n.translate),""==e.message?setTimeout(function(){n.viewCtrl.dismiss(n.newevent)},100):n.viewCtrl.dismiss()})}else n.viewCtrl.dismiss()},e.prototype.createEvent=function(){var e=this,t=this;this.showAddEventButton=!1,t.refreshFlyer(function(){e.userData.sendflyer({from:e.userData.user,idEvent:e.newevent.id,photo:e.newevent.flyer,format:"jpeg"}).subscribe(function(n){t.newevent.flyer=n.url,t.newevent.activities.indexOf("music")>-1&&void 0==t.userData.user.musicServer?m.openModal(e.modalCtrl,f.MusicserverPage,{message:"",newEventActivities:t.newevent.activities},function(e){null==e.user&&t.newevent.activities.splice(t.newevent.activities.indexOf("music"),1),t.quitAddEvent(!0)}):e.quitAddEvent(!0)},function(e){m.toast(t.toastCtrl,"ERROR.GENERAL",t.translate),t.quitAddEvent(!1)})})},e.prototype.addEvent_advanced=function(){var e=this;this.fab.close(),m.openModal(this.modalCtrl,d.AddeventAdvancedPage,{newevent:this.newevent},function(t){null!=t&&(e.newevent=t,e.defaultActivities=m.join(t.activities,","))})},e.prototype.addEvent_flyer=function(){var e=this;this.fab.close(),m.openModal(this.modalCtrl,h.AddeventFlyerPage,{newevent:this.newevent},function(t){null!=t&&(e.newevent=t)})},e.prototype.addEvent_date=function(){var e=this;m.openModal(this.modalCtrl,p.AddeventDatePage,{newevent:this.newevent},function(t){e.fab.close(),null!=t&&(e.newevent=t),e.refreshDelay(),e.refreshFlyer()})},e.prototype.changeTitle=function(){this.updateTitle=!0},e.prototype.openModele=function(){var e=this;this.fab.close(),m.openModal(this.modalCtrl,c.AddeventModelePage,{newevent:this.newevent},function(t){null!=t&&(e.showTypeEvent=!1,"basic"==t.type?(e.newevent.type=t.type,e.newevent.templateFlyer=t.templateFlyer,e.newevent.widgetDefault=t.widgetDefault,e.newevent.activities=[],t.activities.split(",").forEach(function(t){e.newevent.activities.push(t)}),e.updateTitle||(e.newevent.title=t.title),e.newevent.autologin=t.autologin,e.newevent.musicserver=t.musicserver,null==t.duration&&(t.duration=480),e.newevent.dtStart=Number(e.newevent.dtStart),e.defaultActivities=t.activities,e.newevent.dtEnd=e.newevent.dtStart+Number(6e4*t.duration)):(e.defaultActivities=t.activities.join(","),t.duration=t.dtEnd-t.dtStart,""==e.newevent.title&&(e.newevent.title=t.title),t.dtStart=Number(e.newevent.dtStart),t.dtEnd=t.dtStart+t.duration,t.duration=t.duration/6e4,e.newevent=t),e.searchAddress(13),e.refreshDelay(),e.refreshFlyer(),m.$$("newevent=",e.newevent))})},e.prototype.changeDefaultAddress=function(){var e=this;this.userData.user.defaultAddress=this.newevent.address,this.userData.senduser("defaultAddress",this.userData.user).subscribe(function(t){e.searchAddress(13)})},e.prototype.selImage=function(){var e=this;m.openModal(this.modalCtrl,v.ImageCreatorPage,{ratio:1.5,upload:!0},function(t){null!=t&&(e.newevent.templateFlyer=t.value,e.refreshFlyer())})},e.prototype.refreshTemplateFlyer=function(){this.newevent.templateFlyer=null,this.refreshFlyer()},e.prototype.updateAct=function(e){this.newevent.activities=e.value.split(",")},e.prototype.updateCategorie=function(e){m.scrollElt(this.content,"eventGeneral"),this.newevent.type=e.value,null!=this.newevent.type&&(this.showTypeEvent=this.newevent.type.length>0),null!=this.newevent.type&&(this.showTypeEvent=this.newevent.type.length>0),"meeting"==e.value?(this.updateTitle||(this.newevent.title=this.userData.user.firstname+"' meeting"),this.newevent.activities=["presentation","message","survey"]):(this.updateTitle||(this.newevent.title=this.userData.user.firstname+"' party"),this.newevent.activities=["music","photo","message","survey"]),this.newevent.templateFlyer=null,this.refreshFlyer()},e.prototype.showFlyerSection=function(){m.scrollElt(this.content,"eventFlyer")},i([s.ViewChild("mapCanvas"),o("design:type",s.ElementRef)],e.prototype,"mapElement",void 0),i([s.ViewChild("fab"),o("design:type",a.FabContainer)],e.prototype,"fab",void 0),i([s.ViewChild(a.Content),o("design:type",a.Content)],e.prototype,"content",void 0),e=i([s.Component({selector:"page-addevent",template:'\x3c!--\n  Generated template for the AddeventPage page.\n--\x3e\n<ion-header>\n\n  <shifutitle title="ADDEVENT.TITLE" [menu]="false"  help="createEvent">\n    <shifubutton [hidewhenclick]="true"\n                 [small]="true"\n                 *ngIf="newevent.title!=null && newevent.title.length>3"\n                 id="btnSaveEvent"\n                 icon="checkmark"\n                 label="LIB.SAVE"\n                 (click)="createEvent()">\n    </shifubutton>\n    <shifubutton id="cmdClose" tips="LIB.CANCEL" [small]="true" icon="close" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n\n</ion-header>\n\n\n<ion-content no-padding text-center>\n\n  <tuto position="title" help="tuto_createevent" label="ADDEVENT.TUTO"></tuto>\n  <tuto position="title" start="15" label="Vous pouvez également utilisé un des modèles pour créer rapidement un événement" show="cmdUseModel"></tuto>\n\n  <ion-fab #fab bottom right>\n    <button id="btnFab" ion-fab color="primary"><ion-icon name="settings"></ion-icon></button>\n    <ion-fab-list side="top">\n      <button ion-fab class="option" id="btnModele" (click)="openModele()">\n        <ion-icon name="brush"></ion-icon>\n        <div class="label">{{\'ADDEVENT.USEMODELS\' | translate}}</div>\n      </button>\n      <button ion-fab id="btnAdvanced" (click)="addEvent_advanced()">\n        <ion-icon name="cog"></ion-icon>\n        <div class="label">{{\'ADDEVENT.SETTINGS\' | translate}}</div>\n      </button>\n\n      <button ion-fab id="btnFlyer" (click)="addEvent_flyer()">\n        <ion-icon name="image"></ion-icon>\n        <div class="label">Flyer</div>\n      </button>\n\n      <button ion-fab id="btnDate" (click)="addEvent_date()">\n        <ion-icon name="calendar"></ion-icon>\n        <div class="label">{{\'ADDEVENT.SETDATES\' | translate}}</div>\n      </button>\n\n    </ion-fab-list>\n  </ion-fab>\n\n\n  \x3c!--Type l\'événement version simplifiée --\x3e\n  <shifucard label="LIB.TEMPLATES" [visible]="showTypeEvent"\n             id="eventTemplate"\n             (onclick)="openModele()" title="ADDEVENT.TYPEEVENT"\n             *ngIf="userData.user.connexions.length<=20" text-center>\n    <shifubuttongroup\n      id="cmdEventType"\n      [exclude]="true"\n      labels="LIB.MEETING,LIB.PARTY"\n      images="./assets/img/meeting.webp,./assets/img/party_large.png"\n      size="150px"\n      values="meeting,party"\n      [default]="defaultTypeOfEvent"\n      (onchange)="updateCategorie($event)">\n    </shifubuttongroup>\n\n\n    \x3c!--<shifubutton--\x3e\n    \x3c!--id="cmdUseModel"--\x3e\n    \x3c!--tips="Construire rapidement un événement en utilisant des modéles ou d\'autres événements"--\x3e\n    \x3c!--label="ADDEVENT.USEMODELS"--\x3e\n    \x3c!--(click)="openModele()">--\x3e\n    \x3c!--</shifubutton>--\x3e\n\n  </shifucard>\n\n\n  \x3c!--titre de l\'événement--\x3e\n  <shifucard title="LIB.GENERAL" [visible]="newevent.type?.length>0" id="eventGeneral">\n    <shifuinput\n      fontsize="x-large"\n      [focus]="true"\n      [clearInput]="true"\n      size="50"\n      id="txtTitle"\n      label="LIB.TITLE"\n      placeholder="{{\'ADDEVENT.SETTITLE\' | translate}}"\n      [(ngModel)]="newevent.title"\n      (onchange)="changeTitle()"\n      (onenter)="showFlyerSection()"\n      (ionBlur)="refreshFlyer()" max="40">\n    </shifuinput>\n    <br>\n\n\n    <shifuinput\n      label="ADDEVENT.DESCRIPTION"\n      id="txtDescription"\n      *ngIf="userData.user.connexions.length>5"\n      [(ngModel)]="newevent.description" text-center\n      (ionBlur)="refreshFlyer()" >\n    </shifuinput>\n\n\n    <shifuinput\n      label="ADDEVENT.PASSWORD"\n      id="txtPassword"\n      *ngIf="userData.user.connexions.length>5"\n      [(ngModel)]="newevent.password">\n    </shifuinput>\n\n\n    <ion-item>\n      <ion-label>\n        <span *ngIf="userData.user.connexions.length<10" style="color:grey">{{\'ADDEVENT.BEGININ\' | translate}}</span>:\n        <span (click)="addEvent_date()" text-right *ngIf="newevent.delay>200">{{newevent.dtStart | date: "dd/MM - HH:mm"}}</span>\n          <shifutimer *ngIf="newevent.delay<=200 && newevent.delay>0" [onlyPositif]="true" [end]="newevent.dtStart"></shifutimer>\n          <span *ngIf="newevent.delay<10">{{"LIB.NOW" | translate}}</span>\n        <br>\n        <span  style="color:grey">\n        {{\'LIB.DURATION\' | translate}}:&nbsp;\n        </span>\n        {{newevent.duration/(3600*1000) | number:"1.0-0"}} hrs<br>\n      </ion-label>\n\n      <shifubutton item-end\n        tips="Modifier la date de début et la durée de l\'événement"\n                   id="cmdChangeDate"\n        [small]="true" icon="build" label="LIB.MODIFY"\n        (click)="addEvent_date()">\n      </shifubutton>\n    </ion-item>\n\n  </shifucard>\n\n  \x3c!--Détail des activités pour les événements--\x3e\n  <shifucard label="LIB.TEMPLATES"\n             title="ADDEVENT.ACTIVITIES"\n             id="eventActivities"\n             text-center\n             *ngIf="userData.user.connexions?.length>20"\n             (onclick)="openModele()" >\n    <br>\n    <shifubuttongroup\n            labels="{{activities}}"\n            id="cmdActivities"\n            size="80px" fontsize="small"\n            values="music,photo,message,survey,bet,loterie,presentation"\n            descriptions="ADDEVENT.ACT_MUSIC,ADDEVENT.ACT_PHOTO,ADDEVENT.ACT_MESSAGE,ADDEVENT.ACT_SONDAGE,ADDEVENT.ACT_BETS,ADDEVENT.ACT_LOTERIE,ADDEVENT.ACT_PRESENTATION"\n            [default]="defaultActivities"\n            (onchange)="updateAct($event)">\n    </shifubuttongroup>\n  </shifucard>\n\n\n\n  <shifucard title="ADDEVENT.FLYERPREVIEW" icon="refresh" text-center id="eventFlyer"\n             [visible]="newevent.type?.length>0 || userData.user.connexions.length>5"\n             (onclick)="refreshTemplateFlyer()">\n    \x3c!--Ici on doit mettre la hauteur car l\'apparition du card implique d\'avoir fixé la hauteur préalablement--\x3e\n    <ion-grid no-margin style="height: 320px;">\n      <ion-row>\n        <ion-col col-auto>\n          <shifuflyer width="200px" height="300px"  id="theFlyer" [flyer]="newevent.flyer">\n            <br><br>\n            <shifubutton tips="Modifier la photo du flyer" id="btnFlyer3" [small]="true" icon="build" label="Flyer" (click)="addEvent_flyer()"></shifubutton>\n          </shifuflyer>\n        </ion-col>\n        <ion-col col-6 text-center>\n          <span text-wrap>{{\'ADDEVENT.CHANGEFLYER\' | translate}}</span><br>\n          <shifubutton tips="Modifier la photo du flyer" id="btnFlyer2" [small]="true" icon="build" label="Flyer" (click)="addEvent_flyer()"></shifubutton>\n          <br><br><br><br><br><br>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n\n    <br><br>\n\n  </shifucard>\n\n\n  <shifucard title="ADDEVENT.EVENTADDRESS"\n             [visible]="newevent.type?.length>0 && updateTitle" help="event_address" id="eventAddress">\n    <ion-item no-padding no-border no-margin no-lines>\n      <ion-searchbar id="txtAddress"\n                     [(ngModel)]="newevent.address"\n                     (ionBlur)="searchAddress(13)"\n                     (keypress)="searchAddress($event.keyCode)">\n      </ion-searchbar>\n    </ion-item>\n\n    <div\n      #mapCanvas\n      (mouseup)="computeAddress(null,2)"\n      style="margin:0px;padding:0px;width:100%;text-align: center;"\n      id="map_canvas">\n    </div>\n\n  </shifucard>\n\n</ion-content>\n'}),o("design:paramtypes",[r.ModalController,g.TranslateService,a.ViewController,r.LoadingController,a.NavParams,l.EventDataProvider,a.ToastController,E.ApiProvider,b.SettingsProvider,u.UserData])],e)}();t.AddeventPage=y},83:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(15),u=n(8),c=n(44),d=n(6),p=n(2),h=n(187),f=n(188),m=n(2),g=n(20),v=function(){function e(e,t,n,i,o,s,a,r,l,u,c){this.navCtrl=e,this.navParams=t,this.loadingCtrl=n,this.settings=i,this.eventData=o,this.userData=s,this.viewCtrl=a,this.storage=r,this.translate=l,this.modalCtrl=u,this.toastCtrl=c,this.widgets=[],this.query="",this.close=!1,this.widget=null,this.categories="",this._filter="",this.publicFilter=!0,this._query="",this._defaultCategories="",e.canGoBack()&&(this.close=!0),this.categories=this.translate.instant("WIDGET.CATEGORIESFILTER"),null!=this.navParams.get("widgetFilter")&&(this._defaultCategories=this.navParams.get("widgetFilter"),this._filter=this._defaultCategories)}return e.prototype.ionViewWillEnter=function(){m.toast(this.toastCtrl,this.navParams.get("message"),this.translate),this.refresh()},e.prototype.refresh=function(){var e=this,t=m.loading(this);this.userData.getwidgets(null).subscribe(function(n){e.widgets=[],t.dismiss(),n.items.forEach(function(t){t.qrcode="",0==t.description.indexOf("PROFIL.")&&(t.description=e.translate.instant(t.description,e.userData.user.lang)),t.tag=t.description+" "+t.title+" "+t.activity,p.isFavorite(e.userData.user,t)&&(t.tag=t.tag+" favorite",t.favorite=!0),!e.publicFilter&&t._public||e.widgets.push(t)})})},e.prototype.addWidget=function(){var e=this,t=this,n=t.translate.instant("WIDGETSTORE.NEWWIDGET_TITLE"),i=t.translate.instant("WIDGETSTORE.NEWWIDGET_DESCRIPTION");t.userData.getwidgetfrommodel(n,i).subscribe(function(n){t.widget=n,t.widget.parentid=t.widgets[0].id,p.openModal(e.modalCtrl,f.HtmleditorPage,{user:t.userData.user.id,widget:t.widget,mode:"clone"},function(e){null!=e&&void 0!=e.widget&&t.userData.sendwidget(e.widget).subscribe(function(e){t.refresh()})})})},e.prototype.filterFavorite=function(){this.query="favorite"},e.prototype.openWidget=function(e){var t=this,n=this;"AddeventAdvancedPage"!=n.navParams.get("from")&&void 0==n.navParams.get("screen")?this.userData.getwidget(e.id,!0).subscribe(function(e){null!=e&&p.openModal(t.modalCtrl,h.WidgetPage,{widget:e,user:t.userData.user,event:t.eventData.event,preview:!0},function(e){n.refresh()})}):this.viewCtrl.dismiss(e)},e.prototype.onclose=function(){this.viewCtrl.dismiss()},e.prototype.updateTextQuery=function(){this.updateQuery()},e.prototype.updateQuery=function(){this._query="",this._filter.length>0&&(this._query=this._filter),this.query.length>0&&(this._query=this.query),this._filter.length>0&&this.query.length>0&&(this._query=this.query+" AND "+this._filter),this._query=this._query.trim()},e.prototype.updateFilter=function(e){this._filter=e.value.replace(","," AND "),this.updateQuery()},e=i([s.Component({selector:"page-widgetstore",template:'\x3c!--\n  Generated template for the WidgetstorePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n  <shifutitle [menu]="false" title="WIDGETSTORE.TITLE">\n    \x3c!--<shifubutton *ngIf="navCtrl.canGoBack()" icon="close" (click)="onclose()"></shifubutton>--\x3e\n    <shifubutton icon="close" (click)="onclose()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding>\n  <ion-list no-lines no-border>\n    <ion-list-header text-wrap>\n      <tuto position="title" label="WIDGETSTORE.TUTO"></tuto>\n    <shifucard title="LIB.FILTER" tuto="WIDGETSTORE.TUTOFILTER" text-center>\n      <shifucheckbox label="WIDGETSTORE.SHOWPUBLICWIDGET" [(ngModel)]="publicFilter" (onchange)="refresh()"></shifucheckbox>\n      {{\'LIB.CATEGORY\' | translate}}:<br>\n      <shifubuttongroup\n        position="center"\n        size="20vw"\n        labels="{{categories}}"\n        values="music,photo,message,bet,survey,people,presentation,commands"\n        [default]="_defaultCategories"\n        (onchange)="updateFilter($event)">\n      </shifubuttongroup>\n    </shifucard>\n    </ion-list-header>\n      <ion-item shifuid="widget" *ngFor="let widget of widgets | filter: \'tag\':query | filter: \'activity\':_filter" (click)="openWidget(widget)">\n        <ion-avatar item-start>\n          <img src="{{widget.picture}}">\n        </ion-avatar>\n        {{widget.title}}&nbsp;<ion-icon *ngIf="widget.favorite" name="star"></ion-icon>\n          <p text-warp>\n            {{widget.description}}\n          </p>\n      </ion-item>\n  </ion-list>\n</ion-content>\n\n\n<ion-footer>\n  <ion-toolbar no-border-top>\n    <ion-searchbar color="primary" id="txtSearch" [(ngModel)]="query"  (ionChange)="updateQuery()" placeholder="{{\'WIDGETSTORE.SEARCH\' | translate }}">\n    </ion-searchbar>\n    <ion-buttons end>\n      <shifubutton *ngIf="settings.version>=1" id="btnFavorite" icon="star" (click)="filterFavorite()"></shifubutton>\n      <shifubutton id="btnAddWidget" icon="add-circle" (click)="addWidget()"></shifubutton>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-footer>\n'}),o("design:paramtypes",[r.NavController,a.NavParams,r.LoadingController,g.SettingsProvider,l.EventDataProvider,u.UserData,a.ViewController,c.Storage,d.TranslateService,r.ModalController,a.ToastController])],e)}();t.WidgetstorePage=v},84:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(3),r=n(3),l=n(8),u=n(2),c=n(189),d=n(107),p=n(6),h=n(2),f=n(2),m=n(35),g=n(328),v=n(16),E=n(191),b=n(192),y=n(194),T=n(85),I=n(20),D=function(){function e(e,t,n,i,o,s,a,r,l,c,d,p){this.modalCtrl=e,this.navCtrl=t,this.toastCtrl=n,this.notifs=i,this.navParams=o,this.userData=s,this.alertCtrl=a,this.viewCtrl=r,this.translate=l,this.events=c,this.api=d,this.settings=p,this.images=[],this.friends=[],this.email="",this.n_connexions=0,this.services=[],this.from="",this.tarifs=["Basic","Pro","Premium","Pilote"],this.users_blacklist=[],this.users_follow=[],this.toggled=!1,this.profils=[{lib:"Perso",value:u.PROFIL_PERSO,help:""},{lib:"Public",value:u.PROFIL_PROPUBLIC,help:""},{lib:"Entreprise",value:u.PROFIL_PROPRIVE,help:""}],this.updatePersoPhoto=function(e){var t=this;f.autoRotate(e.value,.3,function(e){t.userData.sendflyer(f.createPhoto(t.userData.user,e)).subscribe(function(e){t.userData.user.picture=e.url})})},this.from=this.navParams.get("from"),null!=this.settings&&(this.services=u.getAllServices(this.settings.services,o.get("filter"),this.userData.user.connexions.length,this.settings.version)),this.n_connexions=this.userData.user.connexions.length}return e.prototype.handleSelection=function(e){this.userData.user.picture=e.char,this.toggled=!this.toggled,this.updateUser()},e.prototype.creditAccount=function(){0==f.getEnv()&&(this.userData.user.realCredits+=20,this.userData.senduser("realCredits").subscribe(function(){}))},e.prototype.selImage=function(){var e=this;h.openModal(this.modalCtrl,m.ImageCreatorPage,{maxsize:600,filter:"icon,cloud,phone",click:"icon"},function(t){null!=t&&e.userData.sendflyer(f.createPhoto(e.userData.user,t.value)).subscribe(function(t){e.userData.user.picture=t.url})})},e.prototype.opentarifs=function(){h.openModal(this.modalCtrl,g.TarifsPage,{user:this.userData.user},function(e){})},e.prototype.setPopupAction=function(e){this.openPopup=e},e.prototype.ionViewDidLoad=function(){this.refreshList(),this.userData.user.hasOwnProperty("followers")||(this.userData.user.followers=[]);for(var e=0;e<20;e++)this.userData.user.connexions.push(e)},e.prototype.openHome=function(){h.openWindow(this.userData.user.home)},e.prototype.openScreens=function(){this.navCtrl.push(c.ScreensPage,{user:this.userData.user.id})},e.prototype.updateUser=function(){this.userData.senduser("home,picture,userSettingsFile,musicServer,profil,tags,firstname,publicPatterns,picture,defaultAddress,humeur").subscribe(function(e){})},e.prototype.ionViewWillLeave=function(){this.updateUser()},e.prototype.openMusicServer=function(){var e=this;u.openModal(this.modalCtrl,d.MusicserverPage,{user:this.userData.user},function(t){e.userData.user=t,e.updateUser()})},e.prototype.isActive=function(e){return e.checked?"primary":"secondary"},e.prototype.openTarifs=function(){h.openModal(this.modalCtrl,g.TarifsPage,{},function(e){})},e.prototype.onClickService=function(e){var t=this;e.checked?t.userData.revoketoken(e.token).subscribe(function(n){t.userData.user=n,"deezer"!=e.token&&"spotify"!=e.token||t.userData.clearPlaylist(),t.userData.playlist=[],t.refreshList(e)}):u.openGeneral(e.token,this.userData.user).then(function(){t.updateUser(),t.userData.get().subscribe(function(n){null!=n&&(null!=t.userData.user.email&&0==t.userData.user.email.length&&n.email.length>0&&(f.toast(t.toastCtrl,"PERSO.PROFILCHANGE",t.translate),t.events.publish("user:refresh",n)),t.userData.user=n,t.refreshList(e))})})},e.prototype.refreshList=function(e){var t=this;void 0===e&&(e=""),this.userData.getUsersBlacklist().subscribe(function(e){null!=e&&(t.users_blacklist=e.items)}),this.userData.getusersifollow().subscribe(function(e){null!=e&&(t.users_follow=e.items)}),this.services.forEach(function(e){var n=t.userData.user.hasOwnProperty("accessTokens")&&t.userData.user.accessTokens.hasOwnProperty(e.token);e.checked=n}),"contact"!=e&&"facebook"!=e||this.userData.loadcontacts()},e.prototype.razUser=function(){var e=this,t=this;h.showPopup({title:"PERSO.RAZUSER",placeholder:"",confirmButton:"OK",cancelButton:"LIB.CANCEL",type:"text",translate:this.translate},this.alertCtrl,function(n){"yes"==n.toLowerCase()&&e.userData.razme().subscribe(function(e){t.events.publish("user:logout")})})},e.prototype.removeFromBlacklist=function(e){var t=this;this.api.blacklist(this.userData.user.id,e.id,!1).subscribe(function(){t.refreshList()})},e.prototype.resetSecretCode=function(){},e.prototype.giveEmail=function(){var e=this;h.openModal(this.modalCtrl,E.LoginemailPage,{from:b.ProfilPage.name,pseudo:this.userData.user.firstname},function(t){null!=t&&(e.userData.user.firstname=t.firstname,e.userData.user.email=t.email,e.updateUser(),e.userData.senduser("email").subscribe(function(t){0==t.message.length?(f.toast(e.toastCtrl,"PERSO.PROFILCHANGE",e.translate),e.userData.user=t):f.toast(e.toastCtrl,t.message,e.translate)}))})},e.prototype.selAvatar=function(){var e=this;h.openModal(this.modalCtrl,y.LoginavatarPage,{pseudo:!1,from:"perso"},function(t){null!=t&&(e.userData.user.picture=t.picture)})},e.prototype.enableNotifications=function(){this.notifs.requestPermission()},e.prototype.removeUserFollow=function(e){var t=this;this.api.delFollower(this.userData.user.id,e.id).subscribe(function(){setTimeout(function(){t.refreshList()},1e3)})},e.prototype.changeUserSettings=function(){var e=this;h.showPopup({title:"Coller l'adresse de vos paramétres",default:this.userData.user.userSettingsFile,confirmButton:"LIB.OK",type:"text",translate:this.translate},this.alertCtrl,function(t){null!=t&&(e.userData.user.userSettingsFile=t)})},e.prototype.renewDeveloperToken=function(){var e=this;this.userData.user.developerToken="init",this.userData.senduser("developerToken").subscribe(function(t){e.userData.user=t})},e=i([s.Component({selector:"page-perso",template:'<ion-header>\n  <shifutitle [menu]="false" title="PERSO.TITLE"  help="#">\n    <shifubutton id="btnClose" icon="checkmark" (click)="viewCtrl.dismiss()"></shifubutton>\n  </shifutitle>\n</ion-header>\n\n<ion-content no-padding no-margin>\n\n  <shifucard [visible]="true" [hidden]="from==\'search\'"\n             title="{{userData.user.firstname}}"\n             [showButton]="userData.user.email==\'\'"\n             sizeButton="150px"\n             label="PERSO.GIVEEMAIL"\n             (onclick)="giveEmail()">\n    <ion-item text-center no-margin no-border no-padding no-lines>\n      <shifuimageprofil [openprofil]="false" style="display:inline-block" size="150px" [user]="userData.user"></shifuimageprofil>\n      <br>\n      <shifucamera id="selfile" icon="camera"\n                   sizeiconwidth="10px" sizeiconheight="10px"\n                   (onTake)="updatePersoPhoto($event)">\n      </shifucamera>\n      <shifubutton  id="btnProfilPicture" icon="images" (click)="selImage()"></shifubutton>\n      <shifubutton  id="btnProfilAvatar" icon="person" (click)="selAvatar()"></shifubutton>\n    </ion-item>\n\n    <shifuinput size="40" id="txtFirstname" label="LIB.FIRSTNAME" [(ngModel)]="userData.user.firstname"></shifuinput>\n    \x3c!--<shifucheckbox id="chkAnonymous" label="PROFIL.ANONYMOUS" *ngIf="userData.user.connexions.length>30" [(ngModel)]="userData.user.anonymous"></shifucheckbox>--\x3e\n\n    <ion-item no-margin no-lines no-border *ngIf="n_connexions>10">\n      <shifuinput size="80" id="txtHumeur"  label="PERSO.HUMEUR" [(ngModel)]="userData.user.humeur"></shifuinput>\n      <shifuinput size="100" id="txtHome"  label="PERSO.HOME" [(ngModel)]="userData.user.home" (onenter)="openHome()"></shifuinput>\n      <shifuinput size="150" id="txtAddress" label="LIB.ADDRESS" [(ngModel)]="userData.user.defaultAddress"></shifuinput>\n    </ion-item>\n\n    \x3c!--<div style="width:100%;text-align: center;" *ngIf="userData.user.nEventCreated>0">--\x3e\n    \x3c!--<shifubutton  id="btnMusicServer" label="PERSO.CHANGEMUSICSERVER" (click)="openMusicServer()"></shifubutton>--\x3e\n    \x3c!--</div>--\x3e\n  </shifucard>\n\n  <shifucard title="Preferences">\n    <shifucheckbox id="btnNotifications"\n                   label="Notifications"\n                   help="preferences"\n                   (onclick)="enableNotifications()">\n    </shifucheckbox>\n  </shifucard>\n\n  \x3c!--<shifucard title="PERSO.CHOOSEAVATAR" *ngIf="images!=null && images.length>0">--\x3e\n  \x3c!--<div class="item item-text-wrap">--\x3e\n  \x3c!--<img *ngFor="let img of images"--\x3e\n  \x3c!--src="{{img.photo}}"--\x3e\n  \x3c!--style="margin: 3px;display:inline;"--\x3e\n  \x3c!--class="avatar-large"--\x3e\n  \x3c!--(click)="selImage(img)">--\x3e\n  \x3c!--</div>--\x3e\n  \x3c!----\x3e\n  \x3c!--</shifucard>--\x3e\n\n\n  <shifucard [hidden]="from==\'search\'"\n             [visible]="false"\n             tuto="PERSO.TUTO_OFFER"\n             title="PERSO.YOUROFFER"\n             help="tarifs">\n    <ion-item no-border text-center no-padding (click)="creditAccount()">\n      \x3c!--on ne montre pas le crédit si on est en tarif pilote--\x3e\n      <span no-margin no-padding *ngIf="userData.user.tarif!=undefined && userData.user.tarif.tarif!=3">{{\'LIB.ACCOUNT\' | translate}}:&nbsp;{{userData.user.realCredits | number:"2.1-5"}}\n            &nbsp;{{\'LIB.MONEY\' | translate}}&nbsp;\n          </span>\n      <span style="font-size: xx-large">{{userData.user.tarif.label}}</span>\n    </ion-item>\n\n    <shifubutton *ngIf="userData.user.tarif!=undefined && userData.user.tarif.tarif!=3"\n                 item-end id="btnTarifs"\n                 label="LIB.MODIFY"\n                 (click)="openTarifs()">\n    </shifubutton>\n  </shifucard>\n\n\n  \x3c!--\n        <div class="text-center" *ngIf="userData.user.realcredit<20">\n          <div id="paypal-button"></div>&nbsp;\n          <button *ngIf="paymentAvailable" class="button icon-left ion-ios-pie button-positive button-small" (click)="googlePaiement()">\n            {{\'LIB.BUY\' | translate}}\n          </button>\n        </div>\n              --\x3e\n\n\n  \x3c!--\n  <div style="text-align: center" *ngIf="userData.user.nLocalFile>0">\n    {{userData.user.nLocalFile}}&nbsp;{{\'PERSO.LOCALFILE\' | translate }}\n  </div>\n           --\x3e\n\n  \x3c!--\n  <tuto label="PERSO.TUTO_SERVICES"></tuto>\n  --\x3e\n  <shifucard title="PROFIL.LABELSERVICETIERS"\n             tuto="PERSO.TUTOSERVICETIERS"\n             help="services"\n             [visible]="userData.user.connexions?.length>100"\n             >\n    <ion-list no-border no-margin no-lines>\n      <ion-item *ngFor="let item of services">\n        <ion-label style="font-size: small" text-wrap>{{item.token.toUpperCase()+".DESCRIPTION" | translate}}</ion-label>\n        <button name="btnServices" style="width: 100px" ion-button [color]="isActive(item)" item-end (click)="onClickService(item)">{{ item.text }}</button>\n      </ion-item>\n    </ion-list>\n  </shifucard>\n\n  <shifucard title="Blacklist" tuto="PERSO.TUTO_BLACKLIST" *ngIf="users_blacklist!=null && users_blacklist.length>0">\n    <ion-list>\n      <ion-item *ngFor="let user of users_blacklist">\n        <ion-avatar item-start>\n          <shifuimageprofil shifuid="users" [user]="user"></shifuimageprofil>\n        </ion-avatar>\n        {{user.firstname}}&nbsp;\n        <button ion-button item-end icon="cancel" (click)="removeFromBlacklist(user)">{{"LIB.DELETE" | translate}}</button>\n      </ion-item>\n    </ion-list>\n  </shifucard>\n\n  <shifucard title="Following" tuto="PERSO.TUTO_FOLLOWING" *ngIf="users_follow!=null && users_follow.length>0">\n    <ion-list>\n      <ion-item *ngFor="let user of users_follow">\n        <ion-avatar item-start>\n          <shifuimageprofil shifuid="users" [user]="user"></shifuimageprofil>\n        </ion-avatar>\n        {{user.firstname}}&nbsp;\n        <button ion-button item-end icon="cancel" (click)="removeUserFollow(user)">{{"LIB.DELETE" | translate}}</button>\n      </ion-item>\n    </ion-list>\n  </shifucard>\n\n\n  <shifucard [visible]="userData.user!=null && userData.user.connexions!=null && userData.user.connexions.length>30"\n             tuto="PERSO.TUTO_PRIVACY"\n             *ngIf="userData.user.email!=\'\'"\n             title="LIB.PRIVACY"\n             help="privacy"\n             text-center\n             >\n      \x3c!--\n        <shifubutton [small]="true" size="150" *ngIf="userData.user.connexions.length>50"--\x3e\n      \x3c!--(click)="resetSecretCode()"--\x3e\n      \x3c!--label="PROFIL.RESET_SECRETCODE"></shifubutton>\n--\x3e\n      <shifubutton [small]="true"\n                   size="0"\n                   id="cmdRaz"\n                   label="LIB.RAZ"\n                   (click)="razUser()">\n      </shifubutton>\n\n  </shifucard>\n\n\n  <shifucard title="LIB.EXPERT" help="perso_expert" text-center>\n    <shifubutton size="0" [small]="true" label="LIB.USERSETTINGSFILE" (click)="changeUserSettings()" id="cmdChangeUserSettings"></shifubutton>\n    <ion-item no-lines no-margin text-center>\n      {{userData.user?.developerToken}}&nbsp;\n      <shifubutton item-end size="0" [small]="true" label="LIB.CHANGE" (click)="renewDeveloperToken()" id="cmdRenewDeveloperToken"></shifubutton>\n    </ion-item>\n  </shifucard>\n\n\n</ion-content>\n'}),o("design:paramtypes",[r.ModalController,a.NavController,a.ToastController,T.PushNotificationsService,a.NavParams,l.UserData,r.AlertController,a.ViewController,p.TranslateService,r.Events,v.ApiProvider,I.SettingsProvider])],e)}();t.PersoPage=D}},[365]);